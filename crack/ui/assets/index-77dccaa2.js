var zj=Object.defineProperty;var Vj=(e,t,n)=>t in e?zj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var xa=(e,t,n)=>(Vj(e,typeof t!="symbol"?t+"":t,n),n);import{aK as Rh,aL as qs,aM as Rr,aN as HO,aO as ad,aP as Xv,aQ as Jc,aR as fp,aS as NA,aT as ms,aU as Es,ah as ti,aV as Hj,aW as Wl,aX as l1,aY as Xj,aZ as Yv,a_ as gs,a$ as qv,b0 as Yj,b1 as Bh,b2 as Xm,aF as Os,b3 as qj,b4 as dp,b5 as PA,b6 as pp,b7 as ud,z as c1,b8 as qr,b9 as Ym,ba as Kv,bb as Ks,bc as xo,bd as Zc,be as zl,bf as Uh,bg as Zv,bh as Qs,bi as ua,bj as zr,bk as qm,bl as Kj,bm as kA,bn as Qc,bo as RA,bp as jA,bq as T0,br as Li,ai as _s,bs as Zj,bt as Jj,bu as Km,bv as CA,bw as hp,bx as DA,ac as f1,by as Gh,A as Wh,bz as Lv,bA as Jv,af as IA,bB as LA,bC as Qj,bD as jh,bE as eC,bF as FA,bG as $A,bH as tC,bI as BA,bJ as nC,bK as rC,bL as oC,bM as iC,bN as aC,bO as wm,bP as uC,bQ as sC,bR as lC,bS as UA,bT as GA,bU as WA,bV as zA,bW as d1,bX as cC,bY as Qv,bZ as VA,b_ as fC,b$ as HA,c0 as XA,c1 as dC,c2 as pC,c3 as hC,c4 as up,ae as vC,c5 as yC,c6 as mC,aH as gC,c7 as _C,ag as bC,c8 as wC,c9 as EC,ca as OC,cb as xC,ab as SC,aj as AC,cc as TC,aG as MC,cd as NC,ce as PC,cf as kC,cg as RC,ch as jC,ci as CC,aa as DC,cj as IC,ck as LC,ak as FC,cl as $C,p as BC,cm as UC,cn as GC,co as WC,cp as Wn,cq as it,cr as Vr,cs as Bt,ct as Co,cu as ni,cv as pe,cw as Uu,cx as Ch,cy as _t,cz as er,cA as $,cB as G,cC as we,cD as Fi,cE as pu,cF as Mn,cG as an,cH as wh,cI as Yr,cJ as Eh,cK as qe,cL as jt,cM as Ar,cN as pm,cO as Sa,cP as ey,cQ as xs,cR as yt,cS as Fv,cT as zC,cU as rd,cV as VC,cW as YA,cX as za,cY as qA,cZ as tf,T as HC,c_ as KA,c$ as Dh,d0 as XC,d1 as YC,d2 as ZA,d3 as JA,d4 as qC,d5 as KC,d6 as ZC,d7 as JC,d8 as QC,d9 as eD,da as QA,db as p1,dc as tD,dd as M0,de as Ih,df as r0,dg as nD,dh as o0,di as rD,dj as oD,Q as Nv,dk as eT,dl as N0,dm as iD,dn as i0,dp as aD,dq as uD}from"./index-a6cfd98b.js";import{A as Zm,T as tT,_ as sD,a as lD}from"./TTSModeParamSettingDialog-60321dca.js";import{b as nT,c as vp,v as zh,d as cD,e as fD,g as rT,f as XO,a as dD,r as pD,h as hD}from"./reduce-913c490c.js";import{h as vD,i as oT,j as yD,k as mD,l as gD,n as _D,o as bD,p as wD,q as ED,z as OD,f as xD,s as SD,a as AD,m as TD,b as MD,d as ND,e as PD,g as kD,c as RD,r as jD,u as CD}from"./zipObject-8bdc857f.js";import{_ as DD}from"./FieldFormDialog.vue_vue_type_script_setup_true_lang-299656ba.js";var ID=0/0;function YO(e){return typeof e=="number"?e:Rh(e)?ID:+e}function Jm(e,t){return function(n,a){var r;if(n===void 0&&a===void 0)return t;if(n!==void 0&&(r=n),a!==void 0){if(r===void 0)return a;typeof n=="string"||typeof a=="string"?(n=qs(n),a=qs(a)):(n=YO(n),a=YO(a)),r=e(n,a)}return r}}var LD=Jm(function(e,t){return e+t},0);const FD=LD;var $D="Expected a function";function BD(e,t){if(typeof t!="function")throw new TypeError($D);return e=Rr(e),function(){if(--e<1)return t.apply(this,arguments)}}var UD=HO&&new HO;const Em=UD;var GD=Em?function(e,t){return Em.set(e,t),e}:ad;const iT=GD;function $v(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Xv(e.prototype),a=e.apply(n,t);return Jc(a)?a:n}}var WD=1;function zD(e,t,n){var a=t&WD,r=$v(e);function l(){var c=this&&this!==fp&&this instanceof l?r:e;return c.apply(a?n:this,arguments)}return l}var VD=Math.max;function aT(e,t,n,a){for(var r=-1,l=e.length,c=n.length,y=-1,h=t.length,g=VD(l-c,0),b=Array(h+g),E=!a;++y<h;)b[y]=t[y];for(;++r<c;)(E||r<l)&&(b[n[r]]=e[r]);for(;g--;)b[y++]=e[r++];return b}var HD=Math.max;function uT(e,t,n,a){for(var r=-1,l=e.length,c=-1,y=n.length,h=-1,g=t.length,b=HD(l-y,0),E=Array(b+g),x=!a;++r<b;)E[r]=e[r];for(var T=r;++h<g;)E[T+h]=t[h];for(;++c<y;)(x||r<l)&&(E[T+n[c]]=e[r++]);return E}function XD(e,t){for(var n=e.length,a=0;n--;)e[n]===t&&++a;return a}function Qm(){}var YD=4294967295;function Wr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=YD,this.__views__=[]}Wr.prototype=Xv(Qm.prototype);Wr.prototype.constructor=Wr;var qD=Em?function(e){return Em.get(e)}:NA;const h1=qD;var KD={};const Sh=KD;var ZD=Object.prototype,JD=ZD.hasOwnProperty;function hm(e){for(var t=e.name+"",n=Sh[t],a=JD.call(Sh,t)?n.length:0;a--;){var r=n[a],l=r.func;if(l==null||l==e)return r.name}return t}function bs(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}bs.prototype=Xv(Qm.prototype);bs.prototype.constructor=bs;function sT(e){if(e instanceof Wr)return e.clone();var t=new bs(e.__wrapped__,e.__chain__);return t.__actions__=ms(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var QD=Object.prototype,eI=QD.hasOwnProperty;function ie(e){if(Es(e)&&!ti(e)&&!(e instanceof Wr)){if(e instanceof bs)return e;if(eI.call(e,"__wrapped__"))return sT(e)}return new bs(e)}ie.prototype=Qm.prototype;ie.prototype.constructor=ie;function P0(e){var t=hm(e),n=ie[t];if(typeof n!="function"||!(t in Wr.prototype))return!1;if(e===n)return!0;var a=h1(n);return!!a&&e===a[0]}var tI=Hj(iT);const lT=tI;var nI=/\{\n\/\* \[wrapped with (.+)\] \*/,rI=/,? & /;function oI(e){var t=e.match(nI);return t?t[1].split(rI):[]}var iI=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function aI(e,t){var n=t.length;if(!n)return e;var a=n-1;return t[a]=(n>1?"& ":"")+t[a],t=t.join(n>2?", ":" "),e.replace(iI,`{
/* [wrapped with `+t+`] */
`)}var uI=1,sI=2,lI=8,cI=16,fI=32,dI=64,pI=128,hI=256,vI=512,yI=[["ary",pI],["bind",uI],["bindKey",sI],["curry",lI],["curryRight",cI],["flip",vI],["partial",fI],["partialRight",dI],["rearg",hI]];function mI(e,t){return Wl(yI,function(n){var a="_."+n[0];t&n[1]&&!l1(e,a)&&e.push(a)}),e.sort()}function cT(e,t,n){var a=t+"";return Xj(e,aI(a,mI(oI(a),n)))}var gI=1,_I=2,bI=4,wI=8,qO=32,KO=64;function fT(e,t,n,a,r,l,c,y,h,g){var b=t&wI,E=b?c:void 0,x=b?void 0:c,T=b?l:void 0,j=b?void 0:l;t|=b?qO:KO,t&=~(b?KO:qO),t&bI||(t&=~(gI|_I));var N=[e,t,r,T,E,j,x,y,h,g],M=n.apply(void 0,N);return P0(e)&&lT(M,N),M.placeholder=a,cT(M,e,t)}function Vh(e){var t=e;return t.placeholder}var EI=Math.min;function OI(e,t){for(var n=e.length,a=EI(t.length,n),r=ms(e);a--;){var l=t[a];e[a]=Yv(l,n)?r[l]:void 0}return e}var ZO="__lodash_placeholder__";function od(e,t){for(var n=-1,a=e.length,r=0,l=[];++n<a;){var c=e[n];(c===t||c===ZO)&&(e[n]=ZO,l[r++]=n)}return l}var xI=1,SI=2,AI=8,TI=16,MI=128,NI=512;function eg(e,t,n,a,r,l,c,y,h,g){var b=t&MI,E=t&xI,x=t&SI,T=t&(AI|TI),j=t&NI,N=x?void 0:$v(e);function M(){for(var D=arguments.length,k=Array(D),F=D;F--;)k[F]=arguments[F];if(T)var te=Vh(M),V=XD(k,te);if(a&&(k=aT(k,a,r,T)),l&&(k=uT(k,l,c,T)),D-=V,T&&D<g){var z=od(k,te);return fT(e,t,eg,M.placeholder,n,k,z,y,h,g-D)}var J=E?n:this,K=x?J[e]:e;return D=k.length,y?k=OI(k,y):j&&D>1&&k.reverse(),b&&h<D&&(k.length=h),this&&this!==fp&&this instanceof M&&(K=N||$v(K)),K.apply(J,k)}return M}function PI(e,t,n){var a=$v(e);function r(){for(var l=arguments.length,c=Array(l),y=l,h=Vh(r);y--;)c[y]=arguments[y];var g=l<3&&c[0]!==h&&c[l-1]!==h?[]:od(c,h);if(l-=g.length,l<n)return fT(e,t,eg,r.placeholder,void 0,c,g,void 0,void 0,n-l);var b=this&&this!==fp&&this instanceof r?a:e;return gs(b,this,c)}return r}var kI=1;function RI(e,t,n,a){var r=t&kI,l=$v(e);function c(){for(var y=-1,h=arguments.length,g=-1,b=a.length,E=Array(b+h),x=this&&this!==fp&&this instanceof c?l:e;++g<b;)E[g]=a[g];for(;h--;)E[g++]=arguments[++y];return gs(x,r?n:this,E)}return c}var JO="__lodash_placeholder__",a0=1,jI=2,CI=4,QO=8,xv=128,ex=256,DI=Math.min;function II(e,t){var n=e[1],a=t[1],r=n|a,l=r<(a0|jI|xv),c=a==xv&&n==QO||a==xv&&n==ex&&e[7].length<=t[8]||a==(xv|ex)&&t[7].length<=t[8]&&n==QO;if(!(l||c))return e;a&a0&&(e[2]=t[2],r|=n&a0?0:CI);var y=t[3];if(y){var h=e[3];e[3]=h?aT(h,y,t[4]):y,e[4]=h?od(e[3],JO):t[4]}return y=t[5],y&&(h=e[5],e[5]=h?uT(h,y,t[6]):y,e[6]=h?od(e[5],JO):t[6]),y=t[7],y&&(e[7]=y),a&xv&&(e[8]=e[8]==null?t[8]:DI(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}var LI="Expected a function",tx=1,FI=2,u0=8,s0=16,l0=32,nx=64,rx=Math.max;function nf(e,t,n,a,r,l,c,y){var h=t&FI;if(!h&&typeof e!="function")throw new TypeError(LI);var g=a?a.length:0;if(g||(t&=~(l0|nx),a=r=void 0),c=c===void 0?c:rx(Rr(c),0),y=y===void 0?y:Rr(y),g-=r?r.length:0,t&nx){var b=a,E=r;a=r=void 0}var x=h?void 0:h1(e),T=[e,t,n,a,r,b,E,l,c,y];if(x&&II(T,x),e=T[0],t=T[1],n=T[2],a=T[3],r=T[4],y=T[9]=T[9]===void 0?h?0:e.length:rx(T[9]-g,0),!y&&t&(u0|s0)&&(t&=~(u0|s0)),!t||t==tx)var j=zD(e,t,n);else t==u0||t==s0?j=PI(e,t,y):(t==l0||t==(tx|l0))&&!r.length?j=RI(e,t,n,a):j=eg.apply(void 0,T);var N=x?iT:lT;return cT(N(j,T),e,t)}var $I=128;function dT(e,t,n){return t=n?void 0:t,t=e&&t==null?e.length:t,nf(e,$I,void 0,void 0,void 0,void 0,t)}var BI=Object.prototype,UI=BI.hasOwnProperty,GI=qv(function(e,t){if(Yj(t)||Bh(t)){Xm(t,Os(t),e);return}for(var n in t)UI.call(t,n)&&qj(e,n,t[n])});const WI=GI;var zI=qv(function(e,t){Xm(t,dp(t),e)});const ox=zI;var VI=qv(function(e,t,n,a){Xm(t,dp(t),e,a)});const Om=VI;var HI=qv(function(e,t,n,a){Xm(t,Os(t),e,a)});const XI=HI;function v1(e,t){for(var n=-1,a=t.length,r=Array(a),l=e==null;++n<a;)r[n]=l?void 0:PA(e,t[n]);return r}var YI=pp(v1);const qI=YI;var KI="[object DOMException]",ZI="[object Error]";function y1(e){if(!Es(e))return!1;var t=ud(e);return t==ZI||t==KI||typeof e.message=="string"&&typeof e.name=="string"&&!c1(e)}var JI=qr(function(e,t){try{return gs(e,void 0,t)}catch(n){return y1(n)?n:new Error(n)}});const pT=JI;var QI="Expected a function";function hT(e,t){var n;if(typeof t!="function")throw new TypeError(QI);return e=Rr(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var eL=1,tL=32,m1=qr(function(e,t,n){var a=eL;if(n.length){var r=od(n,Vh(m1));a|=tL}return nf(e,a,t,n,r)});m1.placeholder={};const vT=m1;var nL=pp(function(e,t){return Wl(t,function(n){n=Ym(n),Kv(e,n,vT(e[n],e))}),e});const rL=nL;var oL=1,iL=2,aL=32,g1=qr(function(e,t,n){var a=oL|iL;if(n.length){var r=od(n,Vh(g1));a|=aL}return nf(t,a,e,n,r)});g1.placeholder={};const uL=g1;function sd(e,t,n){var a=e.length;return n=n===void 0?a:n,!t&&n>=a?e:Ks(e,t,n)}var sL="\\ud800-\\udfff",lL="\\u0300-\\u036f",cL="\\ufe20-\\ufe2f",fL="\\u20d0-\\u20ff",dL=lL+cL+fL,pL="\\ufe0e\\ufe0f",hL="\\u200d",vL=RegExp("["+hL+sL+dL+pL+"]");function Hh(e){return vL.test(e)}function yL(e){return e.split("")}var yT="\\ud800-\\udfff",mL="\\u0300-\\u036f",gL="\\ufe20-\\ufe2f",_L="\\u20d0-\\u20ff",bL=mL+gL+_L,wL="\\ufe0e\\ufe0f",EL="["+yT+"]",k0="["+bL+"]",R0="\\ud83c[\\udffb-\\udfff]",OL="(?:"+k0+"|"+R0+")",mT="[^"+yT+"]",gT="(?:\\ud83c[\\udde6-\\uddff]){2}",_T="[\\ud800-\\udbff][\\udc00-\\udfff]",xL="\\u200d",bT=OL+"?",wT="["+wL+"]?",SL="(?:"+xL+"(?:"+[mT,gT,_T].join("|")+")"+wT+bT+")*",AL=wT+bT+SL,TL="(?:"+[mT+k0+"?",k0,gT,_T,EL].join("|")+")",ML=RegExp(R0+"(?="+R0+")|"+TL+AL,"g");function NL(e){return e.match(ML)||[]}function Zs(e){return Hh(e)?NL(e):yL(e)}function ET(e){return function(t){t=xo(t);var n=Hh(t)?Zs(t):void 0,a=n?n[0]:t.charAt(0),r=n?sd(n,1).join(""):t.slice(1);return a[e]()+r}}var PL=ET("toUpperCase");const _1=PL;function OT(e){return _1(xo(e).toLowerCase())}function b1(e){return function(t){return e==null?void 0:e[t]}}var kL={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},RL=b1(kL);const jL=RL;var CL=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,DL="\\u0300-\\u036f",IL="\\ufe20-\\ufe2f",LL="\\u20d0-\\u20ff",FL=DL+IL+LL,$L="["+FL+"]",BL=RegExp($L,"g");function xT(e){return e=xo(e),e&&e.replace(CL,jL).replace(BL,"")}var UL=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function GL(e){return e.match(UL)||[]}var WL=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function zL(e){return WL.test(e)}var ST="\\ud800-\\udfff",VL="\\u0300-\\u036f",HL="\\ufe20-\\ufe2f",XL="\\u20d0-\\u20ff",YL=VL+HL+XL,AT="\\u2700-\\u27bf",TT="a-z\\xdf-\\xf6\\xf8-\\xff",qL="\\xac\\xb1\\xd7\\xf7",KL="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ZL="\\u2000-\\u206f",JL=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",MT="A-Z\\xc0-\\xd6\\xd8-\\xde",QL="\\ufe0e\\ufe0f",NT=qL+KL+ZL+JL,PT="['’]",ix="["+NT+"]",e3="["+YL+"]",kT="\\d+",t3="["+AT+"]",RT="["+TT+"]",jT="[^"+ST+NT+kT+AT+TT+MT+"]",n3="\\ud83c[\\udffb-\\udfff]",r3="(?:"+e3+"|"+n3+")",o3="[^"+ST+"]",CT="(?:\\ud83c[\\udde6-\\uddff]){2}",DT="[\\ud800-\\udbff][\\udc00-\\udfff]",yh="["+MT+"]",i3="\\u200d",ax="(?:"+RT+"|"+jT+")",a3="(?:"+yh+"|"+jT+")",ux="(?:"+PT+"(?:d|ll|m|re|s|t|ve))?",sx="(?:"+PT+"(?:D|LL|M|RE|S|T|VE))?",IT=r3+"?",LT="["+QL+"]?",u3="(?:"+i3+"(?:"+[o3,CT,DT].join("|")+")"+LT+IT+")*",s3="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",l3="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",c3=LT+IT+u3,f3="(?:"+[t3,CT,DT].join("|")+")"+c3,d3=RegExp([yh+"?"+RT+"+"+ux+"(?="+[ix,yh,"$"].join("|")+")",a3+"+"+sx+"(?="+[ix,yh+ax,"$"].join("|")+")",yh+"?"+ax+"+"+ux,yh+"+"+sx,l3,s3,kT,f3].join("|"),"g");function p3(e){return e.match(d3)||[]}function FT(e,t,n){return e=xo(e),t=n?void 0:t,t===void 0?zL(e)?p3(e):GL(e):e.match(t)||[]}var h3="['’]",v3=RegExp(h3,"g");function Xh(e){return function(t){return nT(FT(xT(t).replace(v3,"")),e,"")}}var y3=Xh(function(e,t,n){return t=t.toLowerCase(),e+(n?OT(t):t)});const m3=y3;var g3=fp.isFinite,_3=Math.min;function w1(e){var t=Math[e];return function(n,a){if(n=Zc(n),a=a==null?0:_3(Rr(a),292),a&&g3(n)){var r=(xo(n)+"e").split("e"),l=t(r[0]+"e"+(+r[1]+a));return r=(xo(l)+"e").split("e"),+(r[0]+"e"+(+r[1]-a))}return t(n)}}var b3=w1("ceil");const w3=b3;function $T(e){var t=ie(e);return t.__chain__=!0,t}var E3=Math.ceil,O3=Math.max;function x3(e,t,n){(n?zl(e,t,n):t===void 0)?t=1:t=O3(Rr(t),0);var a=e==null?0:e.length;if(!a||t<1)return[];for(var r=0,l=0,c=Array(E3(a/t));r<a;)c[l++]=Ks(e,r,r+=t);return c}function yp(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}function S3(e,t,n){return n===void 0&&(n=t,t=void 0),n!==void 0&&(n=Zc(n),n=n===n?n:0),t!==void 0&&(t=Zc(t),t=t===t?t:0),yp(Zc(e),t,n)}var A3=1,T3=4;function M3(e,t){return t=typeof t=="function"?t:void 0,Uh(e,A3|T3,t)}var N3=4;function P3(e,t){return t=typeof t=="function"?t:void 0,Uh(e,N3,t)}function k3(){return new bs(this.value(),this.__chain__)}function R3(e){for(var t=-1,n=e==null?0:e.length,a=0,r=[];++t<n;){var l=e[t];l&&(r[a++]=l)}return r}function j3(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Zv(ti(n)?ms(n):[n],Qs(t,1))}var C3="Expected a function";function D3(e){var t=e==null?0:e.length,n=zr;return e=t?ua(e,function(a){if(typeof a[1]!="function")throw new TypeError(C3);return[n(a[0]),a[1]]}):[],qr(function(a){for(var r=-1;++r<t;){var l=e[r];if(gs(l[0],this,a))return gs(l[1],this,a)}})}function BT(e,t,n){var a=n.length;if(e==null)return!a;for(e=Object(e);a--;){var r=n[a],l=t[r],c=e[r];if(c===void 0&&!(r in e)||!l(c))return!1}return!0}function I3(e){var t=Os(e);return function(n){return BT(n,e,t)}}var L3=1;function F3(e){return I3(Uh(e,L3))}function $3(e,t){return t==null||BT(e,t,Os(t))}function B3(e,t,n,a){for(var r=-1,l=e==null?0:e.length;++r<l;){var c=e[r];t(a,c,n(c),e)}return a}function U3(e,t,n,a){return qm(e,function(r,l,c){t(a,r,n(r),c)}),a}function tg(e,t){return function(n,a){var r=ti(n)?B3:U3,l=t?t():{};return r(n,e,zr(a),l)}}var G3=Object.prototype,W3=G3.hasOwnProperty,z3=tg(function(e,t,n){W3.call(e,n)?++e[n]:Kv(e,n,1)});const V3=z3;function H3(e,t){var n=Xv(e);return t==null?n:Kj(n,t)}var X3=8;function E1(e,t,n){t=n?void 0:t;var a=nf(e,X3,void 0,void 0,void 0,void 0,void 0,t);return a.placeholder=E1.placeholder,a}E1.placeholder={};var Y3=16;function O1(e,t,n){t=n?void 0:t;var a=nf(e,Y3,void 0,void 0,void 0,void 0,void 0,t);return a.placeholder=O1.placeholder,a}O1.placeholder={};function q3(e,t){return e==null||e!==e?t:e}function UT(e,t,n,a,r,l){return Jc(e)&&Jc(t)&&(l.set(t,e),kA(e,t,void 0,UT,l),l.delete(t)),e}var K3=qv(function(e,t,n,a){kA(e,t,n,a)});const GT=K3;var Z3=qr(function(e){return e.push(void 0,UT),gs(GT,void 0,e)});const J3=Z3;var Q3="Expected a function";function WT(e,t,n){if(typeof e!="function")throw new TypeError(Q3);return setTimeout(function(){e.apply(void 0,n)},t)}var e8=qr(function(e,t){return WT(e,1,t)});const t8=e8;var n8=qr(function(e,t,n){return WT(e,Zc(t)||0,n)});const r8=n8;var o8=200;function ty(e,t,n,a){var r=-1,l=l1,c=!0,y=e.length,h=[],g=t.length;if(!y)return h;n&&(t=ua(t,Qc(n))),a?(l=jA,c=!1):t.length>=o8&&(l=T0,c=!1,t=new RA(t));e:for(;++r<y;){var b=e[r],E=n==null?b:n(b);if(b=a||b!==0?b:0,c&&E===E){for(var x=g;x--;)if(t[x]===E)continue e;h.push(b)}else l(t,E,a)||h.push(b)}return h}var i8=qr(function(e,t){return Li(e)?ty(e,Qs(t,1,Li,!0)):[]});const a8=i8;var u8=qr(function(e,t){var n=_s(t);return Li(n)&&(n=void 0),Li(e)?ty(e,Qs(t,1,Li,!0),zr(n)):[]});const s8=u8;var l8=qr(function(e,t){var n=_s(t);return Li(n)&&(n=void 0),Li(e)?ty(e,Qs(t,1,Li,!0),void 0,n):[]});const c8=l8;var f8=Jm(function(e,t){return e/t},1);const d8=f8;function p8(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===void 0?1:Rr(t),Ks(e,t<0?0:t,a)):[]}function h8(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===void 0?1:Rr(t),t=a-t,Ks(e,0,t<0?0:t)):[]}function ng(e,t,n,a){for(var r=e.length,l=a?r:-1;(a?l--:++l<r)&&t(e[l],l,e););return n?Ks(e,a?0:l,a?l+1:r):Ks(e,a?l+1:0,a?r:l)}function v8(e,t){return e&&e.length?ng(e,zr(t),!0,!0):[]}function y8(e,t){return e&&e.length?ng(e,zr(t),!0):[]}function m8(e,t){for(var n=e==null?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}var g8=Zj(!0);const zT=g8;function x1(e,t){return e&&zT(e,t,Os)}var _8=Jj(x1,!0);const VT=_8;function lx(e,t){var n=ti(e)?m8:VT;return n(e,vp(t))}function b8(e,t,n){e=xo(e),t=qs(t);var a=e.length;n=n===void 0?a:yp(Rr(n),0,a);var r=n;return n-=t.length,n>=0&&e.slice(n,r)==t}function w8(e,t){return ua(t,function(n){return[n,e[n]]})}function E8(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=[a,a]}),n}var O8="[object Map]",x8="[object Set]";function HT(e){return function(t){var n=Km(t);return n==O8?CA(t):n==x8?E8(t):w8(t,e(t))}}var S8=HT(Os);const cx=S8;var A8=HT(dp);const fx=A8;var T8={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},M8=b1(T8);const N8=M8;var XT=/[&<>"']/g,P8=RegExp(XT.source);function YT(e){return e=xo(e),e&&P8.test(e)?e.replace(XT,N8):e}var qT=/[\\^$.*+?()[\]{}|]/g,k8=RegExp(qT.source);function R8(e){return e=xo(e),e&&k8.test(e)?e.replace(qT,"\\$&"):e}function KT(e,t){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!t(e[n],n,e))return!1;return!0}function j8(e,t){var n=!0;return qm(e,function(a,r,l){return n=!!t(a,r,l),n}),n}function C8(e,t,n){var a=ti(e)?KT:j8;return n&&zl(e,t,n)&&(t=void 0),a(e,zr(t))}var D8=4294967295;function ZT(e){return e?yp(Rr(e),0,D8):0}function I8(e,t,n,a){var r=e.length;for(n=Rr(n),n<0&&(n=-n>r?0:r+n),a=a===void 0||a>r?r:Rr(a),a<0&&(a+=r),a=n>a?0:ZT(a);n<a;)e[n++]=t;return e}function L8(e,t,n,a){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&zl(e,t,n)&&(n=0,a=r),I8(e,t,n,a)):[]}function JT(e,t,n){var a;return n(e,function(r,l,c){if(t(r,l,c))return a=l,!1}),a}function F8(e,t){return JT(e,zr(t),hp)}var $8=vD(DA);const B8=$8;function U8(e,t){return JT(e,zr(t),x1)}function dx(e){return e&&e.length?e[0]:void 0}var G8=1/0;function W8(e,t){return Qs(f1(e,t),G8)}function z8(e,t,n){return n=n===void 0?1:Rr(n),Qs(f1(e,t),n)}function V8(e,t){var n=e==null?0:e.length;return n?(t=t===void 0?1:Rr(t),Qs(e,t)):[]}var H8=512;function X8(e){return nf(e,H8)}var Y8=w1("floor");const q8=Y8;var K8="Expected a function",Z8=8,J8=32,Q8=128,eF=256;function QT(e){return pp(function(t){var n=t.length,a=n,r=bs.prototype.thru;for(e&&t.reverse();a--;){var l=t[a];if(typeof l!="function")throw new TypeError(K8);if(r&&!c&&hm(l)=="wrapper")var c=new bs([],!0)}for(a=c?a:n;++a<n;){l=t[a];var y=hm(l),h=y=="wrapper"?h1(l):void 0;h&&P0(h[0])&&h[1]==(Q8|Z8|J8|eF)&&!h[4].length&&h[9]==1?c=c[hm(h[0])].apply(c,h[3]):c=l.length==1&&P0(l)?c[y]():c.thru(l)}return function(){var g=arguments,b=g[0];if(c&&g.length==1&&ti(b))return c.plant(b).value();for(var E=0,x=n?t[E].apply(this,g):b;++E<n;)x=t[E].call(this,x);return x}})}var tF=QT();const nF=tF;var rF=QT(!0);const oF=rF;function iF(e,t){return e==null?e:zT(e,vp(t),dp)}function aF(e,t){return e&&x1(e,vp(t))}function rg(e,t){return Gh(t,function(n){return Wh(e[n])})}function uF(e){return e==null?[]:rg(e,Os(e))}function sF(e){return e==null?[]:rg(e,dp(e))}var lF=Object.prototype,cF=lF.hasOwnProperty,fF=tg(function(e,t,n){cF.call(e,n)?e[n].push(t):Kv(e,n,[t])});const dF=fF;function og(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Zc(t),n=Zc(n)),e(t,n)}}var pF=og(oT);const hF=pF;var vF=og(function(e,t){return e>=t});const yF=vF;var mF=Math.max,gF=Math.min;function _F(e,t,n){return e>=gF(t,n)&&e<mF(t,n)}function bF(e,t,n){return t=Lv(t),n===void 0?(n=t,t=0):n=Lv(n),e=Zc(e),_F(e,t,n)}var wF="[object String]";function ig(e){return typeof e=="string"||!ti(e)&&Es(e)&&ud(e)==wF}var EF=Math.max;function OF(e,t,n,a){e=Bh(e)?e:zh(e),n=n&&!a?Rr(n):0;var r=e.length;return n<0&&(n=EF(r+n,0)),ig(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&Jv(e,t,n)>-1}var xF=Math.max;function SF(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=n==null?0:Rr(n);return r<0&&(r=xF(a+r,0)),Jv(e,t,r)}function AF(e){var t=e==null?0:e.length;return t?Ks(e,0,-1):[]}var TF=Math.min;function S1(e,t,n){for(var a=n?jA:l1,r=e[0].length,l=e.length,c=l,y=Array(l),h=1/0,g=[];c--;){var b=e[c];c&&t&&(b=ua(b,Qc(t))),h=TF(b.length,h),y[c]=!n&&(t||r>=120&&b.length>=120)?new RA(c&&b):void 0}b=e[0];var E=-1,x=y[0];e:for(;++E<r&&g.length<h;){var T=b[E],j=t?t(T):T;if(T=n||T!==0?T:0,!(x?T0(x,j):a(g,j,n))){for(c=l;--c;){var N=y[c];if(!(N?T0(N,j):a(e[c],j,n)))continue e}x&&x.push(j),g.push(T)}}return g}function A1(e){return Li(e)?e:[]}var MF=qr(function(e){var t=ua(e,A1);return t.length&&t[0]===e[0]?S1(t):[]});const NF=MF;var PF=qr(function(e){var t=_s(e),n=ua(e,A1);return t===_s(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?S1(n,zr(t)):[]});const kF=PF;var RF=qr(function(e){var t=_s(e),n=ua(e,A1);return t=typeof t=="function"?t:void 0,t&&n.pop(),n.length&&n[0]===e[0]?S1(n,void 0,t):[]});const jF=RF;function CF(e,t,n,a){return hp(e,function(r,l,c){t(a,n(r),l,c)}),a}function eM(e,t){return function(n,a){return CF(n,e,t(a),{})}}var DF=Object.prototype,IF=DF.toString,LF=eM(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=IF.call(t)),e[t]=n},IA(ad));const FF=LF;var tM=Object.prototype,$F=tM.hasOwnProperty,BF=tM.toString,UF=eM(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=BF.call(t)),$F.call(e,t)?e[t].push(n):e[t]=[n]},zr);const GF=UF;function ny(e,t,n){t=LA(t,e),e=Qj(e,t);var a=e==null?e:e[Ym(_s(t))];return a==null?void 0:gs(a,e,n)}var WF=qr(ny);const zF=WF;var VF=qr(function(e,t,n){var a=-1,r=typeof t=="function",l=Bh(e)?Array(e.length):[];return qm(e,function(c){l[++a]=r?gs(t,c,n):ny(c,t,n)}),l});const HF=VF;var XF="[object ArrayBuffer]";function YF(e){return Es(e)&&ud(e)==XF}var px=jh&&jh.isArrayBuffer,qF=px?Qc(px):YF;const KF=qF;var ZF="[object Boolean]";function JF(e){return e===!0||e===!1||Es(e)&&ud(e)==ZF}var QF="[object Date]";function e4(e){return Es(e)&&ud(e)==QF}var hx=jh&&jh.isDate,t4=hx?Qc(hx):e4;const n4=t4;function r4(e){return Es(e)&&e.nodeType===1&&!c1(e)}function o4(e,t,n){n=typeof n=="function"?n:void 0;var a=n?n(e,t):void 0;return a===void 0?eC(e,t,void 0,n):!!a}var i4=fp.isFinite;function a4(e){return typeof e=="number"&&i4(e)}function nM(e){return typeof e=="number"&&e==Rr(e)}function u4(e,t){return e===t||FA(e,t,$A(t))}function s4(e,t,n){return n=typeof n=="function"?n:void 0,FA(e,t,$A(t),n)}var l4="[object Number]";function rM(e){return typeof e=="number"||Es(e)&&ud(e)==l4}function c4(e){return rM(e)&&e!=+e}var f4=tC?Wh:BA;const d4=f4;var p4="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function h4(e){if(d4(e))throw new Error(p4);return nC(e)}var v4="[object RegExp]";function y4(e){return Es(e)&&ud(e)==v4}var vx=jh&&jh.isRegExp,m4=vx?Qc(vx):y4;const T1=m4;var yx=9007199254740991;function g4(e){return nM(e)&&e>=-yx&&e<=yx}var _4="[object WeakMap]";function b4(e){return Es(e)&&Km(e)==_4}var w4="[object WeakSet]";function E4(e){return Es(e)&&ud(e)==w4}var O4=1;function x4(e){return zr(typeof e=="function"?e:Uh(e,O4))}var S4=Array.prototype,A4=S4.join;function T4(e,t){return e==null?"":A4.call(e,t)}var M4=Xh(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});const N4=M4;var P4=tg(function(e,t,n){Kv(e,n,t)});const k4=P4;function R4(e,t,n){for(var a=n+1;a--;)if(e[a]===t)return a;return a}var j4=Math.max,C4=Math.min;function D4(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=a;return n!==void 0&&(r=Rr(n),r=r<0?j4(a+r,0):C4(r,a-1)),t===t?R4(e,t,r):rC(e,oC,r,!0)}var I4=Xh(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()});const L4=I4;var F4=ET("toLowerCase");const $4=F4;var B4=og(yD);const U4=B4;var G4=og(function(e,t){return e<=t});const W4=G4;function z4(e,t){var n={};return t=zr(t),hp(e,function(a,r,l){Kv(n,t(a,r,l),a)}),n}var V4=1;function H4(e){return iC(Uh(e,V4))}var X4=1;function Y4(e,t){return aC(e,Uh(t,X4))}function q4(e,t){return e&&e.length?mD(e,zr(t),oT):void 0}function M1(e,t){for(var n,a=-1,r=e.length;++a<r;){var l=t(e[a]);l!==void 0&&(n=n===void 0?l:n+l)}return n}var K4=0/0;function oM(e,t){var n=e==null?0:e.length;return n?M1(e,t)/n:K4}function Z4(e){return oM(e,ad)}function J4(e,t){return oM(e,zr(t))}var Q4=qr(function(e,t){return function(n){return ny(n,e,t)}});const e5=Q4;var t5=qr(function(e,t){return function(n){return ny(e,n,t)}});const n5=t5;function iM(e,t,n){var a=Os(t),r=rg(t,a),l=!(Jc(n)&&"chain"in n)||!!n.chain,c=Wh(e);return Wl(r,function(y){var h=t[y];e[y]=h,c&&(e.prototype[y]=function(){var g=this.__chain__;if(l||g){var b=e(this.__wrapped__),E=b.__actions__=ms(this.__actions__);return E.push({func:h,args:arguments,thisArg:e}),b.__chain__=g,b}return h.apply(e,Zv([this.value()],arguments))})}),e}var r5=Jm(function(e,t){return e*t},1);const o5=r5;var i5="Expected a function";function ry(e){if(typeof e!="function")throw new TypeError(i5);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function a5(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}var u5="[object Map]",s5="[object Set]",c0=wm?wm.iterator:void 0;function aM(e){if(!e)return[];if(Bh(e))return ig(e)?Zs(e):ms(e);if(c0&&e[c0])return a5(e[c0]());var t=Km(e),n=t==u5?CA:t==s5?uC:zh;return n(e)}function l5(){this.__values__===void 0&&(this.__values__=aM(this.value()));var e=this.__index__>=this.__values__.length,t=e?void 0:this.__values__[this.__index__++];return{done:e,value:t}}function uM(e,t){var n=e.length;if(n)return t+=t<0?n:0,Yv(t,n)?e[t]:void 0}function c5(e,t){return e&&e.length?uM(e,Rr(t)):void 0}function f5(e){return e=Rr(e),qr(function(t){return uM(t,e)})}function sM(e,t){if(e==null)return{};var n=ua(sC(e),function(a){return[a]});return t=zr(t),lC(e,n,function(a,r){return t(a,r[0])})}function d5(e,t){return sM(e,ry(zr(t)))}function p5(e){return hT(2,e)}function h5(e,t,n,a){return e==null?[]:(ti(t)||(t=t==null?[]:[t]),n=a?void 0:n,ti(n)||(n=n==null?[]:[n]),gD(e,t,n))}function N1(e){return pp(function(t){return t=ua(t,Qc(zr)),qr(function(n){var a=this;return e(t,function(r){return gs(r,a,n)})})})}var v5=N1(ua);const y5=v5;var m5=qr;const g5=m5;var _5=Math.min,b5=g5(function(e,t){t=t.length==1&&ti(t[0])?ua(t[0],Qc(zr)):ua(Qs(t,1),Qc(zr));var n=t.length;return qr(function(a){for(var r=-1,l=_5(a.length,n);++r<l;)a[r]=t[r].call(this,a[r]);return gs(e,this,a)})});const w5=b5;var E5=N1(KT);const O5=E5;var x5=N1(UA);const S5=x5;var A5=9007199254740991,T5=Math.floor;function j0(e,t){var n="";if(!e||t<1||t>A5)return n;do t%2&&(n+=e),t=T5(t/2),t&&(e+=e);while(t);return n}var M5=GA("length");const N5=M5;var lM="\\ud800-\\udfff",P5="\\u0300-\\u036f",k5="\\ufe20-\\ufe2f",R5="\\u20d0-\\u20ff",j5=P5+k5+R5,C5="\\ufe0e\\ufe0f",D5="["+lM+"]",C0="["+j5+"]",D0="\\ud83c[\\udffb-\\udfff]",I5="(?:"+C0+"|"+D0+")",cM="[^"+lM+"]",fM="(?:\\ud83c[\\udde6-\\uddff]){2}",dM="[\\ud800-\\udbff][\\udc00-\\udfff]",L5="\\u200d",pM=I5+"?",hM="["+C5+"]?",F5="(?:"+L5+"(?:"+[cM,fM,dM].join("|")+")"+hM+pM+")*",$5=hM+pM+F5,B5="(?:"+[cM+C0+"?",C0,fM,dM,D5].join("|")+")",mx=RegExp(D0+"(?="+D0+")|"+B5+$5,"g");function U5(e){for(var t=mx.lastIndex=0;mx.test(e);)++t;return t}function Yh(e){return Hh(e)?U5(e):N5(e)}var G5=Math.ceil;function xm(e,t){t=t===void 0?" ":qs(t);var n=t.length;if(n<2)return n?j0(t,e):t;var a=j0(t,G5(e/Yh(t)));return Hh(t)?sd(Zs(a),0,e).join(""):a.slice(0,e)}var W5=Math.ceil,z5=Math.floor;function V5(e,t,n){e=xo(e),t=Rr(t);var a=t?Yh(e):0;if(!t||a>=t)return e;var r=(t-a)/2;return xm(z5(r),n)+e+xm(W5(r),n)}function H5(e,t,n){e=xo(e),t=Rr(t);var a=t?Yh(e):0;return t&&a<t?e+xm(t-a,n):e}function X5(e,t,n){e=xo(e),t=Rr(t);var a=t?Yh(e):0;return t&&a<t?xm(t-a,n)+e:e}var Y5=/^\s+/,q5=fp.parseInt;function K5(e,t,n){return n||t==null?t=0:t&&(t=+t),q5(xo(e).replace(Y5,""),t||0)}var Z5=32,P1=qr(function(e,t){var n=od(t,Vh(P1));return nf(e,Z5,void 0,t,n)});P1.placeholder={};const vM=P1;var J5=64,k1=qr(function(e,t){var n=od(t,Vh(k1));return nf(e,J5,void 0,t,n)});k1.placeholder={};const Q5=k1;var e$=tg(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});const t$=e$;function n$(e){for(var t,n=this;n instanceof Qm;){var a=sT(n);a.__index__=0,a.__values__=void 0,t?r.__wrapped__=a:t=a;var r=a;n=n.__wrapped__}return r.__wrapped__=e,t}function r$(e){return function(t){return e==null?void 0:WA(e,t)}}function o$(e,t,n,a){for(var r=n-1,l=e.length;++r<l;)if(a(e[r],t))return r;return-1}var i$=Array.prototype,gx=i$.splice;function R1(e,t,n,a){var r=a?o$:Jv,l=-1,c=t.length,y=e;for(e===t&&(t=ms(t)),n&&(y=ua(e,Qc(n)));++l<c;)for(var h=0,g=t[l],b=n?n(g):g;(h=r(y,b,h,a))>-1;)y!==e&&gx.call(y,h,1),gx.call(e,h,1);return e}function yM(e,t){return e&&e.length&&t&&t.length?R1(e,t):e}var a$=qr(yM);const u$=a$;function s$(e,t,n){return e&&e.length&&t&&t.length?R1(e,t,zr(n)):e}function l$(e,t,n){return e&&e.length&&t&&t.length?R1(e,t,void 0,n):e}var c$=Array.prototype,f$=c$.splice;function mM(e,t){for(var n=e?t.length:0,a=n-1;n--;){var r=t[n];if(n==a||r!==l){var l=r;Yv(r)?f$.call(e,r,1):zA(e,r)}}return e}var d$=pp(function(e,t){var n=e==null?0:e.length,a=v1(e,t);return mM(e,ua(t,function(r){return Yv(r,n)?+r:r}).sort(_D)),a});const p$=d$;var h$=Math.floor,v$=Math.random;function j1(e,t){return e+h$(v$()*(t-e+1))}var y$=parseFloat,m$=Math.min,g$=Math.random;function _$(e,t,n){if(n&&typeof n!="boolean"&&zl(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=Lv(e),t===void 0?(t=e,e=0):t=Lv(t)),e>t){var a=e;e=t,t=a}if(n||e%1||t%1){var r=g$();return m$(e+r*(t-e+y$("1e-"+((r+"").length-1))),t)}return j1(e,t)}var b$=bD(!0);const w$=b$;var E$=256,O$=pp(function(e,t){return nf(e,E$,void 0,void 0,void 0,t)});const x$=O$;function S$(e,t,n,a){var r=e==null?0:e.length;for(a&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function A$(e,t,n){var a=ti(e)?S$:cD,r=arguments.length<3;return a(e,zr(t),n,r,VT)}function T$(e,t){var n=ti(e)?Gh:fD;return n(e,ry(zr(t)))}function M$(e,t){var n=[];if(!(e&&e.length))return n;var a=-1,r=[],l=e.length;for(t=zr(t);++a<l;){var c=e[a];t(c,a,e)&&(n.push(c),r.push(a))}return mM(e,r),n}function N$(e,t,n){return(n?zl(e,t,n):t===void 0)?t=1:t=Rr(t),j0(xo(e),t)}function P$(){var e=arguments,t=xo(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var k$="Expected a function";function R$(e,t){if(typeof e!="function")throw new TypeError(k$);return t=t===void 0?t:Rr(t),qr(e,t)}function j$(e,t,n){t=LA(t,e);var a=-1,r=t.length;for(r||(r=1,e=void 0);++a<r;){var l=e==null?void 0:e[Ym(t[a])];l===void 0&&(a=r,l=n),e=Wh(l)?l.call(e):l}return e}var C$=Array.prototype,D$=C$.reverse;function I0(e){return e==null?e:D$.call(e)}var I$=w1("round");const L$=I$;function gM(e){var t=e.length;return t?e[j1(0,t-1)]:void 0}function F$(e){return gM(zh(e))}function $$(e){var t=ti(e)?gM:F$;return t(e)}function ag(e,t){var n=-1,a=e.length,r=a-1;for(t=t===void 0?a:t;++n<t;){var l=j1(n,r),c=e[l];e[l]=e[n],e[n]=c}return e.length=t,e}function B$(e,t){return ag(ms(e),yp(t,0,e.length))}function U$(e,t){var n=zh(e);return ag(n,yp(t,0,n.length))}function G$(e,t,n){(n?zl(e,t,n):t===void 0)?t=1:t=Rr(t);var a=ti(e)?B$:U$;return a(e,t)}function W$(e,t,n,a){return a=typeof a=="function"?a:void 0,e==null?e:d1(e,t,n,a)}function z$(e){return ag(ms(e))}function V$(e){return ag(zh(e))}function H$(e){var t=ti(e)?z$:V$;return t(e)}var X$="[object Map]",Y$="[object Set]";function q$(e){if(e==null)return 0;if(Bh(e))return ig(e)?Yh(e):e.length;var t=Km(e);return t==X$||t==Y$?e.size:cC(e).length}function K$(e,t,n){var a=e==null?0:e.length;return a?(n&&typeof n!="number"&&zl(e,t,n)?(t=0,n=a):(t=t==null?0:Rr(t),n=n===void 0?a:Rr(n)),Ks(e,t,n)):[]}var Z$=Xh(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});const J$=Z$;function Q$(e,t){var n;return qm(e,function(a,r,l){return n=t(a,r,l),!n}),!!n}function e6(e,t,n){var a=ti(e)?UA:Q$;return n&&zl(e,t,n)&&(t=void 0),a(e,zr(t))}var t6=4294967295,n6=t6-1,r6=Math.floor,o6=Math.min;function C1(e,t,n,a){var r=0,l=e==null?0:e.length;if(l===0)return 0;t=n(t);for(var c=t!==t,y=t===null,h=Rh(t),g=t===void 0;r<l;){var b=r6((r+l)/2),E=n(e[b]),x=E!==void 0,T=E===null,j=E===E,N=Rh(E);if(c)var M=a||j;else g?M=j&&(a||x):y?M=j&&x&&(a||!T):h?M=j&&x&&!T&&(a||!N):T||N?M=!1:M=a?E<=t:E<t;M?r=b+1:l=b}return o6(l,n6)}var i6=4294967295,a6=i6>>>1;function ug(e,t,n){var a=0,r=e==null?a:e.length;if(typeof t=="number"&&t===t&&r<=a6){for(;a<r;){var l=a+r>>>1,c=e[l];c!==null&&!Rh(c)&&(n?c<=t:c<t)?a=l+1:r=l}return r}return C1(e,t,ad,n)}function u6(e,t){return ug(e,t)}function s6(e,t,n){return C1(e,t,zr(n))}function l6(e,t){var n=e==null?0:e.length;if(n){var a=ug(e,t);if(a<n&&Qv(e[a],t))return a}return-1}function c6(e,t){return ug(e,t,!0)}function f6(e,t,n){return C1(e,t,zr(n),!0)}function d6(e,t){var n=e==null?0:e.length;if(n){var a=ug(e,t,!0)-1;if(Qv(e[a],t))return a}return-1}function _M(e,t){for(var n=-1,a=e.length,r=0,l=[];++n<a;){var c=e[n],y=t?t(c):c;if(!n||!Qv(y,h)){var h=y;l[r++]=c===0?0:c}}return l}function p6(e){return e&&e.length?_M(e):[]}function h6(e,t){return e&&e.length?_M(e,zr(t)):[]}var v6=4294967295;function y6(e,t,n){return n&&typeof n!="number"&&zl(e,t,n)&&(t=n=void 0),n=n===void 0?v6:n>>>0,n?(e=xo(e),e&&(typeof t=="string"||t!=null&&!T1(t))&&(t=qs(t),!t&&Hh(e))?sd(Zs(e),0,n):e.split(t,n)):[]}var m6="Expected a function",g6=Math.max;function _6(e,t){if(typeof e!="function")throw new TypeError(m6);return t=t==null?0:g6(Rr(t),0),qr(function(n){var a=n[t],r=sd(n,0,t);return a&&Zv(r,a),gs(e,this,r)})}var b6=Xh(function(e,t,n){return e+(n?" ":"")+_1(t)});const w6=b6;function E6(e,t,n){return e=xo(e),n=n==null?0:yp(Rr(n),0,e.length),t=qs(t),e.slice(n,n+t.length)==t}function O6(){return{}}function x6(){return""}function S6(){return!0}var A6=Jm(function(e,t){return e-t},0);const T6=A6;function M6(e){return e&&e.length?M1(e,ad):0}function N6(e,t){return e&&e.length?M1(e,zr(t)):0}function P6(e){var t=e==null?0:e.length;return t?Ks(e,1,t):[]}function k6(e,t,n){return e&&e.length?(t=n||t===void 0?1:Rr(t),Ks(e,0,t<0?0:t)):[]}function R6(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===void 0?1:Rr(t),t=a-t,Ks(e,t<0?0:t,a)):[]}function j6(e,t){return e&&e.length?ng(e,zr(t),!1,!0):[]}function C6(e,t){return e&&e.length?ng(e,zr(t)):[]}function D6(e,t){return t(e),e}var bM=Object.prototype,I6=bM.hasOwnProperty;function _x(e,t,n,a){return e===void 0||Qv(e,bM[n])&&!I6.call(a,n)?t:e}var L6={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function F6(e){return"\\"+L6[e]}var $6=/<%=([\s\S]+?)%>/g;const wM=$6;var B6=/<%-([\s\S]+?)%>/g;const U6=B6;var G6=/<%([\s\S]+?)%>/g;const W6=G6;var z6={escape:U6,evaluate:W6,interpolate:wM,variable:"",imports:{_:{escape:YT}}};const L0=z6;var V6="Invalid `variable` option passed into `_.template`",H6=/\b__p \+= '';/g,X6=/\b(__p \+=) '' \+/g,Y6=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q6=/[()=,{}\[\]\/\s]/,K6=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,um=/($^)/,Z6=/['\n\r\u2028\u2029\\]/g,J6=Object.prototype,bx=J6.hasOwnProperty;function Q6(e,t,n){var a=L0.imports._.templateSettings||L0;n&&zl(e,t,n)&&(t=void 0),e=xo(e),t=Om({},t,a,_x);var r=Om({},t.imports,a.imports,_x),l=Os(r),c=rT(r,l),y,h,g=0,b=t.interpolate||um,E="__p += '",x=RegExp((t.escape||um).source+"|"+b.source+"|"+(b===wM?K6:um).source+"|"+(t.evaluate||um).source+"|$","g"),T=bx.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+`
`:"";e.replace(x,function(M,D,k,F,te,V){return k||(k=F),E+=e.slice(g,V).replace(Z6,F6),D&&(y=!0,E+=`' +
__e(`+D+`) +
'`),te&&(h=!0,E+=`';
`+te+`;
__p += '`),k&&(E+=`' +
((__t = (`+k+`)) == null ? '' : __t) +
'`),g=V+M.length,M}),E+=`';
`;var j=bx.call(t,"variable")&&t.variable;if(!j)E=`with (obj) {
`+E+`
}
`;else if(q6.test(j))throw new Error(V6);E=(h?E.replace(H6,""):E).replace(X6,"$1").replace(Y6,"$1;"),E="function("+(j||"obj")+`) {
`+(j?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(y?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+E+`return __p
}`;var N=pT(function(){return Function(l,T+"return "+E).apply(void 0,c)});if(N.source=E,y1(N))throw N;return N}function oy(e,t){return t(e)}var eB=9007199254740991,f0=4294967295,tB=Math.min;function nB(e,t){if(e=Rr(e),e<1||e>eB)return[];var n=f0,a=tB(e,f0);t=vp(t),e-=f0;for(var r=VA(a,t);++n<e;)t(n);return r}function rB(){return this}function EM(e,t){var n=e;return n instanceof Wr&&(n=n.value()),nT(t,function(a,r){return r.func.apply(r.thisArg,Zv([a],r.args))},n)}function d0(){return EM(this.__wrapped__,this.__actions__)}function oB(e){return xo(e).toLowerCase()}function iB(e){return ti(e)?ua(e,Ym):Rh(e)?[e]:ms(fC(xo(e)))}var wx=9007199254740991;function aB(e){return e?yp(Rr(e),-wx,wx):e===0?e:0}function uB(e){return xo(e).toUpperCase()}function sB(e,t,n){var a=ti(e),r=a||HA(e)||XA(e);if(t=zr(t),n==null){var l=e&&e.constructor;r?n=a?new l:[]:Jc(e)?n=Wh(l)?Xv(dC(e)):{}:n={}}return(r?Wl:hp)(e,function(c,y,h){return t(n,c,y,h)}),n}function OM(e,t){for(var n=e.length;n--&&Jv(t,e[n],0)>-1;);return n}function xM(e,t){for(var n=-1,a=e.length;++n<a&&Jv(t,e[n],0)>-1;);return n}function lB(e,t,n){if(e=xo(e),e&&(n||t===void 0))return pC(e);if(!e||!(t=qs(t)))return e;var a=Zs(e),r=Zs(t),l=xM(a,r),c=OM(a,r)+1;return sd(a,l,c).join("")}function cB(e,t,n){if(e=xo(e),e&&(n||t===void 0))return e.slice(0,hC(e)+1);if(!e||!(t=qs(t)))return e;var a=Zs(e),r=OM(a,Zs(t))+1;return sd(a,0,r).join("")}var fB=/^\s+/;function dB(e,t,n){if(e=xo(e),e&&(n||t===void 0))return e.replace(fB,"");if(!e||!(t=qs(t)))return e;var a=Zs(e),r=xM(a,Zs(t));return sd(a,r).join("")}var pB=30,hB="...",vB=/\w*$/;function yB(e,t){var n=pB,a=hB;if(Jc(t)){var r="separator"in t?t.separator:r;n="length"in t?Rr(t.length):n,a="omission"in t?qs(t.omission):a}e=xo(e);var l=e.length;if(Hh(e)){var c=Zs(e);l=c.length}if(n>=l)return e;var y=n-Yh(a);if(y<1)return a;var h=c?sd(c,0,y).join(""):e.slice(0,y);if(r===void 0)return h+a;if(c&&(y+=h.length-y),T1(r)){if(e.slice(y).search(r)){var g,b=h;for(r.global||(r=RegExp(r.source,xo(vB.exec(r))+"g")),r.lastIndex=0;g=r.exec(b);)var E=g.index;h=h.slice(0,E===void 0?y:E)}}else if(e.indexOf(qs(r),y)!=y){var x=h.lastIndexOf(r);x>-1&&(h=h.slice(0,x))}return h+a}function mB(e){return dT(e,1)}var gB={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},_B=b1(gB);const bB=_B;var SM=/&(?:amp|lt|gt|quot|#39);/g,wB=RegExp(SM.source);function EB(e){return e=xo(e),e&&wB.test(e)?e.replace(SM,bB):e}var OB=qr(function(e){var t=_s(e);return Li(t)&&(t=void 0),up(Qs(e,1,Li,!0),zr(t))});const xB=OB;var SB=qr(function(e){var t=_s(e);return t=typeof t=="function"?t:void 0,up(Qs(e,1,Li,!0),void 0,t)});const AB=SB;function TB(e){return e&&e.length?up(e):[]}function MB(e,t){return e&&e.length?up(e,zr(t)):[]}function NB(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?up(e,void 0,t):[]}function PB(e,t){return e==null?!0:zA(e,t)}var kB=Math.max;function D1(e){if(!(e&&e.length))return[];var t=0;return e=Gh(e,function(n){if(Li(n))return t=kB(n.length,t),!0}),VA(t,function(n){return ua(e,GA(n))})}function AM(e,t){if(!(e&&e.length))return[];var n=D1(e);return t==null?n:ua(n,function(a){return gs(t,void 0,a)})}function TM(e,t,n,a){return d1(e,t,n(WA(e,t)),a)}function RB(e,t,n){return e==null?e:TM(e,t,vp(n))}function jB(e,t,n,a){return a=typeof a=="function"?a:void 0,e==null?e:TM(e,t,vp(n),a)}var CB=Xh(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()});const DB=CB;function IB(e){return e==null?[]:rT(e,dp(e))}var LB=qr(function(e,t){return Li(e)?ty(e,t):[]});const FB=LB;function $B(e,t){return vM(vp(t),e)}var BB=pp(function(e){var t=e.length,n=t?e[0]:0,a=this.__wrapped__,r=function(l){return v1(l,e)};return t>1||this.__actions__.length||!(a instanceof Wr)||!Yv(n)?this.thru(r):(a=a.slice(n,+n+(t?1:0)),a.__actions__.push({func:oy,args:[r],thisArg:void 0}),new bs(a,this.__chain__).thru(function(l){return t&&!l.length&&l.push(void 0),l}))});const UB=BB;function GB(){return $T(this)}function WB(){var e=this.__wrapped__;if(e instanceof Wr){var t=e;return this.__actions__.length&&(t=new Wr(this)),t=t.reverse(),t.__actions__.push({func:oy,args:[I0],thisArg:void 0}),new bs(t,this.__chain__)}return this.thru(I0)}function I1(e,t,n){var a=e.length;if(a<2)return a?up(e[0]):[];for(var r=-1,l=Array(a);++r<a;)for(var c=e[r],y=-1;++y<a;)y!=r&&(l[r]=ty(l[r]||c,e[y],t,n));return up(Qs(l,1),t,n)}var zB=qr(function(e){return I1(Gh(e,Li))});const VB=zB;var HB=qr(function(e){var t=_s(e);return Li(t)&&(t=void 0),I1(Gh(e,Li),zr(t))});const XB=HB;var YB=qr(function(e){var t=_s(e);return t=typeof t=="function"?t:void 0,I1(Gh(e,Li),void 0,t)});const qB=YB;var KB=qr(D1);const ZB=KB;function JB(e,t){return wD(e||[],t||[],d1)}var QB=qr(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n=typeof n=="function"?(e.pop(),n):void 0,AM(e,n)});const eU=QB,Cn={chunk:x3,compact:R3,concat:j3,difference:a8,differenceBy:s8,differenceWith:c8,drop:p8,dropRight:h8,dropRightWhile:v8,dropWhile:y8,fill:L8,findIndex:ED,findLastIndex:DA,first:dx,flatten:vC,flattenDeep:yC,flattenDepth:V8,fromPairs:mC,head:dx,indexOf:SF,initial:AF,intersection:NF,intersectionBy:kF,intersectionWith:jF,join:T4,last:_s,lastIndexOf:D4,nth:c5,pull:u$,pullAll:yM,pullAllBy:s$,pullAllWith:l$,pullAt:p$,remove:M$,reverse:I0,slice:K$,sortedIndex:u6,sortedIndexBy:s6,sortedIndexOf:l6,sortedLastIndex:c6,sortedLastIndexBy:f6,sortedLastIndexOf:d6,sortedUniq:p6,sortedUniqBy:h6,tail:P6,take:k6,takeRight:R6,takeRightWhile:j6,takeWhile:C6,union:gC,unionBy:xB,unionWith:AB,uniq:TB,uniqBy:MB,uniqWith:NB,unzip:D1,unzipWith:AM,without:FB,xor:VB,xorBy:XB,xorWith:qB,zip:ZB,zipObject:OD,zipObjectDeep:JB,zipWith:eU},So={countBy:V3,each:XO,eachRight:lx,every:C8,filter:dD,find:xD,findLast:B8,flatMap:_C,flatMapDeep:W8,flatMapDepth:z8,forEach:XO,forEachRight:lx,groupBy:dF,includes:OF,invokeMap:HF,keyBy:k4,map:f1,orderBy:h5,partition:t$,reduce:pD,reduceRight:A$,reject:T$,sample:$$,sampleSize:G$,shuffle:H$,size:q$,some:e6,sortBy:SD},tU={now:bC},vi={after:BD,ary:dT,before:hT,bind:vT,bindKey:uL,curry:E1,curryRight:O1,debounce:wC,defer:t8,delay:r8,flip:X8,memoize:EC,negate:ry,once:p5,overArgs:w5,partial:vM,partialRight:Q5,rearg:x$,rest:R$,spread:_6,throttle:OC,unary:mB,wrap:$B},ar={castArray:xC,clone:SC,cloneDeep:AC,cloneDeepWith:M3,cloneWith:P3,conformsTo:$3,eq:Qv,gt:hF,gte:yF,isArguments:TC,isArray:ti,isArrayBuffer:KF,isArrayLike:Bh,isArrayLikeObject:Li,isBoolean:JF,isBuffer:HA,isDate:n4,isElement:r4,isEmpty:MC,isEqual:NC,isEqualWith:o4,isError:y1,isFinite:a4,isFunction:Wh,isInteger:nM,isLength:PC,isMap:kC,isMatch:u4,isMatchWith:s4,isNaN:c4,isNative:h4,isNil:RC,isNull:jC,isNumber:rM,isObject:Jc,isObjectLike:Es,isPlainObject:c1,isRegExp:T1,isSafeInteger:g4,isSet:CC,isString:ig,isSymbol:Rh,isTypedArray:XA,isUndefined:DC,isWeakMap:b4,isWeakSet:E4,lt:U4,lte:W4,toArray:aM,toFinite:Lv,toInteger:Rr,toLength:ZT,toNumber:Zc,toPlainObject:IC,toSafeInteger:aB,toString:xo},Ha={add:FD,ceil:w3,divide:d8,floor:q8,max:AD,maxBy:q4,mean:Z4,meanBy:J4,min:TD,minBy:MD,multiply:o5,round:L$,subtract:T6,sum:M6,sumBy:N6},L1={clamp:S3,inRange:bF,random:_$},gr={assign:WI,assignIn:ox,assignInWith:Om,assignWith:XI,at:qI,create:H3,defaults:ND,defaultsDeep:J3,entries:cx,entriesIn:fx,extend:ox,extendWith:Om,findKey:F8,findLastKey:U8,forIn:PD,forInRight:iF,forOwn:kD,forOwnRight:aF,functions:uF,functionsIn:sF,get:PA,has:hD,hasIn:LC,invert:FF,invertBy:GF,invoke:zF,keys:Os,keysIn:dp,mapKeys:z4,mapValues:RD,merge:FC,mergeWith:GT,omit:$C,omitBy:d5,pick:BC,pickBy:sM,result:j$,set:UC,setWith:W$,toPairs:cx,toPairsIn:fx,transform:sB,unset:PB,update:RB,updateWith:jB,values:zh,valuesIn:IB},Vl={at:UB,chain:$T,commit:k3,lodash:ie,next:l5,plant:n$,reverse:WB,tap:D6,thru:oy,toIterator:rB,toJSON:d0,value:d0,valueOf:d0,wrapperChain:GB},uo={camelCase:m3,capitalize:OT,deburr:xT,endsWith:b8,escape:YT,escapeRegExp:R8,kebabCase:N4,lowerCase:L4,lowerFirst:$4,pad:V5,padEnd:H5,padStart:X5,parseInt:K5,repeat:N$,replace:P$,snakeCase:J$,split:y6,startCase:w6,startsWith:E6,template:Q6,templateSettings:L0,toLower:oB,toUpper:uB,trim:lB,trimEnd:cB,trimStart:dB,truncate:yB,unescape:EB,upperCase:DB,upperFirst:_1,words:FT},fo={attempt:pT,bindAll:rL,cond:D3,conforms:F3,constant:IA,defaultTo:q3,flow:nF,flowRight:oF,identity:ad,iteratee:x4,matches:H4,matchesProperty:Y4,method:e5,methodOf:n5,mixin:iM,noop:NA,nthArg:f5,over:y5,overEvery:O5,overSome:S5,property:GC,propertyOf:r$,range:jD,rangeRight:w$,stubArray:WC,stubFalse:BA,stubObject:O6,stubString:x6,stubTrue:S6,times:nB,toPath:iB,uniqueId:CD};function nU(){var e=new Wr(this.__wrapped__);return e.__actions__=ms(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ms(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ms(this.__views__),e}function rU(){if(this.__filtered__){var e=new Wr(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}var oU=Math.max,iU=Math.min;function aU(e,t,n){for(var a=-1,r=n.length;++a<r;){var l=n[a],c=l.size;switch(l.type){case"drop":e+=c;break;case"dropRight":t-=c;break;case"take":t=iU(t,e+c);break;case"takeRight":e=oU(e,t-c);break}}return{start:e,end:t}}var uU=1,sU=2,lU=Math.min;function cU(){var e=this.__wrapped__.value(),t=this.__dir__,n=ti(e),a=t<0,r=n?e.length:0,l=aU(0,r,this.__views__),c=l.start,y=l.end,h=y-c,g=a?y:c-1,b=this.__iteratees__,E=b.length,x=0,T=lU(h,this.__takeCount__);if(!n||!a&&r==h&&T==h)return EM(e,this.__actions__);var j=[];e:for(;h--&&x<T;){g+=t;for(var N=-1,M=e[g];++N<E;){var D=b[N],k=D.iteratee,F=D.type,te=k(M);if(F==sU)M=te;else if(!te){if(F==uU)continue e;break e}}j[x++]=M}return j}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var fU="4.17.21",dU=2,pU=1,hU=3,MM=4294967295,vU=Array.prototype,yU=Object.prototype,NM=yU.hasOwnProperty,Ex=wm?wm.iterator:void 0,mU=Math.max,Ox=Math.min,F1=function(e){return function(t,n,a){if(a==null){var r=Jc(n),l=r&&Os(n),c=l&&l.length&&rg(n,l);(c?c.length:r)||(a=n,n=t,t=this)}return e(t,n,a)}}(iM);ie.after=vi.after;ie.ary=vi.ary;ie.assign=gr.assign;ie.assignIn=gr.assignIn;ie.assignInWith=gr.assignInWith;ie.assignWith=gr.assignWith;ie.at=gr.at;ie.before=vi.before;ie.bind=vi.bind;ie.bindAll=fo.bindAll;ie.bindKey=vi.bindKey;ie.castArray=ar.castArray;ie.chain=Vl.chain;ie.chunk=Cn.chunk;ie.compact=Cn.compact;ie.concat=Cn.concat;ie.cond=fo.cond;ie.conforms=fo.conforms;ie.constant=fo.constant;ie.countBy=So.countBy;ie.create=gr.create;ie.curry=vi.curry;ie.curryRight=vi.curryRight;ie.debounce=vi.debounce;ie.defaults=gr.defaults;ie.defaultsDeep=gr.defaultsDeep;ie.defer=vi.defer;ie.delay=vi.delay;ie.difference=Cn.difference;ie.differenceBy=Cn.differenceBy;ie.differenceWith=Cn.differenceWith;ie.drop=Cn.drop;ie.dropRight=Cn.dropRight;ie.dropRightWhile=Cn.dropRightWhile;ie.dropWhile=Cn.dropWhile;ie.fill=Cn.fill;ie.filter=So.filter;ie.flatMap=So.flatMap;ie.flatMapDeep=So.flatMapDeep;ie.flatMapDepth=So.flatMapDepth;ie.flatten=Cn.flatten;ie.flattenDeep=Cn.flattenDeep;ie.flattenDepth=Cn.flattenDepth;ie.flip=vi.flip;ie.flow=fo.flow;ie.flowRight=fo.flowRight;ie.fromPairs=Cn.fromPairs;ie.functions=gr.functions;ie.functionsIn=gr.functionsIn;ie.groupBy=So.groupBy;ie.initial=Cn.initial;ie.intersection=Cn.intersection;ie.intersectionBy=Cn.intersectionBy;ie.intersectionWith=Cn.intersectionWith;ie.invert=gr.invert;ie.invertBy=gr.invertBy;ie.invokeMap=So.invokeMap;ie.iteratee=fo.iteratee;ie.keyBy=So.keyBy;ie.keys=Os;ie.keysIn=gr.keysIn;ie.map=So.map;ie.mapKeys=gr.mapKeys;ie.mapValues=gr.mapValues;ie.matches=fo.matches;ie.matchesProperty=fo.matchesProperty;ie.memoize=vi.memoize;ie.merge=gr.merge;ie.mergeWith=gr.mergeWith;ie.method=fo.method;ie.methodOf=fo.methodOf;ie.mixin=F1;ie.negate=ry;ie.nthArg=fo.nthArg;ie.omit=gr.omit;ie.omitBy=gr.omitBy;ie.once=vi.once;ie.orderBy=So.orderBy;ie.over=fo.over;ie.overArgs=vi.overArgs;ie.overEvery=fo.overEvery;ie.overSome=fo.overSome;ie.partial=vi.partial;ie.partialRight=vi.partialRight;ie.partition=So.partition;ie.pick=gr.pick;ie.pickBy=gr.pickBy;ie.property=fo.property;ie.propertyOf=fo.propertyOf;ie.pull=Cn.pull;ie.pullAll=Cn.pullAll;ie.pullAllBy=Cn.pullAllBy;ie.pullAllWith=Cn.pullAllWith;ie.pullAt=Cn.pullAt;ie.range=fo.range;ie.rangeRight=fo.rangeRight;ie.rearg=vi.rearg;ie.reject=So.reject;ie.remove=Cn.remove;ie.rest=vi.rest;ie.reverse=Cn.reverse;ie.sampleSize=So.sampleSize;ie.set=gr.set;ie.setWith=gr.setWith;ie.shuffle=So.shuffle;ie.slice=Cn.slice;ie.sortBy=So.sortBy;ie.sortedUniq=Cn.sortedUniq;ie.sortedUniqBy=Cn.sortedUniqBy;ie.split=uo.split;ie.spread=vi.spread;ie.tail=Cn.tail;ie.take=Cn.take;ie.takeRight=Cn.takeRight;ie.takeRightWhile=Cn.takeRightWhile;ie.takeWhile=Cn.takeWhile;ie.tap=Vl.tap;ie.throttle=vi.throttle;ie.thru=oy;ie.toArray=ar.toArray;ie.toPairs=gr.toPairs;ie.toPairsIn=gr.toPairsIn;ie.toPath=fo.toPath;ie.toPlainObject=ar.toPlainObject;ie.transform=gr.transform;ie.unary=vi.unary;ie.union=Cn.union;ie.unionBy=Cn.unionBy;ie.unionWith=Cn.unionWith;ie.uniq=Cn.uniq;ie.uniqBy=Cn.uniqBy;ie.uniqWith=Cn.uniqWith;ie.unset=gr.unset;ie.unzip=Cn.unzip;ie.unzipWith=Cn.unzipWith;ie.update=gr.update;ie.updateWith=gr.updateWith;ie.values=gr.values;ie.valuesIn=gr.valuesIn;ie.without=Cn.without;ie.words=uo.words;ie.wrap=vi.wrap;ie.xor=Cn.xor;ie.xorBy=Cn.xorBy;ie.xorWith=Cn.xorWith;ie.zip=Cn.zip;ie.zipObject=Cn.zipObject;ie.zipObjectDeep=Cn.zipObjectDeep;ie.zipWith=Cn.zipWith;ie.entries=gr.toPairs;ie.entriesIn=gr.toPairsIn;ie.extend=gr.assignIn;ie.extendWith=gr.assignInWith;F1(ie,ie);ie.add=Ha.add;ie.attempt=fo.attempt;ie.camelCase=uo.camelCase;ie.capitalize=uo.capitalize;ie.ceil=Ha.ceil;ie.clamp=L1.clamp;ie.clone=ar.clone;ie.cloneDeep=ar.cloneDeep;ie.cloneDeepWith=ar.cloneDeepWith;ie.cloneWith=ar.cloneWith;ie.conformsTo=ar.conformsTo;ie.deburr=uo.deburr;ie.defaultTo=fo.defaultTo;ie.divide=Ha.divide;ie.endsWith=uo.endsWith;ie.eq=ar.eq;ie.escape=uo.escape;ie.escapeRegExp=uo.escapeRegExp;ie.every=So.every;ie.find=So.find;ie.findIndex=Cn.findIndex;ie.findKey=gr.findKey;ie.findLast=So.findLast;ie.findLastIndex=Cn.findLastIndex;ie.findLastKey=gr.findLastKey;ie.floor=Ha.floor;ie.forEach=So.forEach;ie.forEachRight=So.forEachRight;ie.forIn=gr.forIn;ie.forInRight=gr.forInRight;ie.forOwn=gr.forOwn;ie.forOwnRight=gr.forOwnRight;ie.get=gr.get;ie.gt=ar.gt;ie.gte=ar.gte;ie.has=gr.has;ie.hasIn=gr.hasIn;ie.head=Cn.head;ie.identity=ad;ie.includes=So.includes;ie.indexOf=Cn.indexOf;ie.inRange=L1.inRange;ie.invoke=gr.invoke;ie.isArguments=ar.isArguments;ie.isArray=ti;ie.isArrayBuffer=ar.isArrayBuffer;ie.isArrayLike=ar.isArrayLike;ie.isArrayLikeObject=ar.isArrayLikeObject;ie.isBoolean=ar.isBoolean;ie.isBuffer=ar.isBuffer;ie.isDate=ar.isDate;ie.isElement=ar.isElement;ie.isEmpty=ar.isEmpty;ie.isEqual=ar.isEqual;ie.isEqualWith=ar.isEqualWith;ie.isError=ar.isError;ie.isFinite=ar.isFinite;ie.isFunction=ar.isFunction;ie.isInteger=ar.isInteger;ie.isLength=ar.isLength;ie.isMap=ar.isMap;ie.isMatch=ar.isMatch;ie.isMatchWith=ar.isMatchWith;ie.isNaN=ar.isNaN;ie.isNative=ar.isNative;ie.isNil=ar.isNil;ie.isNull=ar.isNull;ie.isNumber=ar.isNumber;ie.isObject=Jc;ie.isObjectLike=ar.isObjectLike;ie.isPlainObject=ar.isPlainObject;ie.isRegExp=ar.isRegExp;ie.isSafeInteger=ar.isSafeInteger;ie.isSet=ar.isSet;ie.isString=ar.isString;ie.isSymbol=ar.isSymbol;ie.isTypedArray=ar.isTypedArray;ie.isUndefined=ar.isUndefined;ie.isWeakMap=ar.isWeakMap;ie.isWeakSet=ar.isWeakSet;ie.join=Cn.join;ie.kebabCase=uo.kebabCase;ie.last=_s;ie.lastIndexOf=Cn.lastIndexOf;ie.lowerCase=uo.lowerCase;ie.lowerFirst=uo.lowerFirst;ie.lt=ar.lt;ie.lte=ar.lte;ie.max=Ha.max;ie.maxBy=Ha.maxBy;ie.mean=Ha.mean;ie.meanBy=Ha.meanBy;ie.min=Ha.min;ie.minBy=Ha.minBy;ie.stubArray=fo.stubArray;ie.stubFalse=fo.stubFalse;ie.stubObject=fo.stubObject;ie.stubString=fo.stubString;ie.stubTrue=fo.stubTrue;ie.multiply=Ha.multiply;ie.nth=Cn.nth;ie.noop=fo.noop;ie.now=tU.now;ie.pad=uo.pad;ie.padEnd=uo.padEnd;ie.padStart=uo.padStart;ie.parseInt=uo.parseInt;ie.random=L1.random;ie.reduce=So.reduce;ie.reduceRight=So.reduceRight;ie.repeat=uo.repeat;ie.replace=uo.replace;ie.result=gr.result;ie.round=Ha.round;ie.sample=So.sample;ie.size=So.size;ie.snakeCase=uo.snakeCase;ie.some=So.some;ie.sortedIndex=Cn.sortedIndex;ie.sortedIndexBy=Cn.sortedIndexBy;ie.sortedIndexOf=Cn.sortedIndexOf;ie.sortedLastIndex=Cn.sortedLastIndex;ie.sortedLastIndexBy=Cn.sortedLastIndexBy;ie.sortedLastIndexOf=Cn.sortedLastIndexOf;ie.startCase=uo.startCase;ie.startsWith=uo.startsWith;ie.subtract=Ha.subtract;ie.sum=Ha.sum;ie.sumBy=Ha.sumBy;ie.template=uo.template;ie.times=fo.times;ie.toFinite=ar.toFinite;ie.toInteger=Rr;ie.toLength=ar.toLength;ie.toLower=uo.toLower;ie.toNumber=ar.toNumber;ie.toSafeInteger=ar.toSafeInteger;ie.toString=ar.toString;ie.toUpper=uo.toUpper;ie.trim=uo.trim;ie.trimEnd=uo.trimEnd;ie.trimStart=uo.trimStart;ie.truncate=uo.truncate;ie.unescape=uo.unescape;ie.uniqueId=fo.uniqueId;ie.upperCase=uo.upperCase;ie.upperFirst=uo.upperFirst;ie.each=So.forEach;ie.eachRight=So.forEachRight;ie.first=Cn.head;F1(ie,function(){var e={};return hp(ie,function(t,n){NM.call(ie.prototype,n)||(e[n]=t)}),e}(),{chain:!1});ie.VERSION=fU;(ie.templateSettings=uo.templateSettings).imports._=ie;Wl(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){ie[e].placeholder=ie});Wl(["drop","take"],function(e,t){Wr.prototype[e]=function(n){n=n===void 0?1:mU(Rr(n),0);var a=this.__filtered__&&!t?new Wr(this):this.clone();return a.__filtered__?a.__takeCount__=Ox(n,a.__takeCount__):a.__views__.push({size:Ox(n,MM),type:e+(a.__dir__<0?"Right":"")}),a},Wr.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}});Wl(["filter","map","takeWhile"],function(e,t){var n=t+1,a=n==pU||n==hU;Wr.prototype[e]=function(r){var l=this.clone();return l.__iteratees__.push({iteratee:zr(r),type:n}),l.__filtered__=l.__filtered__||a,l}});Wl(["head","last"],function(e,t){var n="take"+(t?"Right":"");Wr.prototype[e]=function(){return this[n](1).value()[0]}});Wl(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Wr.prototype[e]=function(){return this.__filtered__?new Wr(this):this[n](1)}});Wr.prototype.compact=function(){return this.filter(ad)};Wr.prototype.find=function(e){return this.filter(e).head()};Wr.prototype.findLast=function(e){return this.reverse().find(e)};Wr.prototype.invokeMap=qr(function(e,t){return typeof e=="function"?new Wr(this):this.map(function(n){return ny(n,e,t)})});Wr.prototype.reject=function(e){return this.filter(ry(zr(e)))};Wr.prototype.slice=function(e,t){e=Rr(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Wr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==void 0&&(t=Rr(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)};Wr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};Wr.prototype.toArray=function(){return this.take(MM)};hp(Wr.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),r=ie[a?"take"+(t=="last"?"Right":""):t],l=a||/^find/.test(t);r&&(ie.prototype[t]=function(){var c=this.__wrapped__,y=a?[1]:arguments,h=c instanceof Wr,g=y[0],b=h||ti(c),E=function(D){var k=r.apply(ie,Zv([D],y));return a&&x?k[0]:k};b&&n&&typeof g=="function"&&g.length!=1&&(h=b=!1);var x=this.__chain__,T=!!this.__actions__.length,j=l&&!x,N=h&&!T;if(!l&&b){c=N?c:new Wr(this);var M=e.apply(c,y);return M.__actions__.push({func:oy,args:[E],thisArg:void 0}),new bs(M,x)}return j&&N?e.apply(this,y):(M=this.thru(E),j?a?M.value()[0]:M.value():M)})});Wl(["pop","push","shift","sort","splice","unshift"],function(e){var t=vU[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);ie.prototype[e]=function(){var r=arguments;if(a&&!this.__chain__){var l=this.value();return t.apply(ti(l)?l:[],r)}return this[n](function(c){return t.apply(ti(c)?c:[],r)})}});hp(Wr.prototype,function(e,t){var n=ie[t];if(n){var a=n.name+"";NM.call(Sh,a)||(Sh[a]=[]),Sh[a].push({name:t,func:n})}});Sh[eg(void 0,dU).name]=[{name:"wrapper",func:void 0}];Wr.prototype.clone=nU;Wr.prototype.reverse=rU;Wr.prototype.value=cU;ie.prototype.at=Vl.at;ie.prototype.chain=Vl.wrapperChain;ie.prototype.commit=Vl.commit;ie.prototype.next=Vl.next;ie.prototype.plant=Vl.plant;ie.prototype.reverse=Vl.reverse;ie.prototype.toJSON=ie.prototype.valueOf=ie.prototype.value=Vl.value;ie.prototype.first=ie.prototype.head;Ex&&(ie.prototype[Ex]=Vl.toIterator);const gU="/ui/assets/icon_or-51e130f2.svg",_U="/ui/assets/icon_and-7100a354.svg",PM={id:Wn.Start,type:Wn.Start,x:180,y:720,properties:{height:200,stepName:it("views.applicationWorkflow.nodes.startNode.label"),config:{fields:[{label:it("views.applicationWorkflow.nodes.startNode.question"),value:"question"}],globalFields:[{value:"time",label:it("views.applicationWorkflow.nodes.startNode.currentTime")}]}}},kM={id:Wn.Base,type:Wn.Base,x:200,y:270,text:"",properties:{width:420,height:200,stepName:it("views.applicationWorkflow.nodes.baseNode.label"),input_field_list:[],node_data:{name:"",desc:"",prologue:it("views.application.applicationForm.form.defaultPrologue")},config:{}}},bU=[kM,PM],RM={type:Wn.AiChat,text:it("views.applicationWorkflow.nodes.aiChatNode.text"),label:it("views.applicationWorkflow.nodes.aiChatNode.label"),height:340,properties:{stepName:it("views.applicationWorkflow.nodes.aiChatNode.label"),config:{fields:[{label:it("views.applicationWorkflow.nodes.aiChatNode.answer"),value:"answer"}]}}},jM={type:Wn.SearchDataset,text:it("views.applicationWorkflow.nodes.searchDatasetNode.text"),label:it("views.applicationWorkflow.nodes.searchDatasetNode.label"),height:355,properties:{stepName:it("views.applicationWorkflow.nodes.searchDatasetNode.label"),config:{fields:[{label:it("views.applicationWorkflow.nodes.searchDatasetNode.paragraph_list"),value:"paragraph_list"},{label:it("views.applicationWorkflow.nodes.searchDatasetNode.is_hit_handling_method_list"),value:"is_hit_handling_method_list"},{label:it("views.applicationWorkflow.nodes.searchDatasetNode.result"),value:"data"},{label:it("views.applicationWorkflow.nodes.searchDatasetNode.directly_return"),value:"directly_return"}]}}},CM={type:Wn.Question,text:it("views.applicationWorkflow.nodes.questionNode.text"),label:it("views.applicationWorkflow.nodes.questionNode.label"),height:345,properties:{stepName:it("views.applicationWorkflow.nodes.questionNode.label"),config:{fields:[{label:it("views.applicationWorkflow.nodes.questionNode.result"),value:"answer"}]}}},DM={type:Wn.Condition,text:it("views.applicationWorkflow.nodes.conditionNode.text"),label:it("views.applicationWorkflow.nodes.conditionNode.label"),height:175,properties:{width:600,stepName:it("views.applicationWorkflow.nodes.conditionNode.label"),config:{fields:[{label:it("views.applicationWorkflow.nodes.conditionNode.branch_name"),value:"branch_name"}]}}},IM={type:Wn.Reply,text:it("views.applicationWorkflow.nodes.replyNode.text"),label:it("views.applicationWorkflow.nodes.replyNode.label"),height:210,properties:{stepName:it("views.applicationWorkflow.nodes.replyNode.label"),config:{fields:[{label:it("views.applicationWorkflow.nodes.replyNode.content"),value:"answer"}]}}},LM={type:Wn.RrerankerNode,text:it("views.applicationWorkflow.nodes.rerankerNode.text"),label:it("views.applicationWorkflow.nodes.rerankerNode.label"),height:252,properties:{stepName:it("views.applicationWorkflow.nodes.rerankerNode.label"),config:{fields:[{label:it("views.applicationWorkflow.nodes.rerankerNode.result_list"),value:"result_list"},{label:it("views.applicationWorkflow.nodes.rerankerNode.result"),value:"result"}]}}},FM={type:Wn.FormNode,text:it("views.applicationWorkflow.nodes.formNode.text"),label:it("views.applicationWorkflow.nodes.formNode.label"),height:252,properties:{width:600,stepName:it("views.applicationWorkflow.nodes.formNode.label"),node_data:{is_result:!0,form_field_list:[],form_content_format:`${it("views.applicationWorkflow.nodes.formNode.form_content_format1")}
    {{form}}
    ${it("views.applicationWorkflow.nodes.formNode.form_content_format2")}`},config:{fields:[{label:it("views.applicationWorkflow.nodes.formNode.form_data"),value:"form_data"}]}}},$M={type:Wn.DocumentExtractNode,text:it("views.applicationWorkflow.nodes.documentExtractNode.text"),label:it("views.applicationWorkflow.nodes.documentExtractNode.label"),height:252,properties:{stepName:it("views.applicationWorkflow.nodes.documentExtractNode.label"),config:{fields:[{label:it("views.applicationWorkflow.nodes.documentExtractNode.content"),value:"content"}]}}},BM={type:Wn.ImageUnderstandNode,text:it("views.applicationWorkflow.nodes.imageUnderstandNode.text"),label:it("views.applicationWorkflow.nodes.imageUnderstandNode.label"),height:252,properties:{stepName:it("views.applicationWorkflow.nodes.imageUnderstandNode.label"),config:{fields:[{label:it("views.applicationWorkflow.nodes.imageUnderstandNode.answer"),value:"answer"}]}}},UM={type:Wn.ImageGenerateNode,text:it("views.applicationWorkflow.nodes.imageGenerateNode.text"),label:it("views.applicationWorkflow.nodes.imageGenerateNode.label"),height:252,properties:{stepName:it("views.applicationWorkflow.nodes.imageGenerateNode.label"),config:{fields:[{label:it("views.applicationWorkflow.nodes.imageGenerateNode.answer"),value:"answer"},{label:it("common.fileUpload.image"),value:"image"}]}}},GM={type:Wn.SpeechToTextNode,text:it("views.applicationWorkflow.nodes.speechToTextNode.text"),label:it("views.applicationWorkflow.nodes.speechToTextNode.label"),height:252,properties:{stepName:it("views.applicationWorkflow.nodes.speechToTextNode.label"),config:{fields:[{label:it("common.result"),value:"result"}]}}},WM={type:Wn.TextToSpeechNode,text:it("views.applicationWorkflow.nodes.textToSpeechNode.text"),label:it("views.applicationWorkflow.nodes.textToSpeechNode.label"),height:252,properties:{stepName:it("views.applicationWorkflow.nodes.textToSpeechNode.label"),config:{fields:[{label:it("common.result"),value:"result"}]}}},wU=[RM,BM,UM,jM,LM,DM,IM,FM,CM,$M,GM,WM],Pv={type:Wn.FunctionLibCustom,text:it("views.applicationWorkflow.nodes.functionNode.text"),label:it("views.applicationWorkflow.nodes.functionNode.label"),height:260,properties:{stepName:it("views.applicationWorkflow.nodes.functionNode.label"),config:{fields:[{label:it("common.result"),value:"result"}]}}},F0={type:Wn.FunctionLib,text:it("views.applicationWorkflow.nodes.functionNode.text"),label:it("views.applicationWorkflow.nodes.functionNode.label"),height:170,properties:{stepName:it("views.applicationWorkflow.nodes.functionNode.label"),config:{fields:[{label:it("common.result"),value:"result"}]}}},$0={type:Wn.Application,text:it("views.applicationWorkflow.nodes.applicationNode.label"),label:it("views.applicationWorkflow.nodes.applicationNode.label"),height:260,properties:{stepName:it("views.applicationWorkflow.nodes.applicationNode.label"),config:{fields:[{label:it("common.result"),value:"result"}]}}},EU=[{value:"is_null",label:it("views.applicationWorkflow.compare.is_null")},{value:"is_not_null",label:it("views.applicationWorkflow.compare.is_not_null")},{value:"contain",label:it("views.applicationWorkflow.compare.contain")},{value:"not_contain",label:it("views.applicationWorkflow.compare.not_contain")},{value:"eq",label:it("views.applicationWorkflow.compare.eq")},{value:"ge",label:it("views.applicationWorkflow.compare.ge")},{value:"gt",label:it("views.applicationWorkflow.compare.gt")},{value:"le",label:it("views.applicationWorkflow.compare.le")},{value:"lt",label:it("views.applicationWorkflow.compare.lt")},{value:"len_eq",label:it("views.applicationWorkflow.compare.len_eq")},{value:"len_ge",label:it("views.applicationWorkflow.compare.len_ge")},{value:"len_gt",label:it("views.applicationWorkflow.compare.len_gt")},{value:"len_le",label:it("views.applicationWorkflow.compare.len_le")},{value:"len_lt",label:it("views.applicationWorkflow.compare.len_lt")}],OU={[Wn.AiChat]:RM,[Wn.SearchDataset]:jM,[Wn.Question]:CM,[Wn.Condition]:DM,[Wn.Base]:kM,[Wn.Start]:PM,[Wn.Reply]:IM,[Wn.FunctionLib]:F0,[Wn.FunctionLibCustom]:Pv,[Wn.RrerankerNode]:LM,[Wn.FormNode]:FM,[Wn.Application]:$0,[Wn.DocumentExtractNode]:$M,[Wn.ImageUnderstandNode]:BM,[Wn.TextToSpeechNode]:WM,[Wn.SpeechToTextNode]:GM,[Wn.ImageGenerateNode]:UM};function iy(e){const t=e.graphModel.getNodeIncomingNode(e.id),n=e.graphModel.getNodeOutgoingNode(e.id);return t.length>0&&n.length===0}const xU={class:"workflow-dropdown-menu border border-r-4"},SU={style:{display:"flex",width:"100%","justify-content":"center"},class:"mb-4"},AU={key:0},TU=["onClick","onMousedown"],MU={class:"pre-wrap"},NU={class:"lighter"},PU={key:1,class:"ml-16 mt-8"},kU={class:"pre-wrap"},RU={class:"lighter"},jU=["onClick","onMousedown"],CU={class:"pre-wrap"},DU=["title"],IU={key:0},LU=["onClick","onMousedown"],FU={class:"pre-wrap",style:{width:"60%"}},$U=["title"],BU={class:"status-tag",style:{"margin-left":"auto"}},UU={key:1,class:"ml-16 mt-8"},GU=Vr({__name:"DropdownMenu",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=Bt(""),a=e,r=t,l=Bt(!1),c=Bt("base"),y=Bt([]),h=Co(()=>y.value.filter(N=>N.name.toLocaleLowerCase().includes(n.value.toLocaleLowerCase()))),g=Bt([]),b=Co(()=>g.value.filter(N=>N.name.toLocaleLowerCase().includes(n.value.toLocaleLowerCase()))),E=Co(()=>wU.filter(N=>N.label.toLocaleLowerCase().includes(n.value.toLocaleLowerCase())));function x(N,M,D){var k;if(M&&(N.properties.stepName=M.name,D=="function"&&(N.properties.node_data={...M,function_lib_id:M.id,input_field_list:M.input_field_list.map(F=>({...F,value:F.source=="reference"?[]:""}))}),D=="application"))if(pm(M.type)){const te=M.work_flow.nodes[0].properties.node_data.file_upload_setting;N.properties.node_data={name:M.name,icon:M.icon,application_id:M.id,api_input_field_list:M.work_flow.nodes[0].properties.api_input_field_list,user_input_field_list:M.work_flow.nodes[0].properties.user_input_field_list,...te?{...te.document?{document_list:[]}:{},...te.image?{image_list:[]}:{},...te.audio?{audio_list:[]}:{}}:{}}}else N.properties.node_data={name:M.name,icon:M.icon,application_id:M.id};(k=a.workflowRef)==null||k.addNode(N),r("clickNodes",N)}function T(N,M,D){var k;if(M&&(N.properties.stepName=M.name,D=="function"&&(N.properties.node_data={...M,function_lib_id:M.id,input_field_list:M.input_field_list.map(F=>({...F,value:F.source=="reference"?[]:""}))}),D=="application"))if(pm(M.type)){const te=M.work_flow.nodes[0].properties.node_data.file_upload_setting;N.properties.node_data={name:M.name,icon:M.icon,application_id:M.id,api_input_field_list:M.work_flow.nodes[0].properties.api_input_field_list,user_input_field_list:M.work_flow.nodes[0].properties.user_input_field_list,...te?{...te.document?{document_list:[]}:{},...te.image?{image_list:[]}:{},...te.audio?{audio_list:[]}:{}}:{}}}else N.properties.node_data={name:M.name,icon:M.icon,application_id:M.id};(k=a.workflowRef)==null||k.onmousedown(N),r("onmousedown",N)}function j(){Sa.listFunctionLib(a.id,l).then(N=>{y.value=N.data}),Sa.getApplicationList(a.id,l).then(N=>{g.value=N.data})}return ni(()=>{j()}),(N,M)=>{const D=pe("search"),k=pe("el-icon"),F=pe("el-input"),te=pe("el-text"),V=pe("el-scrollbar"),z=pe("el-tab-pane"),J=pe("el-tag"),K=pe("el-tabs");return Uu((_t(),er("div",xU,[$(K,{modelValue:c.value,"onUpdate:modelValue":M[3]||(M[3]=B=>c.value=B),class:"workflow-dropdown-tabs"},{default:G(()=>[we("div",SU,[$(F,{modelValue:n.value,"onUpdate:modelValue":M[0]||(M[0]=B=>n.value=B),style:{width:"240px"},placeholder:N.$t("views.applicationWorkflow.searchBar.placeholder")},{suffix:G(()=>[$(k,{class:"el-input__icon"},{default:G(()=>[$(D)]),_:1})]),_:1},8,["modelValue","placeholder"])]),$(z,{label:N.$t("views.applicationWorkflow.baseComponent"),name:"base"},{default:G(()=>[$(V,{height:"400"},{default:G(()=>[E.value.length>0?(_t(),er("div",AU,[(_t(!0),er(Fi,null,pu(E.value,(B,H)=>(_t(),er("div",{key:H,class:"workflow-dropdown-item cursor flex p-8-12",onClick:Mn(ne=>x(B),["stop"]),onMousedown:Mn(ne=>T(B),["stop"])},[(_t(),an(wh(Yr(Eh)(`${B.type}-icon`)),{class:"mr-8 mt-4",size:32})),we("div",MU,[we("div",NU,qe(B.label),1),$(te,{type:"info",size:"small"},{default:G(()=>[jt(qe(B.text),1)]),_:2},1024)])],40,TU))),128))])):(_t(),er("div",PU,[$(te,{type:"info"},{default:G(()=>[jt(qe(N.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"]),$(z,{label:N.$t("views.functionLib.title"),name:"function"},{default:G(()=>[$(V,{height:"400"},{default:G(()=>[we("div",{class:"workflow-dropdown-item cursor flex p-8-12",onClick:M[1]||(M[1]=Mn(B=>x(Yr(Pv)),["stop"])),onMousedown:M[2]||(M[2]=Mn(B=>T(Yr(Pv)),["stop"]))},[(_t(),an(wh(Yr(Eh)("function-lib-node-icon")),{class:"mr-8 mt-4",size:32})),we("div",kU,[we("div",RU,qe(Yr(Pv).label),1),$(te,{type:"info",size:"small"},{default:G(()=>[jt(qe(Yr(Pv).text),1)]),_:1})])],32),(_t(!0),er(Fi,null,pu(h.value,(B,H)=>(_t(),er("div",{key:H,class:"workflow-dropdown-item cursor flex p-8-12 align-center",onClick:Mn(ne=>x(Yr(F0),B,"function"),["stop"]),onMousedown:Mn(ne=>T(Yr(F0),B,"function"),["stop"])},[(_t(),an(wh(Yr(Eh)("function-lib-node-icon")),{class:"mr-8",size:32})),we("div",CU,[we("div",{class:"lighter ellipsis-1",title:B.name},qe(B.name),9,DU),we("p",null,[B.desc?(_t(),an(te,{key:0,class:"ellipsis-1",type:"info",size:"small",title:B.desc},{default:G(()=>[jt(qe(B.desc),1)]),_:2},1032,["title"])):Ar("",!0)])])],40,jU))),128))]),_:1})]),_:1},8,["label"]),$(z,{label:N.$t("views.application.title"),name:"application"},{default:G(()=>[$(V,{height:"400"},{default:G(()=>[b.value.length>0?(_t(),er("div",IU,[(_t(!0),er(Fi,null,pu(b.value,(B,H)=>(_t(),er("div",{key:H,class:"workflow-dropdown-item cursor flex align-center p-8-12",onClick:Mn(ne=>x(Yr($0),B,"application"),["stop"]),onMousedown:Mn(ne=>T(Yr($0),B,"application"),["stop"])},[(_t(),an(wh(Yr(Eh)("application-node-icon")),{class:"mr-8",size:32,item:B},null,8,["item"])),we("div",FU,[we("div",{class:"lighter ellipsis",title:B.name},qe(B.name),9,$U),we("p",null,[B.desc?(_t(),an(te,{key:0,class:"ellipsis",type:"info",size:"small",title:B.desc},{default:G(()=>[jt(qe(B.desc),1)]),_:2},1032,["title"])):Ar("",!0)])]),we("div",BU,[Yr(pm)(B.type)?(_t(),an(J,{key:0,type:"warning",style:{height:"22px"}},{default:G(()=>[jt(qe(N.$t("views.application.workflow")),1)]),_:1})):(_t(),an(J,{key:1,class:"blue-tag",style:{height:"22px"}},{default:G(()=>[jt(qe(N.$t("views.application.simple")),1)]),_:1}))])],40,LU))),128))])):(_t(),er("div",UU,[$(te,{type:"info"},{default:G(()=>[jt(qe(N.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])],512)),[[Ch,e.show]])}}});const zM=ey(GU,[["__scopeId","data-v-14627b9e"]]),WU={class:"flex-between"},zU={key:0,style:{"max-width":"90%"}},VU={key:1},HU={key:0,src:gU,alt:""},XU={key:1,src:_U,alt:""},YU={style:{width:"280px"},class:"p-12-16"},qU={class:"mt-8 lighter"},KU={class:"title-decoration-1 mb-8 mt-8"},ZU=["onMouseenter"],JU={style:{"max-width":"92%"}},QU=Vr({__name:"NodeContainer",props:{nodeModel:{}},setup(e){const{params:{id:t}}=xs.config.globalProperties.$route,n=Bt({stepContainerHeight:0,inputContainerHeight:0,outputContainerHeight:0}),a=Bt(!1),r=Bt(),l=Co({set:V=>{yt.set(M.nodeModel.properties,"condition",V)},get:()=>M.nodeModel.properties.condition?M.nodeModel.properties.condition:(yt.set(M.nodeModel.properties,"condition","AND"),!0)}),c=Co({set:V=>{yt.set(M.nodeModel.properties,"showNode",V)},get:()=>M.nodeModel.properties.showNode!==void 0?M.nodeModel.properties.showNode:(yt.set(M.nodeModel.properties,"showNode",!0),!0)}),y=V=>{V.ctrlKey||V.metaKey||V.stopPropagation()},h=Co(()=>M.nodeModel.properties.status?M.nodeModel.properties.status:200);function g(V){var z;V.trim()&&V.trim()!==M.nodeModel.properties.stepName&&((z=M.nodeModel.graphModel.nodes)!=null&&z.some(J=>J.properties.stepName===V.trim())?za(it("views.applicationWorkflow.tip.repeatedNodeError")):yt.set(M.nodeModel.properties,"stepName",V.trim()))}const b=()=>{M.nodeModel.graphModel.clearSelectElements(),yt.set(M.nodeModel,"isSelected",!0),yt.set(M.nodeModel,"isHovered",!0),M.nodeModel.graphModel.toFront(M.nodeModel.id)},E=Bt(null),x=()=>{M.nodeModel.graphModel.clearSelectElements();const V=M.nodeModel.graphModel.cloneNode(M.nodeModel.id);yt.set(V,"isSelected",!0),yt.set(V,"isHovered",!0),M.nodeModel.graphModel.toFront(V.id)},T=()=>{qA(it("common.tip"),it("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:it("common.delete"),confirmButtonClass:"danger"}).then(()=>{M.nodeModel.graphModel.deleteNode(M.nodeModel.id)}),M.nodeModel.graphModel.eventCenter.emit("delete_node")},j=V=>{V.height&&(M.nodeModel.virtual||(n.value.stepContainerHeight=V.height,M.nodeModel.setHeight(n.value.stepContainerHeight)))};function N(V){var K,B,H;const z=V.properties.width?V.properties.width:214,J=M.nodeModel.graphModel.addNode({type:V.type,properties:V.properties,x:((K=r.value)==null?void 0:K.x)+z/2+200,y:((B=r.value)==null?void 0:B.y)-V.height});M.nodeModel.graphModel.addEdge({type:"app-edge",sourceNodeId:M.nodeModel.id,sourceAnchorId:(H=r.value)==null?void 0:H.id,targetNodeId:J.id}),te()}const M=e,D=Co(()=>{var V;return M.nodeModel.properties.config.fields?(V=M.nodeModel.properties.config.fields)==null?void 0:V.map(J=>({label:J.label,value:J.value,globeLabel:`{{${M.nodeModel.properties.stepName}.${J.value}}}`,globeValue:`{{context['${M.nodeModel.id}'].${J.value}}}`})):[]});function k(V){return V!==Wn.Base&&V!==Wn.Start}const F=V=>{a.value=!0,r.value=V},te=()=>{a.value=!1,r.value=void 0};return ni(()=>{yt.set(M.nodeModel,"openNodeMenu",V=>{a.value?te():F(V)})}),(V,z)=>{var Ae;const J=pe("ReadWrite"),K=pe("ArrowDownBold"),B=pe("el-icon"),H=pe("el-button"),ne=pe("el-option"),X=pe("el-select"),ge=pe("el-dropdown"),Fe=pe("MoreFilled"),Me=pe("el-dropdown-item"),Xe=pe("el-dropdown-menu"),De=pe("el-alert"),Re=pe("AppIcon"),ce=pe("el-tooltip"),he=pe("el-collapse-transition"),Oe=Fv("resize");return _t(),er("div",{onMousedown:b,class:"workflow-node-container p-16",style:{overflow:"visible"}},[we("div",{class:rd(["step-container app-card p-16",{isSelected:M.nodeModel.isSelected,error:h.value!==200}]),style:{overflow:"visible"}},[Uu((_t(),er("div",null,[we("div",WU,[we("div",{class:"flex align-center",style:zC({maxWidth:(h.value==200,"calc(100% - 85px)")})},[(_t(),an(wh(Yr(Eh)(`${V.nodeModel.type}-icon`)),{class:"mr-8",size:24,item:(Ae=V.nodeModel)==null?void 0:Ae.properties.node_data},null,8,["item"])),k(V.nodeModel.type)?(_t(),er("h4",zU,[$(J,{onMousemove:z[0]||(z[0]=Mn(()=>{},["stop"])),onMousedown:z[1]||(z[1]=Mn(()=>{},["stop"])),onKeydown:z[2]||(z[2]=Mn(()=>{},["stop"])),onClick:z[3]||(z[3]=Mn(()=>{},["stop"])),onChange:g,data:V.nodeModel.properties.stepName,trigger:"dblclick"},null,8,["data"])])):(_t(),er("h4",VU,qe(V.nodeModel.properties.stepName),1))],4),we("div",{onMousemove:z[6]||(z[6]=Mn(()=>{},["stop"])),onMousedown:z[7]||(z[7]=Mn(()=>{},["stop"])),onKeydown:z[8]||(z[8]=Mn(()=>{},["stop"])),onClick:z[9]||(z[9]=Mn(()=>{},["stop"]))},[$(H,{text:"",onClick:z[4]||(z[4]=Ve=>c.value=!c.value)},{default:G(()=>[$(B,{class:rd(["arrow-icon color-secondary",c.value?"rotate-180":""])},{default:G(()=>[$(K)]),_:1},8,["class"])]),_:1}),k(V.nodeModel.type)?(_t(),an(ge,{key:0,teleported:!1,trigger:"click",placement:"bottom-start"},{dropdown:G(()=>[we("div",YU,[we("h5",null,qe(V.$t("views.applicationWorkflow.condition.title")),1),we("p",qU,[we("span",null,qe(V.$t("views.applicationWorkflow.condition.front")),1),$(X,{modelValue:l.value,"onUpdate:modelValue":z[5]||(z[5]=Ve=>l.value=Ve),size:"small",style:{width:"60px",margin:"0 8px"}},{default:G(()=>[$(ne,{label:V.$t("views.applicationWorkflow.condition.AND"),value:"AND"},null,8,["label"]),$(ne,{label:V.$t("views.applicationWorkflow.condition.OR"),value:"OR"},null,8,["label"])]),_:1},8,["modelValue"]),we("span",null,qe(V.$t("views.applicationWorkflow.condition.text")),1)])])]),default:G(()=>[$(H,{text:""},{default:G(()=>[l.value==="OR"?(_t(),er("img",HU)):Ar("",!0),l.value==="AND"?(_t(),er("img",XU)):Ar("",!0)]),_:1})]),_:1})):Ar("",!0),k(V.nodeModel.type)?(_t(),an(ge,{key:1,teleported:!1,trigger:"click"},{dropdown:G(()=>[$(Xe,{style:{"min-width":"80px"}},{default:G(()=>[$(Me,{onClick:x,class:"p-8"},{default:G(()=>[jt(qe(V.$t("common.copy")),1)]),_:1}),$(Me,{onClick:T,class:"border-t p-8"},{default:G(()=>[jt(qe(V.$t("common.delete")),1)]),_:1})]),_:1})]),default:G(()=>[$(H,{text:""},{default:G(()=>[$(B,{class:"color-secondary"},{default:G(()=>[$(Fe)]),_:1})]),_:1})]),_:1})):Ar("",!0)],32)]),$(he,null,{default:G(()=>[Uu(we("div",{onMousedown:z[11]||(z[11]=Mn(()=>{},["stop"])),onKeydown:z[12]||(z[12]=Mn(()=>{},["stop"])),onClick:z[13]||(z[13]=Mn(()=>{},["stop"])),class:"mt-16"},[h.value!=200?(_t(),an(De,{key:0,class:"mb-16",title:M.nodeModel.type==="application-node"?V.$t("views.applicationWorkflow.tip.applicationNodeError"):V.$t("views.applicationWorkflow.tip.functionNodeError"),type:"error","show-icon":"",closable:!1},null,8,["title"])):Ar("",!0),VC(V.$slots,"default",{},void 0,!0),D.value.length>0?(_t(),er(Fi,{key:1},[we("h5",KU,qe(V.$t("chat.executionDetails.paramOutput")),1),(_t(!0),er(Fi,null,pu(D.value,(Ve,dt)=>(_t(),er("div",{key:dt,class:"flex-between border-r-4 p-8-12 mb-8 layout-bg lighter",onMouseenter:mt=>E.value=dt,onMouseleave:z[10]||(z[10]=mt=>E.value=null)},[we("span",JU,qe(Ve.label)+" "+qe("{"+Ve.value+"}"),1),E.value===dt?(_t(),an(ce,{key:0,effect:"dark",content:V.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:G(()=>[$(H,{link:"",onClick:mt=>Yr(YA)(Ve.globeLabel),style:{padding:"0"}},{default:G(()=>[$(Re,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):Ar("",!0)],40,ZU))),128))],64)):Ar("",!0)],544),[[Ch,c.value]])]),_:3})])),[[Oe,j]])],2),$(he,null,{default:G(()=>[a.value?(_t(),an(zM,{key:0,onMousemove:z[14]||(z[14]=Mn(()=>{},["stop"])),onMousedown:z[15]||(z[15]=Mn(()=>{},["stop"])),onClick:z[16]||(z[16]=Mn(()=>{},["stop"])),onWheel:y,show:a.value,id:Yr(t),style:{left:"100%",top:"50%",transform:"translate(0, -50%)"},onClickNodes:N},null,8,["show","id"])):Ar("",!0)]),_:1})],32)}}});const sa=ey(QU,[["__scopeId","data-v-196e17fb"]]),eG={class:"title-decoration-1 mb-8"},tG={class:"flex-between w-full"},nG={class:"flex align-center"},rG={class:"mr-4"},oG={class:"flex-between"},iG={class:"flex align-center"},aG={class:"mr-4"},uG=Vr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=tf(),n=k=>k.ctrlKey===!0?(k.preventDefault(),!0):(k.stopPropagation(),!0);function a(k){yt.set(b.nodeModel.properties.node_data,"system",k)}function r(k){yt.set(b.nodeModel.properties.node_data,"prompt",k)}const l=k=>{var F;k?(F=T.value)==null||F.reset_default(k,c):D({})},{params:{id:c}}=xs.config.globalProperties.$route,h={model_id:"",system:"",prompt:`${it("views.applicationWorkflow.nodes.aiChatNode.defaultPrompt")}：
{{${it("views.applicationWorkflow.nodes.searchDatasetNode.label")}.data}}
${it("views.problem.title")}：
{{${it("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogue_number:1,is_result:!1,temperature:null,max_tokens:null,dialogue_type:"WORKFLOW"},g=Co({get:()=>(b.nodeModel.properties.node_data||yt.set(b.nodeModel.properties,"node_data",h),b.nodeModel.properties.node_data),set:k=>{yt.set(b.nodeModel.properties,"node_data",k)}}),b=e,E=Bt(),x=Bt(null),T=Bt(),j=()=>{var k;return(k=E.value)==null?void 0:k.validate().catch(F=>Promise.reject({node:b.nodeModel,errMessage:F}))};function N(){c?Sa.getApplicationModel(c).then(k=>{x.value=yt.groupBy(k==null?void 0:k.data,"provider")}):t.asyncGetModel().then(k=>{x.value=yt.groupBy(k==null?void 0:k.data,"provider")})}const M=k=>{var F;k&&((F=T.value)==null||F.open(k,c,g.value.model_params_setting))};function D(k){yt.set(b.nodeModel.properties.node_data,"model_params_setting",k)}return ni(()=>{var k;N(),typeof((k=b.nodeModel.properties.node_data)==null?void 0:k.is_result)>"u"&&iy(b.nodeModel)&&yt.set(b.nodeModel.properties.node_data,"is_result",!0),yt.set(b.nodeModel,"validate",j),g.value.dialogue_type||(g.value.dialogue_type="WORKFLOW")}),(k,F)=>{const te=pe("Setting"),V=pe("el-icon"),z=pe("el-button"),J=pe("ModelSelect"),K=pe("el-form-item"),B=pe("MdEditorMagnify"),H=pe("AppIcon"),ne=pe("el-tooltip"),X=pe("el-option"),ge=pe("el-select"),Fe=pe("el-input-number"),Me=pe("el-switch"),Xe=pe("el-form"),De=pe("el-card");return _t(),an(sa,{nodeModel:k.nodeModel},{default:G(()=>[we("h5",eG,qe(k.$t("views.applicationWorkflow.nodeSetting")),1),$(De,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:G(()=>[$(Xe,{onSubmit:F[8]||(F[8]=Mn(()=>{},["prevent"])),model:g.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:E,"hide-required-asterisk":""},{default:G(()=>[$(K,{label:k.$t("views.application.applicationForm.form.aiModel.label"),prop:"model_id",rules:{required:!0,message:k.$t("views.application.applicationForm.form.aiModel.placeholder"),trigger:"change"}},{label:G(()=>[we("div",tG,[we("div",null,[we("span",null,[jt(qe(k.$t("views.application.applicationForm.form.aiModel.label")),1),F[9]||(F[9]=we("span",{class:"danger"},"*",-1))])]),$(z,{disabled:!g.value.model_id,type:"primary",link:"",onClick:F[0]||(F[0]=Re=>M(g.value.model_id)),onRefreshForm:D},{default:G(()=>[$(V,null,{default:G(()=>[$(te)]),_:1})]),_:1},8,["disabled"])])]),default:G(()=>[$(J,{onChange:l,onWheel:n,teleported:!1,modelValue:g.value.model_id,"onUpdate:modelValue":F[1]||(F[1]=Re=>g.value.model_id=Re),placeholder:k.$t("views.application.applicationForm.form.aiModel.placeholder"),options:x.value,onSubmitModel:N,showFooter:""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),$(K,{label:k.$t("views.application.applicationForm.form.roleSettings.label")},{default:G(()=>[$(B,{title:k.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:g.value.system,"onUpdate:modelValue":F[2]||(F[2]=Re=>g.value.system=Re),style:{height:"100px"},onSubmitDialog:a,placeholder:k.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),$(K,{label:k.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:k.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:G(()=>[we("div",nG,[we("div",rG,[we("span",null,[jt(qe(k.$t("views.application.applicationForm.form.prompt.label")),1),F[10]||(F[10]=we("span",{class:"danger"},"*",-1))])]),$(ne,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:G(()=>[jt(qe(k.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:G(()=>[$(H,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:G(()=>[$(B,{onWheel:n,title:k.$t("views.application.applicationForm.form.prompt.label"),modelValue:g.value.prompt,"onUpdate:modelValue":F[3]||(F[3]=Re=>g.value.prompt=Re),style:{height:"150px"},onSubmitDialog:r},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),$(K,{label:k.$t("views.application.applicationForm.form.historyRecord.label")},{label:G(()=>[we("div",oG,[we("div",null,qe(k.$t("views.application.applicationForm.form.historyRecord.label")),1),$(ge,{modelValue:g.value.dialogue_type,"onUpdate:modelValue":F[4]||(F[4]=Re=>g.value.dialogue_type=Re),type:"small",style:{width:"100px"}},{default:G(()=>[$(X,{label:k.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),$(X,{label:k.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:G(()=>[$(Fe,{modelValue:g.value.dialogue_number,"onUpdate:modelValue":F[5]||(F[5]=Re=>g.value.dialogue_number=Re),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),$(K,{label:k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:F[7]||(F[7]=Mn(()=>{},["prevent"]))},{label:G(()=>[we("div",iG,[we("div",aG,[we("span",null,[jt(qe(k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),F[11]||(F[11]=we("span",{class:"danger"},"*",-1))])]),$(ne,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:G(()=>[jt(qe(k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:G(()=>[$(H,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:G(()=>[$(Me,{size:"small",modelValue:g.value.is_result,"onUpdate:modelValue":F[6]||(F[6]=Re=>g.value.is_result=Re)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),$(Zm,{ref_key:"AIModeParamSettingDialogRef",ref:T,onRefresh:D},null,512)]),_:1},8,["nodeModel"])}}});var B0={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(window,function(){return function(n){var a={};function r(l){if(a[l])return a[l].exports;var c=a[l]={i:l,l:!1,exports:{}};return n[l].call(c.exports,c,c.exports,r),c.l=!0,c.exports}return r.m=n,r.c=a,r.d=function(l,c,y){r.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:y})},r.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},r.t=function(l,c){if(1&c&&(l=r(l)),8&c||4&c&&typeof l=="object"&&l&&l.__esModule)return l;var y=Object.create(null);if(r.r(y),Object.defineProperty(y,"default",{enumerable:!0,value:l}),2&c&&typeof l!="string")for(var h in l)r.d(y,h,(function(g){return l[g]}).bind(null,h));return y},r.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return r.d(c,"a",c),c},r.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},r.p="",r(r.s=222)}([function(n,a,r){r.d(a,"a",function(){return V}),r.d(a,"b",function(){return te}),r.d(a,"c",function(){return pt}),r.d(a,"d",function(){return Jt}),r.d(a,"e",function(){return D}),r.d(a,"f",function(){return F}),r.d(a,"g",function(){return D}),r.d(a,"h",function(){return mt}),r.d(a,"i",function(){return c}),r.d(a,"j",function(){return dt}),r.d(a,"k",function(){return X});var l,c,y,h,g,b,E,x={},T=[],j=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function N(Ce,ye){for(var Pe in ye)Ce[Pe]=ye[Pe];return Ce}function M(Ce){var ye=Ce.parentNode;ye&&ye.removeChild(Ce)}function D(Ce,ye,Pe){var bt,Vt,xt,nn={};for(xt in ye)xt=="key"?bt=ye[xt]:xt=="ref"?Vt=ye[xt]:nn[xt]=ye[xt];if(arguments.length>2&&(nn.children=arguments.length>3?l.call(arguments,2):Pe),typeof Ce=="function"&&Ce.defaultProps!=null)for(xt in Ce.defaultProps)nn[xt]===void 0&&(nn[xt]=Ce.defaultProps[xt]);return k(Ce,nn,bt,Vt,null)}function k(Ce,ye,Pe,bt,Vt){var xt={type:Ce,props:ye,key:Pe,ref:bt,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:Vt??++y};return Vt==null&&c.vnode!=null&&c.vnode(xt),xt}function F(){return{current:null}}function te(Ce){return Ce.children}function V(Ce,ye){this.props=Ce,this.context=ye}function z(Ce,ye){if(ye==null)return Ce.__?z(Ce.__,Ce.__.__k.indexOf(Ce)+1):null;for(var Pe;ye<Ce.__k.length;ye++)if((Pe=Ce.__k[ye])!=null&&Pe.__e!=null)return Pe.__e;return typeof Ce.type=="function"?z(Ce):null}function J(Ce){var ye,Pe;if((Ce=Ce.__)!=null&&Ce.__c!=null){for(Ce.__e=Ce.__c.base=null,ye=0;ye<Ce.__k.length;ye++)if((Pe=Ce.__k[ye])!=null&&Pe.__e!=null){Ce.__e=Ce.__c.base=Pe.__e;break}return J(Ce)}}function K(Ce){(!Ce.__d&&(Ce.__d=!0)&&h.push(Ce)&&!B.__r++||b!==c.debounceRendering)&&((b=c.debounceRendering)||g)(B)}function B(){for(var Ce;B.__r=h.length;)Ce=h.sort(function(ye,Pe){return ye.__v.__b-Pe.__v.__b}),h=[],Ce.some(function(ye){var Pe,bt,Vt,xt,nn,yn;ye.__d&&(nn=(xt=(Pe=ye).__v).__e,(yn=Pe.__P)&&(bt=[],(Vt=N({},xt)).__v=xt.__v+1,Re(yn,xt,Vt,Pe.__n,yn.ownerSVGElement!==void 0,xt.__h!=null?[nn]:null,bt,nn??z(xt),xt.__h),ce(bt,xt),xt.__e!=nn&&J(xt)))})}function H(Ce,ye,Pe,bt,Vt,xt,nn,yn,xn,pn){var lt,gn,$e,vn,Yn,Q,qn,wr=bt&&bt.__k||T,Lr=wr.length;for(Pe.__k=[],lt=0;lt<ye.length;lt++)if((vn=Pe.__k[lt]=(vn=ye[lt])==null||typeof vn=="boolean"?null:typeof vn=="string"||typeof vn=="number"||typeof vn=="bigint"?k(null,vn,null,null,vn):Array.isArray(vn)?k(te,{children:vn},null,null,null):vn.__b>0?k(vn.type,vn.props,vn.key,null,vn.__v):vn)!=null){if(vn.__=Pe,vn.__b=Pe.__b+1,($e=wr[lt])===null||$e&&vn.key==$e.key&&vn.type===$e.type)wr[lt]=void 0;else for(gn=0;gn<Lr;gn++){if(($e=wr[gn])&&vn.key==$e.key&&vn.type===$e.type){wr[gn]=void 0;break}$e=null}Re(Ce,vn,$e=$e||x,Vt,xt,nn,yn,xn,pn),Yn=vn.__e,(gn=vn.ref)&&$e.ref!=gn&&(qn||(qn=[]),$e.ref&&qn.push($e.ref,null,vn),qn.push(gn,vn.__c||Yn,vn)),Yn!=null?(Q==null&&(Q=Yn),typeof vn.type=="function"&&vn.__k===$e.__k?vn.__d=xn=ne(vn,xn,Ce):xn=ge(Ce,vn,$e,wr,Yn,xn),typeof Pe.type=="function"&&(Pe.__d=xn)):xn&&$e.__e==xn&&xn.parentNode!=Ce&&(xn=z($e))}for(Pe.__e=Q,lt=Lr;lt--;)wr[lt]!=null&&(typeof Pe.type=="function"&&wr[lt].__e!=null&&wr[lt].__e==Pe.__d&&(Pe.__d=z(bt,lt+1)),Ae(wr[lt],wr[lt]));if(qn)for(lt=0;lt<qn.length;lt++)Oe(qn[lt],qn[++lt],qn[++lt])}function ne(Ce,ye,Pe){for(var bt,Vt=Ce.__k,xt=0;Vt&&xt<Vt.length;xt++)(bt=Vt[xt])&&(bt.__=Ce,ye=typeof bt.type=="function"?ne(bt,ye,Pe):ge(Pe,bt,bt,Vt,bt.__e,ye));return ye}function X(Ce,ye){return ye=ye||[],Ce==null||typeof Ce=="boolean"||(Array.isArray(Ce)?Ce.some(function(Pe){X(Pe,ye)}):ye.push(Ce)),ye}function ge(Ce,ye,Pe,bt,Vt,xt){var nn,yn,xn;if(ye.__d!==void 0)nn=ye.__d,ye.__d=void 0;else if(Pe==null||Vt!=xt||Vt.parentNode==null)e:if(xt==null||xt.parentNode!==Ce)Ce.appendChild(Vt),nn=null;else{for(yn=xt,xn=0;(yn=yn.nextSibling)&&xn<bt.length;xn+=2)if(yn==Vt)break e;Ce.insertBefore(Vt,xt),nn=xt}return nn!==void 0?nn:Vt.nextSibling}function Fe(Ce,ye,Pe){ye[0]==="-"?Ce.setProperty(ye,Pe):Ce[ye]=Pe==null?"":typeof Pe!="number"||j.test(ye)?Pe:Pe+"px"}function Me(Ce,ye,Pe,bt,Vt){var xt;e:if(ye==="style")if(typeof Pe=="string")Ce.style.cssText=Pe;else{if(typeof bt=="string"&&(Ce.style.cssText=bt=""),bt)for(ye in bt)Pe&&ye in Pe||Fe(Ce.style,ye,"");if(Pe)for(ye in Pe)bt&&Pe[ye]===bt[ye]||Fe(Ce.style,ye,Pe[ye])}else if(ye[0]==="o"&&ye[1]==="n")xt=ye!==(ye=ye.replace(/Capture$/,"")),ye=ye.toLowerCase()in Ce?ye.toLowerCase().slice(2):ye.slice(2),Ce.l||(Ce.l={}),Ce.l[ye+xt]=Pe,Pe?bt||Ce.addEventListener(ye,xt?De:Xe,xt):Ce.removeEventListener(ye,xt?De:Xe,xt);else if(ye!=="dangerouslySetInnerHTML"){if(Vt)ye=ye.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(ye!=="href"&&ye!=="list"&&ye!=="form"&&ye!=="tabIndex"&&ye!=="download"&&ye in Ce)try{Ce[ye]=Pe??"";break e}catch{}typeof Pe=="function"||(Pe!=null&&(Pe!==!1||ye[0]==="a"&&ye[1]==="r")?Ce.setAttribute(ye,Pe):Ce.removeAttribute(ye))}}function Xe(Ce){this.l[Ce.type+!1](c.event?c.event(Ce):Ce)}function De(Ce){this.l[Ce.type+!0](c.event?c.event(Ce):Ce)}function Re(Ce,ye,Pe,bt,Vt,xt,nn,yn,xn){var pn,lt,gn,$e,vn,Yn,Q,qn,wr,Lr,Hr,zn=ye.type;if(ye.constructor!==void 0)return null;Pe.__h!=null&&(xn=Pe.__h,yn=ye.__e=Pe.__e,ye.__h=null,xt=[yn]),(pn=c.__b)&&pn(ye);try{e:if(typeof zn=="function"){if(qn=ye.props,wr=(pn=zn.contextType)&&bt[pn.__c],Lr=pn?wr?wr.props.value:pn.__:bt,Pe.__c?Q=(lt=ye.__c=Pe.__c).__=lt.__E:("prototype"in zn&&zn.prototype.render?ye.__c=lt=new zn(qn,Lr):(ye.__c=lt=new V(qn,Lr),lt.constructor=zn,lt.render=Ve),wr&&wr.sub(lt),lt.props=qn,lt.state||(lt.state={}),lt.context=Lr,lt.__n=bt,gn=lt.__d=!0,lt.__h=[]),lt.__s==null&&(lt.__s=lt.state),zn.getDerivedStateFromProps!=null&&(lt.__s==lt.state&&(lt.__s=N({},lt.__s)),N(lt.__s,zn.getDerivedStateFromProps(qn,lt.__s))),$e=lt.props,vn=lt.state,gn)zn.getDerivedStateFromProps==null&&lt.componentWillMount!=null&&lt.componentWillMount(),lt.componentDidMount!=null&&lt.__h.push(lt.componentDidMount);else{if(zn.getDerivedStateFromProps==null&&qn!==$e&&lt.componentWillReceiveProps!=null&&lt.componentWillReceiveProps(qn,Lr),!lt.__e&&lt.shouldComponentUpdate!=null&&lt.shouldComponentUpdate(qn,lt.__s,Lr)===!1||ye.__v===Pe.__v){lt.props=qn,lt.state=lt.__s,ye.__v!==Pe.__v&&(lt.__d=!1),lt.__v=ye,ye.__e=Pe.__e,ye.__k=Pe.__k,ye.__k.forEach(function(Ao){Ao&&(Ao.__=ye)}),lt.__h.length&&nn.push(lt);break e}lt.componentWillUpdate!=null&&lt.componentWillUpdate(qn,lt.__s,Lr),lt.componentDidUpdate!=null&&lt.__h.push(function(){lt.componentDidUpdate($e,vn,Yn)})}lt.context=Lr,lt.props=qn,lt.state=lt.__s,(pn=c.__r)&&pn(ye),lt.__d=!1,lt.__v=ye,lt.__P=Ce,pn=lt.render(lt.props,lt.state,lt.context),lt.state=lt.__s,lt.getChildContext!=null&&(bt=N(N({},bt),lt.getChildContext())),gn||lt.getSnapshotBeforeUpdate==null||(Yn=lt.getSnapshotBeforeUpdate($e,vn)),Hr=pn!=null&&pn.type===te&&pn.key==null?pn.props.children:pn,H(Ce,Array.isArray(Hr)?Hr:[Hr],ye,Pe,bt,Vt,xt,nn,yn,xn),lt.base=ye.__e,ye.__h=null,lt.__h.length&&nn.push(lt),Q&&(lt.__E=lt.__=null),lt.__e=!1}else xt==null&&ye.__v===Pe.__v?(ye.__k=Pe.__k,ye.__e=Pe.__e):ye.__e=he(Pe.__e,ye,Pe,bt,Vt,xt,nn,xn);(pn=c.diffed)&&pn(ye)}catch(Ao){ye.__v=null,(xn||xt!=null)&&(ye.__e=yn,ye.__h=!!xn,xt[xt.indexOf(yn)]=null),c.__e(Ao,ye,Pe)}}function ce(Ce,ye){c.__c&&c.__c(ye,Ce),Ce.some(function(Pe){try{Ce=Pe.__h,Pe.__h=[],Ce.some(function(bt){bt.call(Pe)})}catch(bt){c.__e(bt,Pe.__v)}})}function he(Ce,ye,Pe,bt,Vt,xt,nn,yn){var xn,pn,lt,gn=Pe.props,$e=ye.props,vn=ye.type,Yn=0;if(vn==="svg"&&(Vt=!0),xt!=null){for(;Yn<xt.length;Yn++)if((xn=xt[Yn])&&"setAttribute"in xn==!!vn&&(vn?xn.localName===vn:xn.nodeType===3)){Ce=xn,xt[Yn]=null;break}}if(Ce==null){if(vn===null)return document.createTextNode($e);Ce=Vt?document.createElementNS("http://www.w3.org/2000/svg",vn):document.createElement(vn,$e.is&&$e),xt=null,yn=!1}if(vn===null)gn===$e||yn&&Ce.data===$e||(Ce.data=$e);else{if(xt=xt&&l.call(Ce.childNodes),pn=(gn=Pe.props||x).dangerouslySetInnerHTML,lt=$e.dangerouslySetInnerHTML,!yn){if(xt!=null)for(gn={},Yn=0;Yn<Ce.attributes.length;Yn++)gn[Ce.attributes[Yn].name]=Ce.attributes[Yn].value;(lt||pn)&&(lt&&(pn&&lt.__html==pn.__html||lt.__html===Ce.innerHTML)||(Ce.innerHTML=lt&&lt.__html||""))}if(function(Q,qn,wr,Lr,Hr){var zn;for(zn in wr)zn==="children"||zn==="key"||zn in qn||Me(Q,zn,null,wr[zn],Lr);for(zn in qn)Hr&&typeof qn[zn]!="function"||zn==="children"||zn==="key"||zn==="value"||zn==="checked"||wr[zn]===qn[zn]||Me(Q,zn,qn[zn],wr[zn],Lr)}(Ce,$e,gn,Vt,yn),lt)ye.__k=[];else if(Yn=ye.props.children,H(Ce,Array.isArray(Yn)?Yn:[Yn],ye,Pe,bt,Vt&&vn!=="foreignObject",xt,nn,xt?xt[0]:Pe.__k&&z(Pe,0),yn),xt!=null)for(Yn=xt.length;Yn--;)xt[Yn]!=null&&M(xt[Yn]);yn||("value"in $e&&(Yn=$e.value)!==void 0&&(Yn!==gn.value||Yn!==Ce.value||vn==="progress"&&!Yn)&&Me(Ce,"value",Yn,gn.value,!1),"checked"in $e&&(Yn=$e.checked)!==void 0&&Yn!==Ce.checked&&Me(Ce,"checked",Yn,gn.checked,!1))}return Ce}function Oe(Ce,ye,Pe){try{typeof Ce=="function"?Ce(ye):Ce.current=ye}catch(bt){c.__e(bt,Pe)}}function Ae(Ce,ye,Pe){var bt,Vt;if(c.unmount&&c.unmount(Ce),(bt=Ce.ref)&&(bt.current&&bt.current!==Ce.__e||Oe(bt,null,ye)),(bt=Ce.__c)!=null){if(bt.componentWillUnmount)try{bt.componentWillUnmount()}catch(xt){c.__e(xt,ye)}bt.base=bt.__P=null}if(bt=Ce.__k)for(Vt=0;Vt<bt.length;Vt++)bt[Vt]&&Ae(bt[Vt],ye,typeof Ce.type!="function");Pe||Ce.__e==null||M(Ce.__e),Ce.__e=Ce.__d=void 0}function Ve(Ce,ye,Pe){return this.constructor(Ce,Pe)}function dt(Ce,ye,Pe){var bt,Vt,xt;c.__&&c.__(Ce,ye),Vt=(bt=typeof Pe=="function")?null:Pe&&Pe.__k||ye.__k,xt=[],Re(ye,Ce=(!bt&&Pe||ye).__k=D(te,null,[Ce]),Vt||x,x,ye.ownerSVGElement!==void 0,!bt&&Pe?[Pe]:Vt?null:ye.firstChild?l.call(ye.childNodes):null,xt,!bt&&Pe?Pe:Vt?Vt.__e:ye.firstChild,bt),ce(xt,Ce)}function mt(Ce,ye){dt(Ce,ye,mt)}function pt(Ce,ye,Pe){var bt,Vt,xt,nn=N({},Ce.props);for(xt in ye)xt=="key"?bt=ye[xt]:xt=="ref"?Vt=ye[xt]:nn[xt]=ye[xt];return arguments.length>2&&(nn.children=arguments.length>3?l.call(arguments,2):Pe),k(Ce.type,nn,bt||Ce.key,Vt||Ce.ref,null)}function Jt(Ce,ye){var Pe={__c:ye="__cC"+E++,__:Ce,Consumer:function(bt,Vt){return bt.children(Vt)},Provider:function(bt){var Vt,xt;return this.getChildContext||(Vt=[],(xt={})[ye]=this,this.getChildContext=function(){return xt},this.shouldComponentUpdate=function(nn){this.props.value!==nn.value&&Vt.some(K)},this.sub=function(nn){Vt.push(nn);var yn=nn.componentWillUnmount;nn.componentWillUnmount=function(){Vt.splice(Vt.indexOf(nn),1),yn&&yn.call(nn)}}),bt.children}};return Pe.Provider.__=Pe.Consumer.contextType=Pe}l=T.slice,c={__e:function(Ce,ye){for(var Pe,bt,Vt;ye=ye.__;)if((Pe=ye.__c)&&!Pe.__)try{if((bt=Pe.constructor)&&bt.getDerivedStateFromError!=null&&(Pe.setState(bt.getDerivedStateFromError(Ce)),Vt=Pe.__d),Pe.componentDidCatch!=null&&(Pe.componentDidCatch(Ce),Vt=Pe.__d),Vt)return Pe.__E=Pe}catch(xt){Ce=xt}throw Ce}},y=0,V.prototype.setState=function(Ce,ye){var Pe;Pe=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=N({},this.state),typeof Ce=="function"&&(Ce=Ce(N({},Pe),this.props)),Ce&&N(Pe,Ce),Ce!=null&&this.__v&&(ye&&this.__h.push(ye),K(this))},V.prototype.forceUpdate=function(Ce){this.__v&&(this.__e=!0,Ce&&this.__h.push(Ce),K(this))},V.prototype.render=te,h=[],g=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,B.__r=0,E=0},function(n,a,r){(function(l,c){r.d(a,"a",function(){return K}),r.d(a,"b",function(){return uc}),r.d(a,"c",function(){return da}),r.d(a,"d",function(){return Vn}),r.d(a,"e",function(){return Yt}),r.d(a,"f",function(){return Qt}),r.d(a,"g",function(){return In}),r.d(a,"h",function(){return mi}),r.d(a,"i",function(){return Hr}),r.d(a,"j",function(){return On}),r.d(a,"k",function(){return Za}),r.d(a,"l",function(){return ec}),r.d(a,"m",function(){return Q}),r.d(a,"n",function(){return Wu}),r.d(a,"o",function(){return ne}),r.d(a,"p",function(){return hf}),r.d(a,"q",function(){return Zi}),r.d(a,"r",function(){return zu}),r.d(a,"s",function(){return Gi}),r.d(a,"t",function(){return To}),r.d(a,"u",function(){return nl}),r.d(a,"v",function(){return pf}),r.d(a,"w",function(){return nc}),r.d(a,"x",function(){return Ko}),r.d(a,"y",function(){return Qi}),r.d(a,"z",function(){return Io}),r.d(a,"A",function(){return Jo}),r.d(a,"B",function(){return Bi}),r.d(a,"C",function(){return pn}),r.d(a,"D",function(){return rc}),r.d(a,"E",function(){return Fr}),r.d(a,"F",function(){return Br}),r.d(a,"G",function(){return Jl}),r.d(a,"H",function(){return Zl}),r.d(a,"I",function(){return oc}),r.d(a,"J",function(){return Zo}),r.d(a,"K",function(){return He}),r.d(a,"L",function(){return Jr}),r.d(a,"M",function(){return il});var y=[];Object.freeze(y);var h={};function g(){return++Tn.mobxGuid}function b(S){throw E(!1,S),"X"}function E(S,A){if(!S)throw new Error("[mobx] "+(A||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(h);function x(S){var A=!1;return function(){if(!A)return A=!0,S.apply(this,arguments)}}var T=function(){};function j(S){return S!==null&&typeof S=="object"}function N(S){if(S===null||typeof S!="object")return!1;var A=Object.getPrototypeOf(S);return A===Object.prototype||A===null}function M(S,A,L){Object.defineProperty(S,A,{enumerable:!1,writable:!0,configurable:!0,value:L})}function D(S,A){var L="isMobX"+S;return A.prototype[L]=!0,function(ee){return j(ee)&&ee[L]===!0}}function k(S){return S instanceof Map}function F(S){return S instanceof Set}function te(S){var A=new Set;for(var L in S)A.add(L);return Object.getOwnPropertySymbols(S).forEach(function(ee){Object.getOwnPropertyDescriptor(S,ee).enumerable&&A.add(ee)}),Array.from(A)}function V(S){return S&&S.toString?S.toString():new String(S).toString()}function z(S){return S===null?null:typeof S=="object"?""+S:S}var J=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:Object.getOwnPropertyNames,K=Symbol("mobx administration"),B=function(){function S(A){A===void 0&&(A="Atom@"+g()),this.name=A,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=gn.NOT_TRACKING}return S.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(A){return A()})},S.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(A){return A()})},S.prototype.reportObserved=function(){return tl(this)},S.prototype.reportChanged=function(){Ri(),function(A){A.lowestObserverState!==gn.STALE&&(A.lowestObserverState=gn.STALE,A.observers.forEach(function(L){L.dependenciesState===gn.UP_TO_DATE&&(L.isTracing!==$e.NONE&&fa(L,A),L.onBecomeStale()),L.dependenciesState=gn.STALE}))}(this),$i()},S.prototype.toString=function(){return this.name},S}(),H=D("Atom",B);function ne(S,A,L){A===void 0&&(A=T),L===void 0&&(L=T);var ee,ve=new B(S);return A!==T&&ff("onBecomeObserved",ve,A,ee),L!==T&&Fr(ve,L),ve}var X={identity:function(S,A){return S===A},structural:function(S,A){return Ct(S,A)},default:function(S,A){return Object.is(S,A)},shallow:function(S,A){return Ct(S,A,1)}},ge=function(S,A){return ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,ee){L.__proto__=ee}||function(L,ee){for(var ve in ee)ee.hasOwnProperty(ve)&&(L[ve]=ee[ve])},ge(S,A)};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var Fe=function(){return Fe=Object.assign||function(S){for(var A,L=1,ee=arguments.length;L<ee;L++)for(var ve in A=arguments[L])Object.prototype.hasOwnProperty.call(A,ve)&&(S[ve]=A[ve]);return S},Fe.apply(this,arguments)};function Me(S){var A=typeof Symbol=="function"&&S[Symbol.iterator],L=0;return A?A.call(S):{next:function(){return S&&L>=S.length&&(S=void 0),{value:S&&S[L++],done:!S}}}}function Xe(S,A){var L=typeof Symbol=="function"&&S[Symbol.iterator];if(!L)return S;var ee,ve,Ge=L.call(S),ht=[];try{for(;(A===void 0||A-- >0)&&!(ee=Ge.next()).done;)ht.push(ee.value)}catch(Ht){ve={error:Ht}}finally{try{ee&&!ee.done&&(L=Ge.return)&&L.call(Ge)}finally{if(ve)throw ve.error}}return ht}function De(){for(var S=[],A=0;A<arguments.length;A++)S=S.concat(Xe(arguments[A]));return S}var Re=Symbol("mobx did run lazy initializers"),ce=Symbol("mobx pending decorators"),he={},Oe={};function Ae(S,A){var L=A?he:Oe;return L[S]||(L[S]={configurable:!0,enumerable:A,get:function(){return Ve(this),this[S]},set:function(ee){Ve(this),this[S]=ee}})}function Ve(S){var A,L;if(S[Re]!==!0){var ee=S[ce];if(ee){M(S,Re,!0);var ve=De(Object.getOwnPropertySymbols(ee),Object.keys(ee));try{for(var Ge=Me(ve),ht=Ge.next();!ht.done;ht=Ge.next()){var Ht=ee[ht.value];Ht.propertyCreator(S,Ht.prop,Ht.descriptor,Ht.decoratorTarget,Ht.decoratorArguments)}}catch(_n){A={error:_n}}finally{try{ht&&!ht.done&&(L=Ge.return)&&L.call(Ge)}finally{if(A)throw A.error}}}}}function dt(S,A){return function(){var L,ee=function(ve,Ge,ht,Ht){if(Ht===!0)return A(ve,Ge,ht,ve,L),null;if(!Object.prototype.hasOwnProperty.call(ve,ce)){var _n=ve[ce];M(ve,ce,Fe({},_n))}return ve[ce][Ge]={prop:Ge,propertyCreator:A,descriptor:ht,decoratorTarget:ve,decoratorArguments:L},Ae(Ge,S)};return mt(arguments)?(L=y,ee.apply(null,arguments)):(L=Array.prototype.slice.call(arguments),ee)}}function mt(S){return(S.length===2||S.length===3)&&(typeof S[1]=="string"||typeof S[1]=="symbol")||S.length===4&&S[3]===!0}function pt(S,A,L){return Ko(S)?S:Array.isArray(S)?pn.array(S,{name:L}):N(S)?pn.object(S,void 0,{name:L}):k(S)?pn.map(S,{name:L}):F(S)?pn.set(S,{name:L}):S}function Jt(S){return S}function Ce(S){E(S);var A=dt(!0,function(ee,ve,Ge,ht,Ht){var _n=Ge?Ge.initializer?Ge.initializer.call(ee):Ge.value:void 0;Ui(ee).addObservableProp(ve,_n,S)}),L=(l!==void 0&&l.env,A);return L.enhancer=S,L}var ye={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Pe(S){return S==null?ye:typeof S=="string"?{name:S,deep:!0,proxy:!0}:S}Object.freeze(ye);var bt=Ce(pt),Vt=Ce(function(S,A,L){return S==null||Jo(S)||Qi(S)||Io(S)||Uo(S)?S:Array.isArray(S)?pn.array(S,{name:L,deep:!1}):N(S)?pn.object(S,void 0,{name:L,deep:!1}):k(S)?pn.map(S,{name:L,deep:!1}):F(S)?pn.set(S,{name:L,deep:!1}):b(!1)}),xt=Ce(Jt),nn=Ce(function(S,A,L){return Ct(S,A)?A:S});function yn(S){return S.defaultDecorator?S.defaultDecorator.enhancer:S.deep===!1?Jt:pt}var xn={box:function(S,A){arguments.length>2&&lt("box");var L=Pe(A);return new Mr(S,yn(L),L.name,!0,L.equals)},array:function(S,A){arguments.length>2&&lt("array");var L=Pe(A);return _u(S,yn(L),L.name)},map:function(S,A){arguments.length>2&&lt("map");var L=Pe(A);return new uc(S,yn(L),L.name)},set:function(S,A){arguments.length>2&&lt("set");var L=Pe(A);return new Na(S,yn(L),L.name)},object:function(S,A,L){typeof arguments[1]=="string"&&lt("object");var ee=Pe(L);if(ee.proxy===!1)return Zi({},S,A,ee);var ve=rl(ee),Ge=Zi({},void 0,void 0,ee),ht=Vu(Ge);return df(ht,S,A,ve),ht},ref:xt,shallow:Vt,deep:bt,struct:nn},pn=function(S,A,L){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return bt.apply(null,arguments);if(Ko(S))return S;var ee=N(S)?pn.object(S,A,L):Array.isArray(S)?pn.array(S,A):k(S)?pn.map(S,A):F(S)?pn.set(S,A):S;if(ee!==S)return ee;b(!1)};function lt(S){b("Expected one or two arguments to observable."+S+". Did you accidentally try to use observable."+S+" as decorator?")}Object.keys(xn).forEach(function(S){return pn[S]=xn[S]});var gn,$e,vn=dt(!1,function(S,A,L,ee,ve){var Ge=L.get,ht=L.set,Ht=ve[0]||{};Ui(S).addComputedProp(S,A,Fe({get:Ge,set:ht,context:S},Ht))}),Yn=vn({equals:X.structural}),Q=function(S,A,L){if(typeof A=="string"||S!==null&&typeof S=="object"&&arguments.length===1)return vn.apply(null,arguments);var ee=typeof A=="object"?A:{};return ee.get=S,ee.set=typeof A=="function"?A:ee.set,ee.name=ee.name||S.name||"",new Aa(ee)};Q.struct=Yn,function(S){S[S.NOT_TRACKING=-1]="NOT_TRACKING",S[S.UP_TO_DATE=0]="UP_TO_DATE",S[S.POSSIBLY_STALE=1]="POSSIBLY_STALE",S[S.STALE=2]="STALE"}(gn||(gn={})),function(S){S[S.NONE=0]="NONE",S[S.LOG=1]="LOG",S[S.BREAK=2]="BREAK"}($e||($e={}));var qn=function(S){this.cause=S};function wr(S){return S instanceof qn}function Lr(S){switch(S.dependenciesState){case gn.UP_TO_DATE:return!1;case gn.NOT_TRACKING:case gn.STALE:return!0;case gn.POSSIBLY_STALE:for(var A=Qt(!0),L=je(),ee=S.observing,ve=ee.length,Ge=0;Ge<ve;Ge++){var ht=ee[Ge];if(Ka(ht)){if(Tn.disableErrorBoundaries)ht.get();else try{ht.get()}catch{return rt(L),Yt(A),!0}if(S.dependenciesState===gn.STALE)return rt(L),Yt(A),!0}}return Nn(S),rt(L),Yt(A),!1}}function Hr(){return Tn.trackingDerivation!==null}function zn(S){var A=S.observers.size>0;Tn.computationDepth>0&&A&&b(!1),Tn.allowStateChanges||!A&&Tn.enforceActions!=="strict"||b(!1)}function Ao(S,A,L){var ee=Qt(!0);Nn(S),S.newObserving=new Array(S.observing.length+100),S.unboundDepsCount=0,S.runId=++Tn.runId;var ve,Ge=Tn.trackingDerivation;if(Tn.trackingDerivation=S,Tn.disableErrorBoundaries===!0)ve=A.call(L);else try{ve=A.call(L)}catch(ht){ve=new qn(ht)}return Tn.trackingDerivation=Ge,function(ht){for(var Ht=ht.observing,_n=ht.observing=ht.newObserving,hr=gn.UP_TO_DATE,un=0,$r=ht.unboundDepsCount,dr=0;dr<$r;dr++)(Pr=_n[dr]).diffValue===0&&(Pr.diffValue=1,un!==dr&&(_n[un]=Pr),un++),Pr.dependenciesState>hr&&(hr=Pr.dependenciesState);for(_n.length=un,ht.newObserving=null,$r=Ht.length;$r--;)(Pr=Ht[$r]).diffValue===0&&so(Pr,ht),Pr.diffValue=0;for(;un--;){var Pr;(Pr=_n[un]).diffValue===1&&(Pr.diffValue=0,af(Pr,ht))}hr!==gn.UP_TO_DATE&&(ht.dependenciesState=hr,ht.onBecomeStale())}(S),Yt(ee),ve}function Ee(S){var A=S.observing;S.observing=[];for(var L=A.length;L--;)so(A[L],S);S.dependenciesState=gn.NOT_TRACKING}function He(S){var A=je();try{return S()}finally{rt(A)}}function je(){var S=Tn.trackingDerivation;return Tn.trackingDerivation=null,S}function rt(S){Tn.trackingDerivation=S}function Qt(S){var A=Tn.allowStateReads;return Tn.allowStateReads=S,A}function Yt(S){Tn.allowStateReads=S}function Nn(S){if(S.dependenciesState!==gn.UP_TO_DATE){S.dependenciesState=gn.UP_TO_DATE;for(var A=S.observing,L=A.length;L--;)A[L].lowestObserverState=gn.UP_TO_DATE}}var mr=0,qo=1,ui=Object.getOwnPropertyDescriptor(function(){},"name");ui&&ui.configurable;function Do(S,A,L){var ee=function(){return Bo(S,A,L||this,arguments)};return ee.isMobxAction=!0,ee}function Bo(S,A,L,ee){var ve=On();try{return A.apply(L,ee)}catch(Ge){throw ve.error=Ge,Ge}finally{In(ve)}}function On(S,A,L){var ee=0,ve=je();Ri();var Ge={prevDerivation:ve,prevAllowStateChanges:or(!0),prevAllowStateReads:Qt(!0),notifySpy:!1,startTime:ee,actionId:qo++,parentActionId:mr};return mr=Ge.actionId,Ge}function In(S){mr!==S.actionId&&b("invalid action stack. did you forget to finish an action?"),mr=S.parentActionId,S.error!==void 0&&(Tn.suppressReactionErrors=!0),Xr(S.prevAllowStateChanges),Yt(S.prevAllowStateReads),$i(),rt(S.prevDerivation),S.notifySpy,Tn.suppressReactionErrors=!1}function Vn(S,A){var L,ee=or(S);try{L=A()}finally{Xr(ee)}return L}function or(S){var A=Tn.allowStateChanges;return Tn.allowStateChanges=S,A}function Xr(S){Tn.allowStateChanges=S}var Mr=function(S){function A(L,ee,ve,Ge,ht){ve===void 0&&(ve="ObservableValue@"+g()),ht===void 0&&(ht=X.default);var Ht=S.call(this,ve)||this;return Ht.enhancer=ee,Ht.name=ve,Ht.equals=ht,Ht.hasUnreportedChange=!1,Ht.value=ee(L,void 0,ve),Ht}return function(L,ee){function ve(){this.constructor=L}ge(L,ee),L.prototype=ee===null?Object.create(ee):(ve.prototype=ee.prototype,new ve)}(A,S),A.prototype.dehanceValue=function(L){return this.dehancer!==void 0?this.dehancer(L):L},A.prototype.set=function(L){this.value,(L=this.prepareNewValue(L))!==Tn.UNCHANGED&&this.setNewValue(L)},A.prototype.prepareNewValue=function(L){if(zn(this),ji(this)){var ee=Or(this,{object:this,type:"update",newValue:L});if(!ee)return Tn.UNCHANGED;L=ee.newValue}return L=this.enhancer(L,this.value,this.name),this.equals(this.value,L)?Tn.UNCHANGED:L},A.prototype.setNewValue=function(L){var ee=this.value;this.value=L,this.reportChanged(),xi(this)&&ri(this,{type:"update",object:this,newValue:L,oldValue:ee})},A.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},A.prototype.intercept=function(L){return Ji(this,L)},A.prototype.observe=function(L,ee){return ee&&L({object:this,type:"update",newValue:this.value,oldValue:void 0}),pa(this,L)},A.prototype.toJSON=function(){return this.get()},A.prototype.toString=function(){return this.name+"["+this.value+"]"},A.prototype.valueOf=function(){return z(this.get())},A.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},A}(B),qa=D("ObservableValue",Mr),Aa=function(){function S(A){this.dependenciesState=gn.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=gn.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+g(),this.value=new qn(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=$e.NONE,E(A.get,"missing option for computed: get"),this.derivation=A.get,this.name=A.name||"ComputedValue@"+g(),A.set&&(this.setter=Do(this.name+"-setter",A.set)),this.equals=A.equals||(A.compareStructural||A.struct?X.structural:X.default),this.scope=A.context,this.requiresReaction=!!A.requiresReaction,this.keepAlive=!!A.keepAlive}return S.prototype.onBecomeStale=function(){(function(A){A.lowestObserverState===gn.UP_TO_DATE&&(A.lowestObserverState=gn.POSSIBLY_STALE,A.observers.forEach(function(L){L.dependenciesState===gn.UP_TO_DATE&&(L.dependenciesState=gn.POSSIBLY_STALE,L.isTracing!==$e.NONE&&fa(L,A),L.onBecomeStale())}))})(this)},S.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(A){return A()})},S.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(A){return A()})},S.prototype.get=function(){this.isComputing&&b("Cycle detected in computation "+this.name+": "+this.derivation),Tn.inBatch!==0||this.observers.size!==0||this.keepAlive?(tl(this),Lr(this)&&this.trackAndCompute()&&function(L){L.lowestObserverState!==gn.STALE&&(L.lowestObserverState=gn.STALE,L.observers.forEach(function(ee){ee.dependenciesState===gn.POSSIBLY_STALE?ee.dependenciesState=gn.STALE:ee.dependenciesState===gn.UP_TO_DATE&&(L.lowestObserverState=gn.UP_TO_DATE)}))}(this)):Lr(this)&&(this.warnAboutUntrackedRead(),Ri(),this.value=this.computeValue(!1),$i());var A=this.value;if(wr(A))throw A.cause;return A},S.prototype.peek=function(){var A=this.computeValue(!1);if(wr(A))throw A.cause;return A},S.prototype.set=function(A){if(this.setter){E(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,A)}finally{this.isRunningSetter=!1}}else E(!1,!1)},S.prototype.trackAndCompute=function(){var A=this.value,L=this.dependenciesState===gn.NOT_TRACKING,ee=this.computeValue(!0),ve=L||wr(A)||wr(ee)||!this.equals(A,ee);return ve&&(this.value=ee),ve},S.prototype.computeValue=function(A){var L;if(this.isComputing=!0,Tn.computationDepth++,A)L=Ao(this,this.derivation,this.scope);else if(Tn.disableErrorBoundaries===!0)L=this.derivation.call(this.scope);else try{L=this.derivation.call(this.scope)}catch(ee){L=new qn(ee)}return Tn.computationDepth--,this.isComputing=!1,L},S.prototype.suspend=function(){this.keepAlive||(Ee(this),this.value=void 0)},S.prototype.observe=function(A,L){var ee=this,ve=!0,Ge=void 0;return ec(function(){var ht=ee.get();if(!ve||L){var Ht=je();A({type:"update",object:ee,newValue:ht,oldValue:Ge}),rt(Ht)}ve=!1,Ge=ht})},S.prototype.warnAboutUntrackedRead=function(){},S.prototype.toJSON=function(){return this.get()},S.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},S.prototype.valueOf=function(){return z(this.get())},S.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},S}(),Ka=D("ComputedValue",Aa),Gu=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},dd={};function Xl(){return typeof window<"u"?window:c!==void 0?c:typeof self<"u"?self:dd}var qi=!0,Ss=!1,Tn=function(){var S=Xl();return S.__mobxInstanceCount>0&&!S.__mobxGlobals&&(qi=!1),S.__mobxGlobals&&S.__mobxGlobals.version!==new Gu().version&&(qi=!1),qi?S.__mobxGlobals?(S.__mobxInstanceCount+=1,S.__mobxGlobals.UNCHANGED||(S.__mobxGlobals.UNCHANGED={}),S.__mobxGlobals):(S.__mobxInstanceCount=1,S.__mobxGlobals=new Gu):(setTimeout(function(){Ss||b("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Gu)}();function af(S,A){S.observers.add(A),S.lowestObserverState>A.dependenciesState&&(S.lowestObserverState=A.dependenciesState)}function so(S,A){S.observers.delete(A),S.observers.size===0&&Yl(S)}function Yl(S){S.isPendingUnobservation===!1&&(S.isPendingUnobservation=!0,Tn.pendingUnobservations.push(S))}function Ri(){Tn.inBatch++}function $i(){if(--Tn.inBatch==0){Kl();for(var S=Tn.pendingUnobservations,A=0;A<S.length;A++){var L=S[A];L.isPendingUnobservation=!1,L.observers.size===0&&(L.isBeingObserved&&(L.isBeingObserved=!1,L.onBecomeUnobserved()),L instanceof Aa&&L.suspend())}Tn.pendingUnobservations=[]}}function tl(S){var A=Tn.trackingDerivation;return A!==null?(A.runId!==S.lastAccessedBy&&(S.lastAccessedBy=A.runId,A.newObserving[A.unboundDepsCount++]=S,S.isBeingObserved||(S.isBeingObserved=!0,S.onBecomeObserved())),!0):(S.observers.size===0&&Tn.inBatch>0&&Yl(S),!1)}function fa(S,A){if(S.isTracing===$e.BREAK){var L=[];Ki(To(S),L,1),new Function(`debugger;
/*
Tracing '`+S.name+`'

You are entering this break point because derivation '`+S.name+"' is being traced and '"+A.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(S instanceof Aa?S.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+L.join(`
`)+`
*/
    `)()}}function Ki(S,A,L){A.length>=1e3?A.push("(and many more)"):(A.push(""+new Array(L).join("	")+S.name),S.dependencies&&S.dependencies.forEach(function(ee){return Ki(ee,A,L+1)}))}var da=function(){function S(A,L,ee,ve){A===void 0&&(A="Reaction@"+g()),ve===void 0&&(ve=!1),this.name=A,this.onInvalidate=L,this.errorHandler=ee,this.requiresObservable=ve,this.observing=[],this.newObserving=[],this.dependenciesState=gn.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+g(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=$e.NONE}return S.prototype.onBecomeStale=function(){this.schedule()},S.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Tn.pendingReactions.push(this),Kl())},S.prototype.isScheduled=function(){return this._isScheduled},S.prototype.runReaction=function(){if(!this.isDisposed){if(Ri(),this._isScheduled=!1,Lr(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(A){this.reportExceptionInDerivation(A)}}$i()}},S.prototype.track=function(A){if(!this.isDisposed){Ri(),this._isRunning=!0;var L=Ao(this,A,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Ee(this),wr(L)&&this.reportExceptionInDerivation(L.cause),$i()}},S.prototype.reportExceptionInDerivation=function(A){var L=this;if(this.errorHandler)this.errorHandler(A,this);else{if(Tn.disableErrorBoundaries)throw A;Tn.suppressReactionErrors,Tn.globalReactionErrorHandlers.forEach(function(ee){return ee(A,L)})}},S.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Ri(),Ee(this),$i()))},S.prototype.getDisposer=function(){var A=this.dispose.bind(this);return A[K]=this,A},S.prototype.toString=function(){return"Reaction["+this.name+"]"},S.prototype.trace=function(A){A===void 0&&(A=!1),function(){for(var L=[],ee=0;ee<arguments.length;ee++)L[ee]=arguments[ee];var ve=!1;typeof L[L.length-1]=="boolean"&&(ve=L.pop());var Ge=jr(L);if(!Ge)return b(!1);Ge.isTracing,$e.NONE,Ge.isTracing=ve?$e.BREAK:$e.LOG}(this,A)},S}(),ql=function(S){return S()};function Kl(){Tn.inBatch>0||Tn.isRunningReactions||ql(uf)}function uf(){Tn.isRunningReactions=!0;for(var S=Tn.pendingReactions,A=0;S.length>0;){++A==100&&S.splice(0);for(var L=S.splice(0),ee=0,ve=L.length;ee<ve;ee++)L[ee].runReaction()}Tn.isRunningReactions=!1}var As=D("Reaction",da);function sf(S){var A=ql;ql=function(L){return S(function(){return A(L)})}}function Zl(S){return function(){}}function pd(){b(!1)}function yu(S){return function(A,L,ee){if(ee){if(ee.value)return{value:Do(S,ee.value),enumerable:!1,configurable:!0,writable:!0};var ve=ee.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Do(S,ve.call(this))}}}return lf(S).apply(this,arguments)}}function lf(S){return function(A,L,ee){Object.defineProperty(A,L,{configurable:!0,enumerable:!1,get:function(){},set:function(ve){M(this,L,Za(S,ve))}})}}var Za=function(S,A,L,ee){return arguments.length===1&&typeof S=="function"?Do(S.name||"<unnamed action>",S):arguments.length===2&&typeof A=="function"?Do(S,A):arguments.length===1&&typeof S=="string"?yu(S):ee!==!0?yu(A).apply(null,arguments):void M(S,A,Do(S.name||A,L.value,this))};function Jl(S,A){return Bo(typeof S=="string"?S:S.name||"<unnamed action>",typeof S=="function"?S:A,this,void 0)}function nl(S){return typeof S=="function"&&S.isMobxAction===!0}function Ql(S,A,L){M(S,A,Do(A,L.bind(S)))}function ec(S,A){A===void 0&&(A=h);var L,ee=A&&A.name||S.name||"Autorun@"+g();if(!A.scheduler&&!A.delay)L=new da(ee,function(){this.track(ht)},A.onError,A.requiresObservable);else{var ve=cf(A),Ge=!1;L=new da(ee,function(){Ge||(Ge=!0,ve(function(){Ge=!1,L.isDisposed||L.track(ht)}))},A.onError,A.requiresObservable)}function ht(){S(L)}return L.schedule(),L.getDisposer()}Za.bound=function(S,A,L,ee){return ee===!0?(Ql(S,A,L.value),null):L?{configurable:!0,enumerable:!1,get:function(){return Ql(this,A,L.value||L.initializer.call(this)),this[A]},set:pd}:{enumerable:!1,configurable:!0,set:function(ve){Ql(this,A,ve)},get:function(){}}};var hd=function(S){return S()};function cf(S){return S.scheduler?S.scheduler:S.delay?function(A){return setTimeout(A,S.delay)}:hd}function Br(S,A,L){L===void 0&&(L=h);var ee,ve,Ge,ht=L.name||"Reaction@"+g(),Ht=Za(ht,L.onError?(ee=L.onError,ve=A,function(){try{return ve.apply(this,arguments)}catch(po){ee.call(this,po)}}):A),_n=!L.scheduler&&!L.delay,hr=cf(L),un=!0,$r=!1,dr=L.compareStructural?X.structural:L.equals||X.default,Pr=new da(ht,function(){un||_n?Wi():$r||($r=!0,hr(Wi))},L.onError,L.requiresObservable);function Wi(){if($r=!1,!Pr.isDisposed){var po=!1;Pr.track(function(){var Di=S(Pr);po=un||!dr(Ge,Di),Ge=Di}),un&&L.fireImmediately&&Ht(Ge,Pr),un||po!==!0||Ht(Ge,Pr),un&&(un=!1)}}return Pr.schedule(),Pr.getDisposer()}function Fr(S,A,L){return ff("onBecomeUnobserved",S,A,L)}function ff(S,A,L,ee){var ve=typeof ee=="function"?Gi(A,L):Gi(A),Ge=typeof ee=="function"?ee:L,ht=S+"Listeners";return ve[ht]?ve[ht].add(Ge):ve[ht]=new Set([Ge]),typeof ve[S]!="function"?b(!1):function(){var Ht=ve[ht];Ht&&(Ht.delete(Ge),Ht.size===0&&delete ve[ht])}}function Wu(S){var A=S.enforceActions,L=S.computedRequiresReaction,ee=S.computedConfigurable,ve=S.disableErrorBoundaries,Ge=S.reactionScheduler,ht=S.reactionRequiresObservable,Ht=S.observableRequiresReaction;if(S.isolateGlobalState===!0&&((Tn.pendingReactions.length||Tn.inBatch||Tn.isRunningReactions)&&b("isolateGlobalState should be called before MobX is running any reactions"),Ss=!0,qi&&(--Xl().__mobxInstanceCount==0&&(Xl().__mobxGlobals=void 0),Tn=new Gu)),A!==void 0){var _n=void 0;switch(A){case!0:case"observed":_n=!0;break;case!1:case"never":_n=!1;break;case"strict":case"always":_n="strict";break;default:b("Invalid value for 'enforceActions': '"+A+"', expected 'never', 'always' or 'observed'")}Tn.enforceActions=_n,Tn.allowStateChanges=_n!==!0&&_n!=="strict"}L!==void 0&&(Tn.computedRequiresReaction=!!L),ht!==void 0&&(Tn.reactionRequiresObservable=!!ht),Ht!==void 0&&(Tn.observableRequiresReaction=!!Ht,Tn.allowStateReads=!Tn.observableRequiresReaction),ee!==void 0&&(Tn.computedConfigurable=!!ee),ve!==void 0&&(Tn.disableErrorBoundaries=!!ve),Ge&&sf(Ge)}function Zi(S,A,L,ee){var ve=rl(ee=Pe(ee));return Ve(S),Ui(S,ee.name,ve.enhancer),A&&df(S,A,L,ve),S}function rl(S){return S.defaultDecorator||(S.deep===!1?xt:bt)}function df(S,A,L,ee){var ve,Ge;Ri();try{var ht=J(A);try{for(var Ht=Me(ht),_n=Ht.next();!_n.done;_n=Ht.next()){var hr=_n.value,un=Object.getOwnPropertyDescriptor(A,hr),$r=(L&&hr in L?L[hr]:un.get?vn:ee)(S,hr,un,!0);$r&&Object.defineProperty(S,hr,$r)}}catch(dr){ve={error:dr}}finally{try{_n&&!_n.done&&(Ge=Ht.return)&&Ge.call(Ht)}finally{if(ve)throw ve.error}}}finally{$i()}}function To(S,A){return mu(Gi(S,A))}function mu(S){var A,L,ee={name:S.name};return S.observing&&S.observing.length>0&&(ee.dependencies=(A=S.observing,L=[],A.forEach(function(ve){L.indexOf(ve)===-1&&L.push(ve)}),L).map(mu)),ee}var gu=0;function ol(){this.message="FLOW_CANCELLED"}function zu(S){arguments.length!==1&&b("Flow expects 1 argument and cannot be used as decorator");var A=S.name||"<unnamed flow>";return function(){var L,ee=this,ve=arguments,Ge=++gu,ht=Za(A+" - runid: "+Ge+" - init",S).apply(ee,ve),Ht=void 0,_n=new Promise(function(hr,un){var $r=0;function dr(po){var Di;Ht=void 0;try{Di=Za(A+" - runid: "+Ge+" - yield "+$r++,ht.next).call(ht,po)}catch(Ja){return un(Ja)}Wi(Di)}function Pr(po){var Di;Ht=void 0;try{Di=Za(A+" - runid: "+Ge+" - yield "+$r++,ht.throw).call(ht,po)}catch(Ja){return un(Ja)}Wi(Di)}function Wi(po){if(!po||typeof po.then!="function")return po.done?hr(po.value):(Ht=Promise.resolve(po.value)).then(dr,Pr);po.then(Wi,un)}L=un,dr(void 0)});return _n.cancel=Za(A+" - runid: "+Ge+" - cancel",function(){try{Ht&&si(Ht);var hr=ht.return(void 0),un=Promise.resolve(hr.value);un.then(T,T),si(un),L(new ol)}catch($r){L($r)}}),_n}}function si(S){typeof S.cancel=="function"&&S.cancel()}function tc(S,A){if(S==null)return!1;if(A!==void 0){if(Jo(S)===!1||!S[K].values.has(A))return!1;var L=Gi(S,A);return Ka(L)}return Ka(S)}function pf(S){return arguments.length>1?b(!1):tc(S)}function nc(S,A){return typeof A!="string"?b(!1):tc(S,A)}function bi(S,A){return S!=null&&(A!==void 0?!!Jo(S)&&S[K].values.has(A):Jo(S)||!!S[K]||H(S)||As(S)||Ka(S))}function Ko(S){return arguments.length!==1&&b(!1),bi(S)}function Bi(S){return Jo(S)?S[K].getKeys():Io(S)||Uo(S)?Array.from(S.keys()):Qi(S)?S.map(function(A,L){return L}):b(!1)}function Jr(S){return Jo(S)?Bi(S).map(function(A){return S[A]}):Io(S)?Bi(S).map(function(A){return S.get(A)}):Uo(S)?Array.from(S.values()):Qi(S)?S.slice():b(!1)}function hf(S){return Jo(S)?Bi(S).map(function(A){return[A,S[A]]}):Io(S)?Bi(S).map(function(A){return[A,S.get(A)]}):Uo(S)?Array.from(S.entries()):Qi(S)?S.map(function(A,L){return[L,A]}):b(!1)}function wi(S,A,L){if(arguments.length!==2||Uo(S))if(Jo(S)){var ee=S[K],ve=ee.values.get(A);ve?ee.write(A,L):ee.addObservableProp(A,L,ee.defaultEnhancer)}else if(Io(S))S.set(A,L);else if(Uo(S))S.add(A);else{if(!Qi(S))return b(!1);typeof A!="number"&&(A=parseInt(A,10)),E(A>=0,"Not a valid index: '"+A+"'"),Ri(),A>=S.length&&(S.length=A+1),S[A]=L,$i()}else{Ri();var Ge=A;try{for(var ht in Ge)wi(S,ht,Ge[ht])}finally{$i()}}}function rc(S,A,L,ee){return typeof L=="function"?function(ve,Ge,ht,Ht){return mi(ve,Ge).observe(ht,Ht)}(S,A,L,ee):function(ve,Ge,ht){return mi(ve).observe(Ge,ht)}(S,A,L)}ol.prototype=Object.create(Error.prototype);var vf={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Ei(S,A,L,ee){return ee.detectCycles&&S.set(A,L),L}function yi(S,A,L){if(!A.recurseEverything&&!Ko(S)||typeof S!="object")return S;if(S===null)return null;if(S instanceof Date)return S;if(qa(S))return yi(S.get(),A,L);if(Ko(S)&&Bi(S),A.detectCycles===!0&&S!==null&&L.has(S))return L.get(S);if(Qi(S)||Array.isArray(S)){var ee=Ei(L,S,[],A),ve=S.map(function(dr){return yi(dr,A,L)});ee.length=ve.length;for(var Ge=0,ht=ve.length;Ge<ht;Ge++)ee[Ge]=ve[Ge];return ee}if(Uo(S)||Object.getPrototypeOf(S)===Set.prototype){if(A.exportMapsAsObjects===!1){var Ht=Ei(L,S,new Set,A);return S.forEach(function(dr){Ht.add(yi(dr,A,L))}),Ht}var _n=Ei(L,S,[],A);return S.forEach(function(dr){_n.push(yi(dr,A,L))}),_n}if(Io(S)||Object.getPrototypeOf(S)===Map.prototype){if(A.exportMapsAsObjects===!1){var hr=Ei(L,S,new Map,A);return S.forEach(function(dr,Pr){hr.set(Pr,yi(dr,A,L))}),hr}var un=Ei(L,S,{},A);return S.forEach(function(dr,Pr){un[Pr]=yi(dr,A,L)}),un}var $r=Ei(L,S,{},A);return te(S).forEach(function(dr){$r[dr]=yi(S[dr],A,L)}),$r}function oc(S,A){var L;return typeof A=="boolean"&&(A={detectCycles:A}),A||(A=vf),A.detectCycles=A.detectCycles===void 0?A.recurseEverything===!0:A.detectCycles===!0,A.detectCycles&&(L=new Map),yi(S,A,L)}function jr(S){switch(S.length){case 0:return Tn.trackingDerivation;case 1:return Gi(S[0]);case 2:return Gi(S[0],S[1])}}function Zo(S,A){A===void 0&&(A=void 0),Ri();try{return S.apply(A)}finally{$i()}}function il(S,A,L){return arguments.length===1||A&&typeof A=="object"?ic(S,A):yf(S,A,L||{})}function yf(S,A,L){var ee;typeof L.timeout=="number"&&(ee=setTimeout(function(){if(!Ge[K].isDisposed){Ge();var ht=new Error("WHEN_TIMEOUT");if(!L.onError)throw ht;L.onError(ht)}},L.timeout)),L.name=L.name||"When@"+g();var ve=Do(L.name+"-effect",A),Ge=ec(function(ht){S()&&(ht.dispose(),ee&&clearTimeout(ee),ve())},L);return Ge}function ic(S,A){var L,ee=new Promise(function(ve,Ge){var ht=yf(S,ve,Fe(Fe({},A),{onError:Ge}));L=function(){ht(),Ge("WHEN_CANCELLED")}});return ee.cancel=L,ee}function al(S){return S[K]}function Ta(S){return typeof S=="string"||typeof S=="number"||typeof S=="symbol"}var Oi={has:function(S,A){if(A===K||A==="constructor"||A===Re)return!0;var L=al(S);return Ta(A)?L.has(A):A in S},get:function(S,A){if(A===K||A==="constructor"||A===Re)return S[A];var L=al(S),ee=L.values.get(A);if(ee instanceof B){var ve=ee.get();return ve===void 0&&L.has(A),ve}return Ta(A)&&L.has(A),S[A]},set:function(S,A,L){return!!Ta(A)&&(wi(S,A,L),!0)},deleteProperty:function(S,A){return!!Ta(A)&&(al(S).remove(A),!0)},ownKeys:function(S){return al(S).keysAtom.reportObserved(),Reflect.ownKeys(S)},preventExtensions:function(S){return b("Dynamic observable objects cannot be frozen"),!1}};function Vu(S){var A=new Proxy(S,Oi);return S[K].proxy=A,A}function ji(S){return S.interceptors!==void 0&&S.interceptors.length>0}function Ji(S,A){var L=S.interceptors||(S.interceptors=[]);return L.push(A),x(function(){var ee=L.indexOf(A);ee!==-1&&L.splice(ee,1)})}function Or(S,A){var L=je();try{for(var ee=De(S.interceptors||[]),ve=0,Ge=ee.length;ve<Ge&&(E(!(A=ee[ve](A))||A.type,"Intercept handlers should return nothing or a change object"),A);ve++);return A}finally{rt(L)}}function xi(S){return S.changeListeners!==void 0&&S.changeListeners.length>0}function pa(S,A){var L=S.changeListeners||(S.changeListeners=[]);return L.push(A),x(function(){var ee=L.indexOf(A);ee!==-1&&L.splice(ee,1)})}function ri(S,A){var L=je(),ee=S.changeListeners;if(ee){for(var ve=0,Ge=(ee=ee.slice()).length;ve<Ge;ve++)ee[ve](A);rt(L)}}var Hu={get:function(S,A){return A===K?S[K]:A==="length"?S[K].getArrayLength():typeof A=="number"?oo.get.call(S,A):typeof A!="string"||isNaN(A)?oo.hasOwnProperty(A)?oo[A]:S[A]:oo.get.call(S,parseInt(A))},set:function(S,A,L){return A==="length"&&S[K].setArrayLength(L),typeof A=="number"&&oo.set.call(S,A,L),typeof A=="symbol"||isNaN(A)?S[A]=L:oo.set.call(S,parseInt(A),L),!0},preventExtensions:function(S){return b("Observable arrays cannot be frozen"),!1}};function _u(S,A,L,ee){L===void 0&&(L="ObservableArray@"+g()),ee===void 0&&(ee=!1);var ve,Ge,ht,Ht=new ha(L,A,ee);ve=Ht.values,Ge=K,ht=Ht,Object.defineProperty(ve,Ge,{enumerable:!1,writable:!1,configurable:!0,value:ht});var _n=new Proxy(Ht.values,Hu);if(Ht.proxy=_n,S&&S.length){var hr=or(!0);Ht.spliceWithArray(0,0,S),Xr(hr)}return _n}var ha=function(){function S(A,L,ee){this.owned=ee,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new B(A||"ObservableArray@"+g()),this.enhancer=function(ve,Ge){return L(ve,Ge,A+"[..]")}}return S.prototype.dehanceValue=function(A){return this.dehancer!==void 0?this.dehancer(A):A},S.prototype.dehanceValues=function(A){return this.dehancer!==void 0&&A.length>0?A.map(this.dehancer):A},S.prototype.intercept=function(A){return Ji(this,A)},S.prototype.observe=function(A,L){return L===void 0&&(L=!1),L&&A({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),pa(this,A)},S.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},S.prototype.setArrayLength=function(A){if(typeof A!="number"||A<0)throw new Error("[mobx.array] Out of range: "+A);var L=this.values.length;if(A!==L)if(A>L){for(var ee=new Array(A-L),ve=0;ve<A-L;ve++)ee[ve]=void 0;this.spliceWithArray(L,0,ee)}else this.spliceWithArray(A,L-A)},S.prototype.updateArrayLength=function(A,L){if(A!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=L},S.prototype.spliceWithArray=function(A,L,ee){var ve=this;zn(this.atom);var Ge=this.values.length;if(A===void 0?A=0:A>Ge?A=Ge:A<0&&(A=Math.max(0,Ge+A)),L=arguments.length===1?Ge-A:L==null?0:Math.max(0,Math.min(L,Ge-A)),ee===void 0&&(ee=y),ji(this)){var ht=Or(this,{object:this.proxy,type:"splice",index:A,removedCount:L,added:ee});if(!ht)return y;L=ht.removedCount,ee=ht.added}ee=ee.length===0?ee:ee.map(function(_n){return ve.enhancer(_n,void 0)});var Ht=this.spliceItemsIntoValues(A,L,ee);return L===0&&ee.length===0||this.notifyArraySplice(A,ee,Ht),this.dehanceValues(Ht)},S.prototype.spliceItemsIntoValues=function(A,L,ee){var ve;if(ee.length<1e4)return(ve=this.values).splice.apply(ve,De([A,L],ee));var Ge=this.values.slice(A,A+L);return this.values=this.values.slice(0,A).concat(ee,this.values.slice(A+L)),Ge},S.prototype.notifyArrayChildUpdate=function(A,L,ee){var ve=!this.owned&&!1,Ge=xi(this),ht=Ge||ve?{object:this.proxy,type:"update",index:A,newValue:L,oldValue:ee}:null;this.atom.reportChanged(),Ge&&ri(this,ht)},S.prototype.notifyArraySplice=function(A,L,ee){var ve=!this.owned&&!1,Ge=xi(this),ht=Ge||ve?{object:this.proxy,type:"splice",index:A,removed:ee,added:L,removedCount:ee.length,addedCount:L.length}:null;this.atom.reportChanged(),Ge&&ri(this,ht)},S}(),oo={intercept:function(S){return this[K].intercept(S)},observe:function(S,A){return A===void 0&&(A=!1),this[K].observe(S,A)},clear:function(){return this.splice(0)},replace:function(S){var A=this[K];return A.spliceWithArray(0,A.values.length,S)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(S,A){for(var L=[],ee=2;ee<arguments.length;ee++)L[ee-2]=arguments[ee];var ve=this[K];switch(arguments.length){case 0:return[];case 1:return ve.spliceWithArray(S);case 2:return ve.spliceWithArray(S,A)}return ve.spliceWithArray(S,A,L)},spliceWithArray:function(S,A,L){return this[K].spliceWithArray(S,A,L)},push:function(){for(var S=[],A=0;A<arguments.length;A++)S[A]=arguments[A];var L=this[K];return L.spliceWithArray(L.values.length,0,S),L.values.length},pop:function(){return this.splice(Math.max(this[K].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var S=[],A=0;A<arguments.length;A++)S[A]=arguments[A];var L=this[K];return L.spliceWithArray(0,0,S),L.values.length},reverse:function(){var S=this.slice();return S.reverse.apply(S,arguments)},sort:function(S){var A=this.slice();return A.sort.apply(A,arguments)},remove:function(S){var A=this[K],L=A.dehanceValues(A.values).indexOf(S);return L>-1&&(this.splice(L,1),!0)},get:function(S){var A=this[K];if(A&&S<A.values.length)return A.atom.reportObserved(),A.dehanceValue(A.values[S])},set:function(S,A){var L=this[K],ee=L.values;if(S<ee.length){zn(L.atom);var ve=ee[S];if(ji(L)){var Ge=Or(L,{type:"update",object:L.proxy,index:S,newValue:A});if(!Ge)return;A=Ge.newValue}(A=L.enhancer(A,ve))!==ve&&(ee[S]=A,L.notifyArrayChildUpdate(S,A,ve))}else{if(S!==ee.length)throw new Error("[mobx.array] Index out of bounds, "+S+" is larger than "+ee.length);L.spliceWithArray(S,0,[A])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(S){typeof Array.prototype[S]=="function"&&(oo[S]=function(){var A=this[K];A.atom.reportObserved();var L=A.dehanceValues(A.values);return L[S].apply(L,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(S){typeof Array.prototype[S]=="function"&&(oo[S]=function(A,L){var ee=this,ve=this[K];return ve.atom.reportObserved(),ve.dehanceValues(ve.values)[S](function(Ge,ht){return A.call(L,Ge,ht,ee)},L)})}),["reduce","reduceRight"].forEach(function(S){oo[S]=function(){var A=this,L=this[K];L.atom.reportObserved();var ee=arguments[0];return arguments[0]=function(ve,Ge,ht){return Ge=L.dehanceValue(Ge),ee(ve,Ge,ht,A)},L.values[S].apply(L.values,arguments)}});var Ts,Ma=D("ObservableArrayAdministration",ha);function Qi(S){return j(S)&&Ma(S[K])}var ac,vd={},uc=function(){function S(A,L,ee){if(L===void 0&&(L=pt),ee===void 0&&(ee="ObservableMap@"+g()),this.enhancer=L,this.name=ee,this[Ts]=vd,this._keysAtom=ne(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(A)}return S.prototype._has=function(A){return this._data.has(A)},S.prototype.has=function(A){var L=this;if(!Tn.trackingDerivation)return this._has(A);var ee=this._hasMap.get(A);if(!ee){var ve=ee=new Mr(this._has(A),Jt,this.name+"."+V(A)+"?",!1);this._hasMap.set(A,ve),Fr(ve,function(){return L._hasMap.delete(A)})}return ee.get()},S.prototype.set=function(A,L){var ee=this._has(A);if(ji(this)){var ve=Or(this,{type:ee?"update":"add",object:this,newValue:L,name:A});if(!ve)return this;L=ve.newValue}return ee?this._updateValue(A,L):this._addValue(A,L),this},S.prototype.delete=function(A){var L=this;if(zn(this._keysAtom),ji(this)&&!(ve=Or(this,{type:"delete",object:this,name:A})))return!1;if(this._has(A)){var ee=xi(this),ve=ee?{type:"delete",object:this,oldValue:this._data.get(A).value,name:A}:null;return Zo(function(){L._keysAtom.reportChanged(),L._updateHasMapEntry(A,!1),L._data.get(A).setNewValue(void 0),L._data.delete(A)}),ee&&ri(this,ve),!0}return!1},S.prototype._updateHasMapEntry=function(A,L){var ee=this._hasMap.get(A);ee&&ee.setNewValue(L)},S.prototype._updateValue=function(A,L){var ee=this._data.get(A);if((L=ee.prepareNewValue(L))!==Tn.UNCHANGED){var ve=xi(this),Ge=ve?{type:"update",object:this,oldValue:ee.value,name:A,newValue:L}:null;ee.setNewValue(L),ve&&ri(this,Ge)}},S.prototype._addValue=function(A,L){var ee=this;zn(this._keysAtom),Zo(function(){var ht=new Mr(L,ee.enhancer,ee.name+"."+V(A),!1);ee._data.set(A,ht),L=ht.value,ee._updateHasMapEntry(A,!0),ee._keysAtom.reportChanged()});var ve=xi(this),Ge=ve?{type:"add",object:this,name:A,newValue:L}:null;ve&&ri(this,Ge)},S.prototype.get=function(A){return this.has(A)?this.dehanceValue(this._data.get(A).get()):this.dehanceValue(void 0)},S.prototype.dehanceValue=function(A){return this.dehancer!==void 0?this.dehancer(A):A},S.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},S.prototype.values=function(){var A=this,L=this.keys();return xr({next:function(){var ee=L.next(),ve=ee.done,Ge=ee.value;return{done:ve,value:ve?void 0:A.get(Ge)}}})},S.prototype.entries=function(){var A=this,L=this.keys();return xr({next:function(){var ee=L.next(),ve=ee.done,Ge=ee.value;return{done:ve,value:ve?void 0:[Ge,A.get(Ge)]}}})},S.prototype[Ts=K,Symbol.iterator]=function(){return this.entries()},S.prototype.forEach=function(A,L){var ee,ve;try{for(var Ge=Me(this),ht=Ge.next();!ht.done;ht=Ge.next()){var Ht=Xe(ht.value,2),_n=Ht[0],hr=Ht[1];A.call(L,hr,_n,this)}}catch(un){ee={error:un}}finally{try{ht&&!ht.done&&(ve=Ge.return)&&ve.call(Ge)}finally{if(ee)throw ee.error}}},S.prototype.merge=function(A){var L=this;return Io(A)&&(A=A.toJS()),Zo(function(){var ee=or(!0);try{N(A)?te(A).forEach(function(ve){return L.set(ve,A[ve])}):Array.isArray(A)?A.forEach(function(ve){var Ge=Xe(ve,2),ht=Ge[0],Ht=Ge[1];return L.set(ht,Ht)}):k(A)?(A.constructor!==Map&&b("Cannot initialize from classes that inherit from Map: "+A.constructor.name),A.forEach(function(ve,Ge){return L.set(Ge,ve)})):A!=null&&b("Cannot initialize map from "+A)}finally{Xr(ee)}}),this},S.prototype.clear=function(){var A=this;Zo(function(){He(function(){var L,ee;try{for(var ve=Me(A.keys()),Ge=ve.next();!Ge.done;Ge=ve.next()){var ht=Ge.value;A.delete(ht)}}catch(Ht){L={error:Ht}}finally{try{Ge&&!Ge.done&&(ee=ve.return)&&ee.call(ve)}finally{if(L)throw L.error}}})})},S.prototype.replace=function(A){var L=this;return Zo(function(){var ee,ve,Ge,ht,Ht=function(Go){if(k(Go)||Io(Go))return Go;if(Array.isArray(Go))return new Map(Go);if(N(Go)){var Eu=new Map;for(var eu in Go)Eu.set(eu,Go[eu]);return Eu}return b("Cannot convert to map from '"+Go+"'")}(A),_n=new Map,hr=!1;try{for(var un=Me(L._data.keys()),$r=un.next();!$r.done;$r=un.next()){var dr=$r.value;if(!Ht.has(dr))if(L.delete(dr))hr=!0;else{var Pr=L._data.get(dr);_n.set(dr,Pr)}}}catch(Go){ee={error:Go}}finally{try{$r&&!$r.done&&(ve=un.return)&&ve.call(un)}finally{if(ee)throw ee.error}}try{for(var Wi=Me(Ht.entries()),po=Wi.next();!po.done;po=Wi.next()){var Di=Xe(po.value,2),Ja=(dr=Di[0],Pr=Di[1],L._data.has(dr));if(L.set(dr,Pr),L._data.has(dr)){var Qa=L._data.get(dr);_n.set(dr,Qa),Ja||(hr=!0)}}}catch(Go){Ge={error:Go}}finally{try{po&&!po.done&&(ht=Wi.return)&&ht.call(Wi)}finally{if(Ge)throw Ge.error}}if(!hr)if(L._data.size!==_n.size)L._keysAtom.reportChanged();else for(var wu=L._data.keys(),Xu=_n.keys(),Pa=wu.next(),Yu=Xu.next();!Pa.done;){if(Pa.value!==Yu.value){L._keysAtom.reportChanged();break}Pa=wu.next(),Yu=Xu.next()}L._data=_n}),this},Object.defineProperty(S.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),S.prototype.toPOJO=function(){var A,L,ee={};try{for(var ve=Me(this),Ge=ve.next();!Ge.done;Ge=ve.next()){var ht=Xe(Ge.value,2),Ht=ht[0],_n=ht[1];ee[typeof Ht=="symbol"?Ht:V(Ht)]=_n}}catch(hr){A={error:hr}}finally{try{Ge&&!Ge.done&&(L=ve.return)&&L.call(ve)}finally{if(A)throw A.error}}return ee},S.prototype.toJS=function(){return new Map(this)},S.prototype.toJSON=function(){return this.toPOJO()},S.prototype.toString=function(){var A=this;return this.name+"[{ "+Array.from(this.keys()).map(function(L){return V(L)+": "+A.get(L)}).join(", ")+" }]"},S.prototype.observe=function(A,L){return pa(this,A)},S.prototype.intercept=function(A){return Ji(this,A)},S}(),Io=D("ObservableMap",uc),bu={},Na=function(){function S(A,L,ee){if(L===void 0&&(L=pt),ee===void 0&&(ee="ObservableSet@"+g()),this.name=ee,this[ac]=bu,this._data=new Set,this._atom=ne(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(ve,Ge){return L(ve,Ge,ee)},A&&this.replace(A)}return S.prototype.dehanceValue=function(A){return this.dehancer!==void 0?this.dehancer(A):A},S.prototype.clear=function(){var A=this;Zo(function(){He(function(){var L,ee;try{for(var ve=Me(A._data.values()),Ge=ve.next();!Ge.done;Ge=ve.next()){var ht=Ge.value;A.delete(ht)}}catch(Ht){L={error:Ht}}finally{try{Ge&&!Ge.done&&(ee=ve.return)&&ee.call(ve)}finally{if(L)throw L.error}}})})},S.prototype.forEach=function(A,L){var ee,ve;try{for(var Ge=Me(this),ht=Ge.next();!ht.done;ht=Ge.next()){var Ht=ht.value;A.call(L,Ht,Ht,this)}}catch(_n){ee={error:_n}}finally{try{ht&&!ht.done&&(ve=Ge.return)&&ve.call(Ge)}finally{if(ee)throw ee.error}}},Object.defineProperty(S.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),S.prototype.add=function(A){var L=this;if(zn(this._atom),ji(this)&&!(ve=Or(this,{type:"add",object:this,newValue:A})))return this;if(!this.has(A)){Zo(function(){L._data.add(L.enhancer(A,void 0)),L._atom.reportChanged()});var ee=xi(this),ve=ee?{type:"add",object:this,newValue:A}:null;ee&&ri(this,ve)}return this},S.prototype.delete=function(A){var L=this;if(ji(this)&&!(ve=Or(this,{type:"delete",object:this,oldValue:A})))return!1;if(this.has(A)){var ee=xi(this),ve=ee?{type:"delete",object:this,oldValue:A}:null;return Zo(function(){L._atom.reportChanged(),L._data.delete(A)}),ee&&ri(this,ve),!0}return!1},S.prototype.has=function(A){return this._atom.reportObserved(),this._data.has(this.dehanceValue(A))},S.prototype.entries=function(){var A=0,L=Array.from(this.keys()),ee=Array.from(this.values());return xr({next:function(){var ve=A;return A+=1,ve<ee.length?{value:[L[ve],ee[ve]],done:!1}:{done:!0}}})},S.prototype.keys=function(){return this.values()},S.prototype.values=function(){this._atom.reportObserved();var A=this,L=0,ee=Array.from(this._data.values());return xr({next:function(){return L<ee.length?{value:A.dehanceValue(ee[L++]),done:!1}:{done:!0}}})},S.prototype.replace=function(A){var L=this;return Uo(A)&&(A=A.toJS()),Zo(function(){var ee=or(!0);try{Array.isArray(A)||F(A)?(L.clear(),A.forEach(function(ve){return L.add(ve)})):A!=null&&b("Cannot initialize set from "+A)}finally{Xr(ee)}}),this},S.prototype.observe=function(A,L){return pa(this,A)},S.prototype.intercept=function(A){return Ji(this,A)},S.prototype.toJS=function(){return new Set(this)},S.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},S.prototype[ac=K,Symbol.iterator]=function(){return this.values()},S}(),Uo=D("ObservableSet",Na),sc=function(){function S(A,L,ee,ve){L===void 0&&(L=new Map),this.target=A,this.values=L,this.name=ee,this.defaultEnhancer=ve,this.keysAtom=new B(ee+".keys")}return S.prototype.read=function(A){return this.values.get(A).get()},S.prototype.write=function(A,L){var ee=this.target,ve=this.values.get(A);if(ve instanceof Aa)ve.set(L);else{if(ji(this)){if(!(ht=Or(this,{type:"update",object:this.proxy||ee,name:A,newValue:L})))return;L=ht.newValue}if((L=ve.prepareNewValue(L))!==Tn.UNCHANGED){var Ge=xi(this),ht=Ge?{type:"update",object:this.proxy||ee,oldValue:ve.value,name:A,newValue:L}:null;ve.setNewValue(L),Ge&&ri(this,ht)}}},S.prototype.has=function(A){var L=this.pendingKeys||(this.pendingKeys=new Map),ee=L.get(A);if(ee)return ee.get();var ve=!!this.values.get(A);return ee=new Mr(ve,Jt,this.name+"."+V(A)+"?",!1),L.set(A,ee),ee.get()},S.prototype.addObservableProp=function(A,L,ee){ee===void 0&&(ee=this.defaultEnhancer);var ve=this.target;if(ji(this)){var Ge=Or(this,{object:this.proxy||ve,name:A,type:"add",newValue:L});if(!Ge)return;L=Ge.newValue}var ht=new Mr(L,ee,this.name+"."+V(A),!1);this.values.set(A,ht),L=ht.value,Object.defineProperty(ve,A,function(Ht){return ea[Ht]||(ea[Ht]={configurable:!0,enumerable:!0,get:function(){return this[K].read(Ht)},set:function(_n){this[K].write(Ht,_n)}})}(A)),this.notifyPropertyAddition(A,L)},S.prototype.addComputedProp=function(A,L,ee){var ve,Ge,ht,Ht=this.target;ee.name=ee.name||this.name+"."+V(L),this.values.set(L,new Aa(ee)),(A===Ht||(ve=A,Ge=L,!(ht=Object.getOwnPropertyDescriptor(ve,Ge))||ht.configurable!==!1&&ht.writable!==!1))&&Object.defineProperty(A,L,function(_n){return ul[_n]||(ul[_n]={configurable:Tn.computedConfigurable,enumerable:!1,get:function(){return Si(this).read(_n)},set:function(hr){Si(this).write(_n,hr)}})}(L))},S.prototype.remove=function(A){if(this.values.has(A)){var L=this.target;if(ji(this)&&!(_n=Or(this,{object:this.proxy||L,name:A,type:"remove"})))return;try{Ri();var ee=xi(this),ve=!1,Ge=this.values.get(A),ht=Ge&&Ge.get();if(Ge&&Ge.set(void 0),this.keysAtom.reportChanged(),this.values.delete(A),this.pendingKeys){var Ht=this.pendingKeys.get(A);Ht&&Ht.set(!1)}delete this.target[A];var _n=ee?{type:"remove",object:this.proxy||L,oldValue:ht,name:A}:null;ee&&ri(this,_n)}finally{$i()}}},S.prototype.illegalAccess=function(A,L){},S.prototype.observe=function(A,L){return pa(this,A)},S.prototype.intercept=function(A){return Ji(this,A)},S.prototype.notifyPropertyAddition=function(A,L){var ee=xi(this),ve=ee?{type:"add",object:this.proxy||this.target,name:A,newValue:L}:null;if(ee&&ri(this,ve),this.pendingKeys){var Ge=this.pendingKeys.get(A);Ge&&Ge.set(!0)}this.keysAtom.reportChanged()},S.prototype.getKeys=function(){var A,L;this.keysAtom.reportObserved();var ee=[];try{for(var ve=Me(this.values),Ge=ve.next();!Ge.done;Ge=ve.next()){var ht=Xe(Ge.value,2),Ht=ht[0];ht[1]instanceof Mr&&ee.push(Ht)}}catch(_n){A={error:_n}}finally{try{Ge&&!Ge.done&&(L=ve.return)&&L.call(ve)}finally{if(A)throw A.error}}return ee},S}();function Ui(S,A,L){if(A===void 0&&(A=""),L===void 0&&(L=pt),Object.prototype.hasOwnProperty.call(S,K))return S[K];N(S)||(A=(S.constructor.name||"ObservableObject")+"@"+g()),A||(A="ObservableObject@"+g());var ee=new sc(S,new Map,V(A),L);return M(S,K,ee),ee}var ea=Object.create(null),ul=Object.create(null);function Si(S){var A=S[K];return A||(Ve(S),S[K])}var Ci=D("ObservableObjectAdministration",sc);function Jo(S){return!!j(S)&&(Ve(S),Ci(S[K]))}function Gi(S,A){if(typeof S=="object"&&S!==null){if(Qi(S))return A!==void 0&&b(!1),S[K].atom;if(Uo(S))return S[K];if(Io(S)){var L=S;return A===void 0?L._keysAtom:((ee=L._data.get(A)||L._hasMap.get(A))||b(!1),ee)}var ee;if(Ve(S),A&&!S[K]&&S[A],Jo(S))return A?((ee=S[K].values.get(A))||b(!1),ee):b(!1);if(H(S)||Ka(S)||As(S))return S}else if(typeof S=="function"&&As(S[K]))return S[K];return b(!1)}function mi(S,A){return S||b("Expecting some object"),A!==void 0?mi(Gi(S,A)):H(S)||Ka(S)||As(S)||Io(S)||Uo(S)?S:(Ve(S),S[K]?S[K]:void b(!1))}var at=Object.prototype.toString;function Ct(S,A,L){return L===void 0&&(L=-1),Ft(S,A,L)}function Ft(S,A,L,ee,ve){if(S===A)return S!==0||1/S==1/A;if(S==null||A==null)return!1;if(S!=S)return A!=A;var Ge=typeof S;if(Ge!=="function"&&Ge!=="object"&&typeof A!="object")return!1;var ht=at.call(S);if(ht!==at.call(A))return!1;switch(ht){case"[object RegExp]":case"[object String]":return""+S==""+A;case"[object Number]":return+S!=+S?+A!=+A:+S==0?1/+S==1/A:+S==+A;case"[object Date]":case"[object Boolean]":return+S==+A;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(S)===Symbol.valueOf.call(A);case"[object Map]":case"[object Set]":L>=0&&L++}S=fn(S),A=fn(A);var Ht=ht==="[object Array]";if(!Ht){if(typeof S!="object"||typeof A!="object")return!1;var _n=S.constructor,hr=A.constructor;if(_n!==hr&&!(typeof _n=="function"&&_n instanceof _n&&typeof hr=="function"&&hr instanceof hr)&&"constructor"in S&&"constructor"in A)return!1}if(L===0)return!1;L<0&&(L=-1),ve=ve||[];for(var un=(ee=ee||[]).length;un--;)if(ee[un]===S)return ve[un]===A;if(ee.push(S),ve.push(A),Ht){if((un=S.length)!==A.length)return!1;for(;un--;)if(!Ft(S[un],A[un],L-1,ee,ve))return!1}else{var $r=Object.keys(S),dr=void 0;if(un=$r.length,Object.keys(A).length!==un)return!1;for(;un--;)if(!ur(A,dr=$r[un])||!Ft(S[dr],A[dr],L-1,ee,ve))return!1}return ee.pop(),ve.pop(),!0}function fn(S){return Qi(S)?S.slice():k(S)||Io(S)||F(S)||Uo(S)?Array.from(S.entries()):S}function ur(S,A){return Object.prototype.hasOwnProperty.call(S,A)}function xr(S){return S[Symbol.iterator]=io,S}function io(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Zl,extras:{getDebugName:function(S,A){return(A!==void 0?Gi(S,A):Jo(S)||Io(S)||Uo(S)?mi(S):Gi(S)).name}},$mobx:K})}).call(this,r(163),r(68))},function(n,a,r){var l=r(113),c=r(42),y=r(179);l||c(Object.prototype,"toString",y,{unsafe:!0})},function(n,a,r){var l=r(41),c=r(100),y=r(80),h=r(58),g=r(116),b="Array Iterator",E=h.set,x=h.getterFor(b);n.exports=g(Array,"Array",function(T,j){E(this,{type:b,target:l(T),index:0,kind:j})},function(){var T=x(this),j=T.target,N=T.kind,M=T.index++;return!j||M>=j.length?(T.target=void 0,{value:void 0,done:!0}):N=="keys"?{value:M,done:!1}:N=="values"?{value:j[M],done:!1}:{value:[M,j[M]],done:!1}},"values"),y.Arguments=y.Array,c("keys"),c("values"),c("entries")},function(n,a,r){var l=r(16),c=r(7),y=r(46),h=r(76),g=r(34),b=r(15),E=r(71),x=r(36),T=r(108),j=r(18),N=r(35),M=r(96),D=r(30),k=r(33),F=r(54),te=r(87),V=r(32),z=r(40),J=r(41),K=r(86),B=r(39),H=r(69),ne=r(60),X=r(77),ge=r(74),Fe=r(139),Me=r(112),Xe=r(50),De=r(38),Re=r(84),ce=r(98),he=r(42),Oe=r(89),Ae=r(93),Ve=r(72),dt=r(90),mt=r(28),pt=r(140),Jt=r(141),Ce=r(78),ye=r(58),Pe=r(79).forEach,bt=Ae("hidden"),Vt="Symbol",xt=mt("toPrimitive"),nn=ye.set,yn=ye.getterFor(Vt),xn=Object.prototype,pn=c.Symbol,lt=pn&&pn.prototype,gn=c.TypeError,$e=c.QObject,vn=y("JSON","stringify"),Yn=Xe.f,Q=De.f,qn=Fe.f,wr=Re.f,Lr=b([].push),Hr=Oe("symbols"),zn=Oe("op-symbols"),Ao=Oe("string-to-symbol-registry"),Ee=Oe("symbol-to-string-registry"),He=Oe("wks"),je=!$e||!$e.prototype||!$e.prototype.findChild,rt=x&&j(function(){return ne(Q({},"a",{get:function(){return Q(this,"a",{value:7}).a}})).a!=7})?function(On,In,Vn){var or=Yn(xn,In);or&&delete xn[In],Q(On,In,Vn),or&&On!==xn&&Q(xn,In,or)}:Q,Qt=function(On,In){var Vn=Hr[On]=ne(lt);return nn(Vn,{type:Vt,tag:On,description:In}),x||(Vn.description=In),Vn},Yt=function(On,In,Vn){On===xn&&Yt(zn,In,Vn),V(On);var or=K(In);return V(Vn),N(Hr,or)?(Vn.enumerable?(N(On,bt)&&On[bt][or]&&(On[bt][or]=!1),Vn=ne(Vn,{enumerable:H(0,!1)})):(N(On,bt)||Q(On,bt,H(1,{})),On[bt][or]=!0),rt(On,or,Vn)):Q(On,or,Vn)},Nn=function(On,In){V(On);var Vn=J(In),or=X(Vn).concat(Do(Vn));return Pe(or,function(Xr){x&&!g(mr,Vn,Xr)||Yt(On,Xr,Vn[Xr])}),On},mr=function(On){var In=K(On),Vn=g(wr,this,In);return!(this===xn&&N(Hr,In)&&!N(zn,In))&&(!(Vn||!N(this,In)||!N(Hr,In)||N(this,bt)&&this[bt][In])||Vn)},qo=function(On,In){var Vn=J(On),or=K(In);if(Vn!==xn||!N(Hr,or)||N(zn,or)){var Xr=Yn(Vn,or);return!Xr||!N(Hr,or)||N(Vn,bt)&&Vn[bt][or]||(Xr.enumerable=!0),Xr}},ui=function(On){var In=qn(J(On)),Vn=[];return Pe(In,function(or){N(Hr,or)||N(Ve,or)||Lr(Vn,or)}),Vn},Do=function(On){var In=On===xn,Vn=qn(In?zn:J(On)),or=[];return Pe(Vn,function(Xr){!N(Hr,Xr)||In&&!N(xn,Xr)||Lr(or,Hr[Xr])}),or};if(T||(pn=function(){if(F(lt,this))throw gn("Symbol is not a constructor");var On=arguments.length&&arguments[0]!==void 0?B(arguments[0]):void 0,In=dt(On),Vn=function(or){this===xn&&g(Vn,zn,or),N(this,bt)&&N(this[bt],In)&&(this[bt][In]=!1),rt(this,In,H(1,or))};return x&&je&&rt(xn,In,{configurable:!0,set:Vn}),Qt(In,On)},he(lt=pn.prototype,"toString",function(){return yn(this).tag}),he(pn,"withoutSetter",function(On){return Qt(dt(On),On)}),Re.f=mr,De.f=Yt,Xe.f=qo,ge.f=Fe.f=ui,Me.f=Do,pt.f=function(On){return Qt(mt(On),On)},x&&(Q(lt,"description",{configurable:!0,get:function(){return yn(this).description}}),E||he(xn,"propertyIsEnumerable",mr,{unsafe:!0}))),l({global:!0,wrap:!0,forced:!T,sham:!T},{Symbol:pn}),Pe(X(He),function(On){Jt(On)}),l({target:Vt,stat:!0,forced:!T},{for:function(On){var In=B(On);if(N(Ao,In))return Ao[In];var Vn=pn(In);return Ao[In]=Vn,Ee[Vn]=In,Vn},keyFor:function(On){if(!te(On))throw gn(On+" is not a symbol");if(N(Ee,On))return Ee[On]},useSetter:function(){je=!0},useSimple:function(){je=!1}}),l({target:"Object",stat:!0,forced:!T,sham:!x},{create:function(On,In){return In===void 0?ne(On):Nn(ne(On),In)},defineProperty:Yt,defineProperties:Nn,getOwnPropertyDescriptor:qo}),l({target:"Object",stat:!0,forced:!T},{getOwnPropertyNames:ui,getOwnPropertySymbols:Do}),l({target:"Object",stat:!0,forced:j(function(){Me.f(1)})},{getOwnPropertySymbols:function(On){return Me.f(z(On))}}),vn&&l({target:"JSON",stat:!0,forced:!T||j(function(){var On=pn();return vn([On])!="[null]"||vn({a:On})!="{}"||vn(Object(On))!="{}"})},{stringify:function(On,In,Vn){var or=ce(arguments),Xr=In;if((k(In)||On!==void 0)&&!te(On))return M(In)||(In=function(Mr,qa){if(D(Xr)&&(qa=g(Xr,this,Mr,qa)),!te(qa))return qa}),or[1]=In,h(vn,null,or)}}),!lt[xt]){var Bo=lt.valueOf;he(lt,xt,function(On){return g(Bo,this)})}Ce(pn,Vt),Ve[bt]=!0},function(n,a,r){var l=r(7),c=r(152),y=r(153),h=r(3),g=r(57),b=r(28),E=b("iterator"),x=b("toStringTag"),T=h.values,j=function(M,D){if(M){if(M[E]!==T)try{g(M,E,T)}catch{M[E]=T}if(M[x]||g(M,x,D),c[D]){for(var k in h)if(M[k]!==h[k])try{g(M,k,h[k])}catch{M[k]=h[k]}}}};for(var N in c)j(l[N]&&l[N].prototype,N);j(y,"DOMTokenList")},function(n,a,r){var l=r(151).charAt,c=r(39),y=r(58),h=r(116),g="String Iterator",b=y.set,E=y.getterFor(g);h(String,"String",function(x){b(this,{type:g,string:c(x),index:0})},function(){var x,T=E(this),j=T.string,N=T.index;return N>=j.length?{value:void 0,done:!0}:(x=l(j,N),T.index+=x.length,{value:x,done:!1})})},function(n,a,r){(function(l){var c=function(y){return y&&y.Math==Math&&y};n.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof l=="object"&&l)||function(){return this}()||Function("return this")()}).call(this,r(68))},function(n,a,r){var l=r(16),c=r(36),y=r(7),h=r(15),g=r(35),b=r(30),E=r(54),x=r(39),T=r(38).f,j=r(134),N=y.Symbol,M=N&&N.prototype;if(c&&b(N)&&(!("description"in M)||N().description!==void 0)){var D={},k=function(){var B=arguments.length<1||arguments[0]===void 0?void 0:x(arguments[0]),H=E(M,this)?new N(B):B===void 0?N():N(B);return B===""&&(D[H]=!0),H};j(k,N),k.prototype=M,M.constructor=k;var F=String(N("test"))=="Symbol(test)",te=h(M.toString),V=h(M.valueOf),z=/^Symbol\((.*)\)[^)]+$/,J=h("".replace),K=h("".slice);T(M,"description",{configurable:!0,get:function(){var B=V(this),H=te(B);if(g(D,B))return"";var ne=F?K(H,7,-1):J(H,z,"$1");return ne===""?void 0:ne}}),l({global:!0,forced:!0},{Symbol:k})}},function(n,a,r){r(141)("iterator")},function(n,a,r){r.d(a,"a",function(){return h.a}),r.d(a,"c",function(){return h.e}),r.d(a,"h",function(){return z}),r.d(a,"i",function(){return F}),r.d(a,"j",function(){return D}),r.d(a,"b",function(){return Xe}),r.d(a,"e",function(){return he}),r.d(a,"f",function(){return De}),r.d(a,"g",function(){return Hr});var l,c,y,h=r(0),g=0,b=[],E=h.i.__b,x=h.i.__r,T=h.i.diffed,j=h.i.__c,N=h.i.unmount;function M(Ee,He){h.i.__h&&h.i.__h(c,Ee,g||He),g=0;var je=c.__H||(c.__H={__:[],__h:[]});return Ee>=je.__.length&&je.__.push({}),je.__[Ee]}function D(Ee){return g=1,k(ge,Ee)}function k(Ee,He,je){var rt=M(l++,2);return rt.t=Ee,rt.__c||(rt.__=[je?je(He):ge(void 0,He),function(Qt){var Yt=rt.t(rt.__[0],Qt);rt.__[0]!==Yt&&(rt.__=[Yt,rt.__[1]],rt.__c.setState({}))}],rt.__c=c),rt.__}function F(Ee,He){var je=M(l++,3);!h.i.__s&&X(je.__H,He)&&(je.__=Ee,je.__H=He,c.__H.__h.push(je))}function te(Ee,He){var je=M(l++,4);!h.i.__s&&X(je.__H,He)&&(je.__=Ee,je.__H=He,c.__h.push(je))}function V(Ee,He){var je=M(l++,7);return X(je.__H,He)&&(je.__=Ee(),je.__H=He,je.__h=Ee),je.__}function z(Ee,He){return g=8,V(function(){return Ee},He)}function J(){var Ee;for(b.sort(function(He,je){return He.__v.__b-je.__v.__b});Ee=b.pop();)if(Ee.__P)try{Ee.__H.__h.forEach(H),Ee.__H.__h.forEach(ne),Ee.__H.__h=[]}catch(He){Ee.__H.__h=[],h.i.__e(He,Ee.__v)}}h.i.__b=function(Ee){c=null,E&&E(Ee)},h.i.__r=function(Ee){x&&x(Ee),l=0;var He=(c=Ee.__c).__H;He&&(He.__h.forEach(H),He.__h.forEach(ne),He.__h=[])},h.i.diffed=function(Ee){T&&T(Ee);var He=Ee.__c;He&&He.__H&&He.__H.__h.length&&(b.push(He)!==1&&y===h.i.requestAnimationFrame||((y=h.i.requestAnimationFrame)||B)(J)),c=null},h.i.__c=function(Ee,He){He.some(function(je){try{je.__h.forEach(H),je.__h=je.__h.filter(function(rt){return!rt.__||ne(rt)})}catch(rt){He.some(function(Qt){Qt.__h&&(Qt.__h=[])}),He=[],h.i.__e(rt,je.__v)}}),j&&j(Ee,He)},h.i.unmount=function(Ee){N&&N(Ee);var He,je=Ee.__c;je&&je.__H&&(je.__H.__.forEach(function(rt){try{H(rt)}catch(Qt){He=Qt}}),He&&h.i.__e(He,je.__v))};var K=typeof requestAnimationFrame=="function";function B(Ee){var He,je=function(){clearTimeout(rt),K&&cancelAnimationFrame(He),setTimeout(Ee)},rt=setTimeout(je,100);K&&(He=requestAnimationFrame(je))}function H(Ee){var He=c,je=Ee.__c;typeof je=="function"&&(Ee.__c=void 0,je()),c=He}function ne(Ee){var He=c;Ee.__c=Ee.__(),c=He}function X(Ee,He){return!Ee||Ee.length!==He.length||He.some(function(je,rt){return je!==Ee[rt]})}function ge(Ee,He){return typeof He=="function"?He(Ee):He}function Fe(Ee,He){for(var je in He)Ee[je]=He[je];return Ee}function Me(Ee,He){for(var je in Ee)if(je!=="__source"&&!(je in He))return!0;for(var rt in He)if(rt!=="__source"&&Ee[rt]!==He[rt])return!0;return!1}function Xe(Ee){this.props=Ee}function De(Ee,He){function je(Qt){var Yt=this.props.ref,Nn=Yt==Qt.ref;return!Nn&&Yt&&(Yt.call?Yt(null):Yt.current=null),He?!He(this.props,Qt)||!Nn:Me(this.props,Qt)}function rt(Qt){return this.shouldComponentUpdate=je,Object(h.e)(Ee,Qt)}return rt.displayName="Memo("+(Ee.displayName||Ee.name)+")",rt.prototype.isReactComponent=!0,rt.__f=!0,rt}(Xe.prototype=new h.a).isPureReactComponent=!0,Xe.prototype.shouldComponentUpdate=function(Ee,He){return Me(this.props,Ee)||Me(this.state,He)};var Re=h.i.__b;h.i.__b=function(Ee){Ee.type&&Ee.type.__f&&Ee.ref&&(Ee.props.ref=Ee.ref,Ee.ref=null),Re&&Re(Ee)};var ce=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function he(Ee){function He(je,rt){var Qt=Fe({},je);return delete Qt.ref,Ee(Qt,!(rt=je.ref||rt)||typeof rt=="object"&&!("current"in rt)?null:rt)}return He.$$typeof=ce,He.render=He,He.prototype.isReactComponent=He.__f=!0,He.displayName="ForwardRef("+(Ee.displayName||Ee.name)+")",He}var Oe=function(Ee,He){return Ee==null?null:Object(h.k)(Object(h.k)(Ee).map(He))},Ae={map:Oe,forEach:Oe,count:function(Ee){return Ee?Object(h.k)(Ee).length:0},only:function(Ee){var He=Object(h.k)(Ee);if(He.length!==1)throw"Children.only";return He[0]},toArray:h.k},Ve=h.i.__e;h.i.__e=function(Ee,He,je){if(Ee.then){for(var rt,Qt=He;Qt=Qt.__;)if((rt=Qt.__c)&&rt.__c)return He.__e==null&&(He.__e=je.__e,He.__k=je.__k),rt.__c(Ee,He)}Ve(Ee,He,je)};var dt=h.i.unmount;function mt(Ee,He,je){return Ee&&(Ee.__c&&Ee.__c.__H&&(Ee.__c.__H.__.forEach(function(rt){typeof rt.__c=="function"&&rt.__c()}),Ee.__c.__H=null),(Ee=Fe({},Ee)).__c!=null&&(Ee.__c.__P===je&&(Ee.__c.__P=He),Ee.__c=null),Ee.__k=Ee.__k&&Ee.__k.map(function(rt){return mt(rt,He,je)})),Ee}function pt(Ee,He,je){return Ee&&(Ee.__v=null,Ee.__k=Ee.__k&&Ee.__k.map(function(rt){return pt(rt,He,je)}),Ee.__c&&Ee.__c.__P===He&&(Ee.__e&&je.insertBefore(Ee.__e,Ee.__d),Ee.__c.__e=!0,Ee.__c.__P=je)),Ee}function Jt(){this.__u=0,this.t=null,this.__b=null}function Ce(Ee){var He=Ee.__.__c;return He&&He.__e&&He.__e(Ee)}function ye(){this.u=null,this.o=null}h.i.unmount=function(Ee){var He=Ee.__c;He&&He.__R&&He.__R(),He&&Ee.__h===!0&&(Ee.type=null),dt&&dt(Ee)},(Jt.prototype=new h.a).__c=function(Ee,He){var je=He.__c,rt=this;rt.t==null&&(rt.t=[]),rt.t.push(je);var Qt=Ce(rt.__v),Yt=!1,Nn=function(){Yt||(Yt=!0,je.__R=null,Qt?Qt(mr):mr())};je.__R=Nn;var mr=function(){if(!--rt.__u){if(rt.state.__e){var ui=rt.state.__e;rt.__v.__k[0]=pt(ui,ui.__c.__P,ui.__c.__O)}var Do;for(rt.setState({__e:rt.__b=null});Do=rt.t.pop();)Do.forceUpdate()}},qo=He.__h===!0;rt.__u++||qo||rt.setState({__e:rt.__b=rt.__v.__k[0]}),Ee.then(Nn,Nn)},Jt.prototype.componentWillUnmount=function(){this.t=[]},Jt.prototype.render=function(Ee,He){if(this.__b){if(this.__v.__k){var je=document.createElement("div"),rt=this.__v.__k[0].__c;this.__v.__k[0]=mt(this.__b,je,rt.__O=rt.__P)}this.__b=null}var Qt=He.__e&&Object(h.e)(h.b,null,Ee.fallback);return Qt&&(Qt.__h=null),[Object(h.e)(h.b,null,He.__e?null:Ee.children),Qt]};var Pe=function(Ee,He,je){if(++je[1]===je[0]&&Ee.o.delete(He),Ee.props.revealOrder&&(Ee.props.revealOrder[0]!=="t"||!Ee.o.size))for(je=Ee.u;je;){for(;je.length>3;)je.pop()();if(je[1]<je[0])break;Ee.u=je=je[2]}};function bt(Ee){return this.getChildContext=function(){return Ee.context},Ee.children}function Vt(Ee){var He=this,je=Ee.i;He.componentWillUnmount=function(){Object(h.j)(null,He.l),He.l=null,He.i=null},He.i&&He.i!==je&&He.componentWillUnmount(),Ee.__v?(He.l||(He.i=je,He.l={nodeType:1,parentNode:je,childNodes:[],appendChild:function(rt){this.childNodes.push(rt),He.i.appendChild(rt)},insertBefore:function(rt,Qt){this.childNodes.push(rt),He.i.appendChild(rt)},removeChild:function(rt){this.childNodes.splice(this.childNodes.indexOf(rt)>>>1,1),He.i.removeChild(rt)}}),Object(h.j)(Object(h.e)(bt,{context:He.context},Ee.__v),He.l)):He.l&&He.componentWillUnmount()}(ye.prototype=new h.a).__e=function(Ee){var He=this,je=Ce(He.__v),rt=He.o.get(Ee);return rt[0]++,function(Qt){var Yt=function(){He.props.revealOrder?(rt.push(Qt),Pe(He,Ee,rt)):Qt()};je?je(Yt):Yt()}},ye.prototype.render=function(Ee){this.u=null,this.o=new Map;var He=Object(h.k)(Ee.children);Ee.revealOrder&&Ee.revealOrder[0]==="b"&&He.reverse();for(var je=He.length;je--;)this.o.set(He[je],this.u=[1,0,this.u]);return Ee.children},ye.prototype.componentDidUpdate=ye.prototype.componentDidMount=function(){var Ee=this;this.o.forEach(function(He,je){Pe(Ee,je,He)})};var xt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,nn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,yn=typeof document<"u",xn=function(Ee){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(Ee)};h.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(Ee){Object.defineProperty(h.a.prototype,Ee,{configurable:!0,get:function(){return this["UNSAFE_"+Ee]},set:function(He){Object.defineProperty(this,Ee,{configurable:!0,writable:!0,value:He})}})});var pn=h.i.event;function lt(){}function gn(){return this.cancelBubble}function $e(){return this.defaultPrevented}h.i.event=function(Ee){return pn&&(Ee=pn(Ee)),Ee.persist=lt,Ee.isPropagationStopped=gn,Ee.isDefaultPrevented=$e,Ee.nativeEvent=Ee};var vn,Yn={configurable:!0,get:function(){return this.class}},Q=h.i.vnode;h.i.vnode=function(Ee){var He=Ee.type,je=Ee.props,rt=je;if(typeof He=="string"){var Qt=He.indexOf("-")===-1;for(var Yt in rt={},je){var Nn=je[Yt];yn&&Yt==="children"&&He==="noscript"||Yt==="value"&&"defaultValue"in je&&Nn==null||(Yt==="defaultValue"&&"value"in je&&je.value==null?Yt="value":Yt==="download"&&Nn===!0?Nn="":/ondoubleclick/i.test(Yt)?Yt="ondblclick":/^onchange(textarea|input)/i.test(Yt+He)&&!xn(je.type)?Yt="oninput":/^onfocus$/i.test(Yt)?Yt="onfocusin":/^onblur$/i.test(Yt)?Yt="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(Yt)?Yt=Yt.toLowerCase():Qt&&nn.test(Yt)?Yt=Yt.replace(/[A-Z0-9]/,"-$&").toLowerCase():Nn===null&&(Nn=void 0),rt[Yt]=Nn)}He=="select"&&rt.multiple&&Array.isArray(rt.value)&&(rt.value=Object(h.k)(je.children).forEach(function(mr){mr.props.selected=rt.value.indexOf(mr.props.value)!=-1})),He=="select"&&rt.defaultValue!=null&&(rt.value=Object(h.k)(je.children).forEach(function(mr){mr.props.selected=rt.multiple?rt.defaultValue.indexOf(mr.props.value)!=-1:rt.defaultValue==mr.props.value})),Ee.props=rt,je.class!=je.className&&(Yn.enumerable="className"in je,je.className!=null&&(rt.class=je.className),Object.defineProperty(rt,"className",Yn))}Ee.$$typeof=xt,Q&&Q(Ee)};var qn=h.i.__r;h.i.__r=function(Ee){qn&&qn(Ee),vn=Ee.__c};var wr={ReactCurrentDispatcher:{current:{readContext:function(Ee){return vn.__n[Ee.__c].props.value}}}};function Lr(Ee){return!!Ee&&Ee.$$typeof===xt}var Hr=function(Ee,He){return Ee(He)},zn=h.b,Ao={useState:D,useReducer:k,useEffect:F,useLayoutEffect:te,useRef:function(Ee){return g=5,V(function(){return{current:Ee}},[])},useImperativeHandle:function(Ee,He,je){g=6,te(function(){typeof Ee=="function"?Ee(He()):Ee&&(Ee.current=He())},je==null?je:je.concat(Ee))},useMemo:V,useCallback:z,useContext:function(Ee){var He=c.context[Ee.__c],je=M(l++,9);return je.c=Ee,He?(je.__==null&&(je.__=!0,He.sub(c)),He.props.value):Ee.__},useDebugValue:function(Ee,He){h.i.useDebugValue&&h.i.useDebugValue(He?He(Ee):Ee)},version:"17.0.2",Children:Ae,render:function(Ee,He,je){return He.__k==null&&(He.textContent=""),Object(h.j)(Ee,He),typeof je=="function"&&je(),Ee?Ee.__c:null},hydrate:function(Ee,He,je){return Object(h.h)(Ee,He),typeof je=="function"&&je(),Ee?Ee.__c:null},unmountComponentAtNode:function(Ee){return!!Ee.__k&&(Object(h.j)(null,Ee),!0)},createPortal:function(Ee,He){return Object(h.e)(Vt,{__v:Ee,i:He})},createElement:h.e,createContext:h.d,createFactory:function(Ee){return h.e.bind(null,Ee)},cloneElement:function(Ee){return Lr(Ee)?h.c.apply(null,arguments):Ee},createRef:h.f,Fragment:h.b,isValidElement:Lr,findDOMNode:function(Ee){return Ee&&(Ee.base||Ee.nodeType===1&&Ee)||null},Component:h.a,PureComponent:Xe,memo:De,forwardRef:he,flushSync:function(Ee,He){return Ee(He)},unstable_batchedUpdates:Hr,StrictMode:zn,Suspense:Jt,SuspenseList:ye,lazy:function(Ee){var He,je,rt;function Qt(Yt){if(He||(He=Ee()).then(function(Nn){je=Nn.default||Nn},function(Nn){rt=Nn}),rt)throw rt;if(!je)throw He;return Object(h.e)(je,Yt)}return Qt.displayName="Lazy",Qt.__f=!0,Qt},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:wr};a.d=Ao},function(n,a,r){var l=r(7),c=r(152),y=r(153),h=r(187),g=r(57),b=function(x){if(x&&x.forEach!==h)try{g(x,"forEach",h)}catch{x.forEach=h}};for(var E in c)c[E]&&b(l[E]&&l[E].prototype);b(y)},function(n,a,r){r(16)({target:"Object",stat:!0},{setPrototypeOf:r(102)})},function(n,a,r){var l=r(16),c=r(18),y=r(40),h=r(101),g=r(143);l({target:"Object",stat:!0,forced:c(function(){h(1)}),sham:!g},{getPrototypeOf:function(b){return h(y(b))}})},function(n,a,r){var l=r(16),c=r(46),y=r(76),h=r(203),g=r(165),b=r(32),E=r(33),x=r(60),T=r(18),j=c("Reflect","construct"),N=Object.prototype,M=[].push,D=T(function(){function te(){}return!(j(function(){},[],te)instanceof te)}),k=!T(function(){j(function(){})}),F=D||k;l({target:"Reflect",stat:!0,forced:F,sham:F},{construct:function(te,V){g(te),b(V);var z=arguments.length<3?te:g(arguments[2]);if(k&&!D)return j(te,V,z);if(te==z){switch(V.length){case 0:return new te;case 1:return new te(V[0]);case 2:return new te(V[0],V[1]);case 3:return new te(V[0],V[1],V[2]);case 4:return new te(V[0],V[1],V[2],V[3])}var J=[null];return y(M,J,V),new(y(h,te,J))}var K=z.prototype,B=x(E(K)?K:N),H=y(te,B,V);return E(H)?H:B}})},function(n,a){var r=Function.prototype,l=r.bind,c=r.call,y=l&&l.bind(c);n.exports=l?function(h){return h&&y(c,h)}:function(h){return h&&function(){return c.apply(h,arguments)}}},function(n,a,r){var l=r(7),c=r(50).f,y=r(57),h=r(42),g=r(110),b=r(134),E=r(95);n.exports=function(x,T){var j,N,M,D,k,F=x.target,te=x.global,V=x.stat;if(j=te?l:V?l[F]||g(F,{}):(l[F]||{}).prototype)for(N in T){if(D=T[N],M=x.noTargetGet?(k=c(j,N))&&k.value:j[N],!E(te?N:F+(V?".":"#")+N,x.forced)&&M!==void 0){if(typeof D==typeof M)continue;b(D,M)}(x.sham||M&&M.sham)&&y(D,"sham",!0),h(j,N,D,x)}}},function(n,a,r){var l=r(16),c=r(7),y=r(96),h=r(99),g=r(33),b=r(75),E=r(45),x=r(41),T=r(63),j=r(28),N=r(81),M=r(98),D=N("slice"),k=j("species"),F=c.Array,te=Math.max;l({target:"Array",proto:!0,forced:!D},{slice:function(V,z){var J,K,B,H=x(this),ne=E(H),X=b(V,ne),ge=b(z===void 0?ne:z,ne);if(y(H)&&(J=H.constructor,(h(J)&&(J===F||y(J.prototype))||g(J)&&(J=J[k])===null)&&(J=void 0),J===F||J===void 0))return M(H,X,ge);for(K=new(J===void 0?F:J)(te(ge-X,0)),B=0;X<ge;X++,B++)X in H&&T(K,B,H[X]);return K.length=B,K}})},function(n,a){n.exports=function(r){try{return!!r()}catch{return!0}}},function(n,a,r){var l=r(16),c=r(103);l({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(n,a,r){var l=r(16),c=r(40),y=r(77);l({target:"Object",stat:!0,forced:r(18)(function(){y(1)})},{keys:function(h){return y(c(h))}})},function(n,a,r){var l=r(36),c=r(73).EXISTS,y=r(15),h=r(38).f,g=Function.prototype,b=y(g.toString),E=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,x=y(E.exec);l&&!c&&h(g,"name",{configurable:!0,get:function(){try{return x(E,b(this))[1]}catch{return""}}})},function(n,a,r){var l=r(16),c=r(18),y=r(41),h=r(50).f,g=r(36),b=c(function(){h(1)});l({target:"Object",stat:!0,forced:!g||b,sham:!g},{getOwnPropertyDescriptor:function(E,x){return h(y(E),x)}})},function(n,a,r){var l=r(16),c=r(188);l({target:"Array",stat:!0,forced:!r(120)(function(y){Array.from(y)})},{from:c})},function(n,a,r){var l=r(16),c=r(79).filter;l({target:"Array",proto:!0,forced:!r(81)("filter")},{filter:function(y){return c(this,y,arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var l=r(16),c=r(36),y=r(135),h=r(41),g=r(50),b=r(63);l({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(E){for(var x,T,j=h(E),N=g.f,M=y(j),D={},k=0;M.length>k;)(T=N(j,x=M[k++]))!==void 0&&b(D,x,T);return D}})},,function(n,a,r){var l=r(16),c=r(7),y=r(18),h=r(96),g=r(33),b=r(40),E=r(45),x=r(63),T=r(115),j=r(81),N=r(28),M=r(70),D=N("isConcatSpreadable"),k=9007199254740991,F="Maximum allowed index exceeded",te=c.TypeError,V=M>=51||!y(function(){var K=[];return K[D]=!1,K.concat()[0]!==K}),z=j("concat"),J=function(K){if(!g(K))return!1;var B=K[D];return B!==void 0?!!B:h(K)};l({target:"Array",proto:!0,forced:!V||!z},{concat:function(K){var B,H,ne,X,ge,Fe=b(this),Me=T(Fe,0),Xe=0;for(B=-1,ne=arguments.length;B<ne;B++)if(J(ge=B===-1?Fe:arguments[B])){if(Xe+(X=E(ge))>k)throw te(F);for(H=0;H<X;H++,Xe++)H in ge&&x(Me,Xe,ge[H])}else{if(Xe>=k)throw te(F);x(Me,Xe++,ge)}return Me.length=Xe,Me}})},function(n,a,r){var l=r(7),c=r(89),y=r(35),h=r(90),g=r(108),b=r(132),E=c("wks"),x=l.Symbol,T=x&&x.for,j=b?x:x&&x.withoutSetter||h;n.exports=function(N){if(!y(E,N)||!g&&typeof E[N]!="string"){var M="Symbol."+N;g&&y(x,N)?E[N]=x[N]:E[N]=b&&T?T(M):j(M)}return E[N]}},function(n,a,r){var l=r(16),c=r(202);l({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(n,a){n.exports=function(r){return typeof r=="function"}},function(n,a,r){var l=r(106),c=typeof self=="object"&&self&&self.Object===Object&&self,y=l.a||c||Function("return this")();a.a=y},function(n,a,r){var l=r(7),c=r(33),y=l.String,h=l.TypeError;n.exports=function(g){if(c(g))return g;throw h(y(g)+" is not an object")}},function(n,a,r){var l=r(30);n.exports=function(c){return typeof c=="object"?c!==null:l(c)}},function(n,a){var r=Function.prototype.call;n.exports=r.bind?r.bind(r):function(){return r.apply(r,arguments)}},function(n,a,r){var l=r(15),c=r(40),y=l({}.hasOwnProperty);n.exports=Object.hasOwn||function(h,g){return y(c(h),g)}},function(n,a,r){var l=r(18);n.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(n,a,r){var l=r(16),c=r(79).map;l({target:"Array",proto:!0,forced:!r(81)("map")},{map:function(y){return c(this,y,arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var l=r(7),c=r(36),y=r(133),h=r(32),g=r(86),b=l.TypeError,E=Object.defineProperty;a.f=c?E:function(x,T,j){if(h(x),T=g(T),h(j),y)try{return E(x,T,j)}catch{}if("get"in j||"set"in j)throw b("Accessors not supported");return"value"in j&&(x[T]=j.value),x}},function(n,a,r){var l=r(7),c=r(97),y=l.String;n.exports=function(h){if(c(h)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return y(h)}},function(n,a,r){var l=r(7),c=r(44),y=l.Object;n.exports=function(h){return y(c(h))}},function(n,a,r){var l=r(85),c=r(44);n.exports=function(y){return l(c(y))}},function(n,a,r){var l=r(7),c=r(30),y=r(35),h=r(57),g=r(110),b=r(92),E=r(58),x=r(73).CONFIGURABLE,T=E.get,j=E.enforce,N=String(String).split("String");(n.exports=function(M,D,k,F){var te,V=!!F&&!!F.unsafe,z=!!F&&!!F.enumerable,J=!!F&&!!F.noTargetGet,K=F&&F.name!==void 0?F.name:D;c(k)&&(String(K).slice(0,7)==="Symbol("&&(K="["+String(K).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!y(k,"name")||x&&k.name!==K)&&h(k,"name",K),(te=j(k)).source||(te.source=N.join(typeof K=="string"?K:""))),M!==l?(V?!J&&M[D]&&(z=!0):delete M[D],z?M[D]=k:h(M,D,k)):z?M[D]=k:g(D,k)})(Function.prototype,"toString",function(){return c(this)&&T(this).source||b(this)})},function(n,a,r){(function(l){r.d(a,"d",function(){return h}),r.d(a,"c",function(){return g}),r.d(a,"b",function(){return b}),r.d(a,"a",function(){return x});var c=r(10),y=function(T,j){var N=typeof Symbol=="function"&&T[Symbol.iterator];if(!N)return T;var M,D,k=N.call(T),F=[];try{for(;(j===void 0||j-- >0)&&!(M=k.next()).done;)F.push(M.value)}catch(te){D={error:te}}finally{try{M&&!M.done&&(N=k.return)&&N.call(k)}finally{if(D)throw D.error}}return F};function h(){var T=y(Object(c.j)(0),2)[1];return Object(c.h)(function(){T(function(j){return j+1})},[])}function g(T){if(!T||typeof T!="object")return!1;var j=Object.getPrototypeOf(T);return!j||j===Object.prototype}function b(T){return typeof Symbol=="function"?Symbol.for(T):"__$mobx-react "+T+"__"}var E={};function x(){return typeof window<"u"?window:l!==void 0?l:typeof self<"u"?self:E}}).call(this,r(68))},function(n,a,r){var l=r(7).TypeError;n.exports=function(c){if(c==null)throw l("Can't call method on "+c);return c}},function(n,a,r){var l=r(94);n.exports=function(c){return l(c.length)}},function(n,a,r){var l=r(7),c=r(30),y=function(h){return c(h)?h:void 0};n.exports=function(h,g){return arguments.length<2?y(l[h]):l[h]&&l[h][g]}},function(n,a,r){var l=r(16),c=r(34),y=r(33),h=r(32),g=r(204),b=r(50),E=r(101);l({target:"Reflect",stat:!0},{get:function x(T,j){var N,M,D=arguments.length<3?T:arguments[2];return h(T)===D?T[j]:(N=b.f(T,j))?g(N)?N.value:N.get===void 0?void 0:c(N.get,D):y(M=E(T))?x(M,j,D):void 0}})},function(n,a,r){(function(l){var c=r(31),y=r(171),h=t&&!t.nodeType&&t,g=h&&typeof l=="object"&&l&&!l.nodeType&&l,b=g&&g.exports===h?c.a.Buffer:void 0,E=(b?b.isBuffer:void 0)||y.a;a.a=E}).call(this,r(122)(n))},function(n,a,r){(function(l){var c=r(106),y=t&&!t.nodeType&&t,h=y&&typeof l=="object"&&l&&!l.nodeType&&l,g=h&&h.exports===y&&c.a.process,b=function(){try{var E=h&&h.require&&h.require("util").types;return E||g&&g.binding&&g.binding("util")}catch{}}();a.a=b}).call(this,r(122)(n))},function(n,a,r){var l=r(36),c=r(34),y=r(84),h=r(69),g=r(41),b=r(86),E=r(35),x=r(133),T=Object.getOwnPropertyDescriptor;a.f=l?T:function(j,N){if(j=g(j),N=b(N),x)try{return T(j,N)}catch{}if(E(j,N))return h(!c(y.f,j,N),j[N])}},function(n,a,r){var l=r(15),c=l({}.toString),y=l("".slice);n.exports=function(h){return y(c(h),8,-1)}},function(n,a,r){r(182)("Map",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},r(186))},function(n,a,r){var l=r(16),c=r(220).entries;l({target:"Object",stat:!0},{entries:function(y){return c(y)}})},function(n,a,r){var l=r(15);n.exports=l({}.isPrototypeOf)},function(n,a,r){var l=r(46);n.exports=l("navigator","userAgent")||""},function(n,a,r){var l=r(7),c=r(30),y=r(88),h=l.TypeError;n.exports=function(g){if(c(g))return g;throw h(y(g)+" is not a function")}},function(n,a,r){var l=r(36),c=r(38),y=r(69);n.exports=l?function(h,g,b){return c.f(h,g,y(1,b))}:function(h,g,b){return h[g]=b,h}},function(n,a,r){var l,c,y,h=r(175),g=r(7),b=r(15),E=r(33),x=r(57),T=r(35),j=r(109),N=r(93),M=r(72),D="Object already initialized",k=g.TypeError,F=g.WeakMap;if(h||j.state){var te=j.state||(j.state=new F),V=b(te.get),z=b(te.has),J=b(te.set);l=function(B,H){if(z(te,B))throw new k(D);return H.facade=B,J(te,B,H),H},c=function(B){return V(te,B)||{}},y=function(B){return z(te,B)}}else{var K=N("state");M[K]=!0,l=function(B,H){if(T(B,K))throw new k(D);return H.facade=B,x(B,K,H),H},c=function(B){return T(B,K)?B[K]:{}},y=function(B){return T(B,K)}}n.exports={set:l,get:c,has:y,enforce:function(B){return y(B)?c(B):l(B,{})},getterFor:function(B){return function(H){var ne;if(!E(H)||(ne=c(H)).type!==B)throw k("Incompatible receiver, "+B+" required");return ne}}}},function(n,a){var r=Math.ceil,l=Math.floor;n.exports=function(c){var y=+c;return y!=y||y===0?0:(y>0?l:r)(y)}},function(n,a,r){var l,c=r(32),y=r(176),h=r(111),g=r(72),b=r(138),E=r(91),x=r(93),T=x("IE_PROTO"),j=function(){},N=function(k){return"<script>"+k+"<\/script>"},M=function(k){k.write(N("")),k.close();var F=k.parentWindow.Object;return k=null,F},D=function(){try{l=new ActiveXObject("htmlfile")}catch{}var k,F;D=typeof document<"u"?document.domain&&l?M(l):((F=E("iframe")).style.display="none",b.appendChild(F),F.src="javascript:",(k=F.contentWindow.document).open(),k.write(N("document.F=Object")),k.close(),k.F):M(l);for(var te=h.length;te--;)delete D.prototype[h[te]];return D()};g[T]=!0,n.exports=Object.create||function(k,F){var te;return k!==null?(j.prototype=c(k),te=new j,j.prototype=null,te[T]=k):te=D(),F===void 0?te:y(te,F)}},function(n,a,r){var l=r(36),c=r(7),y=r(15),h=r(95),g=r(42),b=r(35),E=r(148),x=r(54),T=r(87),j=r(131),N=r(18),M=r(74).f,D=r(50).f,k=r(38).f,F=r(160),te=r(161).trim,V="Number",z=c.Number,J=z.prototype,K=c.TypeError,B=y("".slice),H=y("".charCodeAt),ne=function(De){var Re=j(De,"number");return typeof Re=="bigint"?Re:X(Re)},X=function(De){var Re,ce,he,Oe,Ae,Ve,dt,mt,pt=j(De,"number");if(T(pt))throw K("Cannot convert a Symbol value to a number");if(typeof pt=="string"&&pt.length>2){if(pt=te(pt),(Re=H(pt,0))===43||Re===45){if((ce=H(pt,2))===88||ce===120)return NaN}else if(Re===48){switch(H(pt,1)){case 66:case 98:he=2,Oe=49;break;case 79:case 111:he=8,Oe=55;break;default:return+pt}for(Ve=(Ae=B(pt,2)).length,dt=0;dt<Ve;dt++)if((mt=H(Ae,dt))<48||mt>Oe)return NaN;return parseInt(Ae,he)}}return+pt};if(h(V,!z(" 0o1")||!z("0b1")||z("+0x1"))){for(var ge,Fe=function(De){var Re=arguments.length<1?0:z(ne(De)),ce=this;return x(J,ce)&&N(function(){F(ce)})?E(Object(Re),ce,Fe):Re},Me=l?M(z):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Xe=0;Me.length>Xe;Xe++)b(z,ge=Me[Xe])&&!b(Fe,ge)&&k(Fe,ge,D(z,ge));Fe.prototype=J,J.constructor=Fe,g(c,V,Fe)}},function(n,a,r){var l=r(56);n.exports=function(c,y){var h=c[y];return h==null?void 0:l(h)}},function(n,a,r){var l=r(86),c=r(38),y=r(69);n.exports=function(h,g,b){var E=l(g);E in h?c.f(h,E,y(0,b)):h[E]=b}},function(n,a,r){var l=r(15),c=r(56),y=l(l.bind);n.exports=function(h,g){return c(h),g===void 0?h:y?y(h,g):function(){return h.apply(g,arguments)}}},function(n,a,r){var l=r(16),c=r(15),y=r(85),h=r(41),g=r(121),b=c([].join),E=y!=Object,x=g("join",",");l({target:"Array",proto:!0,forced:E||!x},{join:function(T){return b(h(this),T===void 0?",":T)}})},function(n,a,r){var l=r(15),c=r(73).PROPER,y=r(42),h=r(32),g=r(54),b=r(39),E=r(18),x=r(154),T="toString",j=RegExp.prototype,N=j.toString,M=l(x),D=E(function(){return N.call({source:"a",flags:"b"})!="/a/b"}),k=c&&N.name!=T;(D||k)&&y(RegExp.prototype,T,function(){var F=h(this),te=b(F.source),V=F.flags;return"/"+te+"/"+b(V===void 0&&g(j,F)&&!("flags"in j)?M(F):V)},{unsafe:!0})},function(n,a,r){var l=r(16),c=r(217),y=r(100);l({target:"Array",proto:!0},{fill:c}),y("fill")},function(n,a){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}n.exports=r},function(n,a){n.exports=function(r,l){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:l}}},function(n,a,r){var l,c,y=r(7),h=r(55),g=y.process,b=y.Deno,E=g&&g.versions||b&&b.version,x=E&&E.v8;x&&(c=(l=x.split("."))[0]>0&&l[0]<4?1:+(l[0]+l[1])),!c&&h&&(!(l=h.match(/Edge\/(\d+)/))||l[1]>=74)&&(l=h.match(/Chrome\/(\d+)/))&&(c=+l[1]),n.exports=c},function(n,a){n.exports=!1},function(n,a){n.exports={}},function(n,a,r){var l=r(36),c=r(35),y=Function.prototype,h=l&&Object.getOwnPropertyDescriptor,g=c(y,"name"),b=g&&(function(){}).name==="something",E=g&&(!l||l&&h(y,"name").configurable);n.exports={EXISTS:g,PROPER:b,CONFIGURABLE:E}},function(n,a,r){var l=r(136),c=r(111).concat("length","prototype");a.f=Object.getOwnPropertyNames||function(y){return l(y,c)}},function(n,a,r){var l=r(59),c=Math.max,y=Math.min;n.exports=function(h,g){var b=l(h);return b<0?c(b+g,0):y(b,g)}},function(n,a){var r=Function.prototype,l=r.apply,c=r.bind,y=r.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(c?y.bind(l):function(){return y.apply(l,arguments)})},function(n,a,r){var l=r(136),c=r(111);n.exports=Object.keys||function(y){return l(y,c)}},function(n,a,r){var l=r(38).f,c=r(35),y=r(28)("toStringTag");n.exports=function(h,g,b){h&&!c(h=b?h:h.prototype,y)&&l(h,y,{configurable:!0,value:g})}},function(n,a,r){var l=r(64),c=r(15),y=r(85),h=r(40),g=r(45),b=r(115),E=c([].push),x=function(T){var j=T==1,N=T==2,M=T==3,D=T==4,k=T==6,F=T==7,te=T==5||k;return function(V,z,J,K){for(var B,H,ne=h(V),X=y(ne),ge=l(z,J),Fe=g(X),Me=0,Xe=K||b,De=j?Xe(V,Fe):N||F?Xe(V,0):void 0;Fe>Me;Me++)if((te||Me in X)&&(H=ge(B=X[Me],Me,ne),T))if(j)De[Me]=H;else if(H)switch(T){case 3:return!0;case 5:return B;case 6:return Me;case 2:E(De,B)}else switch(T){case 4:return!1;case 7:E(De,B)}return k?-1:M||D?D:De}};n.exports={forEach:x(0),map:x(1),filter:x(2),some:x(3),every:x(4),find:x(5),findIndex:x(6),filterReject:x(7)}},function(n,a){n.exports={}},function(n,a,r){var l=r(18),c=r(28),y=r(70),h=c("species");n.exports=function(g){return y>=51||!l(function(){var b=[];return(b.constructor={})[h]=function(){return{foo:1}},b[g](Boolean).foo!==1})}},function(n,a,r){var l=r(76),c=r(34),y=r(15),h=r(123),g=r(159),b=r(32),E=r(44),x=r(164),T=r(124),j=r(94),N=r(39),M=r(62),D=r(114),k=r(125),F=r(103),te=r(155),V=r(18),z=te.UNSUPPORTED_Y,J=4294967295,K=Math.min,B=[].push,H=y(/./.exec),ne=y(B),X=y("".slice),ge=!V(function(){var Fe=/(?:)/,Me=Fe.exec;Fe.exec=function(){return Me.apply(this,arguments)};var Xe="ab".split(Fe);return Xe.length!==2||Xe[0]!=="a"||Xe[1]!=="b"});h("split",function(Fe,Me,Xe){var De;return De="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(Re,ce){var he=N(E(this)),Oe=ce===void 0?J:ce>>>0;if(Oe===0)return[];if(Re===void 0)return[he];if(!g(Re))return c(Me,he,Re,Oe);for(var Ae,Ve,dt,mt=[],pt=(Re.ignoreCase?"i":"")+(Re.multiline?"m":"")+(Re.unicode?"u":"")+(Re.sticky?"y":""),Jt=0,Ce=new RegExp(Re.source,pt+"g");(Ae=c(F,Ce,he))&&!((Ve=Ce.lastIndex)>Jt&&(ne(mt,X(he,Jt,Ae.index)),Ae.length>1&&Ae.index<he.length&&l(B,mt,D(Ae,1)),dt=Ae[0].length,Jt=Ve,mt.length>=Oe));)Ce.lastIndex===Ae.index&&Ce.lastIndex++;return Jt===he.length?!dt&&H(Ce,"")||ne(mt,""):ne(mt,X(he,Jt)),mt.length>Oe?D(mt,0,Oe):mt}:"0".split(void 0,0).length?function(Re,ce){return Re===void 0&&ce===0?[]:c(Me,this,Re,ce)}:Me,[function(Re,ce){var he=E(this),Oe=Re==null?void 0:M(Re,Fe);return Oe?c(Oe,Re,he,ce):c(De,N(he),Re,ce)},function(Re,ce){var he=b(this),Oe=N(Re),Ae=Xe(De,he,Oe,ce,De!==Me);if(Ae.done)return Ae.value;var Ve=x(he,RegExp),dt=he.unicode,mt=(he.ignoreCase?"i":"")+(he.multiline?"m":"")+(he.unicode?"u":"")+(z?"g":"y"),pt=new Ve(z?"^(?:"+he.source+")":he,mt),Jt=ce===void 0?J:ce>>>0;if(Jt===0)return[];if(Oe.length===0)return k(pt,Oe)===null?[Oe]:[];for(var Ce=0,ye=0,Pe=[];ye<Oe.length;){pt.lastIndex=z?0:ye;var bt,Vt=k(pt,z?X(Oe,ye):Oe);if(Vt===null||(bt=K(j(pt.lastIndex+(z?ye:0)),Oe.length))===Ce)ye=T(Oe,ye,dt);else{if(ne(Pe,X(Oe,Ce,ye)),Pe.length===Jt)return Pe;for(var xt=1;xt<=Vt.length-1;xt++)if(ne(Pe,Vt[xt]),Pe.length===Jt)return Pe;ye=Ce=bt}}return ne(Pe,X(Oe,Ce)),Pe}]},!ge,z)},function(n,a,r){r(16)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(n,a,r){var l={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,y=c&&!l.call({1:2},1);a.f=y?function(h){var g=c(this,h);return!!g&&g.enumerable}:l},function(n,a,r){var l=r(7),c=r(15),y=r(18),h=r(51),g=l.Object,b=c("".split);n.exports=y(function(){return!g("z").propertyIsEnumerable(0)})?function(E){return h(E)=="String"?b(E,""):g(E)}:g},function(n,a,r){var l=r(131),c=r(87);n.exports=function(y){var h=l(y,"string");return c(h)?h:h+""}},function(n,a,r){var l=r(7),c=r(46),y=r(30),h=r(54),g=r(132),b=l.Object;n.exports=g?function(E){return typeof E=="symbol"}:function(E){var x=c("Symbol");return y(x)&&h(x.prototype,b(E))}},function(n,a,r){var l=r(7).String;n.exports=function(c){try{return l(c)}catch{return"Object"}}},function(n,a,r){var l=r(71),c=r(109);(n.exports=function(y,h){return c[y]||(c[y]=h!==void 0?h:{})})("versions",[]).push({version:"3.19.3",mode:l?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(n,a,r){var l=r(15),c=0,y=Math.random(),h=l(1 .toString);n.exports=function(g){return"Symbol("+(g===void 0?"":g)+")_"+h(++c+y,36)}},function(n,a,r){var l=r(7),c=r(33),y=l.document,h=c(y)&&c(y.createElement);n.exports=function(g){return h?y.createElement(g):{}}},function(n,a,r){var l=r(15),c=r(30),y=r(109),h=l(Function.toString);c(y.inspectSource)||(y.inspectSource=function(g){return h(g)}),n.exports=y.inspectSource},function(n,a,r){var l=r(89),c=r(90),y=l("keys");n.exports=function(h){return y[h]||(y[h]=c(h))}},function(n,a,r){var l=r(59),c=Math.min;n.exports=function(y){return y>0?c(l(y),9007199254740991):0}},function(n,a,r){var l=r(18),c=r(30),y=/#|\.prototype\./,h=function(T,j){var N=b[g(T)];return N==x||N!=E&&(c(j)?l(j):!!j)},g=h.normalize=function(T){return String(T).replace(y,".").toLowerCase()},b=h.data={},E=h.NATIVE="N",x=h.POLYFILL="P";n.exports=h},function(n,a,r){var l=r(51);n.exports=Array.isArray||function(c){return l(c)=="Array"}},function(n,a,r){var l=r(7),c=r(113),y=r(30),h=r(51),g=r(28)("toStringTag"),b=l.Object,E=h(function(){return arguments}())=="Arguments";n.exports=c?h:function(x){var T,j,N;return x===void 0?"Undefined":x===null?"Null":typeof(j=function(M,D){try{return M[D]}catch{}}(T=b(x),g))=="string"?j:E?h(T):(N=h(T))=="Object"&&y(T.callee)?"Arguments":N}},function(n,a,r){var l=r(15);n.exports=l([].slice)},function(n,a,r){var l=r(15),c=r(18),y=r(30),h=r(97),g=r(46),b=r(92),E=function(){},x=[],T=g("Reflect","construct"),j=/^\s*(?:class|function)\b/,N=l(j.exec),M=!j.exec(E),D=function(k){if(!y(k))return!1;try{return T(E,x,k),!0}catch{return!1}};n.exports=!T||c(function(){var k;return D(D.call)||!D(Object)||!D(function(){k=!0})||k})?function(k){if(!y(k))return!1;switch(h(k)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return M||!!N(j,b(k))}:D},function(n,a,r){var l=r(28),c=r(60),y=r(38),h=l("unscopables"),g=Array.prototype;g[h]==null&&y.f(g,h,{configurable:!0,value:c(null)}),n.exports=function(b){g[h][b]=!0}},function(n,a,r){var l=r(7),c=r(35),y=r(30),h=r(40),g=r(93),b=r(143),E=g("IE_PROTO"),x=l.Object,T=x.prototype;n.exports=b?x.getPrototypeOf:function(j){var N=h(j);if(c(N,E))return N[E];var M=N.constructor;return y(M)&&N instanceof M?M.prototype:N instanceof x?T:null}},function(n,a,r){var l=r(15),c=r(32),y=r(181);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var h,g=!1,b={};try{(h=l(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(b,[]),g=b instanceof Array}catch{}return function(E,x){return c(E),y(x),g?h(E,x):E.__proto__=x,E}}():void 0)},function(n,a,r){var l,c,y=r(34),h=r(15),g=r(39),b=r(154),E=r(155),x=r(89),T=r(60),j=r(58).get,N=r(190),M=r(191),D=x("native-string-replace",String.prototype.replace),k=RegExp.prototype.exec,F=k,te=h("".charAt),V=h("".indexOf),z=h("".replace),J=h("".slice),K=(c=/b*/g,y(k,l=/a/,"a"),y(k,c,"a"),l.lastIndex!==0||c.lastIndex!==0),B=E.BROKEN_CARET,H=/()??/.exec("")[1]!==void 0;(K||H||B||N||M)&&(F=function(ne){var X,ge,Fe,Me,Xe,De,Re,ce=this,he=j(ce),Oe=g(ne),Ae=he.raw;if(Ae)return Ae.lastIndex=ce.lastIndex,X=y(F,Ae,Oe),ce.lastIndex=Ae.lastIndex,X;var Ve=he.groups,dt=B&&ce.sticky,mt=y(b,ce),pt=ce.source,Jt=0,Ce=Oe;if(dt&&(mt=z(mt,"y",""),V(mt,"g")===-1&&(mt+="g"),Ce=J(Oe,ce.lastIndex),ce.lastIndex>0&&(!ce.multiline||ce.multiline&&te(Oe,ce.lastIndex-1)!==`
`)&&(pt="(?: "+pt+")",Ce=" "+Ce,Jt++),ge=new RegExp("^(?:"+pt+")",mt)),H&&(ge=new RegExp("^"+pt+"$(?!\\s)",mt)),K&&(Fe=ce.lastIndex),Me=y(k,dt?ge:ce,Ce),dt?Me?(Me.input=J(Me.input,Jt),Me[0]=J(Me[0],Jt),Me.index=ce.lastIndex,ce.lastIndex+=Me[0].length):ce.lastIndex=0:K&&Me&&(ce.lastIndex=ce.global?Me.index+Me[0].length:Fe),H&&Me&&Me.length>1&&y(D,Me[0],ge,function(){for(Xe=1;Xe<arguments.length-2;Xe++)arguments[Xe]===void 0&&(Me[Xe]=void 0)}),Me&&Ve)for(Me.groups=De=T(null),Xe=0;Xe<Ve.length;Xe++)De[(Re=Ve[Xe])[0]]=Me[Re[1]];return Me}),n.exports=F},function(n,a,r){var l=r(16),c=r(7),y=r(75),h=r(59),g=r(45),b=r(40),E=r(115),x=r(63),T=r(81)("splice"),j=c.TypeError,N=Math.max,M=Math.min,D=9007199254740991,k="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!T},{splice:function(F,te){var V,z,J,K,B,H,ne=b(this),X=g(ne),ge=y(F,X),Fe=arguments.length;if(Fe===0?V=z=0:Fe===1?(V=0,z=X-ge):(V=Fe-2,z=M(N(h(te),0),X-ge)),X+V-z>D)throw j(k);for(J=E(ne,z),K=0;K<z;K++)(B=ge+K)in ne&&x(J,K,ne[B]);if(J.length=z,V<z){for(K=ge;K<X-z;K++)H=K+V,(B=K+z)in ne?ne[H]=ne[B]:delete ne[H];for(K=X;K>X-z+V;K--)delete ne[K-1]}else if(V>z)for(K=X-z;K>ge;K--)H=K+V-1,(B=K+z-1)in ne?ne[H]=ne[B]:delete ne[H];for(K=0;K<V;K++)ne[K+ge]=arguments[K+2];return ne.length=X-z+V,J}})},function(n,a,r){var l=r(16),c=r(205);l({target:"String",proto:!0,forced:r(206)("anchor")},{anchor:function(y){return c(this,"a","name",y)}})},function(n,a,r){(function(l){var c=typeof l=="object"&&l&&l.Object===Object&&l;a.a=c}).call(this,r(68))},function(n,a,r){(function(l){var c=r(31),y=t&&!t.nodeType&&t,h=y&&typeof l=="object"&&l&&!l.nodeType&&l,g=h&&h.exports===y?c.a.Buffer:void 0,b=g?g.allocUnsafe:void 0;a.a=function(E,x){if(x)return E.slice();var T=E.length,j=b?b(T):new E.constructor(T);return E.copy(j),j}}).call(this,r(122)(n))},function(n,a,r){var l=r(70),c=r(18);n.exports=!!Object.getOwnPropertySymbols&&!c(function(){var y=Symbol();return!String(y)||!(Object(y)instanceof Symbol)||!Symbol.sham&&l&&l<41})},function(n,a,r){var l=r(7),c=r(110),y="__core-js_shared__",h=l[y]||c(y,{});n.exports=h},function(n,a,r){var l=r(7),c=Object.defineProperty;n.exports=function(y,h){try{c(l,y,{value:h,configurable:!0,writable:!0})}catch{l[y]=h}return h}},function(n,a){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,a){a.f=Object.getOwnPropertySymbols},function(n,a,r){var l={};l[r(28)("toStringTag")]="z",n.exports=String(l)==="[object z]"},function(n,a,r){var l=r(7),c=r(75),y=r(45),h=r(63),g=l.Array,b=Math.max;n.exports=function(E,x,T){for(var j=y(E),N=c(x,j),M=c(T===void 0?j:T,j),D=g(b(M-N,0)),k=0;N<M;N++,k++)h(D,k,E[N]);return D.length=k,D}},function(n,a,r){var l=r(178);n.exports=function(c,y){return new(l(c))(y===0?0:y)}},function(n,a,r){var l=r(16),c=r(34),y=r(71),h=r(73),g=r(30),b=r(180),E=r(101),x=r(102),T=r(78),j=r(57),N=r(42),M=r(28),D=r(80),k=r(142),F=h.PROPER,te=h.CONFIGURABLE,V=k.IteratorPrototype,z=k.BUGGY_SAFARI_ITERATORS,J=M("iterator"),K="keys",B="values",H="entries",ne=function(){return this};n.exports=function(X,ge,Fe,Me,Xe,De,Re){b(Fe,ge,Me);var ce,he,Oe,Ae=function(ye){if(ye===Xe&&Jt)return Jt;if(!z&&ye in mt)return mt[ye];switch(ye){case K:case B:case H:return function(){return new Fe(this,ye)}}return function(){return new Fe(this)}},Ve=ge+" Iterator",dt=!1,mt=X.prototype,pt=mt[J]||mt["@@iterator"]||Xe&&mt[Xe],Jt=!z&&pt||Ae(Xe),Ce=ge=="Array"&&mt.entries||pt;if(Ce&&(ce=E(Ce.call(new X)))!==Object.prototype&&ce.next&&(y||E(ce)===V||(x?x(ce,V):g(ce[J])||N(ce,J,ne)),T(ce,Ve,!0,!0),y&&(D[Ve]=ne)),F&&Xe==B&&pt&&pt.name!==B&&(!y&&te?j(mt,"name",B):(dt=!0,Jt=function(){return c(pt,this)})),Xe)if(he={values:Ae(B),keys:De?Jt:Ae(K),entries:Ae(H)},Re)for(Oe in he)(z||dt||!(Oe in mt))&&N(mt,Oe,he[Oe]);else l({target:ge,proto:!0,forced:z||dt},he);return y&&!Re||mt[J]===Jt||N(mt,J,Jt,{name:Xe}),D[ge]=Jt,he}},function(n,a,r){var l=r(7),c=r(64),y=r(34),h=r(32),g=r(88),b=r(145),E=r(45),x=r(54),T=r(146),j=r(118),N=r(147),M=l.TypeError,D=function(F,te){this.stopped=F,this.result=te},k=D.prototype;n.exports=function(F,te,V){var z,J,K,B,H,ne,X,ge=V&&V.that,Fe=!(!V||!V.AS_ENTRIES),Me=!(!V||!V.IS_ITERATOR),Xe=!(!V||!V.INTERRUPTED),De=c(te,ge),Re=function(he){return z&&N(z,"normal",he),new D(!0,he)},ce=function(he){return Fe?(h(he),Xe?De(he[0],he[1],Re):De(he[0],he[1])):Xe?De(he,Re):De(he)};if(Me)z=F;else{if(!(J=j(F)))throw M(g(F)+" is not iterable");if(b(J)){for(K=0,B=E(F);B>K;K++)if((H=ce(F[K]))&&x(k,H))return H;return new D(!1)}z=T(F,J)}for(ne=z.next;!(X=y(ne,z)).done;){try{H=ce(X.value)}catch(he){N(z,"throw",he)}if(typeof H=="object"&&H&&x(k,H))return H}return new D(!1)}},function(n,a,r){var l=r(97),c=r(62),y=r(80),h=r(28)("iterator");n.exports=function(g){if(g!=null)return c(g,h)||c(g,"@@iterator")||y[l(g)]}},function(n,a,r){var l=r(7),c=r(54),y=l.TypeError;n.exports=function(h,g){if(c(g,h))return h;throw y("Incorrect invocation")}},function(n,a,r){var l=r(28)("iterator"),c=!1;try{var y=0,h={next:function(){return{done:!!y++}},return:function(){c=!0}};h[l]=function(){return this},Array.from(h,function(){throw 2})}catch{}n.exports=function(g,b){if(!b&&!c)return!1;var E=!1;try{var x={};x[l]=function(){return{next:function(){return{done:E=!0}}}},g(x)}catch{}return E}},function(n,a,r){var l=r(18);n.exports=function(c,y){var h=[][c];return!!h&&l(function(){h.call(null,y||function(){throw 1},1)})}},function(n,a){n.exports=function(r){if(!r.webpackPolyfill){var l=Object.create(r);l.children||(l.children=[]),Object.defineProperty(l,"loaded",{enumerable:!0,get:function(){return l.l}}),Object.defineProperty(l,"id",{enumerable:!0,get:function(){return l.i}}),Object.defineProperty(l,"exports",{enumerable:!0}),l.webpackPolyfill=1}return l}},function(n,a,r){r(19);var l=r(15),c=r(42),y=r(103),h=r(18),g=r(28),b=r(57),E=g("species"),x=RegExp.prototype;n.exports=function(T,j,N,M){var D=g(T),k=!h(function(){var z={};return z[D]=function(){return 7},""[T](z)!=7}),F=k&&!h(function(){var z=!1,J=/a/;return T==="split"&&((J={}).constructor={},J.constructor[E]=function(){return J},J.flags="",J[D]=/./[D]),J.exec=function(){return z=!0,null},J[D](""),!z});if(!k||!F||N){var te=l(/./[D]),V=j(D,""[T],function(z,J,K,B,H){var ne=l(z),X=J.exec;return X===y||X===x.exec?k&&!H?{done:!0,value:te(J,K,B)}:{done:!0,value:ne(K,J,B)}:{done:!1}});c(String.prototype,T,V[0]),c(x,D,V[1])}M&&b(x[D],"sham",!0)}},function(n,a,r){var l=r(151).charAt;n.exports=function(c,y,h){return y+(h?l(c,y).length:1)}},function(n,a,r){var l=r(7),c=r(34),y=r(32),h=r(30),g=r(51),b=r(103),E=l.TypeError;n.exports=function(x,T){var j=x.exec;if(h(j)){var N=c(j,x,T);return N!==null&&y(N),N}if(g(x)==="RegExp")return c(b,x,T);throw E("RegExp#exec called on incompatible receiver")}},function(n,a,r){var l=r(76),c=r(34),y=r(15),h=r(123),g=r(18),b=r(32),E=r(30),x=r(59),T=r(94),j=r(39),N=r(44),M=r(124),D=r(62),k=r(201),F=r(125),te=r(28)("replace"),V=Math.max,z=Math.min,J=y([].concat),K=y([].push),B=y("".indexOf),H=y("".slice),ne="a".replace(/./,"$0")==="$0",X=!!/./[te]&&/./[te]("a","$0")==="";h("replace",function(ge,Fe,Me){var Xe=X?"$":"$0";return[function(De,Re){var ce=N(this),he=De==null?void 0:D(De,te);return he?c(he,De,ce,Re):c(Fe,j(ce),De,Re)},function(De,Re){var ce=b(this),he=j(De);if(typeof Re=="string"&&B(Re,Xe)===-1&&B(Re,"$<")===-1){var Oe=Me(Fe,ce,he,Re);if(Oe.done)return Oe.value}var Ae=E(Re);Ae||(Re=j(Re));var Ve=ce.global;if(Ve){var dt=ce.unicode;ce.lastIndex=0}for(var mt=[];;){var pt=F(ce,he);if(pt===null||(K(mt,pt),!Ve))break;j(pt[0])===""&&(ce.lastIndex=M(he,T(ce.lastIndex),dt))}for(var Jt,Ce="",ye=0,Pe=0;Pe<mt.length;Pe++){for(var bt=j((pt=mt[Pe])[0]),Vt=V(z(x(pt.index),he.length),0),xt=[],nn=1;nn<pt.length;nn++)K(xt,(Jt=pt[nn])===void 0?Jt:String(Jt));var yn=pt.groups;if(Ae){var xn=J([bt],xt,Vt,he);yn!==void 0&&K(xn,yn);var pn=j(l(Re,void 0,xn))}else pn=k(bt,he,Vt,xt,yn,Re);Vt>=ye&&(Ce+=H(he,ye,Vt)+pn,ye=Vt+bt.length)}return Ce+H(he,ye)}]},!!g(function(){var ge=/./;return ge.exec=function(){var Fe=[];return Fe.groups={a:"7"},Fe},"".replace(ge,"$<a>")!=="7"})||!ne||X)},function(n,a,r){var l=r(16),c=Math.hypot,y=Math.abs,h=Math.sqrt;l({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(g,b){for(var E,x,T=0,j=0,N=arguments.length,M=0;j<N;)M<(E=y(arguments[j++]))?(T=T*(x=M/E)*x+1,M=E):T+=E>0?(x=E/M)*x:E;return M===1/0?1/0:M*h(T)}})},function(n,a,r){var l=r(51),c=r(7);n.exports=l(c.process)=="process"},function(n,a,r){r(16)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(n,a,r){(function(l,c){var y;/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var h,g="Expected a function",b="__lodash_hash_undefined__",E="__lodash_placeholder__",x=16,T=32,j=64,N=128,M=256,D=1/0,k=9007199254740991,F=NaN,te=4294967295,V=[["ary",N],["bind",1],["bindKey",2],["curry",8],["curryRight",x],["flip",512],["partial",T],["partialRight",j],["rearg",M]],z="[object Arguments]",J="[object Array]",K="[object Boolean]",B="[object Date]",H="[object Error]",ne="[object Function]",X="[object GeneratorFunction]",ge="[object Map]",Fe="[object Number]",Me="[object Object]",Xe="[object Promise]",De="[object RegExp]",Re="[object Set]",ce="[object String]",he="[object Symbol]",Oe="[object WeakMap]",Ae="[object ArrayBuffer]",Ve="[object DataView]",dt="[object Float32Array]",mt="[object Float64Array]",pt="[object Int8Array]",Jt="[object Int16Array]",Ce="[object Int32Array]",ye="[object Uint8Array]",Pe="[object Uint8ClampedArray]",bt="[object Uint16Array]",Vt="[object Uint32Array]",xt=/\b__p \+= '';/g,nn=/\b(__p \+=) '' \+/g,yn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xn=/&(?:amp|lt|gt|quot|#39);/g,pn=/[&<>"']/g,lt=RegExp(xn.source),gn=RegExp(pn.source),$e=/<%-([\s\S]+?)%>/g,vn=/<%([\s\S]+?)%>/g,Yn=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qn=/^\w*$/,wr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lr=/[\\^$.*+?()[\]{}|]/g,Hr=RegExp(Lr.source),zn=/^\s+/,Ao=/\s/,Ee=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,He=/\{\n\/\* \[wrapped with (.+)\] \*/,je=/,? & /,rt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Qt=/[()=,{}\[\]\/\s]/,Yt=/\\(\\)?/g,Nn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mr=/\w*$/,qo=/^[-+]0x[0-9a-f]+$/i,ui=/^0b[01]+$/i,Do=/^\[object .+?Constructor\]$/,Bo=/^0o[0-7]+$/i,On=/^(?:0|[1-9]\d*)$/,In=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Vn=/($^)/,or=/['\n\r\u2028\u2029\\]/g,Xr="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Mr="\\u2700-\\u27bf",qa="a-z\\xdf-\\xf6\\xf8-\\xff",Aa="A-Z\\xc0-\\xd6\\xd8-\\xde",Ka="\\ufe0e\\ufe0f",Gu="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dd="['’]",Xl="[\\ud800-\\udfff]",qi="["+Gu+"]",Ss="["+Xr+"]",Tn="\\d+",af="[\\u2700-\\u27bf]",so="["+qa+"]",Yl="[^\\ud800-\\udfff"+Gu+Tn+Mr+qa+Aa+"]",Ri="\\ud83c[\\udffb-\\udfff]",$i="[^\\ud800-\\udfff]",tl="(?:\\ud83c[\\udde6-\\uddff]){2}",fa="[\\ud800-\\udbff][\\udc00-\\udfff]",Ki="["+Aa+"]",da="(?:"+so+"|"+Yl+")",ql="(?:"+Ki+"|"+Yl+")",Kl="(?:['’](?:d|ll|m|re|s|t|ve))?",uf="(?:['’](?:D|LL|M|RE|S|T|VE))?",As="(?:"+Ss+"|"+Ri+")?",sf="[\\ufe0e\\ufe0f]?",Zl=sf+As+("(?:\\u200d(?:"+[$i,tl,fa].join("|")+")"+sf+As+")*"),pd="(?:"+[af,tl,fa].join("|")+")"+Zl,yu="(?:"+[$i+Ss+"?",Ss,tl,fa,Xl].join("|")+")",lf=RegExp(dd,"g"),Za=RegExp(Ss,"g"),Jl=RegExp(Ri+"(?="+Ri+")|"+yu+Zl,"g"),nl=RegExp([Ki+"?"+so+"+"+Kl+"(?="+[qi,Ki,"$"].join("|")+")",ql+"+"+uf+"(?="+[qi,Ki+da,"$"].join("|")+")",Ki+"?"+da+"+"+Kl,Ki+"+"+uf,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Tn,pd].join("|"),"g"),Ql=RegExp("[\\u200d\\ud800-\\udfff"+Xr+Ka+"]"),ec=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,hd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],cf=-1,Br={};Br[dt]=Br[mt]=Br[pt]=Br[Jt]=Br[Ce]=Br[ye]=Br[Pe]=Br[bt]=Br[Vt]=!0,Br[z]=Br[J]=Br[Ae]=Br[K]=Br[Ve]=Br[B]=Br[H]=Br[ne]=Br[ge]=Br[Fe]=Br[Me]=Br[De]=Br[Re]=Br[ce]=Br[Oe]=!1;var Fr={};Fr[z]=Fr[J]=Fr[Ae]=Fr[Ve]=Fr[K]=Fr[B]=Fr[dt]=Fr[mt]=Fr[pt]=Fr[Jt]=Fr[Ce]=Fr[ge]=Fr[Fe]=Fr[Me]=Fr[De]=Fr[Re]=Fr[ce]=Fr[he]=Fr[ye]=Fr[Pe]=Fr[bt]=Fr[Vt]=!0,Fr[H]=Fr[ne]=Fr[Oe]=!1;var ff={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Wu=parseFloat,Zi=parseInt,rl=typeof l=="object"&&l&&l.Object===Object&&l,df=typeof self=="object"&&self&&self.Object===Object&&self,To=rl||df||Function("return this")(),mu=a&&!a.nodeType&&a,gu=mu&&typeof c=="object"&&c&&!c.nodeType&&c,ol=gu&&gu.exports===mu,zu=ol&&rl.process,si=function(){try{var at=gu&&gu.require&&gu.require("util").types;return at||zu&&zu.binding&&zu.binding("util")}catch{}}(),tc=si&&si.isArrayBuffer,pf=si&&si.isDate,nc=si&&si.isMap,bi=si&&si.isRegExp,Ko=si&&si.isSet,Bi=si&&si.isTypedArray;function Jr(at,Ct,Ft){switch(Ft.length){case 0:return at.call(Ct);case 1:return at.call(Ct,Ft[0]);case 2:return at.call(Ct,Ft[0],Ft[1]);case 3:return at.call(Ct,Ft[0],Ft[1],Ft[2])}return at.apply(Ct,Ft)}function hf(at,Ct,Ft,fn){for(var ur=-1,xr=at==null?0:at.length;++ur<xr;){var io=at[ur];Ct(fn,io,Ft(io),at)}return fn}function wi(at,Ct){for(var Ft=-1,fn=at==null?0:at.length;++Ft<fn&&Ct(at[Ft],Ft,at)!==!1;);return at}function rc(at,Ct){for(var Ft=at==null?0:at.length;Ft--&&Ct(at[Ft],Ft,at)!==!1;);return at}function vf(at,Ct){for(var Ft=-1,fn=at==null?0:at.length;++Ft<fn;)if(!Ct(at[Ft],Ft,at))return!1;return!0}function Ei(at,Ct){for(var Ft=-1,fn=at==null?0:at.length,ur=0,xr=[];++Ft<fn;){var io=at[Ft];Ct(io,Ft,at)&&(xr[ur++]=io)}return xr}function yi(at,Ct){return!!(at!=null&&at.length)&&Vu(at,Ct,0)>-1}function oc(at,Ct,Ft){for(var fn=-1,ur=at==null?0:at.length;++fn<ur;)if(Ft(Ct,at[fn]))return!0;return!1}function jr(at,Ct){for(var Ft=-1,fn=at==null?0:at.length,ur=Array(fn);++Ft<fn;)ur[Ft]=Ct(at[Ft],Ft,at);return ur}function Zo(at,Ct){for(var Ft=-1,fn=Ct.length,ur=at.length;++Ft<fn;)at[ur+Ft]=Ct[Ft];return at}function il(at,Ct,Ft,fn){var ur=-1,xr=at==null?0:at.length;for(fn&&xr&&(Ft=at[++ur]);++ur<xr;)Ft=Ct(Ft,at[ur],ur,at);return Ft}function yf(at,Ct,Ft,fn){var ur=at==null?0:at.length;for(fn&&ur&&(Ft=at[--ur]);ur--;)Ft=Ct(Ft,at[ur],ur,at);return Ft}function ic(at,Ct){for(var Ft=-1,fn=at==null?0:at.length;++Ft<fn;)if(Ct(at[Ft],Ft,at))return!0;return!1}var al=xi("length");function Ta(at,Ct,Ft){var fn;return Ft(at,function(ur,xr,io){if(Ct(ur,xr,io))return fn=xr,!1}),fn}function Oi(at,Ct,Ft,fn){for(var ur=at.length,xr=Ft+(fn?1:-1);fn?xr--:++xr<ur;)if(Ct(at[xr],xr,at))return xr;return-1}function Vu(at,Ct,Ft){return Ct==Ct?function(fn,ur,xr){for(var io=xr-1,S=fn.length;++io<S;)if(fn[io]===ur)return io;return-1}(at,Ct,Ft):Oi(at,Ji,Ft)}function ji(at,Ct,Ft,fn){for(var ur=Ft-1,xr=at.length;++ur<xr;)if(fn(at[ur],Ct))return ur;return-1}function Ji(at){return at!=at}function Or(at,Ct){var Ft=at==null?0:at.length;return Ft?Hu(at,Ct)/Ft:F}function xi(at){return function(Ct){return Ct==null?h:Ct[at]}}function pa(at){return function(Ct){return at==null?h:at[Ct]}}function ri(at,Ct,Ft,fn,ur){return ur(at,function(xr,io,S){Ft=fn?(fn=!1,xr):Ct(Ft,xr,io,S)}),Ft}function Hu(at,Ct){for(var Ft,fn=-1,ur=at.length;++fn<ur;){var xr=Ct(at[fn]);xr!==h&&(Ft=Ft===h?xr:Ft+xr)}return Ft}function _u(at,Ct){for(var Ft=-1,fn=Array(at);++Ft<at;)fn[Ft]=Ct(Ft);return fn}function ha(at){return at&&at.slice(0,Jo(at)+1).replace(zn,"")}function oo(at){return function(Ct){return at(Ct)}}function Ts(at,Ct){return jr(Ct,function(Ft){return at[Ft]})}function Ma(at,Ct){return at.has(Ct)}function Qi(at,Ct){for(var Ft=-1,fn=at.length;++Ft<fn&&Vu(Ct,at[Ft],0)>-1;);return Ft}function ac(at,Ct){for(var Ft=at.length;Ft--&&Vu(Ct,at[Ft],0)>-1;);return Ft}function vd(at,Ct){for(var Ft=at.length,fn=0;Ft--;)at[Ft]===Ct&&++fn;return fn}var uc=pa({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Io=pa({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function bu(at){return"\\"+ff[at]}function Na(at){return Ql.test(at)}function Uo(at){var Ct=-1,Ft=Array(at.size);return at.forEach(function(fn,ur){Ft[++Ct]=[ur,fn]}),Ft}function sc(at,Ct){return function(Ft){return at(Ct(Ft))}}function Ui(at,Ct){for(var Ft=-1,fn=at.length,ur=0,xr=[];++Ft<fn;){var io=at[Ft];io!==Ct&&io!==E||(at[Ft]=E,xr[ur++]=Ft)}return xr}function ea(at){var Ct=-1,Ft=Array(at.size);return at.forEach(function(fn){Ft[++Ct]=fn}),Ft}function ul(at){var Ct=-1,Ft=Array(at.size);return at.forEach(function(fn){Ft[++Ct]=[fn,fn]}),Ft}function Si(at){return Na(at)?function(Ct){for(var Ft=Jl.lastIndex=0;Jl.test(Ct);)++Ft;return Ft}(at):al(at)}function Ci(at){return Na(at)?function(Ct){return Ct.match(Jl)||[]}(at):function(Ct){return Ct.split("")}(at)}function Jo(at){for(var Ct=at.length;Ct--&&Ao.test(at.charAt(Ct)););return Ct}var Gi=pa({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),mi=function at(Ct){var Ft,fn=(Ct=Ct==null?To:mi.defaults(To.Object(),Ct,mi.pick(To,hd))).Array,ur=Ct.Date,xr=Ct.Error,io=Ct.Function,S=Ct.Math,A=Ct.Object,L=Ct.RegExp,ee=Ct.String,ve=Ct.TypeError,Ge=fn.prototype,ht=io.prototype,Ht=A.prototype,_n=Ct["__core-js_shared__"],hr=ht.toString,un=Ht.hasOwnProperty,$r=0,dr=(Ft=/[^.]+$/.exec(_n&&_n.keys&&_n.keys.IE_PROTO||""))?"Symbol(src)_1."+Ft:"",Pr=Ht.toString,Wi=hr.call(A),po=To._,Di=L("^"+hr.call(un).replace(Lr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ja=ol?Ct.Buffer:h,Qa=Ct.Symbol,wu=Ct.Uint8Array,Xu=Ja?Ja.allocUnsafe:h,Pa=sc(A.getPrototypeOf,A),Yu=A.create,Go=Ht.propertyIsEnumerable,Eu=Ge.splice,eu=Qa?Qa.isConcatSpreadable:h,ka=Qa?Qa.iterator:h,Ra=Qa?Qa.toStringTag:h,Ms=function(){try{var d=La(A,"defineProperty");return d({},"",{}),d}catch{}}(),wp=Ct.clearTimeout!==To.clearTimeout&&Ct.clearTimeout,Ep=ur&&ur.now!==To.Date.now&&ur.now,yd=Ct.setTimeout!==To.setTimeout&&Ct.setTimeout,lc=S.ceil,Ns=S.floor,mf=A.getOwnPropertySymbols,Op=Ja?Ja.isBuffer:h,Ps=Ct.isFinite,cc=Ge.join,gf=sc(A.keys,A),Mo=S.max,Ai=S.min,_f=ur.now,bf=Ct.parseInt,sl=S.random,ev=Ge.reverse,ll=La(Ct,"DataView"),tu=La(Ct,"Map"),fc=La(Ct,"Promise"),ks=La(Ct,"Set"),qu=La(Ct,"WeakMap"),cl=La(A,"create"),dc=qu&&new qu,Ku={},tv=ss(ll),pc=ss(tu),nv=ss(fc),rv=ss(ks),xp=ss(qu),wf=Qa?Qa.prototype:h,gi=wf?wf.valueOf:h,Sp=wf?wf.toString:h;function re(d){if(wo(d)&&!vr(d)&&!(d instanceof Sr)){if(d instanceof va)return d;if(un.call(d,"__wrapped__"))return Wf(d)}return new va(d)}var Rs=function(){function d(){}return function(m){if(!Kr(m))return{};if(Yu)return Yu(m);d.prototype=m;var w=new d;return d.prototype=h,w}}();function Ou(){}function va(d,m){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=h}function Sr(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=te,this.__views__=[]}function li(d){var m=-1,w=d==null?0:d.length;for(this.clear();++m<w;){var R=d[m];this.set(R[0],R[1])}}function Cr(d){var m=-1,w=d==null?0:d.length;for(this.clear();++m<w;){var R=d[m];this.set(R[0],R[1])}}function ja(d){var m=-1,w=d==null?0:d.length;for(this.clear();++m<w;){var R=d[m];this.set(R[0],R[1])}}function xu(d){var m=-1,w=d==null?0:d.length;for(this.__data__=new ja;++m<w;)this.add(d[m])}function ta(d){var m=this.__data__=new Cr(d);this.size=m.size}function Ef(d,m){var w=vr(d),R=!w&&cs(d),U=!w&&!R&&wa(d),q=!w&&!R&&!U&&Ze(d),le=w||R||U||q,_e=le?_u(d.length,ee):[],Le=_e.length;for(var ft in d)!m&&!un.call(d,ft)||le&&(ft=="length"||U&&(ft=="offset"||ft=="parent")||q&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||Qr(ft,Le))||_e.push(ft);return _e}function Of(d){var m=d.length;return m?d[Td(0,m-1)]:h}function md(d,m){return lu(oi(d),Zu(m,0,d.length))}function Ap(d){return lu(oi(d))}function Su(d,m,w){(w!==h&&!Hi(d[m],w)||w===h&&!(m in d))&&Ca(d,m,w)}function No(d,m,w){var R=d[m];un.call(d,m)&&Hi(R,w)&&(w!==h||m in d)||Ca(d,m,w)}function fl(d,m){for(var w=d.length;w--;)if(Hi(d[w][0],m))return w;return-1}function gd(d,m,w,R){return lo(d,function(U,q,le){m(R,U,w(U),le)}),R}function Au(d,m){return d&&ou(m,It(m),d)}function Ca(d,m,w){m=="__proto__"&&Ms?Ms(d,m,{configurable:!0,enumerable:!0,value:w,writable:!0}):d[m]=w}function hc(d,m){for(var w=-1,R=m.length,U=fn(R),q=d==null;++w<R;)U[w]=q?h:zt(d,m[w]);return U}function Zu(d,m,w){return d==d&&(w!==h&&(d=d<=w?d:w),m!==h&&(d=d>=m?d:m)),d}function na(d,m,w,R,U,q){var le,_e=1&m,Le=2&m,ft=4&m;if(w&&(le=U?w(d,R,U,q):w(d)),le!==h)return le;if(!Kr(d))return d;var gt=vr(d);if(gt){if(le=function(Mt){var Zt=Mt.length,fr=new Mt.constructor(Zt);return Zt&&typeof Mt[0]=="string"&&un.call(Mt,"index")&&(fr.index=Mt.index,fr.input=Mt.input),fr}(d),!_e)return oi(d,le)}else{var Gt=_o(d),Sn=Gt==ne||Gt==X;if(wa(d))return Rd(d,_e);if(Gt==Me||Gt==z||Sn&&!U){if(le=Le||Sn?{}:is(d),!_e)return Le?function(Mt,Zt){return ou(Mt,_l(Mt),Zt)}(d,function(Mt,Zt){return Mt&&ou(Zt,Tt(Zt),Mt)}(le,d)):function(Mt,Zt){return ou(Mt,gl(Mt),Zt)}(d,Au(le,d))}else{if(!Fr[Gt])return U?d:{};le=function(Mt,Zt,fr){var mn=Mt.constructor;switch(Zt){case Ae:return Cs(Mt);case K:case B:return new mn(+Mt);case Ve:return function(rr,kr){var Ln=kr?Cs(rr.buffer):rr.buffer;return new rr.constructor(Ln,rr.byteOffset,rr.byteLength)}(Mt,fr);case dt:case mt:case pt:case Jt:case Ce:case ye:case Pe:case bt:case Vt:return ao(Mt,fr);case ge:return new mn;case Fe:case ce:return new mn(Mt);case De:return function(rr){var kr=new rr.constructor(rr.source,mr.exec(rr));return kr.lastIndex=rr.lastIndex,kr}(Mt);case Re:return new mn;case he:return ir=Mt,gi?A(gi.call(ir)):{}}var ir}(d,Gt,_e)}}q||(q=new ta);var En=q.get(d);if(En)return En;q.set(d,le),me(d)?d.forEach(function(Mt){le.add(na(Mt,m,w,Mt,d,q))}):ci(d)&&d.forEach(function(Mt,Zt){le.set(Zt,na(Mt,m,w,Zt,d,q))});var Hn=gt?h:(ft?Le?Bf:Ac:Le?Tt:It)(d);return wi(Hn||d,function(Mt,Zt){Hn&&(Mt=d[Zt=Mt]),No(le,Zt,na(Mt,m,w,Zt,d,q))}),le}function _d(d,m,w){var R=w.length;if(d==null)return!R;for(d=A(d);R--;){var U=w[R],q=m[U],le=d[U];if(le===h&&!(U in d)||!q(le))return!1}return!0}function bd(d,m,w){if(typeof d!="function")throw new ve(g);return Ls(function(){d.apply(h,w)},m)}function Da(d,m,w,R){var U=-1,q=yi,le=!0,_e=d.length,Le=[],ft=m.length;if(!_e)return Le;w&&(m=jr(m,oo(w))),R?(q=oc,le=!1):m.length>=200&&(q=Ma,le=!1,m=new xu(m));e:for(;++U<_e;){var gt=d[U],Gt=w==null?gt:w(gt);if(gt=R||gt!==0?gt:0,le&&Gt==Gt){for(var Sn=ft;Sn--;)if(m[Sn]===Gt)continue e;Le.push(gt)}else q(m,Gt,R)||Le.push(gt)}return Le}re.templateSettings={escape:$e,evaluate:vn,interpolate:Yn,variable:"",imports:{_:re}},re.prototype=Ou.prototype,re.prototype.constructor=re,va.prototype=Rs(Ou.prototype),va.prototype.constructor=va,Sr.prototype=Rs(Ou.prototype),Sr.prototype.constructor=Sr,li.prototype.clear=function(){this.__data__=cl?cl(null):{},this.size=0},li.prototype.delete=function(d){var m=this.has(d)&&delete this.__data__[d];return this.size-=m?1:0,m},li.prototype.get=function(d){var m=this.__data__;if(cl){var w=m[d];return w===b?h:w}return un.call(m,d)?m[d]:h},li.prototype.has=function(d){var m=this.__data__;return cl?m[d]!==h:un.call(m,d)},li.prototype.set=function(d,m){var w=this.__data__;return this.size+=this.has(d)?0:1,w[d]=cl&&m===h?b:m,this},Cr.prototype.clear=function(){this.__data__=[],this.size=0},Cr.prototype.delete=function(d){var m=this.__data__,w=fl(m,d);return!(w<0)&&(w==m.length-1?m.pop():Eu.call(m,w,1),--this.size,!0)},Cr.prototype.get=function(d){var m=this.__data__,w=fl(m,d);return w<0?h:m[w][1]},Cr.prototype.has=function(d){return fl(this.__data__,d)>-1},Cr.prototype.set=function(d,m){var w=this.__data__,R=fl(w,d);return R<0?(++this.size,w.push([d,m])):w[R][1]=m,this},ja.prototype.clear=function(){this.size=0,this.__data__={hash:new li,map:new(tu||Cr),string:new li}},ja.prototype.delete=function(d){var m=ml(this,d).delete(d);return this.size-=m?1:0,m},ja.prototype.get=function(d){return ml(this,d).get(d)},ja.prototype.has=function(d){return ml(this,d).has(d)},ja.prototype.set=function(d,m){var w=ml(this,d),R=w.size;return w.set(d,m),this.size+=w.size==R?0:1,this},xu.prototype.add=xu.prototype.push=function(d){return this.__data__.set(d,b),this},xu.prototype.has=function(d){return this.__data__.has(d)},ta.prototype.clear=function(){this.__data__=new Cr,this.size=0},ta.prototype.delete=function(d){var m=this.__data__,w=m.delete(d);return this.size=m.size,w},ta.prototype.get=function(d){return this.__data__.get(d)},ta.prototype.has=function(d){return this.__data__.has(d)},ta.prototype.set=function(d,m){var w=this.__data__;if(w instanceof Cr){var R=w.__data__;if(!tu||R.length<199)return R.push([d,m]),this.size=++w.size,this;w=this.__data__=new ja(R)}return w.set(d,m),this.size=w.size,this};var lo=Ds(Pn),Tp=Ds(no,!0);function wd(d,m){var w=!0;return lo(d,function(R,U,q){return w=!!m(R,U,q)}),w}function Po(d,m,w){for(var R=-1,U=d.length;++R<U;){var q=d[R],le=m(q);if(le!=null&&(_e===h?le==le&&!ct(le):w(le,_e)))var _e=le,Le=q}return Le}function Ur(d,m){var w=[];return lo(d,function(R,U,q){m(R,U,q)&&w.push(R)}),w}function Wo(d,m,w,R,U){var q=-1,le=d.length;for(w||(w=Mc),U||(U=[]);++q<le;){var _e=d[q];m>0&&w(_e)?m>1?Wo(_e,m-1,w,R,U):Zo(U,_e):R||(U[U.length]=_e)}return U}var _r=jf(),to=jf(!0);function Pn(d,m){return d&&_r(d,m,It)}function no(d,m){return d&&to(d,m,It)}function vc(d,m){return Ei(m,function(w){return fu(d[w])})}function nu(d,m){for(var w=0,R=(m=ts(m,d)).length;d!=null&&w<R;)d=d[Ba(m[w++])];return w&&w==R?d:h}function xf(d,m,w){var R=m(d);return vr(d)?R:Zo(R,w(d))}function ho(d){return d==null?d===h?"[object Undefined]":"[object Null]":Ra&&Ra in A(d)?function(m){var w=un.call(m,Ra),R=m[Ra];try{m[Ra]=h;var U=!0}catch{}var q=Pr.call(m);return U&&(w?m[Ra]=R:delete m[Ra]),q}(d):function(m){return Pr.call(m)}(d)}function go(d,m){return d>m}function Ed(d,m){return d!=null&&un.call(d,m)}function Od(d,m){return d!=null&&m in A(d)}function yc(d,m,w){for(var R=w?oc:yi,U=d[0].length,q=d.length,le=q,_e=fn(q),Le=1/0,ft=[];le--;){var gt=d[le];le&&m&&(gt=jr(gt,oo(m))),Le=Ai(gt.length,Le),_e[le]=!w&&(m||U>=120&&gt.length>=120)?new xu(le&&gt):h}gt=d[0];var Gt=-1,Sn=_e[0];e:for(;++Gt<U&&ft.length<Le;){var En=gt[Gt],Hn=m?m(En):En;if(En=w||En!==0?En:0,!(Sn?Ma(Sn,Hn):R(ft,Hn,w))){for(le=q;--le;){var Mt=_e[le];if(!(Mt?Ma(Mt,Hn):R(d[le],Hn,w)))continue e}Sn&&Sn.push(Hn),ft.push(En)}}return ft}function Ti(d,m,w){var R=(d=us(d,m=ts(m,d)))==null?d:d[Ba(Mi(m))];return R==null?h:Jr(R,d,w)}function Sf(d){return wo(d)&&ho(d)==z}function dl(d,m,w,R,U){return d===m||(d==null||m==null||!wo(d)&&!wo(m)?d!=d&&m!=m:function(q,le,_e,Le,ft,gt){var Gt=vr(q),Sn=vr(le),En=Gt?J:_o(q),Hn=Sn?J:_o(le),Mt=(En=En==z?Me:En)==Me,Zt=(Hn=Hn==z?Me:Hn)==Me,fr=En==Hn;if(fr&&wa(q)){if(!wa(le))return!1;Gt=!0,Mt=!1}if(fr&&!Mt)return gt||(gt=new ta),Gt||Ze(q)?$f(q,le,_e,Le,ft,gt):function(Ln,Qn,Fo,nt,Iu,fi,fs){switch(Fo){case Ve:if(Ln.byteLength!=Qn.byteLength||Ln.byteOffset!=Qn.byteOffset)return!1;Ln=Ln.buffer,Qn=Qn.buffer;case Ae:return!(Ln.byteLength!=Qn.byteLength||!fi(new wu(Ln),new wu(Qn)));case K:case B:case Fe:return Hi(+Ln,+Qn);case H:return Ln.name==Qn.name&&Ln.message==Qn.message;case De:case ce:return Ln==Qn+"";case ge:var Ws=Uo;case Re:var Xf=1&nt;if(Ws||(Ws=ea),Ln.size!=Qn.size&&!Xf)return!1;var Xd=fs.get(Ln);if(Xd)return Xd==Qn;nt|=2,fs.set(Ln,Qn);var $c=$f(Ws(Ln),Ws(Qn),nt,Iu,fi,fs);return fs.delete(Ln),$c;case he:if(gi)return gi.call(Ln)==gi.call(Qn)}return!1}(q,le,En,_e,Le,ft,gt);if(!(1&_e)){var mn=Mt&&un.call(q,"__wrapped__"),ir=Zt&&un.call(le,"__wrapped__");if(mn||ir){var rr=mn?q.value():q,kr=ir?le.value():le;return gt||(gt=new ta),ft(rr,kr,_e,Le,gt)}}return fr?(gt||(gt=new ta),function(Ln,Qn,Fo,nt,Iu,fi){var fs=1&Fo,Ws=Ac(Ln),Xf=Ws.length,Xd=Ac(Qn).length;if(Xf!=Xd&&!fs)return!1;for(var $c=Xf;$c--;){var Ml=Ws[$c];if(!(fs?Ml in Qn:un.call(Qn,Ml)))return!1}var lv=fi.get(Ln),cv=fi.get(Qn);if(lv&&cv)return lv==Qn&&cv==Ln;var Yd=!0;fi.set(Ln,Qn),fi.set(Qn,Ln);for(var Xp=fs;++$c<Xf;){var Nl=Ln[Ml=Ws[$c]],qd=Qn[Ml];if(nt)var fv=fs?nt(qd,Nl,Ml,Qn,Ln,fi):nt(Nl,qd,Ml,Ln,Qn,fi);if(!(fv===h?Nl===qd||Iu(Nl,qd,Fo,nt,fi):fv)){Yd=!1;break}Xp||(Xp=Ml=="constructor")}if(Yd&&!Xp){var Pl=Ln.constructor,Kd=Qn.constructor;Pl==Kd||!("constructor"in Ln)||!("constructor"in Qn)||typeof Pl=="function"&&Pl instanceof Pl&&typeof Kd=="function"&&Kd instanceof Kd||(Yd=!1)}return fi.delete(Ln),fi.delete(Qn),Yd}(q,le,_e,Le,ft,gt)):!1}(d,m,w,R,dl,U))}function ya(d,m,w,R){var U=w.length,q=U,le=!R;if(d==null)return!q;for(d=A(d);U--;){var _e=w[U];if(le&&_e[2]?_e[1]!==d[_e[0]]:!(_e[0]in d))return!1}for(;++U<q;){var Le=(_e=w[U])[0],ft=d[Le],gt=_e[1];if(le&&_e[2]){if(ft===h&&!(Le in d))return!1}else{var Gt=new ta;if(R)var Sn=R(ft,gt,Le,d,m,Gt);if(!(Sn===h?dl(gt,ft,3,R,Gt):Sn))return!1}}return!0}function Ju(d){return!(!Kr(d)||(m=d,dr&&dr in m))&&(fu(d)?Di:Do).test(ss(d));var m}function Tu(d){return typeof d=="function"?d:d==null?Un:typeof d=="object"?vr(d)?Sd(d[0],d[1]):xd(d):ae(d)}function ma(d){if(!as(d))return gf(d);var m=[];for(var w in A(d))un.call(d,w)&&w!="constructor"&&m.push(w);return m}function Mp(d){if(!Kr(d))return function(U){var q=[];if(U!=null)for(var le in A(U))q.push(le);return q}(d);var m=as(d),w=[];for(var R in d)(R!="constructor"||!m&&un.call(d,R))&&w.push(R);return w}function ru(d,m){return d<m}function ra(d,m){var w=-1,R=Xi(d)?fn(d.length):[];return lo(d,function(U,q,le){R[++w]=m(U,q,le)}),R}function xd(d){var m=Tc(d);return m.length==1&&m[0][2]?wl(m[0][0],m[0][1]):function(w){return w===d||ya(w,d,m)}}function Sd(d,m){return ku(d)&&su(m)?wl(Ba(d),m):function(w){var R=zt(w,d);return R===h&&R===m?Et(w,d):dl(m,R,3)}}function Af(d,m,w,R,U){d!==m&&_r(m,function(q,le){if(U||(U=new ta),Kr(q))(function(Le,ft,gt,Gt,Sn,En,Hn){var Mt=kt(Le,gt),Zt=kt(ft,gt),fr=Hn.get(Zt);if(fr)return void Su(Le,gt,fr);var mn=En?En(Mt,Zt,gt+"",Le,ft,Hn):h,ir=mn===h;if(ir){var rr=vr(Zt),kr=!rr&&wa(Zt),Ln=!rr&&!kr&&Ze(Zt);mn=Zt,rr||kr||Ln?vr(Mt)?mn=Mt:Ho(Mt)?mn=oi(Mt):kr?(ir=!1,mn=Rd(Zt,!0)):Ln?(ir=!1,mn=ao(Zt,!0)):mn=[]:I(Zt)||cs(Zt)?(mn=Mt,cs(Mt)?mn=Pt(Mt):Kr(Mt)&&!fu(Mt)||(mn=is(Zt))):ir=!1}ir&&(Hn.set(Zt,mn),Sn(mn,Zt,Gt,En,Hn),Hn.delete(Zt)),Su(Le,gt,mn)})(d,m,le,w,Af,R,U);else{var _e=R?R(kt(d,le),q,le+"",d,m,U):h;_e===h&&(_e=q),Su(d,le,_e)}},Tt)}function Np(d,m){var w=d.length;if(w)return Qr(m+=m<0?w:0,w)?d[m]:h}function Pp(d,m,w){m=m.length?jr(m,function(q){return vr(q)?function(le){return nu(le,q.length===1?q[0]:q)}:q}):[Un];var R=-1;m=jr(m,oo(Zn()));var U=ra(d,function(q,le,_e){var Le=jr(m,function(ft){return ft(q)});return{criteria:Le,index:++R,value:q}});return function(q,le){var _e=q.length;for(q.sort(le);_e--;)q[_e]=q[_e].value;return q}(U,function(q,le){return function(_e,Le,ft){for(var gt=-1,Gt=_e.criteria,Sn=Le.criteria,En=Gt.length,Hn=ft.length;++gt<En;){var Mt=wc(Gt[gt],Sn[gt]);if(Mt)return gt>=Hn?Mt:Mt*(ft[gt]=="desc"?-1:1)}return _e.index-Le.index}(q,le,w)})}function kp(d,m,w){for(var R=-1,U=m.length,q={};++R<U;){var le=m[R],_e=nu(d,le);w(_e,le)&&Qu(q,ts(le,d),_e)}return q}function Ad(d,m,w,R){var U=R?ji:Vu,q=-1,le=m.length,_e=d;for(d===m&&(m=oi(m)),w&&(_e=jr(d,oo(w)));++q<le;)for(var Le=0,ft=m[q],gt=w?w(ft):ft;(Le=U(_e,gt,Le,R))>-1;)_e!==d&&Eu.call(_e,Le,1),Eu.call(d,Le,1);return d}function pl(d,m){for(var w=d?m.length:0,R=w-1;w--;){var U=m[w];if(w==R||U!==q){var q=U;Qr(U)?Eu.call(d,U,1):Nf(d,U)}}return d}function Td(d,m){return d+Ns(sl()*(m-d+1))}function mc(d,m){var w="";if(!d||m<1||m>k)return w;do m%2&&(w+=d),(m=Ns(m/2))&&(d+=d);while(m);return w}function br(d,m){return Pc(Nc(d,m,Un),d+"")}function ov(d){return Of(yr(d))}function Md(d,m){var w=yr(d);return lu(w,Zu(m,0,w.length))}function Qu(d,m,w,R){if(!Kr(d))return d;for(var U=-1,q=(m=ts(m,d)).length,le=q-1,_e=d;_e!=null&&++U<q;){var Le=Ba(m[U]),ft=w;if(Le==="__proto__"||Le==="constructor"||Le==="prototype")return d;if(U!=le){var gt=_e[Le];(ft=R?R(gt,Le,_e):h)===h&&(ft=Kr(gt)?gt:Qr(m[U+1])?[]:{})}No(_e,Le,ft),_e=_e[Le]}return d}var gc=dc?function(d,m){return dc.set(d,m),d}:Un,iv=Ms?function(d,m){return Ms(d,"toString",{configurable:!0,enumerable:!1,value:Tr(m),writable:!0})}:Un;function av(d){return lu(yr(d))}function ga(d,m,w){var R=-1,U=d.length;m<0&&(m=-m>U?0:U+m),(w=w>U?U:w)<0&&(w+=U),U=m>w?0:w-m>>>0,m>>>=0;for(var q=fn(U);++R<U;)q[R]=d[R+m];return q}function Nd(d,m){var w;return lo(d,function(R,U,q){return!(w=m(R,U,q))}),!!w}function Tf(d,m,w){var R=0,U=d==null?R:d.length;if(typeof m=="number"&&m==m&&U<=2147483647){for(;R<U;){var q=R+U>>>1,le=d[q];le!==null&&!ct(le)&&(w?le<=m:le<m)?R=q+1:U=q}return U}return Mf(d,m,Un,w)}function Mf(d,m,w,R){var U=0,q=d==null?0:d.length;if(q===0)return 0;for(var le=(m=w(m))!=m,_e=m===null,Le=ct(m),ft=m===h;U<q;){var gt=Ns((U+q)/2),Gt=w(d[gt]),Sn=Gt!==h,En=Gt===null,Hn=Gt==Gt,Mt=ct(Gt);if(le)var Zt=R||Hn;else Zt=ft?Hn&&(R||Sn):_e?Hn&&Sn&&(R||!En):Le?Hn&&Sn&&!En&&(R||!Mt):!En&&!Mt&&(R?Gt<=m:Gt<m);Zt?U=gt+1:q=gt}return Ai(q,4294967294)}function Rp(d,m){for(var w=-1,R=d.length,U=0,q=[];++w<R;){var le=d[w],_e=m?m(le):le;if(!w||!Hi(_e,Le)){var Le=_e;q[U++]=le===0?0:le}}return q}function Pd(d){return typeof d=="number"?d:ct(d)?F:+d}function zi(d){if(typeof d=="string")return d;if(vr(d))return jr(d,zi)+"";if(ct(d))return Sp?Sp.call(d):"";var m=d+"";return m=="0"&&1/d==-1/0?"-0":m}function es(d,m,w){var R=-1,U=yi,q=d.length,le=!0,_e=[],Le=_e;if(w)le=!1,U=oc;else if(q>=200){var ft=m?null:Lf(d);if(ft)return ea(ft);le=!1,U=Ma,Le=new xu}else Le=m?[]:_e;e:for(;++R<q;){var gt=d[R],Gt=m?m(gt):gt;if(gt=w||gt!==0?gt:0,le&&Gt==Gt){for(var Sn=Le.length;Sn--;)if(Le[Sn]===Gt)continue e;m&&Le.push(Gt),_e.push(gt)}else U(Le,Gt,w)||(Le!==_e&&Le.push(Gt),_e.push(gt))}return _e}function Nf(d,m){return(d=us(d,m=ts(m,d)))==null||delete d[Ba(Mi(m))]}function js(d,m,w,R){return Qu(d,m,w(nu(d,m)),R)}function _c(d,m,w,R){for(var U=d.length,q=R?U:-1;(R?q--:++q<U)&&m(d[q],q,d););return w?ga(d,R?0:q,R?q+1:U):ga(d,R?q+1:0,R?U:q)}function jp(d,m){var w=d;return w instanceof Sr&&(w=w.value()),il(m,function(R,U){return U.func.apply(U.thisArg,Zo([R],U.args))},w)}function bc(d,m,w){var R=d.length;if(R<2)return R?es(d[0]):[];for(var U=-1,q=fn(R);++U<R;)for(var le=d[U],_e=-1;++_e<R;)_e!=U&&(q[U]=Da(q[U]||le,d[_e],m,w));return es(Wo(q,1),m,w)}function Pf(d,m,w){for(var R=-1,U=d.length,q=m.length,le={};++R<U;){var _e=R<q?m[R]:h;w(le,d[R],_e)}return le}function kf(d){return Ho(d)?d:[]}function Rf(d){return typeof d=="function"?d:Un}function ts(d,m){return vr(d)?d:ku(d,m)?[d]:$d(wt(d))}var Cp=br;function ns(d,m,w){var R=d.length;return w=w===h?R:w,!m&&w>=R?d:ga(d,m,w)}var kd=wp||function(d){return To.clearTimeout(d)};function Rd(d,m){if(m)return d.slice();var w=d.length,R=Xu?Xu(w):new d.constructor(w);return d.copy(R),R}function Cs(d){var m=new d.constructor(d.byteLength);return new wu(m).set(new wu(d)),m}function ao(d,m){var w=m?Cs(d.buffer):d.buffer;return new d.constructor(w,d.byteOffset,d.length)}function wc(d,m){if(d!==m){var w=d!==h,R=d===null,U=d==d,q=ct(d),le=m!==h,_e=m===null,Le=m==m,ft=ct(m);if(!_e&&!ft&&!q&&d>m||q&&le&&Le&&!_e&&!ft||R&&le&&Le||!w&&Le||!U)return 1;if(!R&&!q&&!ft&&d<m||ft&&w&&U&&!R&&!q||_e&&w&&U||!le&&U||!Le)return-1}return 0}function vo(d,m,w,R){for(var U=-1,q=d.length,le=w.length,_e=-1,Le=m.length,ft=Mo(q-le,0),gt=fn(Le+ft),Gt=!R;++_e<Le;)gt[_e]=m[_e];for(;++U<le;)(Gt||U<q)&&(gt[w[U]]=d[U]);for(;ft--;)gt[_e++]=d[U++];return gt}function Mu(d,m,w,R){for(var U=-1,q=d.length,le=-1,_e=w.length,Le=-1,ft=m.length,gt=Mo(q-_e,0),Gt=fn(gt+ft),Sn=!R;++U<gt;)Gt[U]=d[U];for(var En=U;++Le<ft;)Gt[En+Le]=m[Le];for(;++le<_e;)(Sn||U<q)&&(Gt[En+w[le]]=d[U++]);return Gt}function oi(d,m){var w=-1,R=d.length;for(m||(m=fn(R));++w<R;)m[w]=d[w];return m}function ou(d,m,w,R){var U=!w;w||(w={});for(var q=-1,le=m.length;++q<le;){var _e=m[q],Le=R?R(w[_e],d[_e],_e,w,d):h;Le===h&&(Le=d[_e]),U?Ca(w,_e,Le):No(w,_e,Le)}return w}function Nu(d,m){return function(w,R){var U=vr(w)?hf:gd,q=m?m():{};return U(w,d,Zn(R,2),q)}}function rs(d){return br(function(m,w){var R=-1,U=w.length,q=U>1?w[U-1]:h,le=U>2?w[2]:h;for(q=d.length>3&&typeof q=="function"?(U--,q):h,le&&ko(w[0],w[1],le)&&(q=U<3?h:q,U=1),m=A(m);++R<U;){var _e=w[R];_e&&d(m,_e,R,q)}return m})}function Ds(d,m){return function(w,R){if(w==null)return w;if(!Xi(w))return d(w,R);for(var U=w.length,q=m?U:-1,le=A(w);(m?q--:++q<U)&&R(le[q],q,le)!==!1;);return w}}function jf(d){return function(m,w,R){for(var U=-1,q=A(m),le=R(m),_e=le.length;_e--;){var Le=le[d?_e:++U];if(w(q[Le],Le,q)===!1)break}return m}}function Cf(d){return function(m){var w=Na(m=wt(m))?Ci(m):h,R=w?w[0]:m.charAt(0),U=w?ns(w,1).join(""):m.slice(1);return R[d]()+U}}function iu(d){return function(m){return il(mo(lr(m).replace(lf,"")),d,"")}}function Is(d){return function(){var m=arguments;switch(m.length){case 0:return new d;case 1:return new d(m[0]);case 2:return new d(m[0],m[1]);case 3:return new d(m[0],m[1],m[2]);case 4:return new d(m[0],m[1],m[2],m[3]);case 5:return new d(m[0],m[1],m[2],m[3],m[4]);case 6:return new d(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new d(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var w=Rs(d.prototype),R=d.apply(w,m);return Kr(R)?R:w}}function Df(d){return function(m,w,R){var U=A(m);if(!Xi(m)){var q=Zn(w,3);m=It(m),w=function(_e){return q(U[_e],_e,U)}}var le=d(m,w,R);return le>-1?U[q?m[le]:le]:h}}function Ec(d){return uu(function(m){var w=m.length,R=w,U=va.prototype.thru;for(d&&m.reverse();R--;){var q=m[R];if(typeof q!="function")throw new ve(g);if(U&&!le&&yl(q)=="wrapper")var le=new va([],!0)}for(R=le?R:w;++R<w;){var _e=yl(q=m[R]),Le=_e=="wrapper"?Uf(q):h;le=Le&&Fa(Le[0])&&Le[1]==424&&!Le[4].length&&Le[9]==1?le[yl(Le[0])].apply(le,Le[3]):q.length==1&&Fa(q)?le[_e]():le.thru(q)}return function(){var ft=arguments,gt=ft[0];if(le&&ft.length==1&&vr(gt))return le.plant(gt).value();for(var Gt=0,Sn=w?m[Gt].apply(this,ft):gt;++Gt<w;)Sn=m[Gt].call(this,Sn);return Sn}})}function os(d,m,w,R,U,q,le,_e,Le,ft){var gt=m&N,Gt=1&m,Sn=2&m,En=24&m,Hn=512&m,Mt=Sn?h:Is(d);return function Zt(){for(var fr=arguments.length,mn=fn(fr),ir=fr;ir--;)mn[ir]=arguments[ir];if(En)var rr=Pu(Zt),kr=vd(mn,rr);if(R&&(mn=vo(mn,R,U,En)),q&&(mn=Mu(mn,q,le,En)),fr-=kr,En&&fr<ft){var Ln=Ui(mn,rr);return xc(d,m,os,Zt.placeholder,w,mn,Ln,_e,Le,ft-fr)}var Qn=Gt?w:this,Fo=Sn?Qn[d]:d;return fr=mn.length,_e?mn=El(mn,_e):Hn&&fr>1&&mn.reverse(),gt&&Le<fr&&(mn.length=Le),this&&this!==To&&this instanceof Zt&&(Fo=Mt||Is(Fo)),Fo.apply(Qn,mn)}}function jd(d,m){return function(w,R){return function(U,q,le,_e){return Pn(U,function(Le,ft,gt){q(_e,le(Le),ft,gt)}),_e}(w,d,m(R),{})}}function hl(d,m){return function(w,R){var U;if(w===h&&R===h)return m;if(w!==h&&(U=w),R!==h){if(U===h)return R;typeof w=="string"||typeof R=="string"?(w=zi(w),R=zi(R)):(w=Pd(w),R=Pd(R)),U=d(w,R)}return U}}function If(d){return uu(function(m){return m=jr(m,oo(Zn())),br(function(w){var R=this;return d(m,function(U){return Jr(U,R,w)})})})}function Oc(d,m){var w=(m=m===h?" ":zi(m)).length;if(w<2)return w?mc(m,d):m;var R=mc(m,lc(d/Si(m)));return Na(m)?ns(Ci(R),0,d).join(""):R.slice(0,d)}function au(d){return function(m,w,R){return R&&typeof R!="number"&&ko(m,w,R)&&(w=R=h),m=Rt(m),w===h?(w=m,m=0):w=Rt(w),function(U,q,le,_e){for(var Le=-1,ft=Mo(lc((q-U)/(le||1)),0),gt=fn(ft);ft--;)gt[_e?ft:++Le]=U,U+=le;return gt}(m,w,R=R===h?m<w?1:-1:Rt(R),d)}}function vl(d){return function(m,w){return typeof m=="string"&&typeof w=="string"||(m=Ut(m),w=Ut(w)),d(m,w)}}function xc(d,m,w,R,U,q,le,_e,Le,ft){var gt=8&m;m|=gt?T:j,4&(m&=~(gt?j:T))||(m&=-4);var Gt=[d,m,U,gt?q:h,gt?le:h,gt?h:q,gt?h:le,_e,Le,ft],Sn=w.apply(h,Gt);return Fa(d)&&Ld(Sn,Gt),Sn.placeholder=R,Gf(Sn,d,m)}function Sc(d){var m=S[d];return function(w,R){if(w=Ut(w),(R=R==null?0:Ai(st(R),292))&&Ps(w)){var U=(wt(w)+"e").split("e");return+((U=(wt(m(U[0]+"e"+(+U[1]+R)))+"e").split("e"))[0]+"e"+(+U[1]-R))}return m(w)}}var Lf=ks&&1/ea(new ks([,-0]))[1]==D?function(d){return new ks(d)}:tt;function Ff(d){return function(m){var w=_o(m);return w==ge?Uo(m):w==Re?ul(m):function(R,U){return jr(U,function(q){return[q,R[q]]})}(m,d(m))}}function Ia(d,m,w,R,U,q,le,_e){var Le=2&m;if(!Le&&typeof d!="function")throw new ve(g);var ft=R?R.length:0;if(ft||(m&=-97,R=U=h),le=le===h?le:Mo(st(le),0),_e=_e===h?_e:st(_e),ft-=U?U.length:0,m&j){var gt=R,Gt=U;R=U=h}var Sn=Le?h:Uf(d),En=[d,m,w,R,U,gt,Gt,q,le,_e];if(Sn&&function(Mt,Zt){var fr=Mt[1],mn=Zt[1],ir=fr|mn,rr=ir<131,kr=mn==N&&fr==8||mn==N&&fr==M&&Mt[7].length<=Zt[8]||mn==384&&Zt[7].length<=Zt[8]&&fr==8;if(!rr&&!kr)return Mt;1&mn&&(Mt[2]=Zt[2],ir|=1&fr?0:4);var Ln=Zt[3];if(Ln){var Qn=Mt[3];Mt[3]=Qn?vo(Qn,Ln,Zt[4]):Ln,Mt[4]=Qn?Ui(Mt[3],E):Zt[4]}(Ln=Zt[5])&&(Qn=Mt[5],Mt[5]=Qn?Mu(Qn,Ln,Zt[6]):Ln,Mt[6]=Qn?Ui(Mt[5],E):Zt[6]),(Ln=Zt[7])&&(Mt[7]=Ln),mn&N&&(Mt[8]=Mt[8]==null?Zt[8]:Ai(Mt[8],Zt[8])),Mt[9]==null&&(Mt[9]=Zt[9]),Mt[0]=Zt[0],Mt[1]=ir}(En,Sn),d=En[0],m=En[1],w=En[2],R=En[3],U=En[4],!(_e=En[9]=En[9]===h?Le?0:d.length:Mo(En[9]-ft,0))&&24&m&&(m&=-25),m&&m!=1)Hn=m==8||m==x?function(Mt,Zt,fr){var mn=Is(Mt);return function ir(){for(var rr=arguments.length,kr=fn(rr),Ln=rr,Qn=Pu(ir);Ln--;)kr[Ln]=arguments[Ln];var Fo=rr<3&&kr[0]!==Qn&&kr[rr-1]!==Qn?[]:Ui(kr,Qn);return(rr-=Fo.length)<fr?xc(Mt,Zt,os,ir.placeholder,h,kr,Fo,h,h,fr-rr):Jr(this&&this!==To&&this instanceof ir?mn:Mt,this,kr)}}(d,m,_e):m!=T&&m!=33||U.length?os.apply(h,En):function(Mt,Zt,fr,mn){var ir=1&Zt,rr=Is(Mt);return function kr(){for(var Ln=-1,Qn=arguments.length,Fo=-1,nt=mn.length,Iu=fn(nt+Qn),fi=this&&this!==To&&this instanceof kr?rr:Mt;++Fo<nt;)Iu[Fo]=mn[Fo];for(;Qn--;)Iu[Fo++]=arguments[++Ln];return Jr(fi,ir?fr:this,Iu)}}(d,m,w,R);else var Hn=function(Mt,Zt,fr){var mn=1&Zt,ir=Is(Mt);return function rr(){return(this&&this!==To&&this instanceof rr?ir:Mt).apply(mn?fr:this,arguments)}}(d,m,w);return Gf((Sn?gc:Ld)(Hn,En),d,m)}function Cd(d,m,w,R){return d===h||Hi(d,Ht[w])&&!un.call(R,w)?m:d}function Dd(d,m,w,R,U,q){return Kr(d)&&Kr(m)&&(q.set(m,d),Af(d,m,h,Dd,q),q.delete(m)),d}function Id(d){return I(d)?h:d}function $f(d,m,w,R,U,q){var le=1&w,_e=d.length,Le=m.length;if(_e!=Le&&!(le&&Le>_e))return!1;var ft=q.get(d),gt=q.get(m);if(ft&&gt)return ft==m&&gt==d;var Gt=-1,Sn=!0,En=2&w?new xu:h;for(q.set(d,m),q.set(m,d);++Gt<_e;){var Hn=d[Gt],Mt=m[Gt];if(R)var Zt=le?R(Mt,Hn,Gt,m,d,q):R(Hn,Mt,Gt,d,m,q);if(Zt!==h){if(Zt)continue;Sn=!1;break}if(En){if(!ic(m,function(fr,mn){if(!Ma(En,mn)&&(Hn===fr||U(Hn,fr,w,R,q)))return En.push(mn)})){Sn=!1;break}}else if(Hn!==Mt&&!U(Hn,Mt,w,R,q)){Sn=!1;break}}return q.delete(d),q.delete(m),Sn}function uu(d){return Pc(Nc(d,h,Gd),d+"")}function Ac(d){return xf(d,It,gl)}function Bf(d){return xf(d,Tt,_l)}var Uf=dc?function(d){return dc.get(d)}:tt;function yl(d){for(var m=d.name+"",w=Ku[m],R=un.call(Ku,m)?w.length:0;R--;){var U=w[R],q=U.func;if(q==null||q==d)return U.name}return m}function Pu(d){return(un.call(re,"placeholder")?re:d).placeholder}function Zn(){var d=re.iteratee||ro;return d=d===ro?Tu:d,arguments.length?d(arguments[0],arguments[1]):d}function ml(d,m){var w,R,U=d.__data__;return((R=typeof(w=m))=="string"||R=="number"||R=="symbol"||R=="boolean"?w!=="__proto__":w===null)?U[typeof m=="string"?"string":"hash"]:U.map}function Tc(d){for(var m=It(d),w=m.length;w--;){var R=m[w],U=d[R];m[w]=[R,U,su(U)]}return m}function La(d,m){var w=function(R,U){return R==null?h:R[U]}(d,m);return Ju(w)?w:h}var gl=mf?function(d){return d==null?[]:(d=A(d),Ei(mf(d),function(m){return Go.call(d,m)}))}:Ue,_l=mf?function(d){for(var m=[];d;)Zo(m,gl(d)),d=Pa(d);return m}:Ue,_o=ho;function bl(d,m,w){for(var R=-1,U=(m=ts(m,d)).length,q=!1;++R<U;){var le=Ba(m[R]);if(!(q=d!=null&&w(d,le)))break;d=d[le]}return q||++R!=U?q:!!(U=d==null?0:d.length)&&Cu(U)&&Qr(le,U)&&(vr(d)||cs(d))}function is(d){return typeof d.constructor!="function"||as(d)?{}:Rs(Pa(d))}function Mc(d){return vr(d)||cs(d)||!!(eu&&d&&d[eu])}function Qr(d,m){var w=typeof d;return!!(m=m??k)&&(w=="number"||w!="symbol"&&On.test(d))&&d>-1&&d%1==0&&d<m}function ko(d,m,w){if(!Kr(w))return!1;var R=typeof m;return!!(R=="number"?Xi(w)&&Qr(m,w.length):R=="string"&&m in w)&&Hi(w[m],d)}function ku(d,m){if(vr(d))return!1;var w=typeof d;return!(w!="number"&&w!="symbol"&&w!="boolean"&&d!=null&&!ct(d))||qn.test(d)||!Q.test(d)||m!=null&&d in A(m)}function Fa(d){var m=yl(d),w=re[m];if(typeof w!="function"||!(m in Sr.prototype))return!1;if(d===w)return!0;var R=Uf(w);return!!R&&d===R[0]}(ll&&_o(new ll(new ArrayBuffer(1)))!=Ve||tu&&_o(new tu)!=ge||fc&&_o(fc.resolve())!=Xe||ks&&_o(new ks)!=Re||qu&&_o(new qu)!=Oe)&&(_o=function(d){var m=ho(d),w=m==Me?d.constructor:h,R=w?ss(w):"";if(R)switch(R){case tv:return Ve;case pc:return ge;case nv:return Xe;case rv:return Re;case xp:return Oe}return m});var $a=_n?fu:ze;function as(d){var m=d&&d.constructor;return d===(typeof m=="function"&&m.prototype||Ht)}function su(d){return d==d&&!Kr(d)}function wl(d,m){return function(w){return w!=null&&w[d]===m&&(m!==h||d in A(w))}}function Nc(d,m,w){return m=Mo(m===h?d.length-1:m,0),function(){for(var R=arguments,U=-1,q=Mo(R.length-m,0),le=fn(q);++U<q;)le[U]=R[m+U];U=-1;for(var _e=fn(m+1);++U<m;)_e[U]=R[U];return _e[m]=w(le),Jr(d,this,_e)}}function us(d,m){return m.length<2?d:nu(d,ga(m,0,-1))}function El(d,m){for(var w=d.length,R=Ai(m.length,w),U=oi(d);R--;){var q=m[R];d[R]=Qr(q,w)?U[q]:h}return d}function kt(d,m){if((m!=="constructor"||typeof d[m]!="function")&&m!="__proto__")return d[m]}var Ld=Fd(gc),Ls=yd||function(d,m){return To.setTimeout(d,m)},Pc=Fd(iv);function Gf(d,m,w){var R=m+"";return Pc(d,function(U,q){var le=q.length;if(!le)return U;var _e=le-1;return q[_e]=(le>1?"& ":"")+q[_e],q=q.join(le>2?", ":" "),U.replace(Ee,`{
/* [wrapped with `+q+`] */
`)}(R,function(U,q){return wi(V,function(le){var _e="_."+le[0];q&le[1]&&!yi(U,_e)&&U.push(_e)}),U.sort()}(function(U){var q=U.match(He);return q?q[1].split(je):[]}(R),w)))}function Fd(d){var m=0,w=0;return function(){var R=_f(),U=16-(R-w);if(w=R,U>0){if(++m>=800)return arguments[0]}else m=0;return d.apply(h,arguments)}}function lu(d,m){var w=-1,R=d.length,U=R-1;for(m=m===h?R:m;++w<m;){var q=Td(w,U),le=d[q];d[q]=d[w],d[w]=le}return d.length=m,d}var $d=function(d){var m=ls(d,function(R){return w.size===500&&w.clear(),R}),w=m.cache;return m}(function(d){var m=[];return d.charCodeAt(0)===46&&m.push(""),d.replace(wr,function(w,R,U,q){m.push(U?q.replace(Yt,"$1"):R||w)}),m});function Ba(d){if(typeof d=="string"||ct(d))return d;var m=d+"";return m=="0"&&1/d==-1/0?"-0":m}function ss(d){if(d!=null){try{return hr.call(d)}catch{}try{return d+""}catch{}}return""}function Wf(d){if(d instanceof Sr)return d.clone();var m=new va(d.__wrapped__,d.__chain__);return m.__actions__=oi(d.__actions__),m.__index__=d.__index__,m.__values__=d.__values__,m}var Dp=br(function(d,m){return Ho(d)?Da(d,Wo(m,1,Ho,!0)):[]}),Ip=br(function(d,m){var w=Mi(m);return Ho(w)&&(w=h),Ho(d)?Da(d,Wo(m,1,Ho,!0),Zn(w,2)):[]}),Lp=br(function(d,m){var w=Mi(m);return Ho(w)&&(w=h),Ho(d)?Da(d,Wo(m,1,Ho,!0),h,w):[]});function Bd(d,m,w){var R=d==null?0:d.length;if(!R)return-1;var U=w==null?0:st(w);return U<0&&(U=Mo(R+U,0)),Oi(d,Zn(m,3),U)}function Ud(d,m,w){var R=d==null?0:d.length;if(!R)return-1;var U=R-1;return w!==h&&(U=st(w),U=w<0?Mo(R+U,0):Ai(U,R-1)),Oi(d,Zn(m,3),U,!0)}function Gd(d){return d!=null&&d.length?Wo(d,1):[]}function Wd(d){return d&&d.length?d[0]:h}var Fp=br(function(d){var m=jr(d,kf);return m.length&&m[0]===d[0]?yc(m):[]}),$p=br(function(d){var m=Mi(d),w=jr(d,kf);return m===Mi(w)?m=h:w.pop(),w.length&&w[0]===d[0]?yc(w,Zn(m,2)):[]}),Bp=br(function(d){var m=Mi(d),w=jr(d,kf);return(m=typeof m=="function"?m:h)&&w.pop(),w.length&&w[0]===d[0]?yc(w,h,m):[]});function Mi(d){var m=d==null?0:d.length;return m?d[m-1]:h}var Fs=br(kc);function kc(d,m){return d&&d.length&&m&&m.length?Ad(d,m):d}var Vi=uu(function(d,m){var w=d==null?0:d.length,R=hc(d,m);return pl(d,jr(m,function(U){return Qr(U,w)?+U:U}).sort(wc)),R});function _a(d){return d==null?d:ev.call(d)}var zf=br(function(d){return es(Wo(d,1,Ho,!0))}),Ni=br(function(d){var m=Mi(d);return Ho(m)&&(m=h),es(Wo(d,1,Ho,!0),Zn(m,2))}),Rc=br(function(d){var m=Mi(d);return m=typeof m=="function"?m:h,es(Wo(d,1,Ho,!0),h,m)});function $s(d){if(!d||!d.length)return[];var m=0;return d=Ei(d,function(w){if(Ho(w))return m=Mo(w.length,m),!0}),_u(m,function(w){return jr(d,xi(w))})}function Ol(d,m){if(!d||!d.length)return[];var w=$s(d);return m==null?w:jr(w,function(R){return Jr(m,h,R)})}var jc=br(function(d,m){return Ho(d)?Da(d,m):[]}),Cc=br(function(d){return bc(Ei(d,Ho))}),xl=br(function(d){var m=Mi(d);return Ho(m)&&(m=h),bc(Ei(d,Ho),Zn(m,2))}),Sl=br(function(d){var m=Mi(d);return m=typeof m=="function"?m:h,bc(Ei(d,Ho),h,m)}),Bs=br($s),Ru=br(function(d){var m=d.length,w=m>1?d[m-1]:h;return w=typeof w=="function"?(d.pop(),w):h,Ol(d,w)});function zo(d){var m=re(d);return m.__chain__=!0,m}function Dc(d,m){return m(d)}var Ic=uu(function(d){var m=d.length,w=m?d[0]:0,R=this.__wrapped__,U=function(q){return hc(q,d)};return!(m>1||this.__actions__.length)&&R instanceof Sr&&Qr(w)?((R=R.slice(w,+w+(m?1:0))).__actions__.push({func:Dc,args:[U],thisArg:h}),new va(R,this.__chain__).thru(function(q){return m&&!q.length&&q.push(h),q})):this.thru(U)}),ju=Nu(function(d,m,w){un.call(d,w)?++d[w]:Ca(d,w,1)}),zd=Df(Bd),Pi=Df(Ud);function Vo(d,m){return(vr(d)?wi:lo)(d,Zn(m,3))}function Up(d,m){return(vr(d)?rc:Tp)(d,Zn(m,3))}var ba=Nu(function(d,m,w){un.call(d,w)?d[w].push(m):Ca(d,w,[m])}),Dn=br(function(d,m,w){var R=-1,U=typeof m=="function",q=Xi(d)?fn(d.length):[];return lo(d,function(le){q[++R]=U?Jr(m,le,w):Ti(le,m,w)}),q}),Vf=Nu(function(d,m,w){Ca(d,w,m)});function Us(d,m){return(vr(d)?jr:ra)(d,Zn(m,3))}var Hf=Nu(function(d,m,w){d[w?0:1].push(m)},function(){return[[],[]]}),Gp=br(function(d,m){if(d==null)return[];var w=m.length;return w>1&&ko(d,m[0],m[1])?m=[]:w>2&&ko(m[0],m[1],m[2])&&(m=[m[0]]),Pp(d,Wo(m,1),[])}),Al=Ep||function(){return To.Date.now()};function Wp(d,m,w){return m=w?h:m,m=d&&m==null?d.length:m,Ia(d,N,h,h,h,h,m)}function Ua(d,m){var w;if(typeof m!="function")throw new ve(g);return d=st(d),function(){return--d>0&&(w=m.apply(this,arguments)),d<=1&&(m=h),w}}var Tl=br(function(d,m,w){var R=1;if(w.length){var U=Ui(w,Pu(Tl));R|=T}return Ia(d,R,m,w,U)}),Gs=br(function(d,m,w){var R=3;if(w.length){var U=Ui(w,Pu(Gs));R|=T}return Ia(m,R,d,w,U)});function Ga(d,m,w){var R,U,q,le,_e,Le,ft=0,gt=!1,Gt=!1,Sn=!0;if(typeof d!="function")throw new ve(g);function En(ir){var rr=R,kr=U;return R=U=h,ft=ir,le=d.apply(kr,rr)}function Hn(ir){return ft=ir,_e=Ls(Zt,m),gt?En(ir):le}function Mt(ir){var rr=ir-Le;return Le===h||rr>=m||rr<0||Gt&&ir-ft>=q}function Zt(){var ir=Al();if(Mt(ir))return fr(ir);_e=Ls(Zt,function(rr){var kr=m-(rr-Le);return Gt?Ai(kr,q-(rr-ft)):kr}(ir))}function fr(ir){return _e=h,Sn&&R?En(ir):(R=U=h,le)}function mn(){var ir=Al(),rr=Mt(ir);if(R=arguments,U=this,Le=ir,rr){if(_e===h)return Hn(Le);if(Gt)return kd(_e),_e=Ls(Zt,m),En(Le)}return _e===h&&(_e=Ls(Zt,m)),le}return m=Ut(m)||0,Kr(w)&&(gt=!!w.leading,q=(Gt="maxWait"in w)?Mo(Ut(w.maxWait)||0,m):q,Sn="trailing"in w?!!w.trailing:Sn),mn.cancel=function(){_e!==h&&kd(_e),ft=0,R=Le=U=_e=h},mn.flush=function(){return _e===h?le:fr(Al())},mn}var zp=br(function(d,m){return bd(d,1,m)}),Vd=br(function(d,m,w){return bd(d,Ut(m)||0,w)});function ls(d,m){if(typeof d!="function"||m!=null&&typeof m!="function")throw new ve(g);var w=function(){var R=arguments,U=m?m.apply(this,R):R[0],q=w.cache;if(q.has(U))return q.get(U);var le=d.apply(this,R);return w.cache=q.set(U,le)||q,le};return w.cache=new(ls.Cache||ja),w}function cu(d){if(typeof d!="function")throw new ve(g);return function(){var m=arguments;switch(m.length){case 0:return!d.call(this);case 1:return!d.call(this,m[0]);case 2:return!d.call(this,m[0],m[1]);case 3:return!d.call(this,m[0],m[1],m[2])}return!d.apply(this,m)}}ls.Cache=ja;var ki=Cp(function(d,m){var w=(m=m.length==1&&vr(m[0])?jr(m[0],oo(Zn())):jr(Wo(m,1),oo(Zn()))).length;return br(function(R){for(var U=-1,q=Ai(R.length,w);++U<q;)R[U]=m[U].call(this,R[U]);return Jr(d,this,R)})}),Fn=br(function(d,m){var w=Ui(m,Pu(Fn));return Ia(d,T,h,m,w)}),bo=br(function(d,m){var w=Ui(m,Pu(bo));return Ia(d,j,h,m,w)}),_i=uu(function(d,m){return Ia(d,M,h,h,h,m)});function Hi(d,m){return d===m||d!=d&&m!=m}var uv=vl(go),Vp=vl(function(d,m){return d>=m}),cs=Sf(function(){return arguments}())?Sf:function(d){return wo(d)&&un.call(d,"callee")&&!Go.call(d,"callee")},vr=fn.isArray,Hp=tc?oo(tc):function(d){return wo(d)&&ho(d)==Ae};function Xi(d){return d!=null&&Cu(d.length)&&!fu(d)}function Ho(d){return wo(d)&&Xi(d)}var wa=Op||ze,sv=pf?oo(pf):function(d){return wo(d)&&ho(d)==B};function Lc(d){if(!wo(d))return!1;var m=ho(d);return m==H||m=="[object DOMException]"||typeof d.message=="string"&&typeof d.name=="string"&&!I(d)}function fu(d){if(!Kr(d))return!1;var m=ho(d);return m==ne||m==X||m=="[object AsyncFunction]"||m=="[object Proxy]"}function Hd(d){return typeof d=="number"&&d==st(d)}function Cu(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=k}function Kr(d){var m=typeof d;return d!=null&&(m=="object"||m=="function")}function wo(d){return d!=null&&typeof d=="object"}var ci=nc?oo(nc):function(d){return wo(d)&&_o(d)==ge};function Fc(d){return typeof d=="number"||wo(d)&&ho(d)==Fe}function I(d){if(!wo(d)||ho(d)!=Me)return!1;var m=Pa(d);if(m===null)return!0;var w=un.call(m,"constructor")&&m.constructor;return typeof w=="function"&&w instanceof w&&hr.call(w)==Wi}var oe=bi?oo(bi):function(d){return wo(d)&&ho(d)==De},me=Ko?oo(Ko):function(d){return wo(d)&&_o(d)==Re};function et(d){return typeof d=="string"||!vr(d)&&wo(d)&&ho(d)==ce}function ct(d){return typeof d=="symbol"||wo(d)&&ho(d)==he}var Ze=Bi?oo(Bi):function(d){return wo(d)&&Cu(d.length)&&!!Br[ho(d)]},ut=vl(ru),Nt=vl(function(d,m){return d<=m});function Dt(d){if(!d)return[];if(Xi(d))return et(d)?Ci(d):oi(d);if(ka&&d[ka])return function(w){for(var R,U=[];!(R=w.next()).done;)U.push(R.value);return U}(d[ka]());var m=_o(d);return(m==ge?Uo:m==Re?ea:yr)(d)}function Rt(d){return d?(d=Ut(d))===D||d===-1/0?17976931348623157e292*(d<0?-1:1):d==d?d:0:d===0?d:0}function st(d){var m=Rt(d),w=m%1;return m==m?w?m-w:m:0}function Wt(d){return d?Zu(st(d),0,te):0}function Ut(d){if(typeof d=="number")return d;if(ct(d))return F;if(Kr(d)){var m=typeof d.valueOf=="function"?d.valueOf():d;d=Kr(m)?m+"":m}if(typeof d!="string")return d===0?d:+d;d=ha(d);var w=ui.test(d);return w||Bo.test(d)?Zi(d.slice(2),w?2:8):qo.test(d)?F:+d}function Pt(d){return ou(d,Tt(d))}function wt(d){return d==null?"":zi(d)}var We=rs(function(d,m){if(as(m)||Xi(m))ou(m,It(m),d);else for(var w in m)un.call(m,w)&&No(d,w,m[w])}),ot=rs(function(d,m){ou(m,Tt(m),d)}),Lt=rs(function(d,m,w,R){ou(m,Tt(m),d,R)}),qt=rs(function(d,m,w,R){ou(m,It(m),d,R)}),St=uu(hc),Kt=br(function(d,m){d=A(d);var w=-1,R=m.length,U=R>2?m[2]:h;for(U&&ko(m[0],m[1],U)&&(R=1);++w<R;)for(var q=m[w],le=Tt(q),_e=-1,Le=le.length;++_e<Le;){var ft=le[_e],gt=d[ft];(gt===h||Hi(gt,Ht[ft])&&!un.call(d,ft))&&(d[ft]=q[ft])}return d}),At=br(function(d){return d.push(h,Dd),Jr(Rn,h,d)});function zt(d,m,w){var R=d==null?h:nu(d,m);return R===h?w:R}function Et(d,m){return d!=null&&bl(d,m,Od)}var Xt=jd(function(d,m,w){m!=null&&typeof m.toString!="function"&&(m=Pr.call(m)),d[m]=w},Tr(Un)),An=jd(function(d,m,w){m!=null&&typeof m.toString!="function"&&(m=Pr.call(m)),un.call(d,m)?d[m].push(w):d[m]=[w]},Zn),Bn=br(Ti);function It(d){return Xi(d)?Ef(d):ma(d)}function Tt(d){return Xi(d)?Ef(d,!0):Mp(d)}var Ot=rs(function(d,m,w){Af(d,m,w)}),Rn=rs(function(d,m,w,R){Af(d,m,w,R)}),tr=uu(function(d,m){var w={};if(d==null)return w;var R=!1;m=jr(m,function(q){return q=ts(q,d),R||(R=q.length>1),q}),ou(d,Bf(d),w),R&&(w=na(w,7,Id));for(var U=m.length;U--;)Nf(w,m[U]);return w}),sn=uu(function(d,m){return d==null?{}:function(w,R){return kp(w,R,function(U,q){return Et(w,q)})}(d,m)});function Jn(d,m){if(d==null)return{};var w=jr(Bf(d),function(R){return[R]});return m=Zn(m),kp(d,w,function(R,U){return m(R,U[0])})}var $n=Ff(It),nr=Ff(Tt);function yr(d){return d==null?[]:Ts(d,It(d))}var Eo=iu(function(d,m,w){return m=m.toLowerCase(),d+(w?Ro(m):m)});function Ro(d){return Xo(wt(d).toLowerCase())}function lr(d){return(d=wt(d))&&d.replace(In,uc).replace(Za,"")}var Lo=iu(function(d,m,w){return d+(w?"-":"")+m.toLowerCase()}),Zr=iu(function(d,m,w){return d+(w?" ":"")+m.toLowerCase()}),Oo=Cf("toLowerCase"),jo=iu(function(d,m,w){return d+(w?"_":"")+m.toLowerCase()}),yo=iu(function(d,m,w){return d+(w?" ":"")+Xo(m)}),co=iu(function(d,m,w){return d+(w?" ":"")+m.toUpperCase()}),Xo=Cf("toUpperCase");function mo(d,m,w){return d=wt(d),(m=w?h:m)===h?function(R){return ec.test(R)}(d)?function(R){return R.match(nl)||[]}(d):function(R){return R.match(rt)||[]}(d):d.match(m)||[]}var Kn=br(function(d,m){try{return Jr(d,h,m)}catch(w){return Lc(w)?w:new xr(w)}}),Qo=uu(function(d,m){return wi(m,function(w){w=Ba(w),Ca(d,w,Tl(d[w],d))}),d});function Tr(d){return function(){return d}}var kn=Ec(),cr=Ec(!0);function Un(d){return d}function ro(d){return Tu(typeof d=="function"?d:na(d,1))}var Ea=br(function(d,m){return function(w){return Ti(w,d,m)}}),Du=br(function(d,m){return function(w){return Ti(d,w,m)}});function de(d,m,w){var R=It(m),U=vc(m,R);w!=null||Kr(m)&&(U.length||!R.length)||(w=m,m=d,d=this,U=vc(m,It(m)));var q=!(Kr(w)&&"chain"in w&&!w.chain),le=fu(d);return wi(U,function(_e){var Le=m[_e];d[_e]=Le,le&&(d.prototype[_e]=function(){var ft=this.__chain__;if(q||ft){var gt=d(this.__wrapped__),Gt=gt.__actions__=oi(this.__actions__);return Gt.push({func:Le,args:arguments,thisArg:d}),gt.__chain__=ft,gt}return Le.apply(d,Zo([this.value()],arguments))})}),d}function tt(){}var Ke=If(jr),en=If(vf),pr=If(ic);function ae(d){return ku(d)?xi(Ba(d)):function(m){return function(w){return nu(w,m)}}(d)}var Z=au(),Se=au(!0);function Ue(){return[]}function ze(){return!1}var Ne=hl(function(d,m){return d+m},0),Te=Sc("ceil"),Ie=hl(function(d,m){return d/m},1),se=Sc("floor"),be,ue=hl(function(d,m){return d*m},1),Be=Sc("round"),Ye=hl(function(d,m){return d-m},0);return re.after=function(d,m){if(typeof m!="function")throw new ve(g);return d=st(d),function(){if(--d<1)return m.apply(this,arguments)}},re.ary=Wp,re.assign=We,re.assignIn=ot,re.assignInWith=Lt,re.assignWith=qt,re.at=St,re.before=Ua,re.bind=Tl,re.bindAll=Qo,re.bindKey=Gs,re.castArray=function(){if(!arguments.length)return[];var d=arguments[0];return vr(d)?d:[d]},re.chain=zo,re.chunk=function(d,m,w){m=(w?ko(d,m,w):m===h)?1:Mo(st(m),0);var R=d==null?0:d.length;if(!R||m<1)return[];for(var U=0,q=0,le=fn(lc(R/m));U<R;)le[q++]=ga(d,U,U+=m);return le},re.compact=function(d){for(var m=-1,w=d==null?0:d.length,R=0,U=[];++m<w;){var q=d[m];q&&(U[R++]=q)}return U},re.concat=function(){var d=arguments.length;if(!d)return[];for(var m=fn(d-1),w=arguments[0],R=d;R--;)m[R-1]=arguments[R];return Zo(vr(w)?oi(w):[w],Wo(m,1))},re.cond=function(d){var m=d==null?0:d.length,w=Zn();return d=m?jr(d,function(R){if(typeof R[1]!="function")throw new ve(g);return[w(R[0]),R[1]]}):[],br(function(R){for(var U=-1;++U<m;){var q=d[U];if(Jr(q[0],this,R))return Jr(q[1],this,R)}})},re.conforms=function(d){return function(m){var w=It(m);return function(R){return _d(R,m,w)}}(na(d,1))},re.constant=Tr,re.countBy=ju,re.create=function(d,m){var w=Rs(d);return m==null?w:Au(w,m)},re.curry=function d(m,w,R){var U=Ia(m,8,h,h,h,h,h,w=R?h:w);return U.placeholder=d.placeholder,U},re.curryRight=function d(m,w,R){var U=Ia(m,x,h,h,h,h,h,w=R?h:w);return U.placeholder=d.placeholder,U},re.debounce=Ga,re.defaults=Kt,re.defaultsDeep=At,re.defer=zp,re.delay=Vd,re.difference=Dp,re.differenceBy=Ip,re.differenceWith=Lp,re.drop=function(d,m,w){var R=d==null?0:d.length;return R?ga(d,(m=w||m===h?1:st(m))<0?0:m,R):[]},re.dropRight=function(d,m,w){var R=d==null?0:d.length;return R?ga(d,0,(m=R-(m=w||m===h?1:st(m)))<0?0:m):[]},re.dropRightWhile=function(d,m){return d&&d.length?_c(d,Zn(m,3),!0,!0):[]},re.dropWhile=function(d,m){return d&&d.length?_c(d,Zn(m,3),!0):[]},re.fill=function(d,m,w,R){var U=d==null?0:d.length;return U?(w&&typeof w!="number"&&ko(d,m,w)&&(w=0,R=U),function(q,le,_e,Le){var ft=q.length;for((_e=st(_e))<0&&(_e=-_e>ft?0:ft+_e),(Le=Le===h||Le>ft?ft:st(Le))<0&&(Le+=ft),Le=_e>Le?0:Wt(Le);_e<Le;)q[_e++]=le;return q}(d,m,w,R)):[]},re.filter=function(d,m){return(vr(d)?Ei:Ur)(d,Zn(m,3))},re.flatMap=function(d,m){return Wo(Us(d,m),1)},re.flatMapDeep=function(d,m){return Wo(Us(d,m),D)},re.flatMapDepth=function(d,m,w){return w=w===h?1:st(w),Wo(Us(d,m),w)},re.flatten=Gd,re.flattenDeep=function(d){return d!=null&&d.length?Wo(d,D):[]},re.flattenDepth=function(d,m){return d!=null&&d.length?Wo(d,m=m===h?1:st(m)):[]},re.flip=function(d){return Ia(d,512)},re.flow=kn,re.flowRight=cr,re.fromPairs=function(d){for(var m=-1,w=d==null?0:d.length,R={};++m<w;){var U=d[m];R[U[0]]=U[1]}return R},re.functions=function(d){return d==null?[]:vc(d,It(d))},re.functionsIn=function(d){return d==null?[]:vc(d,Tt(d))},re.groupBy=ba,re.initial=function(d){return d!=null&&d.length?ga(d,0,-1):[]},re.intersection=Fp,re.intersectionBy=$p,re.intersectionWith=Bp,re.invert=Xt,re.invertBy=An,re.invokeMap=Dn,re.iteratee=ro,re.keyBy=Vf,re.keys=It,re.keysIn=Tt,re.map=Us,re.mapKeys=function(d,m){var w={};return m=Zn(m,3),Pn(d,function(R,U,q){Ca(w,m(R,U,q),R)}),w},re.mapValues=function(d,m){var w={};return m=Zn(m,3),Pn(d,function(R,U,q){Ca(w,U,m(R,U,q))}),w},re.matches=function(d){return xd(na(d,1))},re.matchesProperty=function(d,m){return Sd(d,na(m,1))},re.memoize=ls,re.merge=Ot,re.mergeWith=Rn,re.method=Ea,re.methodOf=Du,re.mixin=de,re.negate=cu,re.nthArg=function(d){return d=st(d),br(function(m){return Np(m,d)})},re.omit=tr,re.omitBy=function(d,m){return Jn(d,cu(Zn(m)))},re.once=function(d){return Ua(2,d)},re.orderBy=function(d,m,w,R){return d==null?[]:(vr(m)||(m=m==null?[]:[m]),vr(w=R?h:w)||(w=w==null?[]:[w]),Pp(d,m,w))},re.over=Ke,re.overArgs=ki,re.overEvery=en,re.overSome=pr,re.partial=Fn,re.partialRight=bo,re.partition=Hf,re.pick=sn,re.pickBy=Jn,re.property=ae,re.propertyOf=function(d){return function(m){return d==null?h:nu(d,m)}},re.pull=Fs,re.pullAll=kc,re.pullAllBy=function(d,m,w){return d&&d.length&&m&&m.length?Ad(d,m,Zn(w,2)):d},re.pullAllWith=function(d,m,w){return d&&d.length&&m&&m.length?Ad(d,m,h,w):d},re.pullAt=Vi,re.range=Z,re.rangeRight=Se,re.rearg=_i,re.reject=function(d,m){return(vr(d)?Ei:Ur)(d,cu(Zn(m,3)))},re.remove=function(d,m){var w=[];if(!d||!d.length)return w;var R=-1,U=[],q=d.length;for(m=Zn(m,3);++R<q;){var le=d[R];m(le,R,d)&&(w.push(le),U.push(R))}return pl(d,U),w},re.rest=function(d,m){if(typeof d!="function")throw new ve(g);return br(d,m=m===h?m:st(m))},re.reverse=_a,re.sampleSize=function(d,m,w){return m=(w?ko(d,m,w):m===h)?1:st(m),(vr(d)?md:Md)(d,m)},re.set=function(d,m,w){return d==null?d:Qu(d,m,w)},re.setWith=function(d,m,w,R){return R=typeof R=="function"?R:h,d==null?d:Qu(d,m,w,R)},re.shuffle=function(d){return(vr(d)?Ap:av)(d)},re.slice=function(d,m,w){var R=d==null?0:d.length;return R?(w&&typeof w!="number"&&ko(d,m,w)?(m=0,w=R):(m=m==null?0:st(m),w=w===h?R:st(w)),ga(d,m,w)):[]},re.sortBy=Gp,re.sortedUniq=function(d){return d&&d.length?Rp(d):[]},re.sortedUniqBy=function(d,m){return d&&d.length?Rp(d,Zn(m,2)):[]},re.split=function(d,m,w){return w&&typeof w!="number"&&ko(d,m,w)&&(m=w=h),(w=w===h?te:w>>>0)?(d=wt(d))&&(typeof m=="string"||m!=null&&!oe(m))&&!(m=zi(m))&&Na(d)?ns(Ci(d),0,w):d.split(m,w):[]},re.spread=function(d,m){if(typeof d!="function")throw new ve(g);return m=m==null?0:Mo(st(m),0),br(function(w){var R=w[m],U=ns(w,0,m);return R&&Zo(U,R),Jr(d,this,U)})},re.tail=function(d){var m=d==null?0:d.length;return m?ga(d,1,m):[]},re.take=function(d,m,w){return d&&d.length?ga(d,0,(m=w||m===h?1:st(m))<0?0:m):[]},re.takeRight=function(d,m,w){var R=d==null?0:d.length;return R?ga(d,(m=R-(m=w||m===h?1:st(m)))<0?0:m,R):[]},re.takeRightWhile=function(d,m){return d&&d.length?_c(d,Zn(m,3),!1,!0):[]},re.takeWhile=function(d,m){return d&&d.length?_c(d,Zn(m,3)):[]},re.tap=function(d,m){return m(d),d},re.throttle=function(d,m,w){var R=!0,U=!0;if(typeof d!="function")throw new ve(g);return Kr(w)&&(R="leading"in w?!!w.leading:R,U="trailing"in w?!!w.trailing:U),Ga(d,m,{leading:R,maxWait:m,trailing:U})},re.thru=Dc,re.toArray=Dt,re.toPairs=$n,re.toPairsIn=nr,re.toPath=function(d){return vr(d)?jr(d,Ba):ct(d)?[d]:oi($d(wt(d)))},re.toPlainObject=Pt,re.transform=function(d,m,w){var R=vr(d),U=R||wa(d)||Ze(d);if(m=Zn(m,4),w==null){var q=d&&d.constructor;w=U?R?new q:[]:Kr(d)&&fu(q)?Rs(Pa(d)):{}}return(U?wi:Pn)(d,function(le,_e,Le){return m(w,le,_e,Le)}),w},re.unary=function(d){return Wp(d,1)},re.union=zf,re.unionBy=Ni,re.unionWith=Rc,re.uniq=function(d){return d&&d.length?es(d):[]},re.uniqBy=function(d,m){return d&&d.length?es(d,Zn(m,2)):[]},re.uniqWith=function(d,m){return m=typeof m=="function"?m:h,d&&d.length?es(d,h,m):[]},re.unset=function(d,m){return d==null||Nf(d,m)},re.unzip=$s,re.unzipWith=Ol,re.update=function(d,m,w){return d==null?d:js(d,m,Rf(w))},re.updateWith=function(d,m,w,R){return R=typeof R=="function"?R:h,d==null?d:js(d,m,Rf(w),R)},re.values=yr,re.valuesIn=function(d){return d==null?[]:Ts(d,Tt(d))},re.without=jc,re.words=mo,re.wrap=function(d,m){return Fn(Rf(m),d)},re.xor=Cc,re.xorBy=xl,re.xorWith=Sl,re.zip=Bs,re.zipObject=function(d,m){return Pf(d||[],m||[],No)},re.zipObjectDeep=function(d,m){return Pf(d||[],m||[],Qu)},re.zipWith=Ru,re.entries=$n,re.entriesIn=nr,re.extend=ot,re.extendWith=Lt,de(re,re),re.add=Ne,re.attempt=Kn,re.camelCase=Eo,re.capitalize=Ro,re.ceil=Te,re.clamp=function(d,m,w){return w===h&&(w=m,m=h),w!==h&&(w=(w=Ut(w))==w?w:0),m!==h&&(m=(m=Ut(m))==m?m:0),Zu(Ut(d),m,w)},re.clone=function(d){return na(d,4)},re.cloneDeep=function(d){return na(d,5)},re.cloneDeepWith=function(d,m){return na(d,5,m=typeof m=="function"?m:h)},re.cloneWith=function(d,m){return na(d,4,m=typeof m=="function"?m:h)},re.conformsTo=function(d,m){return m==null||_d(d,m,It(m))},re.deburr=lr,re.defaultTo=function(d,m){return d==null||d!=d?m:d},re.divide=Ie,re.endsWith=function(d,m,w){d=wt(d),m=zi(m);var R=d.length,U=w=w===h?R:Zu(st(w),0,R);return(w-=m.length)>=0&&d.slice(w,U)==m},re.eq=Hi,re.escape=function(d){return(d=wt(d))&&gn.test(d)?d.replace(pn,Io):d},re.escapeRegExp=function(d){return(d=wt(d))&&Hr.test(d)?d.replace(Lr,"\\$&"):d},re.every=function(d,m,w){var R=vr(d)?vf:wd;return w&&ko(d,m,w)&&(m=h),R(d,Zn(m,3))},re.find=zd,re.findIndex=Bd,re.findKey=function(d,m){return Ta(d,Zn(m,3),Pn)},re.findLast=Pi,re.findLastIndex=Ud,re.findLastKey=function(d,m){return Ta(d,Zn(m,3),no)},re.floor=se,re.forEach=Vo,re.forEachRight=Up,re.forIn=function(d,m){return d==null?d:_r(d,Zn(m,3),Tt)},re.forInRight=function(d,m){return d==null?d:to(d,Zn(m,3),Tt)},re.forOwn=function(d,m){return d&&Pn(d,Zn(m,3))},re.forOwnRight=function(d,m){return d&&no(d,Zn(m,3))},re.get=zt,re.gt=uv,re.gte=Vp,re.has=function(d,m){return d!=null&&bl(d,m,Ed)},re.hasIn=Et,re.head=Wd,re.identity=Un,re.includes=function(d,m,w,R){d=Xi(d)?d:yr(d),w=w&&!R?st(w):0;var U=d.length;return w<0&&(w=Mo(U+w,0)),et(d)?w<=U&&d.indexOf(m,w)>-1:!!U&&Vu(d,m,w)>-1},re.indexOf=function(d,m,w){var R=d==null?0:d.length;if(!R)return-1;var U=w==null?0:st(w);return U<0&&(U=Mo(R+U,0)),Vu(d,m,U)},re.inRange=function(d,m,w){return m=Rt(m),w===h?(w=m,m=0):w=Rt(w),function(R,U,q){return R>=Ai(U,q)&&R<Mo(U,q)}(d=Ut(d),m,w)},re.invoke=Bn,re.isArguments=cs,re.isArray=vr,re.isArrayBuffer=Hp,re.isArrayLike=Xi,re.isArrayLikeObject=Ho,re.isBoolean=function(d){return d===!0||d===!1||wo(d)&&ho(d)==K},re.isBuffer=wa,re.isDate=sv,re.isElement=function(d){return wo(d)&&d.nodeType===1&&!I(d)},re.isEmpty=function(d){if(d==null)return!0;if(Xi(d)&&(vr(d)||typeof d=="string"||typeof d.splice=="function"||wa(d)||Ze(d)||cs(d)))return!d.length;var m=_o(d);if(m==ge||m==Re)return!d.size;if(as(d))return!ma(d).length;for(var w in d)if(un.call(d,w))return!1;return!0},re.isEqual=function(d,m){return dl(d,m)},re.isEqualWith=function(d,m,w){var R=(w=typeof w=="function"?w:h)?w(d,m):h;return R===h?dl(d,m,h,w):!!R},re.isError=Lc,re.isFinite=function(d){return typeof d=="number"&&Ps(d)},re.isFunction=fu,re.isInteger=Hd,re.isLength=Cu,re.isMap=ci,re.isMatch=function(d,m){return d===m||ya(d,m,Tc(m))},re.isMatchWith=function(d,m,w){return w=typeof w=="function"?w:h,ya(d,m,Tc(m),w)},re.isNaN=function(d){return Fc(d)&&d!=+d},re.isNative=function(d){if($a(d))throw new xr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ju(d)},re.isNil=function(d){return d==null},re.isNull=function(d){return d===null},re.isNumber=Fc,re.isObject=Kr,re.isObjectLike=wo,re.isPlainObject=I,re.isRegExp=oe,re.isSafeInteger=function(d){return Hd(d)&&d>=-9007199254740991&&d<=k},re.isSet=me,re.isString=et,re.isSymbol=ct,re.isTypedArray=Ze,re.isUndefined=function(d){return d===h},re.isWeakMap=function(d){return wo(d)&&_o(d)==Oe},re.isWeakSet=function(d){return wo(d)&&ho(d)=="[object WeakSet]"},re.join=function(d,m){return d==null?"":cc.call(d,m)},re.kebabCase=Lo,re.last=Mi,re.lastIndexOf=function(d,m,w){var R=d==null?0:d.length;if(!R)return-1;var U=R;return w!==h&&(U=(U=st(w))<0?Mo(R+U,0):Ai(U,R-1)),m==m?function(q,le,_e){for(var Le=_e+1;Le--;)if(q[Le]===le)return Le;return Le}(d,m,U):Oi(d,Ji,U,!0)},re.lowerCase=Zr,re.lowerFirst=Oo,re.lt=ut,re.lte=Nt,re.max=function(d){return d&&d.length?Po(d,Un,go):h},re.maxBy=function(d,m){return d&&d.length?Po(d,Zn(m,2),go):h},re.mean=function(d){return Or(d,Un)},re.meanBy=function(d,m){return Or(d,Zn(m,2))},re.min=function(d){return d&&d.length?Po(d,Un,ru):h},re.minBy=function(d,m){return d&&d.length?Po(d,Zn(m,2),ru):h},re.stubArray=Ue,re.stubFalse=ze,re.stubObject=function(){return{}},re.stubString=function(){return""},re.stubTrue=function(){return!0},re.multiply=ue,re.nth=function(d,m){return d&&d.length?Np(d,st(m)):h},re.noConflict=function(){return To._===this&&(To._=po),this},re.noop=tt,re.now=Al,re.pad=function(d,m,w){d=wt(d);var R=(m=st(m))?Si(d):0;if(!m||R>=m)return d;var U=(m-R)/2;return Oc(Ns(U),w)+d+Oc(lc(U),w)},re.padEnd=function(d,m,w){d=wt(d);var R=(m=st(m))?Si(d):0;return m&&R<m?d+Oc(m-R,w):d},re.padStart=function(d,m,w){d=wt(d);var R=(m=st(m))?Si(d):0;return m&&R<m?Oc(m-R,w)+d:d},re.parseInt=function(d,m,w){return w||m==null?m=0:m&&(m=+m),bf(wt(d).replace(zn,""),m||0)},re.random=function(d,m,w){if(w&&typeof w!="boolean"&&ko(d,m,w)&&(m=w=h),w===h&&(typeof m=="boolean"?(w=m,m=h):typeof d=="boolean"&&(w=d,d=h)),d===h&&m===h?(d=0,m=1):(d=Rt(d),m===h?(m=d,d=0):m=Rt(m)),d>m){var R=d;d=m,m=R}if(w||d%1||m%1){var U=sl();return Ai(d+U*(m-d+Wu("1e-"+((U+"").length-1))),m)}return Td(d,m)},re.reduce=function(d,m,w){var R=vr(d)?il:ri,U=arguments.length<3;return R(d,Zn(m,4),w,U,lo)},re.reduceRight=function(d,m,w){var R=vr(d)?yf:ri,U=arguments.length<3;return R(d,Zn(m,4),w,U,Tp)},re.repeat=function(d,m,w){return m=(w?ko(d,m,w):m===h)?1:st(m),mc(wt(d),m)},re.replace=function(){var d=arguments,m=wt(d[0]);return d.length<3?m:m.replace(d[1],d[2])},re.result=function(d,m,w){var R=-1,U=(m=ts(m,d)).length;for(U||(U=1,d=h);++R<U;){var q=d==null?h:d[Ba(m[R])];q===h&&(R=U,q=w),d=fu(q)?q.call(d):q}return d},re.round=Be,re.runInContext=at,re.sample=function(d){return(vr(d)?Of:ov)(d)},re.size=function(d){if(d==null)return 0;if(Xi(d))return et(d)?Si(d):d.length;var m=_o(d);return m==ge||m==Re?d.size:ma(d).length},re.snakeCase=jo,re.some=function(d,m,w){var R=vr(d)?ic:Nd;return w&&ko(d,m,w)&&(m=h),R(d,Zn(m,3))},re.sortedIndex=function(d,m){return Tf(d,m)},re.sortedIndexBy=function(d,m,w){return Mf(d,m,Zn(w,2))},re.sortedIndexOf=function(d,m){var w=d==null?0:d.length;if(w){var R=Tf(d,m);if(R<w&&Hi(d[R],m))return R}return-1},re.sortedLastIndex=function(d,m){return Tf(d,m,!0)},re.sortedLastIndexBy=function(d,m,w){return Mf(d,m,Zn(w,2),!0)},re.sortedLastIndexOf=function(d,m){if(d!=null&&d.length){var w=Tf(d,m,!0)-1;if(Hi(d[w],m))return w}return-1},re.startCase=yo,re.startsWith=function(d,m,w){return d=wt(d),w=w==null?0:Zu(st(w),0,d.length),m=zi(m),d.slice(w,w+m.length)==m},re.subtract=Ye,re.sum=function(d){return d&&d.length?Hu(d,Un):0},re.sumBy=function(d,m){return d&&d.length?Hu(d,Zn(m,2)):0},re.template=function(d,m,w){var R=re.templateSettings;w&&ko(d,m,w)&&(m=h),d=wt(d),m=Lt({},m,R,Cd);var U,q,le=Lt({},m.imports,R.imports,Cd),_e=It(le),Le=Ts(le,_e),ft=0,gt=m.interpolate||Vn,Gt="__p += '",Sn=L((m.escape||Vn).source+"|"+gt.source+"|"+(gt===Yn?Nn:Vn).source+"|"+(m.evaluate||Vn).source+"|$","g"),En="//# sourceURL="+(un.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++cf+"]")+`
`;d.replace(Sn,function(Zt,fr,mn,ir,rr,kr){return mn||(mn=ir),Gt+=d.slice(ft,kr).replace(or,bu),fr&&(U=!0,Gt+=`' +
__e(`+fr+`) +
'`),rr&&(q=!0,Gt+=`';
`+rr+`;
__p += '`),mn&&(Gt+=`' +
((__t = (`+mn+`)) == null ? '' : __t) +
'`),ft=kr+Zt.length,Zt}),Gt+=`';
`;var Hn=un.call(m,"variable")&&m.variable;if(Hn){if(Qt.test(Hn))throw new xr("Invalid `variable` option passed into `_.template`")}else Gt=`with (obj) {
`+Gt+`
}
`;Gt=(q?Gt.replace(xt,""):Gt).replace(nn,"$1").replace(yn,"$1;"),Gt="function("+(Hn||"obj")+`) {
`+(Hn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(U?", __e = _.escape":"")+(q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Gt+`return __p
}`;var Mt=Kn(function(){return io(_e,En+"return "+Gt).apply(h,Le)});if(Mt.source=Gt,Lc(Mt))throw Mt;return Mt},re.times=function(d,m){if((d=st(d))<1||d>k)return[];var w=te,R=Ai(d,te);m=Zn(m),d-=te;for(var U=_u(R,m);++w<d;)m(w);return U},re.toFinite=Rt,re.toInteger=st,re.toLength=Wt,re.toLower=function(d){return wt(d).toLowerCase()},re.toNumber=Ut,re.toSafeInteger=function(d){return d?Zu(st(d),-9007199254740991,k):d===0?d:0},re.toString=wt,re.toUpper=function(d){return wt(d).toUpperCase()},re.trim=function(d,m,w){if((d=wt(d))&&(w||m===h))return ha(d);if(!d||!(m=zi(m)))return d;var R=Ci(d),U=Ci(m);return ns(R,Qi(R,U),ac(R,U)+1).join("")},re.trimEnd=function(d,m,w){if((d=wt(d))&&(w||m===h))return d.slice(0,Jo(d)+1);if(!d||!(m=zi(m)))return d;var R=Ci(d);return ns(R,0,ac(R,Ci(m))+1).join("")},re.trimStart=function(d,m,w){if((d=wt(d))&&(w||m===h))return d.replace(zn,"");if(!d||!(m=zi(m)))return d;var R=Ci(d);return ns(R,Qi(R,Ci(m))).join("")},re.truncate=function(d,m){var w=30,R="...";if(Kr(m)){var U="separator"in m?m.separator:U;w="length"in m?st(m.length):w,R="omission"in m?zi(m.omission):R}var q=(d=wt(d)).length;if(Na(d)){var le=Ci(d);q=le.length}if(w>=q)return d;var _e=w-Si(R);if(_e<1)return R;var Le=le?ns(le,0,_e).join(""):d.slice(0,_e);if(U===h)return Le+R;if(le&&(_e+=Le.length-_e),oe(U)){if(d.slice(_e).search(U)){var ft,gt=Le;for(U.global||(U=L(U.source,wt(mr.exec(U))+"g")),U.lastIndex=0;ft=U.exec(gt);)var Gt=ft.index;Le=Le.slice(0,Gt===h?_e:Gt)}}else if(d.indexOf(zi(U),_e)!=_e){var Sn=Le.lastIndexOf(U);Sn>-1&&(Le=Le.slice(0,Sn))}return Le+R},re.unescape=function(d){return(d=wt(d))&&lt.test(d)?d.replace(xn,Gi):d},re.uniqueId=function(d){var m=++$r;return wt(d)+m},re.upperCase=co,re.upperFirst=Xo,re.each=Vo,re.eachRight=Up,re.first=Wd,de(re,(be={},Pn(re,function(d,m){un.call(re.prototype,m)||(be[m]=d)}),be),{chain:!1}),re.VERSION="4.17.21",wi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){re[d].placeholder=re}),wi(["drop","take"],function(d,m){Sr.prototype[d]=function(w){w=w===h?1:Mo(st(w),0);var R=this.__filtered__&&!m?new Sr(this):this.clone();return R.__filtered__?R.__takeCount__=Ai(w,R.__takeCount__):R.__views__.push({size:Ai(w,te),type:d+(R.__dir__<0?"Right":"")}),R},Sr.prototype[d+"Right"]=function(w){return this.reverse()[d](w).reverse()}}),wi(["filter","map","takeWhile"],function(d,m){var w=m+1,R=w==1||w==3;Sr.prototype[d]=function(U){var q=this.clone();return q.__iteratees__.push({iteratee:Zn(U,3),type:w}),q.__filtered__=q.__filtered__||R,q}}),wi(["head","last"],function(d,m){var w="take"+(m?"Right":"");Sr.prototype[d]=function(){return this[w](1).value()[0]}}),wi(["initial","tail"],function(d,m){var w="drop"+(m?"":"Right");Sr.prototype[d]=function(){return this.__filtered__?new Sr(this):this[w](1)}}),Sr.prototype.compact=function(){return this.filter(Un)},Sr.prototype.find=function(d){return this.filter(d).head()},Sr.prototype.findLast=function(d){return this.reverse().find(d)},Sr.prototype.invokeMap=br(function(d,m){return typeof d=="function"?new Sr(this):this.map(function(w){return Ti(w,d,m)})}),Sr.prototype.reject=function(d){return this.filter(cu(Zn(d)))},Sr.prototype.slice=function(d,m){d=st(d);var w=this;return w.__filtered__&&(d>0||m<0)?new Sr(w):(d<0?w=w.takeRight(-d):d&&(w=w.drop(d)),m!==h&&(w=(m=st(m))<0?w.dropRight(-m):w.take(m-d)),w)},Sr.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},Sr.prototype.toArray=function(){return this.take(te)},Pn(Sr.prototype,function(d,m){var w=/^(?:filter|find|map|reject)|While$/.test(m),R=/^(?:head|last)$/.test(m),U=re[R?"take"+(m=="last"?"Right":""):m],q=R||/^find/.test(m);U&&(re.prototype[m]=function(){var le=this.__wrapped__,_e=R?[1]:arguments,Le=le instanceof Sr,ft=_e[0],gt=Le||vr(le),Gt=function(fr){var mn=U.apply(re,Zo([fr],_e));return R&&Sn?mn[0]:mn};gt&&w&&typeof ft=="function"&&ft.length!=1&&(Le=gt=!1);var Sn=this.__chain__,En=!!this.__actions__.length,Hn=q&&!Sn,Mt=Le&&!En;if(!q&&gt){le=Mt?le:new Sr(this);var Zt=d.apply(le,_e);return Zt.__actions__.push({func:Dc,args:[Gt],thisArg:h}),new va(Zt,Sn)}return Hn&&Mt?d.apply(this,_e):(Zt=this.thru(Gt),Hn?R?Zt.value()[0]:Zt.value():Zt)})}),wi(["pop","push","shift","sort","splice","unshift"],function(d){var m=Ge[d],w=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",R=/^(?:pop|shift)$/.test(d);re.prototype[d]=function(){var U=arguments;if(R&&!this.__chain__){var q=this.value();return m.apply(vr(q)?q:[],U)}return this[w](function(le){return m.apply(vr(le)?le:[],U)})}}),Pn(Sr.prototype,function(d,m){var w=re[m];if(w){var R=w.name+"";un.call(Ku,R)||(Ku[R]=[]),Ku[R].push({name:m,func:w})}}),Ku[os(h,2).name]=[{name:"wrapper",func:h}],Sr.prototype.clone=function(){var d=new Sr(this.__wrapped__);return d.__actions__=oi(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=oi(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=oi(this.__views__),d},Sr.prototype.reverse=function(){if(this.__filtered__){var d=new Sr(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},Sr.prototype.value=function(){var d=this.__wrapped__.value(),m=this.__dir__,w=vr(d),R=m<0,U=w?d.length:0,q=function(kr,Ln,Qn){for(var Fo=-1,nt=Qn.length;++Fo<nt;){var Iu=Qn[Fo],fi=Iu.size;switch(Iu.type){case"drop":kr+=fi;break;case"dropRight":Ln-=fi;break;case"take":Ln=Ai(Ln,kr+fi);break;case"takeRight":kr=Mo(kr,Ln-fi)}}return{start:kr,end:Ln}}(0,U,this.__views__),le=q.start,_e=q.end,Le=_e-le,ft=R?_e:le-1,gt=this.__iteratees__,Gt=gt.length,Sn=0,En=Ai(Le,this.__takeCount__);if(!w||!R&&U==Le&&En==Le)return jp(d,this.__actions__);var Hn=[];e:for(;Le--&&Sn<En;){for(var Mt=-1,Zt=d[ft+=m];++Mt<Gt;){var fr=gt[Mt],mn=fr.iteratee,ir=fr.type,rr=mn(Zt);if(ir==2)Zt=rr;else if(!rr){if(ir==1)continue e;break e}}Hn[Sn++]=Zt}return Hn},re.prototype.at=Ic,re.prototype.chain=function(){return zo(this)},re.prototype.commit=function(){return new va(this.value(),this.__chain__)},re.prototype.next=function(){this.__values__===h&&(this.__values__=Dt(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?h:this.__values__[this.__index__++]}},re.prototype.plant=function(d){for(var m,w=this;w instanceof Ou;){var R=Wf(w);R.__index__=0,R.__values__=h,m?U.__wrapped__=R:m=R;var U=R;w=w.__wrapped__}return U.__wrapped__=d,m},re.prototype.reverse=function(){var d=this.__wrapped__;if(d instanceof Sr){var m=d;return this.__actions__.length&&(m=new Sr(this)),(m=m.reverse()).__actions__.push({func:Dc,args:[_a],thisArg:h}),new va(m,this.__chain__)}return this.thru(_a)},re.prototype.toJSON=re.prototype.valueOf=re.prototype.value=function(){return jp(this.__wrapped__,this.__actions__)},re.prototype.first=re.prototype.head,ka&&(re.prototype[ka]=function(){return this}),re}();To._=mi,(y=(function(){return mi}).call(a,r,a,c))===h||(c.exports=y)}).call(this)}).call(this,r(68),r(221)(n))},function(n,a,r){var l=r(7),c=r(34),y=r(33),h=r(87),g=r(62),b=r(174),E=r(28),x=l.TypeError,T=E("toPrimitive");n.exports=function(j,N){if(!y(j)||h(j))return j;var M,D=g(j,T);if(D){if(N===void 0&&(N="default"),M=c(D,j,N),!y(M)||h(M))return M;throw x("Can't convert object to primitive value")}return N===void 0&&(N="number"),b(j,N)}},function(n,a,r){var l=r(108);n.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(n,a,r){var l=r(36),c=r(18),y=r(91);n.exports=!l&&!c(function(){return Object.defineProperty(y("div"),"a",{get:function(){return 7}}).a!=7})},function(n,a,r){var l=r(35),c=r(135),y=r(50),h=r(38);n.exports=function(g,b){for(var E=c(b),x=h.f,T=y.f,j=0;j<E.length;j++){var N=E[j];l(g,N)||x(g,N,T(b,N))}}},function(n,a,r){var l=r(46),c=r(15),y=r(74),h=r(112),g=r(32),b=c([].concat);n.exports=l("Reflect","ownKeys")||function(E){var x=y.f(g(E)),T=h.f;return T?b(x,T(E)):x}},function(n,a,r){var l=r(15),c=r(35),y=r(41),h=r(137).indexOf,g=r(72),b=l([].push);n.exports=function(E,x){var T,j=y(E),N=0,M=[];for(T in j)!c(g,T)&&c(j,T)&&b(M,T);for(;x.length>N;)c(j,T=x[N++])&&(~h(M,T)||b(M,T));return M}},function(n,a,r){var l=r(41),c=r(75),y=r(45),h=function(g){return function(b,E,x){var T,j=l(b),N=y(j),M=c(x,N);if(g&&E!=E){for(;N>M;)if((T=j[M++])!=T)return!0}else for(;N>M;M++)if((g||M in j)&&j[M]===E)return g||M||0;return!g&&-1}};n.exports={includes:h(!0),indexOf:h(!1)}},function(n,a,r){var l=r(46);n.exports=l("document","documentElement")},function(n,a,r){var l=r(51),c=r(41),y=r(74).f,h=r(114),g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(b){return g&&l(b)=="Window"?function(E){try{return y(E)}catch{return h(g)}}(b):y(c(b))}},function(n,a,r){var l=r(28);a.f=l},function(n,a,r){var l=r(177),c=r(35),y=r(140),h=r(38).f;n.exports=function(g){var b=l.Symbol||(l.Symbol={});c(b,g)||h(b,g,{value:y.f(g)})}},function(n,a,r){var l,c,y,h=r(18),g=r(30),b=r(60),E=r(101),x=r(42),T=r(28),j=r(71),N=T("iterator"),M=!1;[].keys&&("next"in(y=[].keys())?(c=E(E(y)))!==Object.prototype&&(l=c):M=!0),l==null||h(function(){var D={};return l[N].call(D)!==D})?l={}:j&&(l=b(l)),g(l[N])||x(l,N,function(){return this}),n.exports={IteratorPrototype:l,BUGGY_SAFARI_ITERATORS:M}},function(n,a,r){var l=r(18);n.exports=!l(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(n,a,r){var l=r(16),c=r(15),y=r(72),h=r(33),g=r(35),b=r(38).f,E=r(74),x=r(139),T=r(183),j=r(90),N=r(185),M=!1,D=j("meta"),k=0,F=function(V){b(V,D,{value:{objectID:"O"+k++,weakData:{}}})},te=n.exports={enable:function(){te.enable=function(){},M=!0;var V=E.f,z=c([].splice),J={};J[D]=1,V(J).length&&(E.f=function(K){for(var B=V(K),H=0,ne=B.length;H<ne;H++)if(B[H]===D){z(B,H,1);break}return B},l({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:x.f}))},fastKey:function(V,z){if(!h(V))return typeof V=="symbol"?V:(typeof V=="string"?"S":"P")+V;if(!g(V,D)){if(!T(V))return"F";if(!z)return"E";F(V)}return V[D].objectID},getWeakData:function(V,z){if(!g(V,D)){if(!T(V))return!0;if(!z)return!1;F(V)}return V[D].weakData},onFreeze:function(V){return N&&M&&T(V)&&!g(V,D)&&F(V),V}};y[D]=!0},function(n,a,r){var l=r(28),c=r(80),y=l("iterator"),h=Array.prototype;n.exports=function(g){return g!==void 0&&(c.Array===g||h[y]===g)}},function(n,a,r){var l=r(7),c=r(34),y=r(56),h=r(32),g=r(88),b=r(118),E=l.TypeError;n.exports=function(x,T){var j=arguments.length<2?b(x):T;if(y(j))return h(c(j,x));throw E(g(x)+" is not iterable")}},function(n,a,r){var l=r(34),c=r(32),y=r(62);n.exports=function(h,g,b){var E,x;c(h);try{if(!(E=y(h,"return"))){if(g==="throw")throw b;return b}E=l(E,h)}catch(T){x=!0,E=T}if(g==="throw")throw b;if(x)throw E;return c(E),b}},function(n,a,r){var l=r(30),c=r(33),y=r(102);n.exports=function(h,g,b){var E,x;return y&&l(E=g.constructor)&&E!==b&&c(x=E.prototype)&&x!==b.prototype&&y(h,x),h}},function(n,a,r){var l=r(42);n.exports=function(c,y,h){for(var g in y)l(c,g,y[g],h);return c}},function(n,a,r){var l=r(46),c=r(38),y=r(28),h=r(36),g=y("species");n.exports=function(b){var E=l(b),x=c.f;h&&E&&!E[g]&&x(E,g,{configurable:!0,get:function(){return this}})}},function(n,a,r){var l=r(15),c=r(59),y=r(39),h=r(44),g=l("".charAt),b=l("".charCodeAt),E=l("".slice),x=function(T){return function(j,N){var M,D,k=y(h(j)),F=c(N),te=k.length;return F<0||F>=te?T?"":void 0:(M=b(k,F))<55296||M>56319||F+1===te||(D=b(k,F+1))<56320||D>57343?T?g(k,F):M:T?E(k,F,F+2):D-56320+(M-55296<<10)+65536}};n.exports={codeAt:x(!1),charAt:x(!0)}},function(n,a){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,a,r){var l=r(91)("span").classList,c=l&&l.constructor&&l.constructor.prototype;n.exports=c===Object.prototype?void 0:c},function(n,a,r){var l=r(32);n.exports=function(){var c=l(this),y="";return c.global&&(y+="g"),c.ignoreCase&&(y+="i"),c.multiline&&(y+="m"),c.dotAll&&(y+="s"),c.unicode&&(y+="u"),c.sticky&&(y+="y"),y}},function(n,a,r){var l=r(18),c=r(7).RegExp,y=l(function(){var b=c("a","y");return b.lastIndex=2,b.exec("abcd")!=null}),h=y||l(function(){return!c("a","y").sticky}),g=y||l(function(){var b=c("^r","gy");return b.lastIndex=2,b.exec("str")!=null});n.exports={BROKEN_CARET:g,MISSED_STICKY:h,UNSUPPORTED_Y:y}},function(n,a,r){var l=r(16),c=r(79).find,y=r(100),h="find",g=!0;h in[]&&Array(1).find(function(){g=!1}),l({target:"Array",proto:!0,forced:g},{find:function(b){return c(this,b,arguments.length>1?arguments[1]:void 0)}}),y(h)},function(n,a,r){var l=r(16),c=r(137).includes,y=r(100);l({target:"Array",proto:!0},{includes:function(h){return c(this,h,arguments.length>1?arguments[1]:void 0)}}),y("includes")},function(n,a,r){var l=r(16),c=r(15),y=r(197),h=r(44),g=r(39),b=r(198),E=c("".indexOf);l({target:"String",proto:!0,forced:!b("includes")},{includes:function(x){return!!~E(g(h(this)),g(y(x)),arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var l=r(33),c=r(51),y=r(28)("match");n.exports=function(h){var g;return l(h)&&((g=h[y])!==void 0?!!g:c(h)=="RegExp")}},function(n,a,r){var l=r(15);n.exports=l(1 .valueOf)},function(n,a,r){var l=r(15),c=r(44),y=r(39),h=r(162),g=l("".replace),b="["+h+"]",E=RegExp("^"+b+b+"*"),x=RegExp(b+b+"*$"),T=function(j){return function(N){var M=y(c(N));return 1&j&&(M=g(M,E,"")),2&j&&(M=g(M,x,"")),M}};n.exports={start:T(1),end:T(2),trim:T(3)}},function(n,a){n.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(n,a){var r,l,c=n.exports={};function y(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}function g(k){if(r===setTimeout)return setTimeout(k,0);if((r===y||!r)&&setTimeout)return r=setTimeout,setTimeout(k,0);try{return r(k,0)}catch{try{return r.call(null,k,0)}catch{return r.call(this,k,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:y}catch{r=y}try{l=typeof clearTimeout=="function"?clearTimeout:h}catch{l=h}})();var b,E=[],x=!1,T=-1;function j(){x&&b&&(x=!1,b.length?E=b.concat(E):T=-1,E.length&&N())}function N(){if(!x){var k=g(j);x=!0;for(var F=E.length;F;){for(b=E,E=[];++T<F;)b&&b[T].run();T=-1,F=E.length}b=null,x=!1,function(te){if(l===clearTimeout)return clearTimeout(te);if((l===h||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(te);try{l(te)}catch{try{return l.call(null,te)}catch{return l.call(this,te)}}}(k)}}function M(k,F){this.fun=k,this.array=F}function D(){}c.nextTick=function(k){var F=new Array(arguments.length-1);if(arguments.length>1)for(var te=1;te<arguments.length;te++)F[te-1]=arguments[te];E.push(new M(k,F)),E.length!==1||x||g(N)},M.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=D,c.addListener=D,c.once=D,c.off=D,c.removeListener=D,c.removeAllListeners=D,c.emit=D,c.prependListener=D,c.prependOnceListener=D,c.listeners=function(k){return[]},c.binding=function(k){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(k){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(n,a,r){var l=r(32),c=r(165),y=r(28)("species");n.exports=function(h,g){var b,E=l(h).constructor;return E===void 0||(b=l(E)[y])==null?g:c(b)}},function(n,a,r){var l=r(7),c=r(99),y=r(88),h=l.TypeError;n.exports=function(g){if(c(g))return g;throw h(y(g)+" is not a constructor")}},function(n,a,r){var l=r(16),c=r(161).trim;l({target:"String",proto:!0,forced:r(200)("trim")},{trim:function(){return c(this)}})},function(n,a,r){var l=r(34),c=r(123),y=r(32),h=r(94),g=r(39),b=r(44),E=r(62),x=r(124),T=r(125);c("match",function(j,N,M){return[function(D){var k=b(this),F=D==null?void 0:E(D,j);return F?l(F,D,k):new RegExp(D)[j](g(k))},function(D){var k=y(this),F=g(D),te=M(N,k,F);if(te.done)return te.value;if(!k.global)return T(k,F);var V=k.unicode;k.lastIndex=0;for(var z,J=[],K=0;(z=T(k,F))!==null;){var B=g(z[0]);J[K]=B,B===""&&(k.lastIndex=x(F,h(k.lastIndex),V)),K++}return K===0?null:J}]})},function(n,a,r){var l,c,y,h,g=r(7),b=r(76),E=r(64),x=r(30),T=r(35),j=r(18),N=r(138),M=r(98),D=r(91),k=r(169),F=r(128),te=g.setImmediate,V=g.clearImmediate,z=g.process,J=g.Dispatch,K=g.Function,B=g.MessageChannel,H=g.String,ne=0,X={},ge="onreadystatechange";try{l=g.location}catch{}var Fe=function(Re){if(T(X,Re)){var ce=X[Re];delete X[Re],ce()}},Me=function(Re){return function(){Fe(Re)}},Xe=function(Re){Fe(Re.data)},De=function(Re){g.postMessage(H(Re),l.protocol+"//"+l.host)};te&&V||(te=function(Re){var ce=M(arguments,1);return X[++ne]=function(){b(x(Re)?Re:K(Re),void 0,ce)},c(ne),ne},V=function(Re){delete X[Re]},F?c=function(Re){z.nextTick(Me(Re))}:J&&J.now?c=function(Re){J.now(Me(Re))}:B&&!k?(h=(y=new B).port2,y.port1.onmessage=Xe,c=E(h.postMessage,h)):g.addEventListener&&x(g.postMessage)&&!g.importScripts&&l&&l.protocol!=="file:"&&!j(De)?(c=De,g.addEventListener("message",Xe,!1)):c=ge in D("script")?function(Re){N.appendChild(D("script")).onreadystatechange=function(){N.removeChild(this),Fe(Re)}}:function(Re){setTimeout(Me(Re),0)}),n.exports={set:te,clear:V}},function(n,a,r){var l=r(55);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(l)},function(n,a,r){var l=r(56),c=function(y){var h,g;this.promise=new y(function(b,E){if(h!==void 0||g!==void 0)throw TypeError("Bad Promise constructor");h=b,g=E}),this.resolve=l(h),this.reject=l(g)};n.exports.f=function(y){return new c(y)}},function(n,a,r){a.a=function(){return!1}},function(n,a,r){(function(l){r.d(a,"a",function(){return z});var c=r(1);function y(B){throw new Error("[mobx-utils] "+B)}function h(B,H){H===void 0&&(H="Illegal state"),B||y(H)}var g=function(B){return B&&B!==Object.prototype&&Object.getOwnPropertyNames(B).concat(g(Object.getPrototypeOf(B))||[])},b=function(B){return function(H){var ne=g(H);return ne.filter(function(X,ge){return ne.indexOf(X)===ge})}(B).filter(function(H){return H!=="constructor"&&!~H.indexOf("__")})},E="pending",x="fulfilled",T="rejected";function j(B){switch(this.state){case E:return B.pending&&B.pending(this.value);case T:return B.rejected&&B.rejected(this.value);case x:return B.fulfilled?B.fulfilled(this.value):this.value}}function N(B,H){if(h(arguments.length<=2,"fromPromise expects up to two arguments"),h(typeof B=="function"||typeof B=="object"&&B&&typeof B.then=="function","Please pass a promise or function to fromPromise"),B.isPromiseBasedObservable===!0)return B;typeof B=="function"&&(B=new Promise(B));var ne=B;B.then(Object(c.k)("observableFromPromise-resolve",function(ge){ne.value=ge,ne.state=x}),Object(c.k)("observableFromPromise-reject",function(ge){ne.value=ge,ne.state=T})),ne.isPromiseBasedObservable=!0,ne.case=j;var X=H&&H.state===x?H.value:void 0;return Object(c.q)(ne,{value:X,state:E},{},{deep:!1}),ne}(function(B){B.reject=Object(c.k)("fromPromise.reject",function(H){var ne=B(Promise.reject(H));return ne.state=T,ne.value=H,ne}),B.resolve=Object(c.k)("fromPromise.resolve",function(H){H===void 0&&(H=void 0);var ne=B(Promise.resolve(H));return ne.state=x,ne.value=H,ne})})(N||(N={}));var M=function(B,H,ne,X){var ge,Fe=arguments.length,Me=Fe<3?H:X===null?X=Object.getOwnPropertyDescriptor(H,ne):X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Me=Reflect.decorate(B,H,ne,X);else for(var Xe=B.length-1;Xe>=0;Xe--)(ge=B[Xe])&&(Me=(Fe<3?ge(Me):Fe>3?ge(H,ne,Me):ge(H,ne))||Me);return Fe>3&&Me&&Object.defineProperty(H,ne,Me),Me};(function(){function B(H,ne){var X=this;Object(c.G)(function(){X.current=ne,X.subscription=H.subscribe(X)})}B.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},B.prototype.next=function(H){this.current=H},B.prototype.complete=function(){this.dispose()},B.prototype.error=function(H){this.current=H,this.dispose()},M([c.C.ref],B.prototype,"current",void 0),M([c.k.bound],B.prototype,"next",null),M([c.k.bound],B.prototype,"complete",null),M([c.k.bound],B.prototype,"error",null)})();var D=function(){return D=Object.assign||function(B){for(var H,ne=1,X=arguments.length;ne<X;ne++)for(var ge in H=arguments[ne])Object.prototype.hasOwnProperty.call(H,ge)&&(B[ge]=H[ge]);return B},D.apply(this,arguments)},k=function(B,H,ne,X){var ge,Fe=arguments.length,Me=Fe<3?H:X===null?X=Object.getOwnPropertyDescriptor(H,ne):X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Me=Reflect.decorate(B,H,ne,X);else for(var Xe=B.length-1;Xe>=0;Xe--)(ge=B[Xe])&&(Me=(Fe<3?ge(Me):Fe>3?ge(H,ne,Me):ge(H,ne))||Me);return Fe>3&&Me&&Object.defineProperty(H,ne,Me),Me},F=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function B(H){var ne=this;this.model=H,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(X){return ne.localValues.has(X)},h(Object(c.A)(H),"createViewModel expects an observable object"),b(H).forEach(function(X){if(X!==c.a&&X!=="__mobxDidRunLazyInitializers"){if(h(F.indexOf(X)===-1,"The propertyname "+X+" is reserved and cannot be used with viewModels"),Object(c.w)(H,X)){var ge=Object(c.h)(H,X).derivation;ne.localComputedValues.set(X,Object(c.m)(ge.bind(ne)))}var Fe=Object.getOwnPropertyDescriptor(H,X),Me=Fe?{enumerable:Fe.enumerable}:{};Object.defineProperty(ne,X,D(D({},Me),{configurable:!0,get:function(){return Object(c.w)(H,X)?ne.localComputedValues.get(X).get():ne.isPropertyDirty(X)?ne.localValues.get(X):ne.model[X]},set:Object(c.k)(function(Xe){Xe!==ne.model[X]?ne.localValues.set(X,Xe):ne.localValues.delete(X)})}))}})}Object.defineProperty(B.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),B.prototype.submit=function(){var H=this;Object(c.B)(this.localValues).forEach(function(ne){var X=H.localValues.get(ne),ge=H.model[ne];Object(c.y)(ge)?ge.replace(X):Object(c.z)(ge)?(ge.clear(),ge.merge(X)):Object(c.v)(X)||(H.model[ne]=X)}),this.localValues.clear()},B.prototype.reset=function(){this.localValues.clear()},B.prototype.resetProperty=function(H){this.localValues.delete(H)},k([c.m],B.prototype,"isDirty",null),k([c.m],B.prototype,"changedValues",null),k([c.k.bound],B.prototype,"submit",null),k([c.k.bound],B.prototype,"reset",null),k([c.k.bound],B.prototype,"resetProperty",null)})();function te(B){if(!B)return"ROOT";for(var H=[];B.parent;)H.push(B.path),B=B.parent;return H.reverse().join("/")}function V(B){return Object(c.A)(B)||Object(c.y)(B)||Object(c.z)(B)}function z(B,H){var ne=new WeakMap;function X(Me){var Xe=ne.get(Me.object);(function(De,Re){switch(De.type){case"add":ge(De.newValue,Re,De.name);break;case"update":Fe(De.oldValue),ge(De.newValue,Re,De.name||""+De.index);break;case"remove":case"delete":Fe(De.oldValue);break;case"splice":De.removed.map(Fe),De.added.forEach(function(Oe,Ae){return ge(Oe,Re,""+(De.index+Ae))});for(var ce=De.index+De.addedCount;ce<De.object.length;ce++)if(V(De.object[ce])){var he=ne.get(De.object[ce]);he&&(he.path=""+ce)}}})(Me,Xe),H(Me,te(Xe),B)}function ge(Me,Xe,De){if(V(Me)){var Re=ne.get(Me);if(Re){if(Re.parent!==Xe||Re.path!==De)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+te(Xe)+"/"+De+"', but it already exists at '"+te(Re.parent)+"/"+Re.path+"'")}else{var ce={parent:Xe,path:De,dispose:Object(c.D)(Me,X)};ne.set(Me,ce),Object(c.p)(Me).forEach(function(he){var Oe=he[0];return ge(he[1],ce,Oe)})}}}function Fe(Me){if(V(Me)){var Xe=ne.get(Me);if(!Xe)return;ne.delete(Me),Xe.dispose(),Object(c.L)(Me).forEach(Fe)}}return ge(B,void 0,""),function(){Fe(B)}}var J,K=(J=function(B,H){return J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ne,X){ne.__proto__=X}||function(ne,X){for(var ge in X)X.hasOwnProperty(ge)&&(ne[ge]=X[ge])},J(B,H)},function(B,H){function ne(){this.constructor=B}J(B,H),B.prototype=H===null?Object.create(H):(ne.prototype=H.prototype,new ne)});(function(B){function H(ne,X,ge){var Fe=ge===void 0?{}:ge,Me=Fe.name,Xe=Me===void 0?"ogm"+(1e3*Math.random()|0):Me,De=Fe.keyToName,Re=De===void 0?function(Oe){return""+Oe}:De,ce=B.call(this)||this;ce._keyToName=Re,ce._groupBy=X,ce._ogmInfoKey=Symbol("ogmInfo"+Xe),ce._base=ne;for(var he=0;he<ne.length;he++)ce._addItem(ne[he]);return ce._disposeBaseObserver=Object(c.D)(ce._base,function(Oe){if(Oe.type==="splice")Object(c.J)(function(){for(var Ae=0,Ve=Oe.removed;Ae<Ve.length;Ae++){var dt=Ve[Ae];ce._removeItem(dt)}for(var mt=0,pt=Oe.added;mt<pt.length;mt++){var Jt=pt[mt];ce._addItem(Jt)}});else{if(Oe.type!=="update")throw new Error("illegal state");Object(c.J)(function(){ce._removeItem(Oe.oldValue),ce._addItem(Oe.newValue)})}}),ce}K(H,B),H.prototype.clear=function(){throw new Error("not supported")},H.prototype.delete=function(ne){throw new Error("not supported")},H.prototype.set=function(ne,X){throw new Error("not supported")},H.prototype.dispose=function(){this._disposeBaseObserver();for(var ne=0;ne<this._base.length;ne++){var X=this._base[ne];X[this._ogmInfoKey].reaction(),delete X[this._ogmInfoKey]}},H.prototype._getGroupArr=function(ne){var X=B.prototype.get.call(this,ne);return X===void 0&&(X=Object(c.C)([],{name:"GroupArray["+this._keyToName(ne)+"]",deep:!1}),B.prototype.set.call(this,ne,X)),X},H.prototype._removeFromGroupArr=function(ne,X){var ge=B.prototype.get.call(this,ne);ge.length===1?B.prototype.delete.call(this,ne):(X===ge.length-1||(ge[X]=ge[ge.length-1],ge[X][this._ogmInfoKey].groupArrIndex=X),ge.length--)},H.prototype._addItem=function(ne){var X=this,ge=this._groupBy(ne),Fe=this._getGroupArr(ge),Me={groupByValue:ge,groupArrIndex:Fe.length,reaction:Object(c.F)(function(){return X._groupBy(ne)},function(Xe,De){var Re=ne[X._ogmInfoKey];X._removeFromGroupArr(Re.groupByValue,Re.groupArrIndex);var ce=X._getGroupArr(Xe),he=ce.length;ce.push(ne),Re.groupByValue=Xe,Re.groupArrIndex=he})};Object.defineProperty(ne,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:Me}),Fe.push(ne)},H.prototype._removeItem=function(ne){var X=ne[this._ogmInfoKey];this._removeFromGroupArr(X.groupByValue,X.groupArrIndex),X.reaction(),delete ne[this._ogmInfoKey]}})(c.b),function(){function B(H,ne){this.base=H,this.args=ne,this.closestIdx=0,this.isDisposed=!1;for(var X=this.closest=this.root=H,ge=0;ge<this.args.length-1&&(X=X.get(ne[ge]));ge++)this.closest=X;this.closestIdx=ge}return B.prototype.exists=function(){this.assertNotDisposed();var H=this.args.length;return this.closestIdx>=H-1&&this.closest.has(this.args[H-1])},B.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},B.prototype.set=function(H){this.assertNotDisposed();for(var ne=this.args.length,X=this.closest,ge=this.closestIdx;ge<ne-1;ge++){var Fe=new Map;X.set(this.args[ge],Fe),X=Fe}this.closestIdx=ne-1,this.closest=X,X.set(this.args[ne-1],H)},B.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var H=this.args.length;this.closest.delete(this.args[H-1]);for(var ne=this.root,X=[ne],ge=0;ge<H-1;ge++)ne=ne.get(this.args[ge]),X.push(ne);for(ge=X.length-1;ge>0;ge--)X[ge].size===0&&X[ge-1].delete(this.args[ge-1]);this.isDisposed=!0},B.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},B}(),Promise.resolve(),typeof queueMicrotask<"u"||l!==void 0&&l.nextTick}).call(this,r(163))},function(n,a,r){var l;(function(c,y,h){if(c){for(var g,b={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},E={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},x={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},T={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},j=1;j<20;++j)b[111+j]="f"+j;for(j=0;j<=9;++j)b[j+96]=j.toString();V.prototype.bind=function(z,J,K){var B=this;return z=z instanceof Array?z:[z],B._bindMultiple.call(B,z,J,K),B},V.prototype.unbind=function(z,J){return this.bind.call(this,z,function(){},J)},V.prototype.trigger=function(z,J){var K=this;return K._directMap[z+":"+J]&&K._directMap[z+":"+J]({},z),K},V.prototype.reset=function(){var z=this;return z._callbacks={},z._directMap={},z},V.prototype.stopCallback=function(z,J){if((" "+J.className+" ").indexOf(" mousetrap ")>-1||te(J,this.target))return!1;if("composedPath"in z&&typeof z.composedPath=="function"){var K=z.composedPath()[0];K!==z.target&&(J=K)}return J.tagName=="INPUT"||J.tagName=="SELECT"||J.tagName=="TEXTAREA"||J.isContentEditable},V.prototype.handleKey=function(){var z=this;return z._handleKey.apply(z,arguments)},V.addKeycodes=function(z){for(var J in z)z.hasOwnProperty(J)&&(b[J]=z[J]);g=null},V.init=function(){var z=V(y);for(var J in z)J.charAt(0)!=="_"&&(V[J]=function(K){return function(){return z[K].apply(z,arguments)}}(J))},V.init(),c.Mousetrap=V,n.exports&&(n.exports=V),(l=(function(){return V}).call(a,r,a,n))===void 0||(n.exports=l)}function N(z,J,K){z.addEventListener?z.addEventListener(J,K,!1):z.attachEvent("on"+J,K)}function M(z){if(z.type=="keypress"){var J=String.fromCharCode(z.which);return z.shiftKey||(J=J.toLowerCase()),J}return b[z.which]?b[z.which]:E[z.which]?E[z.which]:String.fromCharCode(z.which).toLowerCase()}function D(z){return z=="shift"||z=="ctrl"||z=="alt"||z=="meta"}function k(z,J,K){return K||(K=function(){if(!g)for(var B in g={},b)B>95&&B<112||b.hasOwnProperty(B)&&(g[b[B]]=B);return g}()[z]?"keydown":"keypress"),K=="keypress"&&J.length&&(K="keydown"),K}function F(z,J){var K,B,H,ne=[];for(K=function(X){return X==="+"?["+"]:(X=X.replace(/\+{2}/g,"+plus")).split("+")}(z),H=0;H<K.length;++H)B=K[H],T[B]&&(B=T[B]),J&&J!="keypress"&&x[B]&&(B=x[B],ne.push("shift")),D(B)&&ne.push(B);return{key:B,modifiers:ne,action:J=k(B,ne,J)}}function te(z,J){return z!==null&&z!==y&&(z===J||te(z.parentNode,J))}function V(z){var J=this;if(z=z||y,!(J instanceof V))return new V(z);J.target=z,J._callbacks={},J._directMap={};var K,B={},H=!1,ne=!1,X=!1;function ge(ce){ce=ce||{};var he,Oe=!1;for(he in B)ce[he]?Oe=!0:B[he]=0;Oe||(X=!1)}function Fe(ce,he,Oe,Ae,Ve,dt){var mt,pt,Jt,Ce,ye=[],Pe=Oe.type;if(!J._callbacks[ce])return[];for(Pe=="keyup"&&D(ce)&&(he=[ce]),mt=0;mt<J._callbacks[ce].length;++mt)if(pt=J._callbacks[ce][mt],(Ae||!pt.seq||B[pt.seq]==pt.level)&&Pe==pt.action&&(Pe=="keypress"&&!Oe.metaKey&&!Oe.ctrlKey||(Jt=he,Ce=pt.modifiers,Jt.sort().join(",")===Ce.sort().join(",")))){var bt=!Ae&&pt.combo==Ve,Vt=Ae&&pt.seq==Ae&&pt.level==dt;(bt||Vt)&&J._callbacks[ce].splice(mt,1),ye.push(pt)}return ye}function Me(ce,he,Oe,Ae){J.stopCallback(he,he.target||he.srcElement,Oe,Ae)||ce(he,Oe)===!1&&(function(Ve){Ve.preventDefault?Ve.preventDefault():Ve.returnValue=!1}(he),function(Ve){Ve.stopPropagation?Ve.stopPropagation():Ve.cancelBubble=!0}(he))}function Xe(ce){typeof ce.which!="number"&&(ce.which=ce.keyCode);var he=M(ce);he&&(ce.type!="keyup"||H!==he?J.handleKey(he,function(Oe){var Ae=[];return Oe.shiftKey&&Ae.push("shift"),Oe.altKey&&Ae.push("alt"),Oe.ctrlKey&&Ae.push("ctrl"),Oe.metaKey&&Ae.push("meta"),Ae}(ce),ce):H=!1)}function De(ce,he,Oe,Ae){function Ve(Jt){return function(){X=Jt,++B[ce],clearTimeout(K),K=setTimeout(ge,1e3)}}function dt(Jt){Me(Oe,Jt,ce),Ae!=="keyup"&&(H=M(Jt)),setTimeout(ge,10)}B[ce]=0;for(var mt=0;mt<he.length;++mt){var pt=mt+1===he.length?dt:Ve(Ae||F(he[mt+1]).action);Re(he[mt],pt,Ae,ce,mt)}}function Re(ce,he,Oe,Ae,Ve){J._directMap[ce+":"+Oe]=he;var dt,mt=(ce=ce.replace(/\s+/g," ")).split(" ");mt.length>1?De(ce,mt,he,Oe):(dt=F(ce,Oe),J._callbacks[dt.key]=J._callbacks[dt.key]||[],Fe(dt.key,dt.modifiers,{type:dt.action},Ae,ce,Ve),J._callbacks[dt.key][Ae?"unshift":"push"]({callback:he,modifiers:dt.modifiers,action:dt.action,seq:Ae,level:Ve,combo:ce}))}J._handleKey=function(ce,he,Oe){var Ae,Ve=Fe(ce,he,Oe),dt={},mt=0,pt=!1;for(Ae=0;Ae<Ve.length;++Ae)Ve[Ae].seq&&(mt=Math.max(mt,Ve[Ae].level));for(Ae=0;Ae<Ve.length;++Ae)if(Ve[Ae].seq){if(Ve[Ae].level!=mt)continue;pt=!0,dt[Ve[Ae].seq]=1,Me(Ve[Ae].callback,Oe,Ve[Ae].combo,Ve[Ae].seq)}else pt||Me(Ve[Ae].callback,Oe,Ve[Ae].combo);var Jt=Oe.type=="keypress"&&ne;Oe.type!=X||D(ce)||Jt||ge(dt),ne=pt&&Oe.type=="keydown"},J._bindMultiple=function(ce,he,Oe){for(var Ae=0;Ae<ce.length;++Ae)Re(ce[Ae],he,Oe)},N(z,"keypress",Xe),N(z,"keydown",Xe),N(z,"keyup",Xe)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(n,a,r){var l=r(7),c=r(34),y=r(30),h=r(33),g=l.TypeError;n.exports=function(b,E){var x,T;if(E==="string"&&y(x=b.toString)&&!h(T=c(x,b))||y(x=b.valueOf)&&!h(T=c(x,b))||E!=="string"&&y(x=b.toString)&&!h(T=c(x,b)))return T;throw g("Can't convert object to primitive value")}},function(n,a,r){var l=r(7),c=r(30),y=r(92),h=l.WeakMap;n.exports=c(h)&&/native code/.test(y(h))},function(n,a,r){var l=r(36),c=r(38),y=r(32),h=r(41),g=r(77);n.exports=l?Object.defineProperties:function(b,E){y(b);for(var x,T=h(E),j=g(E),N=j.length,M=0;N>M;)c.f(b,x=j[M++],T[x]);return b}},function(n,a,r){var l=r(7);n.exports=l},function(n,a,r){var l=r(7),c=r(96),y=r(99),h=r(33),g=r(28)("species"),b=l.Array;n.exports=function(E){var x;return c(E)&&(x=E.constructor,(y(x)&&(x===b||c(x.prototype))||h(x)&&(x=x[g])===null)&&(x=void 0)),x===void 0?b:x}},function(n,a,r){var l=r(113),c=r(97);n.exports=l?{}.toString:function(){return"[object "+c(this)+"]"}},function(n,a,r){var l=r(142).IteratorPrototype,c=r(60),y=r(69),h=r(78),g=r(80),b=function(){return this};n.exports=function(E,x,T,j){var N=x+" Iterator";return E.prototype=c(l,{next:y(+!j,T)}),h(E,N,!1,!0),g[N]=b,E}},function(n,a,r){var l=r(7),c=r(30),y=l.String,h=l.TypeError;n.exports=function(g){if(typeof g=="object"||c(g))return g;throw h("Can't set "+y(g)+" as a prototype")}},function(n,a,r){var l=r(16),c=r(7),y=r(15),h=r(95),g=r(42),b=r(144),E=r(117),x=r(119),T=r(30),j=r(33),N=r(18),M=r(120),D=r(78),k=r(148);n.exports=function(F,te,V){var z=F.indexOf("Map")!==-1,J=F.indexOf("Weak")!==-1,K=z?"set":"add",B=c[F],H=B&&B.prototype,ne=B,X={},ge=function(ce){var he=y(H[ce]);g(H,ce,ce=="add"?function(Oe){return he(this,Oe===0?0:Oe),this}:ce=="delete"?function(Oe){return!(J&&!j(Oe))&&he(this,Oe===0?0:Oe)}:ce=="get"?function(Oe){return J&&!j(Oe)?void 0:he(this,Oe===0?0:Oe)}:ce=="has"?function(Oe){return!(J&&!j(Oe))&&he(this,Oe===0?0:Oe)}:function(Oe,Ae){return he(this,Oe===0?0:Oe,Ae),this})};if(h(F,!T(B)||!(J||H.forEach&&!N(function(){new B().entries().next()}))))ne=V.getConstructor(te,F,z,K),b.enable();else if(h(F,!0)){var Fe=new ne,Me=Fe[K](J?{}:-0,1)!=Fe,Xe=N(function(){Fe.has(1)}),De=M(function(ce){new B(ce)}),Re=!J&&N(function(){for(var ce=new B,he=5;he--;)ce[K](he,he);return!ce.has(-0)});De||((ne=te(function(ce,he){x(ce,H);var Oe=k(new B,ce,ne);return he!=null&&E(he,Oe[K],{that:Oe,AS_ENTRIES:z}),Oe})).prototype=H,H.constructor=ne),(Xe||Re)&&(ge("delete"),ge("has"),z&&ge("get")),(Re||Me)&&ge(K),J&&H.clear&&delete H.clear}return X[F]=ne,l({global:!0,forced:ne!=B},X),D(ne,F),J||V.setStrong(ne,F,z),ne}},function(n,a,r){var l=r(18),c=r(33),y=r(51),h=r(184),g=Object.isExtensible,b=l(function(){});n.exports=b||h?function(E){return!!c(E)&&(!h||y(E)!="ArrayBuffer")&&(!g||g(E))}:g},function(n,a,r){var l=r(18);n.exports=l(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(n,a,r){var l=r(18);n.exports=!l(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(n,a,r){var l=r(38).f,c=r(60),y=r(149),h=r(64),g=r(119),b=r(117),E=r(116),x=r(150),T=r(36),j=r(144).fastKey,N=r(58),M=N.set,D=N.getterFor;n.exports={getConstructor:function(k,F,te,V){var z=k(function(ne,X){g(ne,J),M(ne,{type:F,index:c(null),first:void 0,last:void 0,size:0}),T||(ne.size=0),X!=null&&b(X,ne[V],{that:ne,AS_ENTRIES:te})}),J=z.prototype,K=D(F),B=function(ne,X,ge){var Fe,Me,Xe=K(ne),De=H(ne,X);return De?De.value=ge:(Xe.last=De={index:Me=j(X,!0),key:X,value:ge,previous:Fe=Xe.last,next:void 0,removed:!1},Xe.first||(Xe.first=De),Fe&&(Fe.next=De),T?Xe.size++:ne.size++,Me!=="F"&&(Xe.index[Me]=De)),ne},H=function(ne,X){var ge,Fe=K(ne),Me=j(X);if(Me!=="F")return Fe.index[Me];for(ge=Fe.first;ge;ge=ge.next)if(ge.key==X)return ge};return y(J,{clear:function(){for(var ne=K(this),X=ne.index,ge=ne.first;ge;)ge.removed=!0,ge.previous&&(ge.previous=ge.previous.next=void 0),delete X[ge.index],ge=ge.next;ne.first=ne.last=void 0,T?ne.size=0:this.size=0},delete:function(ne){var X=this,ge=K(X),Fe=H(X,ne);if(Fe){var Me=Fe.next,Xe=Fe.previous;delete ge.index[Fe.index],Fe.removed=!0,Xe&&(Xe.next=Me),Me&&(Me.previous=Xe),ge.first==Fe&&(ge.first=Me),ge.last==Fe&&(ge.last=Xe),T?ge.size--:X.size--}return!!Fe},forEach:function(ne){for(var X,ge=K(this),Fe=h(ne,arguments.length>1?arguments[1]:void 0);X=X?X.next:ge.first;)for(Fe(X.value,X.key,this);X&&X.removed;)X=X.previous},has:function(ne){return!!H(this,ne)}}),y(J,te?{get:function(ne){var X=H(this,ne);return X&&X.value},set:function(ne,X){return B(this,ne===0?0:ne,X)}}:{add:function(ne){return B(this,ne=ne===0?0:ne,ne)}}),T&&l(J,"size",{get:function(){return K(this).size}}),z},setStrong:function(k,F,te){var V=F+" Iterator",z=D(F),J=D(V);E(k,F,function(K,B){M(this,{type:V,target:K,state:z(K),kind:B,last:void 0})},function(){for(var K=J(this),B=K.kind,H=K.last;H&&H.removed;)H=H.previous;return K.target&&(K.last=H=H?H.next:K.state.first)?B=="keys"?{value:H.key,done:!1}:B=="values"?{value:H.value,done:!1}:{value:[H.key,H.value],done:!1}:(K.target=void 0,{value:void 0,done:!0})},te?"entries":"values",!te,!0),x(F)}}},function(n,a,r){var l=r(79).forEach,c=r(121)("forEach");n.exports=c?[].forEach:function(y){return l(this,y,arguments.length>1?arguments[1]:void 0)}},function(n,a,r){var l=r(7),c=r(64),y=r(34),h=r(40),g=r(189),b=r(145),E=r(99),x=r(45),T=r(63),j=r(146),N=r(118),M=l.Array;n.exports=function(D){var k=h(D),F=E(this),te=arguments.length,V=te>1?arguments[1]:void 0,z=V!==void 0;z&&(V=c(V,te>2?arguments[2]:void 0));var J,K,B,H,ne,X,ge=N(k),Fe=0;if(!ge||this==M&&b(ge))for(J=x(k),K=F?new this(J):M(J);J>Fe;Fe++)X=z?V(k[Fe],Fe):k[Fe],T(K,Fe,X);else for(ne=(H=j(k,ge)).next,K=F?new this:[];!(B=y(ne,H)).done;Fe++)X=z?g(H,V,[B.value,Fe],!0):B.value,T(K,Fe,X);return K.length=Fe,K}},function(n,a,r){var l=r(32),c=r(147);n.exports=function(y,h,g,b){try{return b?h(l(g)[0],g[1]):h(g)}catch(E){c(y,"throw",E)}}},function(n,a,r){var l=r(18),c=r(7).RegExp;n.exports=l(function(){var y=c(".","s");return!(y.dotAll&&y.exec(`
`)&&y.flags==="s")})},function(n,a,r){var l=r(18),c=r(7).RegExp;n.exports=l(function(){var y=c("(?<a>b)","g");return y.exec("b").groups.a!=="b"||"b".replace(y,"$<a>c")!=="bc"})},function(n,a,r){var l=r(16),c=r(15),y=r(56),h=r(40),g=r(45),b=r(39),E=r(18),x=r(193),T=r(121),j=r(194),N=r(195),M=r(70),D=r(196),k=[],F=c(k.sort),te=c(k.push),V=E(function(){k.sort(void 0)}),z=E(function(){k.sort(null)}),J=T("sort"),K=!E(function(){if(M)return M<70;if(!(j&&j>3)){if(N)return!0;if(D)return D<603;var B,H,ne,X,ge="";for(B=65;B<76;B++){switch(H=String.fromCharCode(B),B){case 66:case 69:case 70:case 72:ne=3;break;case 68:case 71:ne=4;break;default:ne=2}for(X=0;X<47;X++)k.push({k:H+X,v:ne})}for(k.sort(function(Fe,Me){return Me.v-Fe.v}),X=0;X<k.length;X++)H=k[X].k.charAt(0),ge.charAt(ge.length-1)!==H&&(ge+=H);return ge!=="DGBEFHACIJK"}});l({target:"Array",proto:!0,forced:V||!z||!J||!K},{sort:function(B){B!==void 0&&y(B);var H=h(this);if(K)return B===void 0?F(H):F(H,B);var ne,X,ge=[],Fe=g(H);for(X=0;X<Fe;X++)X in H&&te(ge,H[X]);for(x(ge,function(Me){return function(Xe,De){return De===void 0?-1:Xe===void 0?1:Me!==void 0?+Me(Xe,De)||0:b(Xe)>b(De)?1:-1}}(B)),ne=ge.length,X=0;X<ne;)H[X]=ge[X++];for(;X<Fe;)delete H[X++];return H}})},function(n,a,r){var l=r(114),c=Math.floor,y=function(b,E){var x=b.length,T=c(x/2);return x<8?h(b,E):g(b,y(l(b,0,T),E),y(l(b,T),E),E)},h=function(b,E){for(var x,T,j=b.length,N=1;N<j;){for(T=N,x=b[N];T&&E(b[T-1],x)>0;)b[T]=b[--T];T!==N++&&(b[T]=x)}return b},g=function(b,E,x,T){for(var j=E.length,N=x.length,M=0,D=0;M<j||D<N;)b[M+D]=M<j&&D<N?T(E[M],x[D])<=0?E[M++]:x[D++]:M<j?E[M++]:x[D++];return b};n.exports=y},function(n,a,r){var l=r(55).match(/firefox\/(\d+)/i);n.exports=!!l&&+l[1]},function(n,a,r){var l=r(55);n.exports=/MSIE|Trident/.test(l)},function(n,a,r){var l=r(55).match(/AppleWebKit\/(\d+)\./);n.exports=!!l&&+l[1]},function(n,a,r){var l=r(7),c=r(159),y=l.TypeError;n.exports=function(h){if(c(h))throw y("The method doesn't accept regular expressions");return h}},function(n,a,r){var l=r(28)("match");n.exports=function(c){var y=/./;try{"/./"[c](y)}catch{try{return y[l]=!1,"/./"[c](y)}catch{}}return!1}},function(n,a,r){r(16)({target:"Number",stat:!0},{isNaN:function(l){return l!=l}})},function(n,a,r){var l=r(73).PROPER,c=r(18),y=r(162);n.exports=function(h){return c(function(){return!!y[h]()||"​᠎"[h]()!=="​᠎"||l&&y[h].name!==h})}},function(n,a,r){var l=r(15),c=r(40),y=Math.floor,h=l("".charAt),g=l("".replace),b=l("".slice),E=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,x=/\$([$&'`]|\d{1,2})/g;n.exports=function(T,j,N,M,D,k){var F=N+T.length,te=M.length,V=x;return D!==void 0&&(D=c(D),V=E),g(k,V,function(z,J){var K;switch(h(J,0)){case"$":return"$";case"&":return T;case"`":return b(j,0,N);case"'":return b(j,F);case"<":K=D[b(J,1,-1)];break;default:var B=+J;if(B===0)return z;if(B>te){var H=y(B/10);return H===0?z:H<=te?M[H-1]===void 0?h(J,1):M[H-1]+h(J,1):z}K=M[B-1]}return K===void 0?"":K})}},function(n,a,r){var l=r(36),c=r(15),y=r(34),h=r(18),g=r(77),b=r(112),E=r(84),x=r(40),T=r(85),j=Object.assign,N=Object.defineProperty,M=c([].concat);n.exports=!j||h(function(){if(l&&j({b:1},j(N({},"a",{enumerable:!0,get:function(){N(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var D={},k={},F=Symbol(),te="abcdefghijklmnopqrst";return D[F]=7,te.split("").forEach(function(V){k[V]=V}),j({},D)[F]!=7||g(j({},k)).join("")!=te})?function(D,k){for(var F=x(D),te=arguments.length,V=1,z=b.f,J=E.f;te>V;)for(var K,B=T(arguments[V++]),H=z?M(g(B),z(B)):g(B),ne=H.length,X=0;ne>X;)K=H[X++],l&&!y(J,B,K)||(F[K]=B[K]);return F}:j},function(n,a,r){var l=r(7),c=r(15),y=r(56),h=r(33),g=r(35),b=r(98),E=l.Function,x=c([].concat),T=c([].join),j={},N=function(M,D,k){if(!g(j,D)){for(var F=[],te=0;te<D;te++)F[te]="a["+te+"]";j[D]=E("C,a","return new C("+T(F,",")+")")}return j[D](M,k)};n.exports=E.bind||function(M){var D=y(this),k=D.prototype,F=b(arguments,1),te=function(){var V=x(F,b(arguments));return this instanceof te?N(D,V.length,V):D.apply(M,V)};return h(k)&&(te.prototype=k),te}},function(n,a,r){var l=r(35);n.exports=function(c){return c!==void 0&&(l(c,"value")||l(c,"writable"))}},function(n,a,r){var l=r(15),c=r(44),y=r(39),h=/"/g,g=l("".replace);n.exports=function(b,E,x,T){var j=y(c(b)),N="<"+E;return x!==""&&(N+=" "+x+'="'+g(y(T),h,"&quot;")+'"'),N+">"+j+"</"+E+">"}},function(n,a,r){var l=r(18);n.exports=function(c){return l(function(){var y=""[c]('"');return y!==y.toLowerCase()||y.split('"').length>3})}},function(n,a,r){r(16)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(n,a,r){var l,c,y,h,g=r(16),b=r(71),E=r(7),x=r(46),T=r(34),j=r(209),N=r(42),M=r(149),D=r(102),k=r(78),F=r(150),te=r(56),V=r(30),z=r(33),J=r(119),K=r(92),B=r(117),H=r(120),ne=r(164),X=r(168).set,ge=r(210),Fe=r(213),Me=r(214),Xe=r(170),De=r(215),Re=r(58),ce=r(95),he=r(28),Oe=r(216),Ae=r(128),Ve=r(70),dt=he("species"),mt="Promise",pt=Re.getterFor(mt),Jt=Re.set,Ce=Re.getterFor(mt),ye=j&&j.prototype,Pe=j,bt=ye,Vt=E.TypeError,xt=E.document,nn=E.process,yn=Xe.f,xn=yn,pn=!!(xt&&xt.createEvent&&E.dispatchEvent),lt=V(E.PromiseRejectionEvent),gn="unhandledrejection",$e=!1,vn=ce(mt,function(){var je=K(Pe),rt=je!==String(Pe);if(!rt&&Ve===66||b&&!bt.finally)return!0;if(Ve>=51&&/native code/.test(je))return!1;var Qt=new Pe(function(Nn){Nn(1)}),Yt=function(Nn){Nn(function(){},function(){})};return(Qt.constructor={})[dt]=Yt,!($e=Qt.then(function(){})instanceof Yt)||!rt&&Oe&&!lt}),Yn=vn||!H(function(je){Pe.all(je).catch(function(){})}),Q=function(je){var rt;return!(!z(je)||!V(rt=je.then))&&rt},qn=function(je,rt){if(!je.notified){je.notified=!0;var Qt=je.reactions;ge(function(){for(var Yt=je.value,Nn=je.state==1,mr=0;Qt.length>mr;){var qo,ui,Do,Bo=Qt[mr++],On=Nn?Bo.ok:Bo.fail,In=Bo.resolve,Vn=Bo.reject,or=Bo.domain;try{On?(Nn||(je.rejection===2&&zn(je),je.rejection=1),On===!0?qo=Yt:(or&&or.enter(),qo=On(Yt),or&&(or.exit(),Do=!0)),qo===Bo.promise?Vn(Vt("Promise-chain cycle")):(ui=Q(qo))?T(ui,qo,In,Vn):In(qo)):Vn(Yt)}catch(Xr){or&&!Do&&or.exit(),Vn(Xr)}}je.reactions=[],je.notified=!1,rt&&!je.rejection&&Lr(je)})}},wr=function(je,rt,Qt){var Yt,Nn;pn?((Yt=xt.createEvent("Event")).promise=rt,Yt.reason=Qt,Yt.initEvent(je,!1,!0),E.dispatchEvent(Yt)):Yt={promise:rt,reason:Qt},!lt&&(Nn=E["on"+je])?Nn(Yt):je===gn&&Me("Unhandled promise rejection",Qt)},Lr=function(je){T(X,E,function(){var rt,Qt=je.facade,Yt=je.value;if(Hr(je)&&(rt=De(function(){Ae?nn.emit("unhandledRejection",Yt,Qt):wr(gn,Qt,Yt)}),je.rejection=Ae||Hr(je)?2:1,rt.error))throw rt.value})},Hr=function(je){return je.rejection!==1&&!je.parent},zn=function(je){T(X,E,function(){var rt=je.facade;Ae?nn.emit("rejectionHandled",rt):wr("rejectionhandled",rt,je.value)})},Ao=function(je,rt,Qt){return function(Yt){je(rt,Yt,Qt)}},Ee=function(je,rt,Qt){je.done||(je.done=!0,Qt&&(je=Qt),je.value=rt,je.state=2,qn(je,!0))},He=function(je,rt,Qt){if(!je.done){je.done=!0,Qt&&(je=Qt);try{if(je.facade===rt)throw Vt("Promise can't be resolved itself");var Yt=Q(rt);Yt?ge(function(){var Nn={done:!1};try{T(Yt,rt,Ao(He,Nn,je),Ao(Ee,Nn,je))}catch(mr){Ee(Nn,mr,je)}}):(je.value=rt,je.state=1,qn(je,!1))}catch(Nn){Ee({done:!1},Nn,je)}}};if(vn&&(bt=(Pe=function(je){J(this,bt),te(je),T(l,this);var rt=pt(this);try{je(Ao(He,rt),Ao(Ee,rt))}catch(Qt){Ee(rt,Qt)}}).prototype,(l=function(je){Jt(this,{type:mt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=M(bt,{then:function(je,rt){var Qt=Ce(this),Yt=Qt.reactions,Nn=yn(ne(this,Pe));return Nn.ok=!V(je)||je,Nn.fail=V(rt)&&rt,Nn.domain=Ae?nn.domain:void 0,Qt.parent=!0,Yt[Yt.length]=Nn,Qt.state!=0&&qn(Qt,!1),Nn.promise},catch:function(je){return this.then(void 0,je)}}),c=function(){var je=new l,rt=pt(je);this.promise=je,this.resolve=Ao(He,rt),this.reject=Ao(Ee,rt)},Xe.f=yn=function(je){return je===Pe||je===y?new c(je):xn(je)},!b&&V(j)&&ye!==Object.prototype)){h=ye.then,$e||(N(ye,"then",function(je,rt){var Qt=this;return new Pe(function(Yt,Nn){T(h,Qt,Yt,Nn)}).then(je,rt)},{unsafe:!0}),N(ye,"catch",bt.catch,{unsafe:!0}));try{delete ye.constructor}catch{}D&&D(ye,bt)}g({global:!0,wrap:!0,forced:vn},{Promise:Pe}),k(Pe,mt,!1,!0),F(mt),y=x(mt),g({target:mt,stat:!0,forced:vn},{reject:function(je){var rt=yn(this);return T(rt.reject,void 0,je),rt.promise}}),g({target:mt,stat:!0,forced:b||vn},{resolve:function(je){return Fe(b&&this===y?Pe:this,je)}}),g({target:mt,stat:!0,forced:Yn},{all:function(je){var rt=this,Qt=yn(rt),Yt=Qt.resolve,Nn=Qt.reject,mr=De(function(){var qo=te(rt.resolve),ui=[],Do=0,Bo=1;B(je,function(On){var In=Do++,Vn=!1;Bo++,T(qo,rt,On).then(function(or){Vn||(Vn=!0,ui[In]=or,--Bo||Yt(ui))},Nn)}),--Bo||Yt(ui)});return mr.error&&Nn(mr.value),Qt.promise},race:function(je){var rt=this,Qt=yn(rt),Yt=Qt.reject,Nn=De(function(){var mr=te(rt.resolve);B(je,function(qo){T(mr,rt,qo).then(Qt.resolve,Yt)})});return Nn.error&&Yt(Nn.value),Qt.promise}})},function(n,a,r){var l=r(7);n.exports=l.Promise},function(n,a,r){var l,c,y,h,g,b,E,x,T=r(7),j=r(64),N=r(50).f,M=r(168).set,D=r(169),k=r(211),F=r(212),te=r(128),V=T.MutationObserver||T.WebKitMutationObserver,z=T.document,J=T.process,K=T.Promise,B=N(T,"queueMicrotask"),H=B&&B.value;H||(l=function(){var ne,X;for(te&&(ne=J.domain)&&ne.exit();c;){X=c.fn,c=c.next;try{X()}catch(ge){throw c?h():y=void 0,ge}}y=void 0,ne&&ne.enter()},D||te||F||!V||!z?!k&&K&&K.resolve?((E=K.resolve(void 0)).constructor=K,x=j(E.then,E),h=function(){x(l)}):te?h=function(){J.nextTick(l)}:(M=j(M,T),h=function(){M(l)}):(g=!0,b=z.createTextNode(""),new V(l).observe(b,{characterData:!0}),h=function(){b.data=g=!g})),n.exports=H||function(ne){var X={fn:ne,next:void 0};y&&(y.next=X),c||(c=X,h()),y=X}},function(n,a,r){var l=r(55),c=r(7);n.exports=/ipad|iphone|ipod/i.test(l)&&c.Pebble!==void 0},function(n,a,r){var l=r(55);n.exports=/web0s(?!.*chrome)/i.test(l)},function(n,a,r){var l=r(32),c=r(33),y=r(170);n.exports=function(h,g){if(l(h),c(g)&&g.constructor===h)return g;var b=y.f(h);return(0,b.resolve)(g),b.promise}},function(n,a,r){var l=r(7);n.exports=function(c,y){var h=l.console;h&&h.error&&(arguments.length==1?h.error(c):h.error(c,y))}},function(n,a){n.exports=function(r){try{return{error:!1,value:r()}}catch(l){return{error:!0,value:l}}}},function(n,a){n.exports=typeof window=="object"},function(n,a,r){var l=r(40),c=r(75),y=r(45);n.exports=function(h){for(var g=l(this),b=y(g),E=arguments.length,x=c(E>1?arguments[1]:void 0,b),T=E>2?arguments[2]:void 0,j=T===void 0?b:c(T,b);j>x;)g[x++]=h;return g}},function(n,a,r){var l=r(16),c=r(7),y=r(15),h=r(59),g=r(160),b=r(219),E=r(18),x=c.RangeError,T=c.String,j=Math.floor,N=y(b),M=y("".slice),D=y(1 .toFixed),k=function(z,J,K){return J===0?K:J%2==1?k(z,J-1,K*z):k(z*z,J/2,K)},F=function(z,J,K){for(var B=-1,H=K;++B<6;)H+=J*z[B],z[B]=H%1e7,H=j(H/1e7)},te=function(z,J){for(var K=6,B=0;--K>=0;)B+=z[K],z[K]=j(B/J),B=B%J*1e7},V=function(z){for(var J=6,K="";--J>=0;)if(K!==""||J===0||z[J]!==0){var B=T(z[J]);K=K===""?B:K+N("0",7-B.length)+B}return K};l({target:"Number",proto:!0,forced:E(function(){return D(8e-5,3)!=="0.000"||D(.9,0)!=="1"||D(1.255,2)!=="1.25"||D(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!E(function(){D({})})},{toFixed:function(z){var J,K,B,H,ne=g(this),X=h(z),ge=[0,0,0,0,0,0],Fe="",Me="0";if(X<0||X>20)throw x("Incorrect fraction digits");if(ne!=ne)return"NaN";if(ne<=-1e21||ne>=1e21)return T(ne);if(ne<0&&(Fe="-",ne=-ne),ne>1e-21)if(K=(J=function(Xe){for(var De=0,Re=Xe;Re>=4096;)De+=12,Re/=4096;for(;Re>=2;)De+=1,Re/=2;return De}(ne*k(2,69,1))-69)<0?ne*k(2,-J,1):ne/k(2,J,1),K*=4503599627370496,(J=52-J)>0){for(F(ge,0,K),B=X;B>=7;)F(ge,1e7,0),B-=7;for(F(ge,k(10,B,1),0),B=J-1;B>=23;)te(ge,1<<23),B-=23;te(ge,1<<B),F(ge,1,1),te(ge,2),Me=V(ge)}else F(ge,0,K),F(ge,1<<-J,0),Me=V(ge)+N("0",X);return Me=X>0?Fe+((H=Me.length)<=X?"0."+N("0",X-H)+Me:M(Me,0,H-X)+"."+M(Me,H-X)):Fe+Me}})},function(n,a,r){var l=r(7),c=r(59),y=r(39),h=r(44),g=l.RangeError;n.exports=function(b){var E=y(h(this)),x="",T=c(b);if(T<0||T==1/0)throw g("Wrong number of repetitions");for(;T>0;(T>>>=1)&&(E+=E))1&T&&(x+=E);return x}},function(n,a,r){var l=r(36),c=r(15),y=r(77),h=r(41),g=c(r(84).f),b=c([].push),E=function(x){return function(T){for(var j,N=h(T),M=y(N),D=M.length,k=0,F=[];D>k;)j=M[k++],l&&!g(N,j)||b(F,x?[j,N[j]]:N[j]);return F}};n.exports={entries:E(!0),values:E(!1)}},function(n,a){n.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(n,a,r){r.r(a),r.d(a,"observer",function(){return Ys}),r.d(a,"LogicFlow",function(){return n0}),r.d(a,"h",function(){return $e.g}),r.d(a,"LogicFlowUtil",function(){return l}),r.d(a,"BaseNode",function(){return zc}),r.d(a,"RectNode",function(){return X_}),r.d(a,"CircleNode",function(){return Z_}),r.d(a,"PolygonNode",function(){return nb}),r.d(a,"DiamondNode",function(){return ab}),r.d(a,"EllipseNode",function(){return fb}),r.d(a,"TextNode",function(){return hb}),r.d(a,"HtmlNode",function(){return gb}),r.d(a,"BaseEdge",function(){return wv}),r.d(a,"LineEdge",function(){return Rb}),r.d(a,"PolylineEdge",function(){return Lb}),r.d(a,"BezierEdge",function(){return Ub}),r.d(a,"Arrow",function(){return _j}),r.d(a,"BaseEdgeModel",function(){return Vf}),r.d(a,"BezierEdgeModel",function(){return Qg}),r.d(a,"LineEdgeModel",function(){return _i}),r.d(a,"PolylineEdgeModel",function(){return Fc}),r.d(a,"BaseNodeModel",function(){return Wc}),r.d(a,"CircleNodeModel",function(){return i_}),r.d(a,"DiamondNodeModel",function(){return c_}),r.d(a,"EllipseNodeModel",function(){return h_}),r.d(a,"PolygonNodeModel",function(){return b_}),r.d(a,"RectNodeModel",function(){return x_}),r.d(a,"TextNodeModel",function(){return M_}),r.d(a,"HtmlNodeModel",function(){return k_}),r.d(a,"EditConfigModel",function(){return xf}),r.d(a,"GraphModel",function(){return vw}),r.d(a,"SnaplineModel",function(){return QE}),r.d(a,"Keyboard",function(){return $O}),r.d(a,"get",function(){return $w}),r.d(a,"defaults",function(){return Uw}),r.d(a,"ElementState",function(){return Ur}),r.d(a,"ModelType",function(){return _r}),r.d(a,"ElementType",function(){return to}),r.d(a,"EventType",function(){return Pn}),r.d(a,"formateAnchorConnectValidateData",function(){return Ru});var l={};r.r(l),r.d(l,"createUuid",function(){return $a}),r.d(l,"refreshGraphId",function(){return as}),r.d(l,"StepDrag",function(){return Z}),r.d(l,"setupEdgeModel",function(){return wt}),r.d(l,"isBboxOverLapping",function(){return We}),r.d(l,"filterRepeatPoints",function(){return ot}),r.d(l,"getSimplePolyline",function(){return Lt}),r.d(l,"getExpandedBBox",function(){return qt}),r.d(l,"pointDirection",function(){return St}),r.d(l,"getExpandedBBoxPoint",function(){return Kt}),r.d(l,"mergeBBox",function(){return At}),r.d(l,"getBBoxOfPoints",function(){return zt}),r.d(l,"getPointsFromBBox",function(){return Et}),r.d(l,"isPointOutsideBBox",function(){return Xt}),r.d(l,"getBBoxXCrossPoints",function(){return An}),r.d(l,"getBBoxYCrossPoints",function(){return Bn}),r.d(l,"getBBoxCrossPointsByPoint",function(){return It}),r.d(l,"estimateDistance",function(){return Tt}),r.d(l,"costByPoints",function(){return Ot}),r.d(l,"heuristicCostEstimate",function(){return Rn}),r.d(l,"rebuildPath",function(){return tr}),r.d(l,"removeClosePointFromOpenList",function(){return sn}),r.d(l,"isSegmentsIntersected",function(){return Jn}),r.d(l,"isSegmentCrossingBBox",function(){return $n}),r.d(l,"getNextNeighborPoints",function(){return nr}),r.d(l,"pathFinder",function(){return yr}),r.d(l,"getBoxByOriginNode",function(){return Eo}),r.d(l,"pointFilter",function(){return Ro}),r.d(l,"getPolylinePoints",function(){return lr}),r.d(l,"getLongestEdge",function(){return Lo}),r.d(l,"isSegmentsInNode",function(){return Zr}),r.d(l,"isSegmentsCrossNode",function(){return Oo}),r.d(l,"getCrossPointInRect",function(){return jo}),r.d(l,"segmentDirection",function(){return yo}),r.d(l,"points2PointsList",function(){return co}),r.d(l,"getSimplePoints",function(){return Xo}),r.d(l,"getBytesLength",function(){return Kn}),r.d(l,"getTextWidth",function(){return Tr}),r.d(l,"getAppendAttributes",function(){return kn}),r.d(l,"getBezierControlPoints",function(){return cr}),r.d(l,"getBezierPoints",function(){return Un}),r.d(l,"getEndTangent",function(){return Ea}),r.d(l,"getClosestPointOfPolyline",function(){return Du}),r.d(l,"pickEdgeConfig",function(){return de}),r.d(l,"twoPointDistance",function(){return tt}),r.d(l,"createEdgeGenerator",function(){return Ke}),r.d(l,"snapToGrid",function(){return au}),r.d(l,"getGridOffset",function(){return vl}),r.d(l,"sampleCubic",function(){return me}),r.d(l,"getThetaOfVector",function(){return ct}),r.d(l,"degrees",function(){return Ze}),r.d(l,"Vector",function(){return q}),r.d(l,"Point",function(){return le}),r.d(l,"Matrix",function(){return Nl}),r.d(l,"RotateMatrix",function(){return qd}),r.d(l,"ScaleMatrix",function(){return fv}),r.d(l,"TranslateMatrix",function(){return Pl});var c=r(1),y=r(10);if(!y.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var h=r(43),g=Object(h.b)("observerBatching");function b(i){i()}var E=!1;function x(){return E}function T(i){return Object(c.t)(i)}var j,N=1e4,M=new Set;function D(){j===void 0&&(j=setTimeout(k,1e4))}function k(){j=void 0;var i=Date.now();M.forEach(function(o){var u=o.current;u&&i>=u.cleanAt&&(u.reaction.dispose(),o.current=null,M.delete(o))}),M.size>0&&D()}var F=!1,te=[],V={};function z(i){return"observer"+i}function J(i,o,u){o===void 0&&(o="observed"),u===void 0&&(u=V),x();var s,p=function(P){return function(){F?te.push(P):P()}}((u.useForceUpdate||h.d)()),f=y.d.useRef(null);if(!f.current){var v=new c.c(z(o),function(){_.mounted?p():(v.dispose(),f.current=null)}),_=function(P){return{cleanAt:Date.now()+N,reaction:P}}(v);f.current=_,s=f,M.add(s),D()}var O=f.current.reaction;return y.d.useDebugValue(O,T),y.d.useEffect(function(){var P;return P=f,M.delete(P),f.current?f.current.mounted=!0:(f.current={reaction:new c.c(z(o),function(){p()}),cleanAt:1/0},p()),function(){f.current.reaction.dispose(),f.current=null}},[]),function(P){F=!0,te=[];try{var C=P();F=!1;var W=te.length>0?te:void 0;return y.d.useLayoutEffect(function(){W&&W.forEach(function(Y){return Y()})},[W]),C}finally{F=!1}}(function(){var P,C;if(O.track(function(){try{P=i()}catch(W){C=W}}),C)throw C;return P})}var K=function(){return K=Object.assign||function(i){for(var o,u=1,s=arguments.length;u<s;u++)for(var p in o=arguments[u])Object.prototype.hasOwnProperty.call(o,p)&&(i[p]=o[p]);return i},K.apply(this,arguments)};function B(i,o){var u,s,p,f=K({forwardRef:!1},o),v=i.displayName||i.name,_=function(O,P){return J(function(){return i(O,P)},v)};return _.displayName=v,u=f.forwardRef?Object(y.f)(Object(y.e)(_)):Object(y.f)(_),s=i,p=u,Object.keys(s).forEach(function(O){H[O]||Object.defineProperty(p,O,Object.getOwnPropertyDescriptor(s,O))}),u.displayName=v,u}var H={$$typeof:!0,render:!0,compare:!0,type:!0};function ne(i){var o=i.children,u=i.render,s=o||u;return typeof s!="function"?null:J(s)}function X(i,o,u,s,p){var f=o==="children"?"render":"children",v=typeof i[o]=="function",_=typeof i[f]=="function";return v&&_?new Error("MobX Observer: Do not use children and render in the same time in`"+u):v||_?null:new Error("Invalid prop `"+p+"` of type `"+typeof i[o]+"` supplied to `"+u+"`, expected `function`.")}ne.propTypes={children:X,render:X},ne.displayName="Observer";var ge;(ge=y.g)||(ge=b),Object(c.n)({reactionScheduler:ge}),Object(h.a)()[g]=!0;var Fe=0,Me={};function Xe(i){return Me[i]||(Me[i]=function(o){if(typeof Symbol=="function")return Symbol(o);var u="__$mobx-react "+o+" ("+Fe+")";return Fe++,u}(i)),Me[i]}function De(i,o){if(Re(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),s=Object.keys(o);if(u.length!==s.length)return!1;for(var p=0;p<u.length;p++)if(!Object.hasOwnProperty.call(o,u[p])||!Re(i[u[p]],o[u[p]]))return!1;return!0}function Re(i,o){return i===o?i!==0||1/i==1/o:i!=i&&o!=o}function ce(i,o,u){Object.hasOwnProperty.call(i,o)?i[o]=u:Object.defineProperty(i,o,{enumerable:!1,configurable:!0,writable:!0,value:u})}var he=Xe("patchMixins"),Oe=Xe("patchedDefinition");function Ae(i,o){for(var u=this,s=arguments.length,p=new Array(s>2?s-2:0),f=2;f<s;f++)p[f-2]=arguments[f];o.locks++;try{var v;return i!=null&&(v=i.apply(this,p)),v}finally{o.locks--,o.locks===0&&o.methods.forEach(function(_){_.apply(u,p)})}}function Ve(i,o){return function(){for(var u=arguments.length,s=new Array(u),p=0;p<u;p++)s[p]=arguments[p];Ae.call.apply(Ae,[this,i,o].concat(s))}}function dt(i,o,u){var s=function(_,O){var P=_[he]=_[he]||{},C=P[O]=P[O]||{};return C.locks=C.locks||0,C.methods=C.methods||[],C}(i,o);s.methods.indexOf(u)<0&&s.methods.push(u);var p=Object.getOwnPropertyDescriptor(i,o);if(!p||!p[Oe]){var f=i[o],v=mt(i,o,p?p.enumerable:void 0,s,f);Object.defineProperty(i,o,v)}}function mt(i,o,u,s,p){var f,v=Ve(p,s);return(f={})[Oe]=!0,f.get=function(){return v},f.set=function(_){if(this===i)v=Ve(_,s);else{var O=mt(this,o,u,s,_);Object.defineProperty(this,o,O)}},f.configurable=!0,f.enumerable=u,f}var pt=c.a||"$mobx",Jt=Xe("isMobXReactObserver"),Ce=Xe("isUnmounted"),ye=Xe("skipRender"),Pe=Xe("isForcingUpdate");function bt(i){var o=i.prototype;if(i[Jt]?Vt(o):i[Jt]=!0,o.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(i.__proto__!==y.b)if(o.shouldComponentUpdate){if(o.shouldComponentUpdate!==nn)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else o.shouldComponentUpdate=nn;yn(o,"props"),yn(o,"state");var u=o.render;return o.render=function(){return xt.call(this,u)},dt(o,"componentWillUnmount",function(){var s;(s=this.render[pt])===null||s===void 0||s.dispose(),this[Ce]=!0,!this.render[pt]&&Vt(this)}),i}function Vt(i){return i.displayName||i.name||i.constructor&&(i.constructor.displayName||i.constructor.name)||"<component>"}function xt(i){var o=this;ce(this,ye,!1),ce(this,Pe,!1);var u=Vt(this),s=i.bind(this),p=!1,f=new c.c(u+".render()",function(){if(!p&&(p=!0,o[Ce]!==!0)){var _=!0;try{ce(o,Pe,!0),o[ye]||y.a.prototype.forceUpdate.call(o),_=!1}finally{ce(o,Pe,!1),_&&f.dispose()}}});function v(){p=!1;var _=void 0,O=void 0;if(f.track(function(){try{O=Object(c.d)(!1,s)}catch(P){_=P}}),_)throw _;return O}return f.reactComponent=this,v[pt]=f,this.render=v,v.call(this)}function nn(i,o){return this.state!==o||!De(this.props,i)}function yn(i,o){var u=Xe("reactProp_"+o+"_valueHolder"),s=Xe("reactProp_"+o+"_atomHolder");function p(){return this[s]||ce(this,s,Object(c.o)("reactive "+o)),this[s]}Object.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){var f=!1;return c.f&&c.e&&(f=Object(c.f)(!0)),p.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(f),this[u]},set:function(f){this[Pe]||De(this[u],f)?ce(this,u,f):(ce(this,u,f),ce(this,ye,!0),p.call(this).reportChanged(),ce(this,ye,!1))}})}var xn=typeof Symbol=="function"&&Symbol.for,pn=xn?Symbol.for("react.forward_ref"):typeof y.e=="function"&&Object(y.e)(function(i){return null}).$$typeof,lt=xn?Symbol.for("react.memo"):typeof y.f=="function"&&Object(y.f)(function(i){return null}).$$typeof;function gn(i){if(i.isMobxInjector,lt&&i.$$typeof===lt)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(pn&&i.$$typeof===pn){var o=i.render;if(typeof o!="function")throw new Error("render property of ForwardRef was not a function");return Object(y.e)(function(){var u=arguments;return Object(y.c)(ne,null,function(){return o.apply(void 0,u)})})}return typeof i!="function"||i.prototype&&i.prototype.render||i.isReactClass||Object.prototype.isPrototypeOf.call(y.a,i)?bt(i):B(i)}if(!y.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var $e=r(0);r(4),r(8),r(2),r(3),r(52),r(6),r(5),r(11),r(37),r(27),r(21),r(20),r(24),r(22),r(25),r(9),r(17),r(23),r(19),r(192),r(156),r(104),r(157),r(158),r(199),r(61);var vn=function(i,o){for(var u=-1,s=i==null?0:i.length,p=Array(s);++u<s;)p[u]=o(i[u],u,i);return p},Yn=function(){this.__data__=[],this.size=0},Q=function(i,o){return i===o||i!=i&&o!=o},qn=function(i,o){for(var u=i.length;u--;)if(Q(i[u][0],o))return u;return-1},wr=Array.prototype.splice,Lr=function(i){var o=this.__data__,u=qn(o,i);return!(u<0)&&(u==o.length-1?o.pop():wr.call(o,u,1),--this.size,!0)},Hr=function(i){var o=this.__data__,u=qn(o,i);return u<0?void 0:o[u][1]},zn=function(i){return qn(this.__data__,i)>-1},Ao=function(i,o){var u=this.__data__,s=qn(u,i);return s<0?(++this.size,u.push([i,o])):u[s][1]=o,this};function Ee(i){var o=-1,u=i==null?0:i.length;for(this.clear();++o<u;){var s=i[o];this.set(s[0],s[1])}}Ee.prototype.clear=Yn,Ee.prototype.delete=Lr,Ee.prototype.get=Hr,Ee.prototype.has=zn,Ee.prototype.set=Ao;var He=Ee,je=function(){this.__data__=new He,this.size=0},rt=function(i){var o=this.__data__,u=o.delete(i);return this.size=o.size,u},Qt=function(i){return this.__data__.get(i)},Yt=function(i){return this.__data__.has(i)},Nn=r(31),mr=Nn.a.Symbol,qo=Object.prototype,ui=qo.hasOwnProperty,Do=qo.toString,Bo=mr?mr.toStringTag:void 0,On=function(i){var o=ui.call(i,Bo),u=i[Bo];try{i[Bo]=void 0;var s=!0}catch{}var p=Do.call(i);return s&&(o?i[Bo]=u:delete i[Bo]),p},In=Object.prototype.toString,Vn=function(i){return In.call(i)},or=mr?mr.toStringTag:void 0,Xr=function(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":or&&or in Object(i)?On(i):Vn(i)},Mr=function(i){var o=typeof i;return i!=null&&(o=="object"||o=="function")},qa,Aa=function(i){if(!Mr(i))return!1;var o=Xr(i);return o=="[object Function]"||o=="[object GeneratorFunction]"||o=="[object AsyncFunction]"||o=="[object Proxy]"},Ka=Nn.a["__core-js_shared__"],Gu=(qa=/[^.]+$/.exec(Ka&&Ka.keys&&Ka.keys.IE_PROTO||""))?"Symbol(src)_1."+qa:"",dd=function(i){return!!Gu&&Gu in i},Xl=Function.prototype.toString,qi=function(i){if(i!=null){try{return Xl.call(i)}catch{}try{return i+""}catch{}}return""},Ss=/^\[object .+?Constructor\]$/,Tn=Function.prototype,af=Object.prototype,so=Tn.toString,Yl=af.hasOwnProperty,Ri=RegExp("^"+so.call(Yl).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$i=function(i){return!(!Mr(i)||dd(i))&&(Aa(i)?Ri:Ss).test(qi(i))},tl=function(i,o){return i==null?void 0:i[o]},fa=function(i,o){var u=tl(i,o);return $i(u)?u:void 0},Ki=fa(Nn.a,"Map"),da=fa(Object,"create"),ql=function(){this.__data__=da?da(null):{},this.size=0},Kl=function(i){var o=this.has(i)&&delete this.__data__[i];return this.size-=o?1:0,o},uf=Object.prototype.hasOwnProperty,As=function(i){var o=this.__data__;if(da){var u=o[i];return u==="__lodash_hash_undefined__"?void 0:u}return uf.call(o,i)?o[i]:void 0},sf=Object.prototype.hasOwnProperty,Zl=function(i){var o=this.__data__;return da?o[i]!==void 0:sf.call(o,i)},pd=function(i,o){var u=this.__data__;return this.size+=this.has(i)?0:1,u[i]=da&&o===void 0?"__lodash_hash_undefined__":o,this};function yu(i){var o=-1,u=i==null?0:i.length;for(this.clear();++o<u;){var s=i[o];this.set(s[0],s[1])}}yu.prototype.clear=ql,yu.prototype.delete=Kl,yu.prototype.get=As,yu.prototype.has=Zl,yu.prototype.set=pd;var lf=yu,Za=function(){this.size=0,this.__data__={hash:new lf,map:new(Ki||He),string:new lf}},Jl=function(i){var o=typeof i;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?i!=="__proto__":i===null},nl=function(i,o){var u=i.__data__;return Jl(o)?u[typeof o=="string"?"string":"hash"]:u.map},Ql=function(i){var o=nl(this,i).delete(i);return this.size-=o?1:0,o},ec=function(i){return nl(this,i).get(i)},hd=function(i){return nl(this,i).has(i)},cf=function(i,o){var u=nl(this,i),s=u.size;return u.set(i,o),this.size+=u.size==s?0:1,this};function Br(i){var o=-1,u=i==null?0:i.length;for(this.clear();++o<u;){var s=i[o];this.set(s[0],s[1])}}Br.prototype.clear=Za,Br.prototype.delete=Ql,Br.prototype.get=ec,Br.prototype.has=hd,Br.prototype.set=cf;var Fr=Br,ff=function(i,o){var u=this.__data__;if(u instanceof He){var s=u.__data__;if(!Ki||s.length<199)return s.push([i,o]),this.size=++u.size,this;u=this.__data__=new Fr(s)}return u.set(i,o),this.size=u.size,this};function Wu(i){var o=this.__data__=new He(i);this.size=o.size}Wu.prototype.clear=je,Wu.prototype.delete=rt,Wu.prototype.get=Qt,Wu.prototype.has=Yt,Wu.prototype.set=ff;var Zi=Wu,rl=function(i){return this.__data__.set(i,"__lodash_hash_undefined__"),this},df=function(i){return this.__data__.has(i)};function To(i){var o=-1,u=i==null?0:i.length;for(this.__data__=new Fr;++o<u;)this.add(i[o])}To.prototype.add=To.prototype.push=rl,To.prototype.has=df;var mu=To,gu=function(i,o){for(var u=-1,s=i==null?0:i.length;++u<s;)if(o(i[u],u,i))return!0;return!1},ol=function(i,o){return i.has(o)},zu=function(i,o,u,s,p,f){var v=1&u,_=i.length,O=o.length;if(_!=O&&!(v&&O>_))return!1;var P=f.get(i),C=f.get(o);if(P&&C)return P==o&&C==i;var W=-1,Y=!0,fe=2&u?new mu:void 0;for(f.set(i,o),f.set(o,i);++W<_;){var xe=i[W],ke=o[W];if(s)var Je=v?s(ke,xe,W,o,i,f):s(xe,ke,W,i,o,f);if(Je!==void 0){if(Je)continue;Y=!1;break}if(fe){if(!gu(o,function(Qe,vt){if(!ol(fe,vt)&&(xe===Qe||p(xe,Qe,u,s,f)))return fe.push(vt)})){Y=!1;break}}else if(xe!==ke&&!p(xe,ke,u,s,f)){Y=!1;break}}return f.delete(i),f.delete(o),Y},si=Nn.a.Uint8Array,tc=function(i){var o=-1,u=Array(i.size);return i.forEach(function(s,p){u[++o]=[p,s]}),u},pf=function(i){var o=-1,u=Array(i.size);return i.forEach(function(s){u[++o]=s}),u},nc=mr?mr.prototype:void 0,bi=nc?nc.valueOf:void 0,Ko=function(i,o,u,s,p,f,v){switch(u){case"[object DataView]":if(i.byteLength!=o.byteLength||i.byteOffset!=o.byteOffset)return!1;i=i.buffer,o=o.buffer;case"[object ArrayBuffer]":return!(i.byteLength!=o.byteLength||!f(new si(i),new si(o)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Q(+i,+o);case"[object Error]":return i.name==o.name&&i.message==o.message;case"[object RegExp]":case"[object String]":return i==o+"";case"[object Map]":var _=tc;case"[object Set]":var O=1&s;if(_||(_=pf),i.size!=o.size&&!O)return!1;var P=v.get(i);if(P)return P==o;s|=2,v.set(i,o);var C=zu(_(i),_(o),s,p,f,v);return v.delete(i),C;case"[object Symbol]":if(bi)return bi.call(i)==bi.call(o)}return!1},Bi=function(i,o){for(var u=-1,s=o.length,p=i.length;++u<s;)i[p+u]=o[u];return i},Jr=Array.isArray,hf=function(i,o,u){var s=o(i);return Jr(i)?s:Bi(s,u(i))},wi=function(i,o){for(var u=-1,s=i==null?0:i.length,p=0,f=[];++u<s;){var v=i[u];o(v,u,i)&&(f[p++]=v)}return f},rc=function(){return[]},vf=Object.prototype.propertyIsEnumerable,Ei=Object.getOwnPropertySymbols,yi=Ei?function(i){return i==null?[]:(i=Object(i),wi(Ei(i),function(o){return vf.call(i,o)}))}:rc,oc=function(i,o){for(var u=-1,s=Array(i);++u<i;)s[u]=o(u);return s},jr=function(i){return i!=null&&typeof i=="object"},Zo=function(i){return jr(i)&&Xr(i)=="[object Arguments]"},il=Object.prototype,yf=il.hasOwnProperty,ic=il.propertyIsEnumerable,al=Zo(function(){return arguments}())?Zo:function(i){return jr(i)&&yf.call(i,"callee")&&!ic.call(i,"callee")},Ta=al,Oi=r(48),Vu=/^(?:0|[1-9]\d*)$/,ji=function(i,o){var u=typeof i;return!!(o=o??9007199254740991)&&(u=="number"||u!="symbol"&&Vu.test(i))&&i>-1&&i%1==0&&i<o},Ji=function(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=9007199254740991},Or={};Or["[object Float32Array]"]=Or["[object Float64Array]"]=Or["[object Int8Array]"]=Or["[object Int16Array]"]=Or["[object Int32Array]"]=Or["[object Uint8Array]"]=Or["[object Uint8ClampedArray]"]=Or["[object Uint16Array]"]=Or["[object Uint32Array]"]=!0,Or["[object Arguments]"]=Or["[object Array]"]=Or["[object ArrayBuffer]"]=Or["[object Boolean]"]=Or["[object DataView]"]=Or["[object Date]"]=Or["[object Error]"]=Or["[object Function]"]=Or["[object Map]"]=Or["[object Number]"]=Or["[object Object]"]=Or["[object RegExp]"]=Or["[object Set]"]=Or["[object String]"]=Or["[object WeakMap]"]=!1;var xi=function(i){return jr(i)&&Ji(i.length)&&!!Or[Xr(i)]},pa=function(i){return function(o){return i(o)}},ri=r(49),Hu=ri.a&&ri.a.isTypedArray,_u=Hu?pa(Hu):xi,ha=Object.prototype.hasOwnProperty,oo=function(i,o){var u=Jr(i),s=!u&&Ta(i),p=!u&&!s&&Object(Oi.a)(i),f=!u&&!s&&!p&&_u(i),v=u||s||p||f,_=v?oc(i.length,String):[],O=_.length;for(var P in i)!o&&!ha.call(i,P)||v&&(P=="length"||p&&(P=="offset"||P=="parent")||f&&(P=="buffer"||P=="byteLength"||P=="byteOffset")||ji(P,O))||_.push(P);return _},Ts=Object.prototype,Ma=function(i){var o=i&&i.constructor;return i===(typeof o=="function"&&o.prototype||Ts)},Qi=function(i,o){return function(u){return i(o(u))}},ac=Qi(Object.keys,Object),vd=Object.prototype.hasOwnProperty,uc=function(i){if(!Ma(i))return ac(i);var o=[];for(var u in Object(i))vd.call(i,u)&&u!="constructor"&&o.push(u);return o},Io=function(i){return i!=null&&Ji(i.length)&&!Aa(i)},bu=function(i){return Io(i)?oo(i):uc(i)},Na=function(i){return hf(i,bu,yi)},Uo=Object.prototype.hasOwnProperty,sc=function(i,o,u,s,p,f){var v=1&u,_=Na(i),O=_.length;if(O!=Na(o).length&&!v)return!1;for(var P=O;P--;){var C=_[P];if(!(v?C in o:Uo.call(o,C)))return!1}var W=f.get(i),Y=f.get(o);if(W&&Y)return W==o&&Y==i;var fe=!0;f.set(i,o),f.set(o,i);for(var xe=v;++P<O;){var ke=i[C=_[P]],Je=o[C];if(s)var Qe=v?s(Je,ke,C,o,i,f):s(ke,Je,C,i,o,f);if(!(Qe===void 0?ke===Je||p(ke,Je,u,s,f):Qe)){fe=!1;break}xe||(xe=C=="constructor")}if(fe&&!xe){var vt=i.constructor,$t=o.constructor;vt==$t||!("constructor"in i)||!("constructor"in o)||typeof vt=="function"&&vt instanceof vt&&typeof $t=="function"&&$t instanceof $t||(fe=!1)}return f.delete(i),f.delete(o),fe},Ui=fa(Nn.a,"DataView"),ea=fa(Nn.a,"Promise"),ul=fa(Nn.a,"Set"),Si=fa(Nn.a,"WeakMap"),Ci="[object Map]",Jo="[object Promise]",Gi="[object Set]",mi="[object WeakMap]",at="[object DataView]",Ct=qi(Ui),Ft=qi(Ki),fn=qi(ea),ur=qi(ul),xr=qi(Si),io=Xr;(Ui&&io(new Ui(new ArrayBuffer(1)))!=at||Ki&&io(new Ki)!=Ci||ea&&io(ea.resolve())!=Jo||ul&&io(new ul)!=Gi||Si&&io(new Si)!=mi)&&(io=function(i){var o=Xr(i),u=o=="[object Object]"?i.constructor:void 0,s=u?qi(u):"";if(s)switch(s){case Ct:return at;case Ft:return Ci;case fn:return Jo;case ur:return Gi;case xr:return mi}return o});var S=io,A="[object Arguments]",L="[object Array]",ee="[object Object]",ve=Object.prototype.hasOwnProperty,Ge=function(i,o,u,s,p,f){var v=Jr(i),_=Jr(o),O=v?L:S(i),P=_?L:S(o),C=(O=O==A?ee:O)==ee,W=(P=P==A?ee:P)==ee,Y=O==P;if(Y&&Object(Oi.a)(i)){if(!Object(Oi.a)(o))return!1;v=!0,C=!1}if(Y&&!C)return f||(f=new Zi),v||_u(i)?zu(i,o,u,s,p,f):Ko(i,o,O,u,s,p,f);if(!(1&u)){var fe=C&&ve.call(i,"__wrapped__"),xe=W&&ve.call(o,"__wrapped__");if(fe||xe){var ke=fe?i.value():i,Je=xe?o.value():o;return f||(f=new Zi),p(ke,Je,u,s,f)}}return!!Y&&(f||(f=new Zi),sc(i,o,u,s,p,f))},ht=function i(o,u,s,p,f){return o===u||(o==null||u==null||!jr(o)&&!jr(u)?o!=o&&u!=u:Ge(o,u,s,p,i,f))},Ht=function(i,o,u,s){var p=u.length,f=p,v=!s;if(i==null)return!f;for(i=Object(i);p--;){var _=u[p];if(v&&_[2]?_[1]!==i[_[0]]:!(_[0]in i))return!1}for(;++p<f;){var O=(_=u[p])[0],P=i[O],C=_[1];if(v&&_[2]){if(P===void 0&&!(O in i))return!1}else{var W=new Zi;if(s)var Y=s(P,C,O,i,o,W);if(!(Y===void 0?ht(C,P,3,s,W):Y))return!1}}return!0},_n=function(i){return i==i&&!Mr(i)},hr=function(i){for(var o=bu(i),u=o.length;u--;){var s=o[u],p=i[s];o[u]=[s,p,_n(p)]}return o},un=function(i,o){return function(u){return u!=null&&u[i]===o&&(o!==void 0||i in Object(u))}},$r=function(i){var o=hr(i);return o.length==1&&o[0][2]?un(o[0][0],o[0][1]):function(u){return u===i||Ht(u,i,o)}},dr=function(i){return typeof i=="symbol"||jr(i)&&Xr(i)=="[object Symbol]"},Pr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wi=/^\w*$/,po=function(i,o){if(Jr(i))return!1;var u=typeof i;return!(u!="number"&&u!="symbol"&&u!="boolean"&&i!=null&&!dr(i))||Wi.test(i)||!Pr.test(i)||o!=null&&i in Object(o)};function Di(i,o){if(typeof i!="function"||o!=null&&typeof o!="function")throw new TypeError("Expected a function");var u=function(){var s=arguments,p=o?o.apply(this,s):s[0],f=u.cache;if(f.has(p))return f.get(p);var v=i.apply(this,s);return u.cache=f.set(p,v)||f,v};return u.cache=new(Di.Cache||Fr),u}Di.Cache=Fr;var Ja=Di,Qa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wu=/\\(\\)?/g,Xu=function(i){var o=Ja(i,function(s){return u.size===500&&u.clear(),s}),u=o.cache;return o}(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(Qa,function(u,s,p,f){o.push(p?f.replace(wu,"$1"):s||u)}),o}),Pa=mr?mr.prototype:void 0,Yu=Pa?Pa.toString:void 0,Go=function i(o){if(typeof o=="string")return o;if(Jr(o))return vn(o,i)+"";if(dr(o))return Yu?Yu.call(o):"";var u=o+"";return u=="0"&&1/o==-1/0?"-0":u},Eu=function(i){return i==null?"":Go(i)},eu=function(i,o){return Jr(i)?i:po(i,o)?[i]:Xu(Eu(i))},ka=function(i){if(typeof i=="string"||dr(i))return i;var o=i+"";return o=="0"&&1/i==-1/0?"-0":o},Ra=function(i,o){for(var u=0,s=(o=eu(o,i)).length;i!=null&&u<s;)i=i[ka(o[u++])];return u&&u==s?i:void 0},Ms=function(i,o,u){var s=i==null?void 0:Ra(i,o);return s===void 0?u:s},wp=function(i,o){return i!=null&&o in Object(i)},Ep=function(i,o,u){for(var s=-1,p=(o=eu(o,i)).length,f=!1;++s<p;){var v=ka(o[s]);if(!(f=i!=null&&u(i,v)))break;i=i[v]}return f||++s!=p?f:!!(p=i==null?0:i.length)&&Ji(p)&&ji(v,p)&&(Jr(i)||Ta(i))},yd=function(i,o){return i!=null&&Ep(i,o,wp)},lc=function(i,o){return po(i)&&_n(o)?un(ka(i),o):function(u){var s=Ms(u,i);return s===void 0&&s===o?yd(u,i):ht(o,s,3)}},Ns=function(i){return i},mf=function(i){return function(o){return o==null?void 0:o[i]}},Op=function(i){return function(o){return Ra(o,i)}},Ps=function(i){return po(i)?mf(ka(i)):Op(i)},cc=function(i){return typeof i=="function"?i:i==null?Ns:typeof i=="object"?Jr(i)?lc(i[0],i[1]):$r(i):Ps(i)},gf=function(i){return function(o,u,s){for(var p=-1,f=Object(o),v=s(o),_=v.length;_--;){var O=v[i?_:++p];if(u(f[O],O,f)===!1)break}return o}}(),Mo=function(i,o){return function(u,s){if(u==null)return u;if(!Io(u))return i(u,s);for(var p=u.length,f=o?p:-1,v=Object(u);(o?f--:++f<p)&&s(v[f],f,v)!==!1;);return u}}(function(i,o){return i&&gf(i,o,bu)}),Ai=function(i,o){var u=-1,s=Io(i)?Array(i.length):[];return Mo(i,function(p,f,v){s[++u]=o(p,f,v)}),s},_f=function(i,o){return(Jr(i)?vn:Ai)(i,cc(o))};Object(c.n)({isolateGlobalState:!0});var bf=function(){try{var i=fa(Object,"defineProperty");return i({},"",{}),i}catch{}}(),sl=function(i,o,u){o=="__proto__"&&bf?bf(i,o,{configurable:!0,enumerable:!0,value:u,writable:!0}):i[o]=u},ev=Object.prototype.hasOwnProperty,ll=function(i,o,u){var s=i[o];ev.call(i,o)&&Q(s,u)&&(u!==void 0||o in i)||sl(i,o,u)},tu=function(i,o,u,s){var p=!u;u||(u={});for(var f=-1,v=o.length;++f<v;){var _=o[f],O=s?s(u[_],i[_],_,u,i):void 0;O===void 0&&(O=i[_]),p?sl(u,_,O):ll(u,_,O)}return u},fc=function(i,o,u){switch(u.length){case 0:return i.call(o);case 1:return i.call(o,u[0]);case 2:return i.call(o,u[0],u[1]);case 3:return i.call(o,u[0],u[1],u[2])}return i.apply(o,u)},ks=Math.max,qu=function(i,o,u){return o=ks(o===void 0?i.length-1:o,0),function(){for(var s=arguments,p=-1,f=ks(s.length-o,0),v=Array(f);++p<f;)v[p]=s[o+p];p=-1;for(var _=Array(o+1);++p<o;)_[p]=s[p];return _[o]=u(v),fc(i,this,_)}},cl=function(i){return function(){return i}},dc=bf?function(i,o){return bf(i,"toString",{configurable:!0,enumerable:!1,value:cl(o),writable:!0})}:Ns,Ku=Date.now,tv=function(i){var o=0,u=0;return function(){var s=Ku(),p=16-(s-u);if(u=s,p>0){if(++o>=800)return arguments[0]}else o=0;return i.apply(void 0,arguments)}},pc=tv(dc),nv=function(i,o){return pc(qu(i,o,Ns),i+"")},rv=function(i,o,u){if(!Mr(u))return!1;var s=typeof o;return!!(s=="number"?Io(u)&&ji(o,u.length):s=="string"&&o in u)&&Q(u[o],i)},xp=function(i){return nv(function(o,u){var s=-1,p=u.length,f=p>1?u[p-1]:void 0,v=p>2?u[2]:void 0;for(f=i.length>3&&typeof f=="function"?(p--,f):void 0,v&&rv(u[0],u[1],v)&&(f=p<3?void 0:f,p=1),o=Object(o);++s<p;){var _=u[s];_&&i(o,_,s,f)}return o})},wf=Object.prototype.hasOwnProperty,gi=xp(function(i,o){if(Ma(o)||Io(o))tu(o,bu(o),i);else for(var u in o)wf.call(o,u)&&ll(i,u,o[u])}),Sp=function(i,o,u,s){if(!Mr(i))return i;for(var p=-1,f=(o=eu(o,i)).length,v=f-1,_=i;_!=null&&++p<f;){var O=ka(o[p]),P=u;if(O==="__proto__"||O==="constructor"||O==="prototype")return i;if(p!=v){var C=_[O];(P=s?s(C,O,_):void 0)===void 0&&(P=Mr(C)?C:ji(o[p+1])?[]:{})}ll(_,O,P),_=_[O]}return i},re=function(i,o,u){for(var s=-1,p=o.length,f={};++s<p;){var v=o[s],_=Ra(i,v);u(_,v)&&Sp(f,eu(v,i),_)}return f},Rs=function(i,o){return re(i,o,function(u,s){return yd(i,s)})},Ou=mr?mr.isConcatSpreadable:void 0,va=function(i){return Jr(i)||Ta(i)||!!(Ou&&i&&i[Ou])},Sr=function i(o,u,s,p,f){var v=-1,_=o.length;for(s||(s=va),f||(f=[]);++v<_;){var O=o[v];u>0&&s(O)?u>1?i(O,u-1,s,p,f):Bi(f,O):p||(f[f.length]=O)}return f},li=function(i){return i!=null&&i.length?Sr(i,1):[]},Cr,ja,xu,ta,Ef,Of,md,Ap,Su,No,fl,gd,Au,Ca,hc,Zu,na,_d,bd,Da=function(i){return pc(qu(i,void 0,li),i+"")}(function(i,o){return i==null?{}:Rs(i,o)});function lo(i,o,u,s){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(s):void 0})}function Tp(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function wd(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function Po(i,o,u,s,p){var f={};return Object.keys(s).forEach(function(v){f[v]=s[v]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(v,_){return _(i,o,v)||v},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Ur,Wo,_r,to,Pn,no,vc={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotation:!1,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},nu=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","allowRotation","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],xf=(ja=Po((Cr=function(){function i(s){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,i),lo(this,"isSilentMode",ja,this),lo(this,"stopZoomGraph",xu,this),lo(this,"stopScrollGraph",ta,this),lo(this,"stopMoveGraph",Ef,this),lo(this,"adjustEdge",Of,this),lo(this,"adjustEdgeMiddle",md,this),lo(this,"adjustEdgeStartAndEnd",Ap,this),lo(this,"adjustNodePosition",Su,this),lo(this,"hideAnchors",No,this),lo(this,"allowRotation",fl,this),lo(this,"hoverOutline",gd,this),lo(this,"nodeSelectedOutline",Au,this),lo(this,"edgeSelectedOutline",Ca,this),lo(this,"nodeTextEdit",hc,this),lo(this,"edgeTextEdit",Zu,this),lo(this,"nodeTextDraggable",na,this),lo(this,"edgeTextDraggable",_d,this),lo(this,"autoExpand",bd,this),wd(this,"multipleSelectKey",""),wd(this,"defaultConfig",{}),gi(this,this.getConfigDetail(s))}var o,u;return o=i,(u=[{key:"updateEditConfig",value:function(s){var p=this.getConfigDetail(s);gi(this,p)}},{key:"getConfigDetail",value:function(s){var p=s.isSilentMode,f=s.textEdit,v={};if(p===!1&&gi(v,this.defaultConfig),p===!0&&p!==this.isSilentMode){var _=Da(vc,nu);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,allowRotation:this.allowRotation,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},gi(v,_)}f===!1&&gi(v,{nodeTextEdit:!1,edgeTextEdit:!1});var O=Da(s,nu);return gi(v,O)}},{key:"getConfig",value:function(){return Da(this,nu)}}])&&Tp(o.prototype,u),i}()).prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xu=Po(Cr.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ta=Po(Cr.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ef=Po(Cr.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Of=Po(Cr.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),md=Po(Cr.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ap=Po(Cr.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Su=Po(Cr.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),No=Po(Cr.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fl=Po(Cr.prototype,"allowRotation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gd=Po(Cr.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Au=Po(Cr.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ca=Po(Cr.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),hc=Po(Cr.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Zu=Po(Cr.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),na=Po(Cr.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_d=Po(Cr.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),bd=Po(Cr.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Po(Cr.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor(Cr.prototype,"updateEditConfig"),Cr.prototype),Cr);r(65),r(66),function(i){i[i.DEFAULT=1]="DEFAULT",i[i.TEXT_EDIT=2]="TEXT_EDIT",i[i.SHOW_MENU=3]="SHOW_MENU",i[i.ALLOW_CONNECT=4]="ALLOW_CONNECT",i[i.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(Ur||(Ur={})),function(i){i.KEY="logic-flow",i.NODE_NAME="lf-node",i.EDGE_NAME="lf-edge"}(Wo||(Wo={})),function(i){i.NODE="node",i.CIRCLE_NODE="circle-node",i.POLYGON_NODE="polygon-node",i.RECT_NODE="rect-node",i.TEXT_NODE="text-node",i.ELLIPSE_NODE="ellipse-node",i.DIAMOND_NODE="diamond-node",i.HTML_NODE="html-node",i.EDGE="edge",i.LINE_EDGE="line-edge",i.POLYLINE_EDGE="polyline-edge",i.BEZIER_EDGE="bezier-edge",i.GRAPH="graph"}(_r||(_r={})),function(i){i.NODE="node",i.EDGE="edge",i.GRAPH="graph"}(to||(to={})),function(i){i.ELEMENT_CLICK="element:click",i.NODE_CLICK="node:click",i.NODE_DBCLICK="node:dbclick",i.NODE_DELETE="node:delete",i.NODE_ADD="node:add",i.NODE_GROUP_COPY="node:group-copy-add",i.NODE_DND_ADD="node:dnd-add",i.NODE_DND_DRAG="node:dnd-drag",i.NODE_MOUSEDOWN="node:mousedown",i.NODE_DRAGSTART="node:dragstart",i.NODE_DRAG="node:drag",i.NODE_DROP="node:drop",i.NODE_MOUSEUP="node:mouseup",i.NODE_MOUSEMOVE="node:mousemove",i.NODE_MOUSEENTER="node:mouseenter",i.NODE_MOUSELEAVE="node:mouseleave",i.NODE_CONTEXTMENU="node:contextmenu",i.NODE_ROTATE="node:rotate",i.EDGE_DELETE="edge:delete",i.EDGE_ADD="edge:add",i.EDGE_CLICK="edge:click",i.EDGE_DBCLICK="edge:dbclick",i.EDGE_MOUSEENTER="edge:mouseenter",i.EDGE_MOUSELEAVE="edge:mouseleave",i.EDGE_CONTEXTMENU="edge:contextmenu",i.EDGE_ADJUST="edge:adjust",i.EDGE_EXCHANGE_NODE="edge:exchange-node",i.ANCHOR_DRAGSTART="anchor:dragstart",i.ANCHOR_DRAG="anchor:drag",i.ANCHOR_DROP="anchor:drop",i.ANCHOR_DRAGEND="anchor:dragend",i.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",i.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",i.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",i.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",i.ADJUST_POINT_DRAG="adjustPoint:drag",i.ADJUST_POINT_DROP="adjustPoint:drop",i.ADJUST_POINT_DRAGEND="adjustPoint:dragend",i.BLANK_MOUSEDOWN="blank:mousedown",i.BLANK_DRAGSTART="blank:dragstart",i.BLANK_DRAG="blank:drag",i.BLANK_DROP="blank:drop",i.BLANK_MOUSEMOVE="blank:mousemove",i.BLANK_MOUSEUP="blank:mouseup",i.BLANK_CLICK="blank:click",i.BLANK_CONTEXTMENU="blank:contextmenu",i.SELECTION_MOUSEDOWN="selection:mousedown",i.SELECTION_DRAGSTART="selection:dragstart",i.SELECTION_DRAG="selection:drag",i.SELECTION_DROP="selection:drop",i.SELECTION_MOUSEMOVE="selection:mousemove",i.SELECTION_MOUSEUP="selection:mouseup",i.SELECTION_CONTEXTMENU="selection:contextmenu",i.CONNECTION_NOT_ALLOWED="connection:not-allowed",i.HISTORY_CHANGE="history:change",i.TEXT_UPDATE="text:update",i.GRAPH_TRANSFORM="graph:transform",i.GRAPH_RENDERED="graph:rendered"}(Pn||(Pn={})),function(i){i.HORIZONTAL="horizontal",i.VERTICAL="vertical"}(no||(no={}));var ho,go,Ed,Od,yc,Ti,Sf,dl,ya;function Ju(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return Tu(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Tu(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Tu(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function ma(i,o,u,s){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(s):void 0})}function Mp(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function ru(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function ra(i,o,u,s,p){var f={};return Object.keys(s).forEach(function(v){f[v]=s[v]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(v,_){return _(i,o,v)||v},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}(function(i){i[i.DEFAULT=0]="DEFAULT",i[i.INCREASE=1]="INCREASE"})(ho||(ho={}));var xd={false:[-1/0,-1/0,1/0,1/0],true:[0,0,0,0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},Sd=(go=function(){function i(s,p){(function(_,O){if(!(_ instanceof O))throw new TypeError("Cannot call a class as a function")})(this,i),ru(this,"MINI_SCALE_SIZE",.2),ru(this,"MAX_SCALE_SIZE",16),ma(this,"SCALE_X",Ed,this),ma(this,"SKEW_Y",Od,this),ma(this,"SKEW_X",yc,this),ma(this,"SCALE_Y",Ti,this),ma(this,"TRANSLATE_X",Sf,this),ma(this,"TRANSLATE_Y",dl,this),ma(this,"ZOOM_SIZE",ya,this),ru(this,"eventCenter",void 0),ru(this,"translateLimitMinX",void 0),ru(this,"translateLimitMinY",void 0),ru(this,"translateLimitMaxX",void 0),ru(this,"translateLimitMaxY",void 0),this.eventCenter=s;var f=p.stopMoveGraph,v=f!==void 0&&f;this.updateTranslateLimits(v)}var o,u;return o=i,u=[{key:"setZoomMiniSize",value:function(s){this.MINI_SCALE_SIZE=s}},{key:"setZoomMaxSize",value:function(s){this.MAX_SCALE_SIZE=s}},{key:"HtmlPointToCanvasPoint",value:function(s){var p=Ju(s,2),f=p[0],v=p[1];return[(f-this.TRANSLATE_X)/this.SCALE_X,(v-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(s){var p=Ju(s,2),f=p[0],v=p[1];return[f*this.SCALE_X+this.TRANSLATE_X,v*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(s,p,f){var v=Ju(s,2),_=v[0],O=v[1];return[_+p/this.SCALE_X,O+f/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(s,p){return[s/this.SCALE_X,p/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var s=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(s,")")}}},{key:"zoom",value:function(){var s=arguments.length>0&&arguments[0]!==void 0&&arguments[0],p=arguments.length>1?arguments[1]:void 0,f=this.SCALE_X,v=this.SCALE_Y;return s===!0?(f+=this.ZOOM_SIZE,v+=this.ZOOM_SIZE):s===!1?(f-=this.ZOOM_SIZE,v-=this.ZOOM_SIZE):typeof s=="number"&&(f=s,v=s),f<this.MINI_SCALE_SIZE||f>this.MAX_SCALE_SIZE||(p&&(this.TRANSLATE_X-=(f-this.SCALE_X)*p[0],this.TRANSLATE_Y-=(v-this.SCALE_Y)*p[1]),this.SCALE_X=f,this.SCALE_Y=v,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(s){this.eventCenter.emit(Pn.GRAPH_TRANSFORM,{type:s,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(s,p){this.TRANSLATE_X+s<=this.translateLimitMaxX&&this.TRANSLATE_X+s>=this.translateLimitMinX&&(this.TRANSLATE_X+=s),this.TRANSLATE_Y+p<=this.translateLimitMaxY&&this.TRANSLATE_Y+p>=this.translateLimitMinY&&(this.TRANSLATE_Y+=p),this.emitGraphTransform("translate")}},{key:"focusOn",value:function(s,p,f,v){var _=Ju(this.CanvasPointToHtmlPoint([s,p]),2),O=f/2-_[0],P=v/2-_[1];this.TRANSLATE_X+=O,this.TRANSLATE_Y+=P,this.emitGraphTransform("focusOn")}},{key:"updateTranslateLimits",value:function(s){var p=Ju(Array.isArray(s)&&s.length===4?s:xd[s.toString()],4);this.translateLimitMinX=p[0],this.translateLimitMinY=p[1],this.translateLimitMaxX=p[2],this.translateLimitMaxY=p[3]}}],u&&Mp(o.prototype,u),i}(),Ed=ra(go.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Od=ra(go.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),yc=ra(go.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ti=ra(go.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Sf=ra(go.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),dl=ra(go.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ya=ra(go.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),ra(go.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(go.prototype,"zoom"),go.prototype),ra(go.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(go.prototype,"resetZoom"),go.prototype),ra(go.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(go.prototype,"translate"),go.prototype),ra(go.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(go.prototype,"focusOn"),go.prototype),go),Af=function(i,o){for(var u=-1,s=i==null?0:i.length;++u<s&&o(i[u],u,i)!==!1;);return i},Np=function(i,o){return i&&tu(o,bu(o),i)},Pp=function(i){var o=[];if(i!=null)for(var u in Object(i))o.push(u);return o},kp=Object.prototype.hasOwnProperty,Ad=function(i){if(!Mr(i))return Pp(i);var o=Ma(i),u=[];for(var s in i)(s!="constructor"||!o&&kp.call(i,s))&&u.push(s);return u},pl=function(i){return Io(i)?oo(i,!0):Ad(i)},Td=function(i,o){return i&&tu(o,pl(o),i)},mc=r(107),br=function(i,o){var u=-1,s=i.length;for(o||(o=Array(s));++u<s;)o[u]=i[u];return o},ov=function(i,o){return tu(i,yi(i),o)},Md=Qi(Object.getPrototypeOf,Object),Qu=Object.getOwnPropertySymbols?function(i){for(var o=[];i;)Bi(o,yi(i)),i=Md(i);return o}:rc,gc=function(i,o){return tu(i,Qu(i),o)},iv=function(i){return hf(i,pl,Qu)},av=Object.prototype.hasOwnProperty,ga=function(i){var o=i.length,u=new i.constructor(o);return o&&typeof i[0]=="string"&&av.call(i,"index")&&(u.index=i.index,u.input=i.input),u},Nd=function(i){var o=new i.constructor(i.byteLength);return new si(o).set(new si(i)),o},Tf=function(i,o){var u=o?Nd(i.buffer):i.buffer;return new i.constructor(u,i.byteOffset,i.byteLength)},Mf=/\w*$/,Rp=function(i){var o=new i.constructor(i.source,Mf.exec(i));return o.lastIndex=i.lastIndex,o},Pd=mr?mr.prototype:void 0,zi=Pd?Pd.valueOf:void 0,es=function(i){return zi?Object(zi.call(i)):{}},Nf=function(i,o){var u=o?Nd(i.buffer):i.buffer;return new i.constructor(u,i.byteOffset,i.length)},js=function(i,o,u){var s=i.constructor;switch(o){case"[object ArrayBuffer]":return Nd(i);case"[object Boolean]":case"[object Date]":return new s(+i);case"[object DataView]":return Tf(i,u);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Nf(i,u);case"[object Map]":case"[object Set]":return new s;case"[object Number]":case"[object String]":return new s(i);case"[object RegExp]":return Rp(i);case"[object Symbol]":return es(i)}},_c=Object.create,jp=function(){function i(){}return function(o){if(!Mr(o))return{};if(_c)return _c(o);i.prototype=o;var u=new i;return i.prototype=void 0,u}}(),bc=function(i){return typeof i.constructor!="function"||Ma(i)?{}:jp(Md(i))},Pf=function(i){return jr(i)&&S(i)=="[object Map]"},kf=ri.a&&ri.a.isMap,Rf=kf?pa(kf):Pf,ts=function(i){return jr(i)&&S(i)=="[object Set]"},Cp=ri.a&&ri.a.isSet,ns=Cp?pa(Cp):ts,kd="[object Arguments]",Rd="[object Function]",Cs="[object Object]",ao={};ao[kd]=ao["[object Array]"]=ao["[object ArrayBuffer]"]=ao["[object DataView]"]=ao["[object Boolean]"]=ao["[object Date]"]=ao["[object Float32Array]"]=ao["[object Float64Array]"]=ao["[object Int8Array]"]=ao["[object Int16Array]"]=ao["[object Int32Array]"]=ao["[object Map]"]=ao["[object Number]"]=ao["[object Object]"]=ao["[object RegExp]"]=ao["[object Set]"]=ao["[object String]"]=ao["[object Symbol]"]=ao["[object Uint8Array]"]=ao["[object Uint8ClampedArray]"]=ao["[object Uint16Array]"]=ao["[object Uint32Array]"]=!0,ao["[object Error]"]=ao[Rd]=ao["[object WeakMap]"]=!1;var wc=function i(o,u,s,p,f,v){var _,O=1&u,P=2&u,C=4&u;if(s&&(_=f?s(o,p,f,v):s(o)),_!==void 0)return _;if(!Mr(o))return o;var W=Jr(o);if(W){if(_=ga(o),!O)return br(o,_)}else{var Y=S(o),fe=Y==Rd||Y=="[object GeneratorFunction]";if(Object(Oi.a)(o))return Object(mc.a)(o,O);if(Y==Cs||Y==kd||fe&&!f){if(_=P||fe?{}:bc(o),!O)return P?gc(o,Td(_,o)):ov(o,Np(_,o))}else{if(!ao[Y])return f?o:{};_=js(o,Y,O)}}v||(v=new Zi);var xe=v.get(o);if(xe)return xe;v.set(o,_),ns(o)?o.forEach(function(Je){_.add(i(Je,u,s,Je,o,v))}):Rf(o)&&o.forEach(function(Je,Qe){_.set(Qe,i(Je,u,s,Qe,o,v))});var ke=W?void 0:(C?P?iv:Na:P?pl:bu)(o);return Af(ke||o,function(Je,Qe){ke&&(Je=o[Qe=Je]),ll(_,Qe,i(Je,u,s,Qe,o,v))}),_},vo=function(i){return wc(i,5)},Mu=function(i,o,u){(u!==void 0&&!Q(i[o],u)||u===void 0&&!(o in i))&&sl(i,o,u)},oi=function(i){return jr(i)&&Io(i)},ou=Function.prototype,Nu=Object.prototype,rs=ou.toString,Ds=Nu.hasOwnProperty,jf=rs.call(Object),Cf=function(i){if(!jr(i)||Xr(i)!="[object Object]")return!1;var o=Md(i);if(o===null)return!0;var u=Ds.call(o,"constructor")&&o.constructor;return typeof u=="function"&&u instanceof u&&rs.call(u)==jf},iu=function(i,o){if((o!=="constructor"||typeof i[o]!="function")&&o!="__proto__")return i[o]},Is=function(i){return tu(i,pl(i))},Df=function(i,o,u,s,p,f,v){var _=iu(i,u),O=iu(o,u),P=v.get(O);if(P)Mu(i,u,P);else{var C=f?f(_,O,u+"",i,o,v):void 0,W=C===void 0;if(W){var Y=Jr(O),fe=!Y&&Object(Oi.a)(O),xe=!Y&&!fe&&_u(O);C=O,Y||fe||xe?Jr(_)?C=_:oi(_)?C=br(_):fe?(W=!1,C=Object(mc.a)(O,!0)):xe?(W=!1,C=Nf(O,!0)):C=[]:Cf(O)||Ta(O)?(C=_,Ta(_)?C=Is(_):Mr(_)&&!Aa(_)||(C=bc(O))):W=!1}W&&(v.set(O,C),p(C,O,s,f,v),v.delete(O)),Mu(i,u,C)}},Ec=function i(o,u,s,p,f){o!==u&&gf(u,function(v,_){if(f||(f=new Zi),Mr(v))Df(o,u,_,s,i,p,f);else{var O=p?p(iu(o,_),v,_+"",o,u,f):void 0;O===void 0&&(O=v),Mu(o,_,O)}},pl)},os=xp(function(i,o,u){Ec(i,o,u)}),jd={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5}},hl=function(i){var o=vo(jd);return i&&(o=os(o,i)),o};r(82),r(166);function If(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}var Oc=function(){function i(){var s,p,f;(function(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")})(this,i),f={},(p="_events")in(s=this)?Object.defineProperty(s,p,{value:f,enumerable:!0,configurable:!0,writable:!0}):s[p]=f}var o,u;return o=i,(u=[{key:"on",value:function(s,p,f){var v=this;return s==null||s.split(",").forEach(function(_){_=_.trim(),v._events[_]||(v._events[_]=[]),v._events[_].push({callback:p,once:!!f})}),this}},{key:"once",value:function(s,p){var f=this;s==null||s.split(",").forEach(function(v){return v=v.trim(),f.on(v,p,!0)})}},{key:"emit",value:function(s,p){var f=this;s==null||s.split(",").forEach(function(v){var _=f._events[v]||[],O=f._events["*"]||[],P=function(C){for(var W=C.length,Y=0;Y<W;Y++)if(C[Y]){var fe=C[Y],xe=fe.callback;fe.once&&(C.splice(Y,1),C.length===0&&delete f._events[v],W--,Y--),xe.apply(f,[p])}};P(_),P(O)})}},{key:"off",value:function(s,p){var f=this;return s||(this._events={}),s.split(",").forEach(function(v){if(p){for(var _=f._events[v]||[],O=_.length,P=0;P<O;P++)_[P].callback===p&&(_.splice(P,1),O--,P--);_.length===0&&delete f._events[v]}else delete f._events[v]}),this}},{key:"getEvents",value:function(){return this._events}}])&&If(o.prototype,u),i}();function au(i,o){return o*Math.round(i/o)||i}function vl(i,o){return i%o}function xc(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return Sc(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Sc(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Sc(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}var Lf=function(i,o,u){var s=xc(i,2),p=s[0],f=s[1],v=xc(o,2),_=v[0],O=v[1],P=xc(u,2),C=P[0],W=P[1];return p>_&&p<C&&f>O&&f<W},Ff=function(i,o){var u=!1;switch(o.multipleSelectKey){case"meta":u=i.metaKey;break;case"alt":u=i.altKey;break;case"shift":u=i.shiftKey;break;case"ctrl":u=i.ctrlKey;break;default:u=!1}return u};r(167),r(126),r(83),r(29),r(12),r(13),r(14),r(47);var Ia=function(i){return function(o,u,s){var p=Object(o);if(!Io(o)){var f=cc(u);o=bu(o),u=function(_){return f(p[_],_,p)}}var v=i(o,u,s);return v>-1?p[f?o[v]:v]:void 0}},Cd=function(i,o,u,s){for(var p=i.length,f=u+(s?1:-1);s?f--:++f<p;)if(o(i[f],f,i))return f;return-1},Dd=/\s/,Id=function(i){for(var o=i.length;o--&&Dd.test(i.charAt(o)););return o},$f=/^\s+/,uu=function(i){return i&&i.slice(0,Id(i)+1).replace($f,"")},Ac=/^[-+]0x[0-9a-f]+$/i,Bf=/^0b[01]+$/i,Uf=/^0o[0-7]+$/i,yl=parseInt,Pu=function(i){if(typeof i=="number")return i;if(dr(i))return NaN;if(Mr(i)){var o=typeof i.valueOf=="function"?i.valueOf():i;i=Mr(o)?o+"":o}if(typeof i!="string")return i===0?i:+i;i=uu(i);var u=Bf.test(i);return u||Uf.test(i)?yl(i.slice(2),u?2:8):Ac.test(i)?NaN:+i},Zn=1/0,ml=function(i){return i?(i=Pu(i))===Zn||i===-1/0?17976931348623157e292*(i<0?-1:1):i==i?i:0:i===0?i:0},Tc=function(i){var o=ml(i),u=o%1;return o==o?u?o-u:o:0},La=Math.max,gl,_l=Ia(function(i,o,u){var s=i==null?0:i.length;if(!s)return-1;var p=u==null?0:Tc(u);return p<0&&(p=La(s+p,0)),Cd(i,cc(o),p)}),_o=new Uint8Array(16);function bl(){if(!gl&&!(gl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gl(_o)}for(var is=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Mc=function(i){return typeof i=="string"&&is.test(i)},Qr=[],ko=0;ko<256;++ko)Qr.push((ko+256).toString(16).substr(1));var ku=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=(Qr[i[o+0]]+Qr[i[o+1]]+Qr[i[o+2]]+Qr[i[o+3]]+"-"+Qr[i[o+4]]+Qr[i[o+5]]+"-"+Qr[i[o+6]]+Qr[i[o+7]]+"-"+Qr[i[o+8]]+Qr[i[o+9]]+"-"+Qr[i[o+10]]+Qr[i[o+11]]+Qr[i[o+12]]+Qr[i[o+13]]+Qr[i[o+14]]+Qr[i[o+15]]).toLowerCase();if(!Mc(u))throw TypeError("Stringified UUID is invalid");return u},Fa=function(i,o,u){var s=(i=i||{}).random||(i.rng||bl)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,o){u=u||0;for(var p=0;p<16;++p)o[u+p]=s[p];return o}return ku(s)},$a=function(){return Fa()},as=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",u=i.nodes.reduce(function(s,p){return s[p.id]=o+Fa(),p.id=s[p.id],s},{});return i.edges.forEach(function(s){s.id=o+Fa(),s.sourceNodeId=u[s.sourceNodeId],s.targetNodeId=u[s.targetNodeId]}),i},su=(r(105),r(127),r(207),function(i,o,u){var s=i.x,p=i.y,f=o.x,v=o.y,_=u.x,O=u.y,P=(O-v)/(_-f),C=v-P*f;return s>=f&&s<=_&&p>=v&&p<=O&&Math.abs(p-P*s+C)<Number.EPSILON});function wl(i){return wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},wl(i)}function Nc(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function us(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?Nc(Object(u),!0).forEach(function(s){El(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):Nc(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function El(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var kt,Ld,Ls,Pc,Gf,Fd,lu,$d,Ba,ss,Wf,Dp,Ip,Lp,Bd,Ud,Gd,Wd,Fp,$p,Bp,Mi=function(i){return i.anchors},Fs=function(i,o){for(var u,s=o.nodes,p=s.length-1;p>=0;p--){var f=s[p];if(zf(i,f)){var v=f.getTargetAnchor(i);if(v){var _={node:f,anchorIndex:v.index,anchor:v.anchor};u&&!kc(f,u.node,o)||(u=_)}}}return u},kc=function(i,o,u){return i.zIndex>o.zIndex||u.nodesMap[i.id].index>u.nodesMap[o.id].index},Vi=function(i,o,u,s){return Math.hypot(i-u,o-s)},_a=function(i,o){var u=!1,s=Ni(o);return i.x>=s.minX-0&&i.x<=s.maxX+0&&i.y>=s.minY-0&&i.y<=s.maxY+0&&(u=!0),u},zf=function(i,o){var u=!1,s=Ni(o);return i.x>=s.minX-5&&i.x<=s.maxX+5&&i.y>=s.minY-5&&i.y<=s.maxY+5&&(u=!0),u},Ni=function(i){var o=i.x,u=i.y,s=i.width,p=i.height;return{minX:o-s/2,minY:u-p/2,maxX:o+s/2,maxY:u+p/2,x:o,y:u,width:s,height:p,centerX:o,centerY:u}},Rc=function(i,o,u){var s,p=function(v){var _=v,O=_.x,P=_.y,C=_.width,W=_.height,Y=_.radius;return[{x:O-C/2+Y,y:P-W/2+Y,r:Y},{x:O+C/2-Y,y:P-W/2+Y,r:Y},{x:O-C/2+Y,y:P+W/2-Y,r:Y},{x:O+C/2-Y,y:P+W/2-Y,r:Y}]}(u),f=Number.MAX_SAFE_INTEGER;return p.forEach(function(v){var _=Vi(i.x,i.y,v.x,v.y);_<f&&(f=_,s=v)}),$s(i,o,s)},$s=function(i,o,u){var s,p=u,f=p.x,v=p.y,_=p.r;if(o===no.HORIZONTAL){var O=f-Math.sqrt(_*_-(i.y-v)*(i.y-v)),P=f+Math.sqrt(_*_-(i.y-v)*(i.y-v));s={x:Math.abs(O-i.x)<Math.abs(P-i.x)?O:P,y:i.y}}else if(o===no.VERTICAL){var C=v-Math.sqrt(_*_-(i.x-f)*(i.x-f)),W=v+Math.sqrt(_*_-(i.x-f)*(i.x-f)),Y=Math.abs(C-i.y)<Math.abs(W-i.y)?C:W;s={x:i.x,y:Y}}return s},Ol=function(i,o){var u=o,s=!1,p=u.x-u.width/2+u.radius,f=u.x+u.width/2-u.radius,v=u.y-u.height/2+u.radius,_=u.y+u.height/2-u.radius,O=u.x,P=u.y,C=u.width,W=u.height;return i.y===P+W/2||i.y===P-W/2?s=i.x>p&&i.x<f:i.x!==O+C/2&&i.x!==O-C/2||(s=i.y>v&&i.y<_),s},jc=function(i,o,u){var s,p=u,f=p.x,v=p.y,_=p.rx,O=p.ry;if(o===no.HORIZONTAL){var P=f-Math.sqrt(_*_-(i.y-v)*(i.y-v)*_*_/(O*O)),C=f+Math.sqrt(_*_-(i.y-v)*(i.y-v)*_*_/(O*O));s={x:Math.abs(P-i.x)<Math.abs(C-i.x)?P:C,y:i.y}}else if(o===no.VERTICAL){var W=v-Math.sqrt(O*O-(i.x-f)*(i.x-f)*O*O/(_*_)),Y=v+Math.sqrt(O*O-(i.x-f)*(i.x-f)*O*O/(_*_)),fe=Math.abs(W-i.y)<Math.abs(Y-i.y)?W:Y;s={x:i.x,y:fe}}return s},Cc=function(i,o,u){for(var s,p=u.pointsPosition,f=Number.MAX_SAFE_INTEGER,v=[],_=0;_<p.length;_++)v.push({start:p[_],end:p[(_+1)%p.length]});return v.forEach(function(O){var P=O.start,C=O.end,W=P,Y=C;P.x>C.x&&(W=C,Y=P);var fe={x:i.x,y:i.y};if(W.x===Y.x&&o===no.HORIZONTAL&&(fe={x:W.x,y:i.y}),W.y===Y.y&&o===no.VERTICAL&&(fe={x:i.x,y:W.y}),W.x!==Y.x&&W.y!==Y.y){var xe=(Y.y-W.y)/(Y.x-W.x),ke=(W.x*Y.y-Y.x*W.y)/(W.x-Y.x);o===no.HORIZONTAL?fe={x:(i.y-ke)/xe,y:i.y}:o===no.VERTICAL&&(fe={x:i.x,y:xe*i.x+ke})}if(su(fe,P,C)){var Je=Vi(fe.x,fe.y,i.x,i.y);Je<f&&(f=Je,s=fe)}}),s},xl=function(i,o,u,s){var p=i.x,f=i.y;return o.x>i.x?p=i.x+u/2:o.x<i.x&&(p=i.x-u/2),o.y>i.y?f=i.y+s/2:o.y<i.y&&(f=i.y-s/2),{x:p,y:f}},Sl=function(i){var o=i.rows,u=i.style,s=i.rowsLength,p=i.className,f=document.createElement("div");f.style.fontSize=u.fontSize,f.style.width=u.width,f.className=p,f.style.lineHeight=u.lineHeight,f.style.padding=u.padding,u.fontFamily&&(f.style.fontFamily=u.fontFamily),s>1?o.forEach(function(_){var O=document.createElement("div");O.textContent=_,f.appendChild(O)}):f.textContent=o,document.body.appendChild(f);var v=f.clientHeight;return document.body.removeChild(f),v},Bs=function(i){var o=i.rows,u=i.rowsLength,s=i.fontSize,p=0;return o&&o.forEach(function(f){var v=Kn(f);p=v>p?v:p}),{width:Math.ceil(p/2)*s+s/4,height:u*(s+2)+s/4}},Ru=function(i){return wl(i)!=="object"?{isAllPass:!!i,msg:i?"":"不允许连接"}:i},zo=function(i){try{return JSON.parse(JSON.stringify(i))}catch{return i}},Dc=1e3,Ic=999,ju=function(){return++Dc};function zd(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function Pi(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?zd(Object(u),!0).forEach(function(s){ba(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):zd(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function Vo(i,o,u,s){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(s):void 0})}function Up(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function ba(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function Dn(i,o,u,s,p){var f={};return Object.keys(s).forEach(function(v){f[v]=s[v]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(v,_){return _(i,o,v)||v},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Vf=(kt=function(){function i(s,p){(function(f,v){if(!(f instanceof v))throw new TypeError("Cannot call a class as a function")})(this,i),ba(this,"id",""),Vo(this,"type",Ld,this),Vo(this,"sourceNodeId",Ls,this),Vo(this,"targetNodeId",Pc,this),Vo(this,"startPoint",Gf,this),Vo(this,"endPoint",Fd,this),Vo(this,"text",lu,this),Vo(this,"properties",$d,this),Vo(this,"points",Ba,this),Vo(this,"pointsList",ss,this),Vo(this,"isSelected",Wf,this),Vo(this,"isHovered",Dp,this),Vo(this,"isHitable",Ip,this),Vo(this,"draggable",Lp,this),Vo(this,"visible",Bd,this),ba(this,"virtual",!1),Vo(this,"isAnimation",Ud,this),Vo(this,"isShowAdjustPoint",Gd,this),ba(this,"graphModel",void 0),Vo(this,"zIndex",Wd,this),ba(this,"BaseType",to.EDGE),ba(this,"modelType",_r.EDGE),Vo(this,"state",Fp,this),ba(this,"additionStateData",void 0),ba(this,"sourceAnchorId",""),ba(this,"targetAnchorId",""),ba(this,"menu",void 0),ba(this,"customTextPosition",!1),Vo(this,"style",$p,this),Vo(this,"arrowConfig",Bp,this),this.graphModel=p,this.initEdgeData(s),this.setAttributes()}var o,u;return o=i,u=[{key:"initEdgeData",value:function(s){if(s.properties||(s.properties={}),!s.id){var p=this.graphModel.idGenerator,f=p&&p(s.type),v=this.createId();s.id=v||f||$a()}this.arrowConfig.markerEnd="url(#marker-end-".concat(s.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(s.id,")");var _=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=_,gi(this,de(s)),this.graphModel.overlapMode===ho.INCREASE&&(this.zIndex=s.zIndex||ju()),this.setAnchors(),this.initPoints(),this.formatText(s)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return Pi(Pi({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return Pi({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var s=this.graphModel.theme.edgeText;return vo(s)}},{key:"getEdgeAnimationStyle",value:function(){var s=this.graphModel.theme.edgeAnimation;return vo(s)}},{key:"getArrowStyle",value:function(){var s=this.getEdgeStyle(),p=this.getEdgeAnimationStyle(),f=this.graphModel.theme.arrow,v=this.isAnimation?p.stroke:s.stroke;return Pi(Pi({},s),{},{fill:v,stroke:v},f)}},{key:"getOutlineStyle",value:function(){var s=this.graphModel.theme.outline;return vo(s)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var s,p;return(s=this.graphModel)===null||s===void 0||(p=s.nodesMap[this.sourceNodeId])===null||p===void 0?void 0:p.model}},{key:"targetNode",get:function(){var s,p;return(s=this.graphModel)===null||s===void 0||(p=s.nodesMap[this.targetNodeId])===null||p===void 0?void 0:p.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(s,p,f){var v,_,O=Mi(s);return f&&(v=_l(O,function(P){return P.id===f}))||O.forEach(function(P){var C=tt(P,p);(_===void 0||C<_)&&(_=C,v=P)}),v}},{key:"getEndAnchor",value:function(s,p){var f,v,_=this,O=Mi(s);return p&&(f=_l(O,function(P){return P.id===p}))||O.forEach(function(P){var C=tt(P,_.startPoint);(v===void 0||C<v)&&(v=C,f=P)}),f}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var s=this.text,p=s.x,f=s.y,v=s.value,_={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return v&&(_.text={x:p,y:f,value:v}),this.graphModel.overlapMode===ho.INCREASE&&(_.zIndex=this.zIndex),_}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(s,p){this.properties[s]=zo(p),this.setAttributes()}},{key:"deleteProperty",value:function(s){delete this.properties[s],this.setAttributes()}},{key:"setProperties",value:function(s){this.properties=Pi(Pi({},Object(c.I)(this.properties)),zo(s)),this.setAttributes()}},{key:"changeEdgeId",value:function(s){var p=this.arrowConfig,f=p.markerEnd,v=p.markerStart;v&&v==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(s,")")),f&&f==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(s,")")),this.id=s}},{key:"setStyle",value:function(s,p){this.style=Pi(Pi({},this.style),{},ba({},s,zo(p)))}},{key:"setStyles",value:function(s){this.style=Pi(Pi({},this.style),zo(s))}},{key:"updateStyles",value:function(s){this.style=Pi({},zo(s))}},{key:"formatText",value:function(s){var p=this.textPosition,f=p.x,v=p.y;s.text&&typeof s.text!="string"?Object.prototype.toString.call(s.text)==="[object Object]"&&(this.text={x:s.text.x||f,y:s.text.y||v,value:s.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:s.text||"",x:f,y:v,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var s=this.textPosition,p=s.x,f=s.y;this.text.x=p,this.text.y=f}},{key:"moveText",value:function(s,p){if(this.text){var f=this.text,v=f.x,_=f.y,O=f.value,P=f.draggable,C=f.editable;this.text={value:O,draggable:P,x:v+s,y:_+p,editable:C}}}},{key:"setText",value:function(s){s&&gi(this.text,s)}},{key:"updateText",value:function(s){this.text=Pi(Pi({},Object(c.I)(this.text)),{},{value:s})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var s=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!s)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:s.x,y:s.y}),this.sourceAnchorId||(this.sourceAnchorId=s.id)}if(!this.targetAnchorId||!this.endPoint){var p=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!p)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:p.x,y:p.y}),this.targetAnchorId||(this.targetAnchorId=p.id)}}},{key:"setSelected",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=s}},{key:"setHovered",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=s}},{key:"setHitable",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=s}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(s,p){this.state=s,this.additionStateData=p}},{key:"updateStartPoint",value:function(s){this.startPoint=s}},{key:"moveStartPoint",value:function(s,p){this.startPoint.x+=s,this.startPoint.y+=p}},{key:"updateEndPoint",value:function(s){this.endPoint=s}},{key:"moveEndPoint",value:function(s,p){this.endPoint.x+=s,this.endPoint.y+=p}},{key:"setZIndex",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=s}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(s){gi(this,s)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(s){var p=s.startPoint,f=s.endPoint;this.updateStartPoint({x:p.x,y:p.y}),this.updateEndPoint({x:f.x,y:f.y})}}],u&&Up(o.prototype,u),i}(),Ld=Dn(kt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ls=Dn(kt.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Pc=Dn(kt.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Gf=Dn(kt.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fd=Dn(kt.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lu=Dn(kt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),$d=Dn(kt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Ba=Dn(kt.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ss=Dn(kt.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Wf=Dn(kt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Dp=Dn(kt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ip=Dn(kt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Lp=Dn(kt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Bd=Dn(kt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ud=Dn(kt.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gd=Dn(kt.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Wd=Dn(kt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Fp=Dn(kt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),$p=Dn(kt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Bp=Dn(kt.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),Dn(kt.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(kt.prototype,"sourceNode"),kt.prototype),Dn(kt.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(kt.prototype,"targetNode"),kt.prototype),Dn(kt.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(kt.prototype,"textPosition"),kt.prototype),Dn(kt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setProperty"),kt.prototype),Dn(kt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"deleteProperty"),kt.prototype),Dn(kt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setProperties"),kt.prototype),Dn(kt.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"changeEdgeId"),kt.prototype),Dn(kt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setStyle"),kt.prototype),Dn(kt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setStyles"),kt.prototype),Dn(kt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateStyles"),kt.prototype),Dn(kt.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"formatText"),kt.prototype),Dn(kt.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"resetTextPosition"),kt.prototype),Dn(kt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"moveText"),kt.prototype),Dn(kt.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setText"),kt.prototype),Dn(kt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateText"),kt.prototype),Dn(kt.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setAnchors"),kt.prototype),Dn(kt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setSelected"),kt.prototype),Dn(kt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setHovered"),kt.prototype),Dn(kt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setHitable"),kt.prototype),Dn(kt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"openEdgeAnimation"),kt.prototype),Dn(kt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"closeEdgeAnimation"),kt.prototype),Dn(kt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setElementState"),kt.prototype),Dn(kt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateStartPoint"),kt.prototype),Dn(kt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"moveStartPoint"),kt.prototype),Dn(kt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateEndPoint"),kt.prototype),Dn(kt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"moveEndPoint"),kt.prototype),Dn(kt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setZIndex"),kt.prototype),Dn(kt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"initPoints"),kt.prototype),Dn(kt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateAttributes"),kt.prototype),Dn(kt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"getAdjustStart"),kt.prototype),Dn(kt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"getAdjustEnd"),kt.prototype),Dn(kt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateAfterAdjustStartAndEnd"),kt.prototype),kt),Us=Vf;function Hf(i){return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Hf(i)}function Gp(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function Al(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?Gp(Object(u),!0).forEach(function(s){ki(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):Gp(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function Wp(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function Ua(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Tl(){return Tl=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,u){var s=Gs(i,o);if(s){var p=Object.getOwnPropertyDescriptor(s,o);return p.get?p.get.call(arguments.length<3?i:u):p.value}},Tl.apply(this,arguments)}function Gs(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=cu(i))!==null;);return i}function Ga(i,o){return Ga=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},Ga(i,o)}function zp(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=cu(i);if(o){var p=cu(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return Vd(this,u)}}function Vd(i,o){if(o&&(Hf(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ls(i)}function ls(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function cu(i){return cu=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},cu(i)}function ki(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var Fn,bo,_i=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&Ga(f,v)})(p,i);var o,u,s=zp(p);function p(){var f;Wp(this,p);for(var v=arguments.length,_=new Array(v),O=0;O<v;O++)_[O]=arguments[O];return ki(ls(f=s.call.apply(s,[this].concat(_))),"modelType",_r.LINE_EDGE),f}return o=p,(u=[{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.line;return Al(Al({},Tl(cu(p.prototype),"getEdgeStyle",this).call(this)),vo(f))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&Ua(o.prototype,u),p}(Us);function Hi(i){return Hi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Hi(i)}function uv(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return Vp(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Vp(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Vp(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function cs(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function vr(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?cs(Object(u),!0).forEach(function(s){wo(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):cs(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function Hp(i,o,u,s){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(s):void 0})}function Xi(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function Ho(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function wa(){return wa=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,u){var s=sv(i,o);if(s){var p=Object.getOwnPropertyDescriptor(s,o);return p.get?p.get.call(arguments.length<3?i:u):p.value}},wa.apply(this,arguments)}function sv(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Kr(i))!==null;);return i}function Lc(i,o){return Lc=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},Lc(i,o)}function fu(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=Kr(i);if(o){var p=Kr(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return Hd(this,u)}}function Hd(i,o){if(o&&(Hi(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cu(i)}function Cu(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Kr(i){return Kr=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Kr(i)}function wo(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function ci(i,o,u,s,p){var f={};return Object.keys(s).forEach(function(v){f[v]=s[v]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(v,_){return _(i,o,v)||v},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Fc=(Fn=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&Lc(f,v)})(p,i);var o,u,s=fu(p);function p(){var f;Xi(this,p);for(var v=arguments.length,_=new Array(v),O=0;O<v;O++)_[O]=arguments[O];return wo(Cu(f=s.call.apply(s,[this].concat(_))),"modelType",_r.POLYLINE_EDGE),wo(Cu(f),"draggingPointList",void 0),Hp(Cu(f),"dbClickPosition",bo,Cu(f)),f}return o=p,(u=[{key:"initEdgeData",value:function(f){this.offset=30,wa(Kr(p.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.polyline;return vr(vr({},wa(Kr(p.prototype),"getEdgeStyle",this).call(this)),vo(f))}},{key:"getTextPosition",value:function(){var f,v=(f=this.text)===null||f===void 0?void 0:f.value;if(this.dbClickPosition&&!v){var _=this.dbClickPosition;return{x:_.x,y:_.y}}var O=co(this.points),P=uv(Lo(O),2),C=P[0],W=P[1];return{x:(C.x+W.x)/2,y:(C.y+W.y)/2}}},{key:"getAfterAnchor",value:function(f,v,_){var O,P;return _.forEach(function(C){var W;f===no.HORIZONTAL?W=Math.abs(v.y-C.y):f===no.VERTICAL&&(W=Math.abs(v.x-C.x)),(!P||P>W)&&(P=W,O=C)}),O}},{key:"getCrossPoint",value:function(f,v,_){var O;return f===no.HORIZONTAL?O={x:_.x,y:v.y}:f===no.VERTICAL&&(O={x:v.x,y:_.y}),O}},{key:"removeCrossPoints",value:function(f,v,_){var O=_.map(function(Qe){return Qe});if(f===1){var P=O[f],C=O[v],W=O[f-1];if(Zr(W,P,this.sourceNode)){if(Oo(P,C,this.sourceNode)){var Y=jo(P,C,this.sourceNode);Y&&(O[f]=Y,O.splice(f-1,1),f--,v--)}}else this.sourceNode.anchors.forEach(function(Qe){(Qe.x===W.x&&Qe.x===P.x||Qe.y===W.y&&Qe.y===P.y)&&Vi(Qe.x,Qe.y,P.x,P.y)<Vi(W.x,W.y,P.x,P.y)&&(O[f-1]=Qe)})}if(v===_.length-2){var fe=O[f],xe=O[v],ke=O[v+1];if(Zr(xe,ke,this.targetNode)){if(Oo(fe,xe,this.targetNode)){var Je=jo(fe,xe,this.targetNode);Je&&(O[v]=Je,O.splice(v+1,1))}}else this.targetNode.anchors.forEach(function(Qe){(Qe.x===ke.x&&Qe.x===xe.x||Qe.y===ke.y&&Qe.y===xe.y)&&Vi(Qe.x,Qe.y,xe.x,xe.y)<Vi(ke.x,ke.y,xe.x,xe.y)&&(O[v+1]=Qe)})}return O}},{key:"getDraggingPoints",value:function(f,v,_,O,P){var C=P.map(function(fe){return fe}),W=this.getAfterAnchor(f,_,O),Y=this.getCrossPoint(f,_,W);return v==="start"?(C.unshift(Y),C.unshift(W)):(C.push(Y),C.push(W)),C}},{key:"updateCrossPoints",value:function(f){var v=f.map(function($t){return $t}),_=f[0],O=f[1],P=f[v.length-2],C=f[v.length-1],W=this.sourceNode,Y=this.targetNode,fe=W.modelType,xe=Y.modelType,ke=yo(_,O),Je=v[0];switch(fe){case _r.RECT_NODE:W.radius!==0&&(Ol(_,W)||(Je=Rc(_,ke,W)));break;case _r.CIRCLE_NODE:Je=$s(_,ke,W);break;case _r.ELLIPSE_NODE:Je=jc(_,ke,W);break;case _r.DIAMOND_NODE:case _r.POLYGON_NODE:Je=Cc(_,ke,W)}Je&&(v[0]=Je);var Qe=yo(P,C),vt=v[v.length-1];switch(xe){case _r.RECT_NODE:Y.radius!==0&&(Ol(C,Y)||(vt=Rc(C,Qe,Y)));break;case _r.CIRCLE_NODE:vt=$s(C,Qe,Y);break;case _r.ELLIPSE_NODE:vt=jc(C,Qe,Y);break;case _r.DIAMOND_NODE:case _r.POLYGON_NODE:vt=Cc(C,Qe,Y)}return vt&&(v[v.length-1]=vt),v}},{key:"getData",value:function(){var f=wa(Kr(p.prototype),"getData",this).call(this),v=this.pointsList.map(function(_){return{x:_.x,y:_.y}});return Object.assign({},f,{pointsList:v})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(f){return"".concat(f.x,",").concat(f.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var f=lr({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=f,this.points=f.map(function(v){return"".concat(v.x,",").concat(v.y)}).join(" ")}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,v){this.startPoint.x+=f,this.startPoint.y+=v,this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveEndPoint",value:function(f,v){this.endPoint.x+=f,this.endPoint.y+=v,this.updatePoints()}},{key:"updatePointsList",value:function(f,v){this.pointsList.forEach(function(P){P.x+=f,P.y+=v});var _=this.pointsList[0];this.startPoint=Object.assign({},_);var O=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},O),this.initPoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(f){return f})}},{key:"dragAppendSimple",value:function(f,v){this.isDragging=!0;var _=f.start,O=f.end,P=f.startIndex,C=f.endIndex,W=f.direction,Y=this.pointsList,fe=Y;return W===no.HORIZONTAL?(Y[P]={x:_.x,y:_.y+v.y},Y[C]={x:O.x,y:O.y+v.y},fe=this.pointsList.map(function(xe){return xe})):W===no.VERTICAL&&(Y[P]={x:_.x+v.x,y:_.y},Y[C]={x:O.x+v.x,y:O.y},fe=this.pointsList.map(function(xe){return xe})),this.updatePointsAfterDrag(fe),this.draggingPointList=fe,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},Y[P]),end:Object.assign({},Y[C]),startIndex:P,endIndex:C,direction:W}}},{key:"dragAppend",value:function(f,v){this.isDragging=!0;var _=f.start,O=f.end,P=f.startIndex,C=f.endIndex,W=f.direction,Y=this.pointsList;if(W===no.HORIZONTAL){Y[P]={x:_.x,y:_.y+v.y},Y[C]={x:O.x,y:O.y+v.y};var fe=this.pointsList.map(function(ln){return ln});if(P!==0&&C!==this.pointsList.length-1&&(fe=this.removeCrossPoints(P,C,fe)),P===0){var xe={x:_.x,y:_.y+v.y};if(!_a(xe,this.sourceNode)){var ke=this.sourceNode.anchors;fe=this.getDraggingPoints(W,"start",xe,ke,fe)}}if(C===this.pointsList.length-1){var Je={x:O.x,y:O.y+v.y};if(!_a(Je,this.targetNode)){var Qe=this.targetNode.anchors;fe=this.getDraggingPoints(W,"end",Je,Qe,fe)}}this.updatePointsAfterDrag(fe),this.draggingPointList=fe}else if(W===no.VERTICAL){Y[P]={x:_.x+v.x,y:_.y},Y[C]={x:O.x+v.x,y:O.y};var vt=this.pointsList.map(function(ln){return ln});if(P!==0&&C!==this.pointsList.length-1&&(vt=this.removeCrossPoints(P,C,vt)),P===0){var $t={x:_.x+v.x,y:_.y};if(!_a($t,this.sourceNode)){var hn=this.sourceNode.anchors;vt=this.getDraggingPoints(W,"start",$t,hn,vt)}}if(C===this.pointsList.length-1){var dn={x:O.x+v.x,y:O.y};if(!_a(dn,this.targetNode)){var Gn=this.targetNode.anchors;vt=this.getDraggingPoints(W,"end",dn,Gn,vt)}}this.updatePointsAfterDrag(vt),this.draggingPointList=vt}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},Y[P]),end:Object.assign({},Y[C]),startIndex:P,endIndex:C,direction:W}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var f=Ro(co(this.points));this.pointsList=f.map(function(O){return O}),this.draggingPointList=[];var v=f[0];this.startPoint=Object.assign({},v);var _=f[f.length-1];this.endPoint=Object.assign({},_)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(f){var v=this.updateCrossPoints(f);this.points=v.map(function(_){return"".concat(_.x,",").concat(_.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var v=f.startPoint,_=f.endPoint,O=f.sourceNode,P=f.targetNode,C=lr({x:v.x,y:v.y},{x:_.x,y:_.y},O,P,this.offset||0);this.pointsList=C,this.initPoints()}}])&&Ho(o.prototype,u),p}(Us),bo=ci(Fn.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ci(Fn.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Fn.prototype,"initPoints"),Fn.prototype),ci(Fn.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(Fn.prototype,"updatePoints"),Fn.prototype),ci(Fn.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Fn.prototype,"updateStartPoint"),Fn.prototype),ci(Fn.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Fn.prototype,"moveStartPoint"),Fn.prototype),ci(Fn.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Fn.prototype,"updateEndPoint"),Fn.prototype),ci(Fn.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Fn.prototype,"moveEndPoint"),Fn.prototype),ci(Fn.prototype,"updatePointsList",[c.k],Object.getOwnPropertyDescriptor(Fn.prototype,"updatePointsList"),Fn.prototype),ci(Fn.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(Fn.prototype,"dragAppendStart"),Fn.prototype),ci(Fn.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(Fn.prototype,"dragAppendSimple"),Fn.prototype),ci(Fn.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(Fn.prototype,"dragAppend"),Fn.prototype),ci(Fn.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(Fn.prototype,"dragAppendEnd"),Fn.prototype),ci(Fn.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(Fn.prototype,"updatePointsAfterDrag"),Fn.prototype),ci(Fn.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Fn.prototype,"getAdjustStart"),Fn.prototype),ci(Fn.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Fn.prototype,"getAdjustEnd"),Fn.prototype),ci(Fn.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Fn.prototype,"updateAfterAdjustStartAndEnd"),Fn.prototype),Fn),I=function(i){var o=i.start,u=i.end,s=i.offset,p=i.verticalLength,f=i.type,v={leftX:0,leftY:0,rightX:0,rightY:0},_=Math.atan((u.y-o.y)/(u.x-o.x)),O=Math.atan(s/p),P=Math.sqrt(p*p+s*s);return f==="start"?u.x>=o.x?(v.leftX=o.x+P*Math.sin(_+O),v.leftY=o.y-P*Math.cos(_+O),v.rightX=o.x-P*Math.sin(_-O),v.rightY=o.y+P*Math.cos(_-O)):(v.leftX=o.x-P*Math.sin(_+O),v.leftY=o.y+P*Math.cos(_+O),v.rightX=o.x+P*Math.sin(_-O),v.rightY=o.y-P*Math.cos(_-O)):f==="end"&&(u.x>=o.x?(v.leftX=u.x+P*Math.sin(_-O),v.leftY=u.y-P*Math.cos(_-O),v.rightX=u.x-P*Math.sin(_+O),v.rightY=u.y+P*Math.cos(_+O)):(v.leftX=u.x-P*Math.sin(_-O),v.leftY=u.y+P*Math.cos(_-O),v.rightX=u.x+P*Math.sin(_+O),v.rightY=u.y-P*Math.cos(_+O))),v},oe={x:1,y:0,z:0};function me(i,o,u,s,p){for(var f=function(xe){if(xe<0||xe>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:i.x*Math.pow(1-xe,3)+3*o.x*xe*Math.pow(1-xe,2)+3*u.x*Math.pow(xe,2)*(1-xe)+s.x*Math.pow(xe,3),y:i.y*Math.pow(1-xe,3)+3*o.y*xe*Math.pow(1-xe,2)+3*u.y*Math.pow(xe,2)*(1-xe)+s.y*Math.pow(xe,3)}},v=0,_=2,O=s.x,P=s.y,C=s;v<p&&_<50;){var W=C=f(1-_/100),Y=W.x,fe=W.y;v=Vi(O,P,Y,fe),_++}return C}function et(i){var o=Math.hypot(i.x,i.y);return{x:i.x/o,y:i.y/o,z:0}}function ct(i){return s=function(f,v){return f.x*v.y-f.y*v.x}(o=oe,u=i),p=Math.acos(function(f,v){var _=[f.x,f.y,f.z];return[v.x,v.y,v.z].reduce(function(O,P,C){return O+P*_[C]})}(et(o),et(u))),s>=0?p:-p;var o,u,s,p}function Ze(i){return i*(180/Math.PI)}function ut(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function Nt(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?ut(Object(u),!0).forEach(function(s){Dt(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):ut(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function Dt(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function Rt(i){return function(o){if(Array.isArray(o))return Pt(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||Ut(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function st(i){return st=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},st(i)}function Wt(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||Ut(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ut(i,o){if(i){if(typeof i=="string")return Pt(i,o);var u=Object.prototype.toString.call(i).slice(8,-1);return u==="Object"&&i.constructor&&(u=i.constructor.name),u==="Map"||u==="Set"?Array.from(i):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?Pt(i,o):void 0}}function Pt(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}var wt=function(i,o){var u;switch(i.type){case"line":default:u=new _i(i,o);break;case"polyline":u=new Fc(i,o)}return u},We=function(i,o){return 2*Math.abs(i.centerX-o.centerX)<i.width+o.width&&2*Math.abs(i.centerY-o.centerY)<i.height+o.height},ot=function(i){var o=[],u={};return i.forEach(function(s){var p="".concat(s.x,"-").concat(s.y);s.id=p,u[p]=s}),Object.keys(u).forEach(function(s){o.push(u[s])}),o},Lt=function(i,o){var u=[i,{x:i.x,y:o.y},o];return ot(u)},qt=function(i,o){return i.width===0&&i.height===0?i:{centerX:i.centerX,centerY:i.centerY,minX:i.minX-o,minY:i.minY-o,maxX:i.maxX+o,maxY:i.maxY+o,height:i.height+2*o,width:i.width+2*o}},St=function(i,o){var u=Math.abs(i.x-o.centerX),s=Math.abs(i.y-o.centerY);return u/o.width>s/o.height?no.HORIZONTAL:no.VERTICAL},Kt=function(i,o,u){return St(u,o)===no.HORIZONTAL?{x:u.x>i.centerX?i.maxX:i.minX,y:u.y}:{x:u.x,y:u.y>i.centerY?i.maxY:i.minY}},At=function(i,o){var u=Math.min(i.minX,o.minX),s=Math.min(i.minY,o.minY),p=Math.max(i.maxX,o.maxX),f=Math.max(i.maxY,o.maxY);return{centerX:(u+p)/2,centerY:(s+f)/2,minX:u,minY:s,maxX:p,maxY:f,height:f-s,width:p-u}},zt=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0,u=[],s=[];i.forEach(function(C){u.push(C.x),s.push(C.y)});var p=Math.min.apply(Math,u),f=Math.max.apply(Math,u),v=Math.min.apply(Math,s),_=Math.max.apply(Math,s),O=f-p,P=_-v;return o&&(O+=o,P+=o),{centerX:(p+f)/2,centerY:(v+_)/2,maxX:f,maxY:_,minX:p,minY:v,x:(p+f)/2,y:(v+_)/2,height:P,width:O}},Et=function(i){var o=i.minX,u=i.minY,s=i.maxX,p=i.maxY;return[{x:o,y:u},{x:s,y:u},{x:s,y:p},{x:o,y:p}]},Xt=function(i,o){var u=i.x,s=i.y;return u<o.minX||u>o.maxX||s<o.minY||s>o.maxY},An=function(i,o){return o<i.minX||o>i.maxX?[]:[{x:o,y:i.minY},{x:o,y:i.maxY}]},Bn=function(i,o){return o<i.minY||o>i.maxY?[]:[{x:i.minX,y:o},{x:i.maxX,y:o}]},It=function(i,o){return An(i,o.x).concat(Bn(i,o.y))},Tt=function(i,o){return Math.abs(i.x-o.x)+Math.abs(i.y-o.y)},Ot=function(i,o){var u=0;return o.forEach(function(s){s&&(i.x===s.x&&(u+=-2),i.y===s.y&&(u+=-2))}),u},Rn=function(i,o,u,s,p){return Tt(i,o)+Tt(i,u)+Ot(i,[o,u,s,p])},tr=function i(o,u,s,p,f){f||(f=0),o.unshift(u[p]),s[p]&&s[p]!==p&&f<=100&&i(o,u,s,s[p],f+1)},sn=function(i,o){var u=i.indexOf(o);u>-1&&i.splice(u,1)},Jn=function(i,o,u,s){var p=o.x-i.x,f=o.y-i.y,v=s.x-u.x,_=s.y-u.y,O=(-f*(i.x-u.x)+p*(i.y-u.y))/(-v*f+p*_),P=(v*(i.y-u.y)-_*(i.x-u.x))/(-v*f+p*_);return O>=0&&O<=1&&P>=0&&P<=1},$n=function(i,o,u){if(u.width===0&&u.height===0)return!1;var s=Wt(Et(u),4),p=s[0],f=s[1],v=s[2],_=s[3];return Jn(i,o,p,f)||Jn(i,o,p,_)||Jn(i,o,f,v)||Jn(i,o,v,_)},nr=function(i,o,u,s){var p=[];return i.forEach(function(f){f!==o&&(f.x!==o.x&&f.y!==o.y||$n(f,o,u)||$n(f,o,s)||p.push(f))}),ot(p)},yr=function(i,o,u,s,p,f,v){var _=[],O=[o],P={},C={},W={};C[o.id]=0,W[o.id]=Rn(o,u,o);var Y={};i.forEach(function(ke){Y[ke.id]=ke});for(var fe=function(){var ke=void 0,Je=1/0;if(O.forEach(function(vt){W[vt.id]<Je&&(Je=W[vt.id],ke=vt)}),ke===u){var Qe=[];return tr(Qe,Y,P,u.id),{v:Qe}}sn(O,ke),_.push(ke),nr(i,ke,s,p).forEach(function(vt){if(_.indexOf(vt)===-1){O.indexOf(vt)===-1&&O.push(vt);var $t=W[ke.id]+Tt(ke,vt);C[vt.id]&&$t>=C[vt.id]||(P[vt.id]=ke.id,C[vt.id]=$t,W[vt.id]=C[vt.id]+Rn(vt,u,o,f,v))}})};O.length;){var xe=fe();if(st(xe)==="object")return xe.v}return[o,u]},Eo=function(i){return Ni(i)},Ro=function(i){for(var o=1;o<i.length-1;){var u=i[o-1],s=i[o],p=i[o+1];u.x===s.x&&s.x===p.x||u.y===s.y&&s.y===p.y?i.splice(o,1):o++}return i},lr=function(i,o,u,s,p){var f=Eo(u),v=Eo(s),_=qt(f,p),O=qt(v,p),P=Kt(_,f,i),C=Kt(O,v,o);if(We(_,O)){var W=Xo(i,o,P,C);return[i,P].concat(Rt(W),[C,o])}var Y=zt([P,C]),fe=At(_,Y),xe=At(O,Y),ke=[];ke=(ke=ke.concat(Et(fe))).concat(Et(xe));var Je={x:(i.x+o.x)/2,y:(i.y+o.y)/2};[Y,fe,xe].forEach(function(vt){ke=ke.concat(It(vt,Je).filter(function($t){return Xt($t,_)&&Xt($t,O)}))}),[{x:P.x,y:C.y},{x:C.x,y:P.y}].forEach(function(vt){Xt(vt,_)&&Xt(vt,O)&&ke.push(vt)}),ke.unshift(P),ke.push(C),ke=ot(ke);var Qe=yr(ke,P,C,f,v,i,o);return Qe.unshift(i),Qe.push(o),Qe.length>2&&(Qe=Ro(Qe)),ot(Qe)},Lo=function(i){var o;if(i.length===1)o=[i[0],i[0]];else if(i.length>=2){for(var u=i[0],s=i[1],p=Vi(u.x,u.y,s.x,s.y),f=1;f<i.length-1;f++){var v=i[f],_=i[f+1],O=Vi(v.x,v.y,_.x,_.y);O>p&&(p=O,u=v,s=_)}o=[u,s]}return o},Zr=function(i,o,u){var s=_a(i,u),p=_a(o,u);return s&&p},Oo=function(i,o,u){var s=_a(i,u),p=_a(o,u);return!(s&&p)&&(s||p)},jo=function(i,o,u){for(var s,p,f=Ni(u),v=Et(f),_=0;_<v.length;_++)Jn(i,o,v[_],v[(_+1)%v.length])&&(p=[v[_],v[(_+1)%v.length]]);return p&&(s=function(O,P,C,W){var Y=(P.y-O.y)*(W.x-C.x)-(O.x-P.x)*(C.y-W.y);if(Y===0)return!1;var fe=((P.x-O.x)*(W.x-C.x)*(C.y-O.y)+(P.y-O.y)*(W.x-C.x)*O.x-(W.y-C.y)*(P.x-O.x)*C.x)/Y,xe=-((P.y-O.y)*(W.y-C.y)*(C.x-O.x)+(P.x-O.x)*(W.y-C.y)*O.y-(W.x-C.x)*(P.y-O.y)*C.y)/Y;return(fe-O.x)*(fe-P.x)<=0&&(xe-O.y)*(xe-P.y)<=0&&(fe-C.x)*(fe-W.x)<=0&&(xe-C.y)*(xe-W.y)<=0&&{x:fe,y:xe}}(i,o,p[0],p[1])),s},yo=function(i,o){var u;return i.x===o.x?u=no.VERTICAL:i.y===o.y&&(u=no.HORIZONTAL),u},co=function(i){var o=i.split(" "),u=[];return o&&o.forEach(function(s){var p=Wt(s.split(","),2),f=p[0],v=p[1];u.push({x:Number(f),y:Number(v)})}),u},Xo=function(i,o,u,s){var p=[];if(yo(i,u)===yo(o,s))i.y===u.y?(p.push({x:u.x,y:(u.y+s.y)/2}),p.push({x:s.x,y:(u.y+s.y)/2})):(p.push({x:(u.x+s.x)/2,y:u.y}),p.push({x:(u.x+s.x)/2,y:s.y}));else{var f={x:u.x,y:s.y},v=su(f,i,u),_=su(f,o,s);if(v||_)f={x:s.x,y:u.y};else{var O=mo(f,i,u),P=mo(f,o,s);O&&P&&(f={x:s.x,y:u.y})}p.push(f)}return p},mo=function(i,o,u){return i.x===o.x&&i.x===u.x||i.y===o.y&&i.y===u.y},Kn=function(i){if(!i)return 0;for(var o=0,u=0;u<i.length;u++){var s=i.charCodeAt(u);i.match(/[A-Z]/)?o+=1.5:o+=s>=1&&s<=126||s>=65376&&s<=65439?1:2}return o},Qo=null,Tr=function(i,o){Qo||(Qo=document.createElement("canvas"));var u=Qo.getContext("2d");return u.font=o,u.measureText(i).width},kn=function(i){var o,u=i.start,s=i.end;if(u.x===s.x&&u.y===s.y)o="";else{var p={start:u,end:s,offset:10,verticalLength:5},f=I(Nt(Nt({},p),{},{type:"start"})),v=I(Nt(Nt({},p),{},{type:"end"}));o="M".concat(f.leftX," ").concat(f.leftY,` 
    L`).concat(f.rightX," ").concat(f.rightY,` 
    L`).concat(v.rightX," ").concat(v.rightY,`
    L`).concat(v.leftX," ").concat(v.leftY," z")}return{d:o,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},cr=function(i){var o=i.start,u=i.end,s=i.sourceNode,p=i.targetNode,f=i.offset,v=Ni(s),_=Ni(p),O=qt(v,f),P=qt(_,f);return{sNext:Kt(O,v,o),ePre:Kt(P,_,u)}},Un=function(i){var o=i.replace(/M/g,"").replace(/C/g,",").split(",");return[ro(o[0]),ro(o[1]),ro(o[2]),ro(o[3])]},ro=function(i){var o=Wt(i.replace(/(^\s*)/g,"").split(" "),2);return{x:+o[0],y:+o[1]}},Ea=function(i,o){var u=Wt(i,4);return[me(u[0],u[1],u[2],u[3],o),i[3]]},Du=function(i,o){for(var u,s=i.x,p=i.y,f=co(o),v=Number.MAX_SAFE_INTEGER,_=[],O=0;O<f.length;O++)_.push({start:f[O],end:f[(O+1)%f.length]});if(_.forEach(function(Y){var fe=Y.start,xe=Y.end;if(fe.x===xe.x){var ke={x:fe.x,y:p};if(su(ke,fe,xe)){var Je=Math.abs(fe.x-s);Je<v&&(v=Je,u=ke)}}else if(fe.y===xe.y){var Qe={x:s,y:fe.y};if(su(Qe,fe,xe)){var vt=Math.abs(fe.y-p);vt<v&&(v=vt,u=Qe)}}}),!u){var P=_[0],C=P.start,W=P.end;u={x:C.x+(W.x-C.x)/2,y:C.y+(W.y-C.y)/2}}return u},de=function(i){return Da(i,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},tt=function(i,o){return Math.sqrt(Math.pow(i.x-o.x,2)+Math.pow(i.y-o.y,2))};function Ke(i,o){return typeof o!="function"?function(u,s,p){return Object.assign({type:i.edgeType},p)}:function(u,s,p){var f=o(u,s,p);return f?typeof f=="string"?Object.assign({},p,{type:f}):Object.assign({type:f},p):{type:i.edgeType}}}r(208);var en=function(){};function pr(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function ae(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var Z=function(){function i(s){var p=this,f=s.onDragStart,v=f===void 0?en:f,_=s.onDragging,O=_===void 0?en:_,P=s.onDragEnd,C=P===void 0?en:P,W=s.eventType,Y=W===void 0?"":W,fe=s.eventCenter,xe=fe===void 0?null:fe,ke=s.step,Je=ke===void 0?1:ke,Qe=s.isStopPropagation,vt=Qe===void 0||Qe,$t=s.model,hn=$t===void 0?null:$t,dn=s.data,Gn=dn===void 0?null:dn;(function(ln,jn){if(!(ln instanceof jn))throw new TypeError("Cannot call a class as a function")})(this,i),ae(this,"onDragStart",void 0),ae(this,"onDragging",void 0),ae(this,"onDragEnd",void 0),ae(this,"step",void 0),ae(this,"isStopPropagation",void 0),ae(this,"isDragging",!1),ae(this,"isStartDragging",!1),ae(this,"startX",0),ae(this,"startY",0),ae(this,"sumDeltaX",0),ae(this,"sumDeltaY",0),ae(this,"eventType",void 0),ae(this,"eventCenter",void 0),ae(this,"model",void 0),ae(this,"data",void 0),ae(this,"startTime",void 0),ae(this,"handleMouseDown",function(ln){var jn,bn,Nr,Dr=(jn=window)===null||jn===void 0?void 0:jn.document;if(ln.button===0){p.isStopPropagation&&ln.stopPropagation(),p.isStartDragging=!0,p.startX=ln.clientX,p.startY=ln.clientY,Dr.addEventListener("mousemove",p.handleMouseMove,!1),Dr.addEventListener("mouseup",p.handleMouseUp,!1);var sr=(bn=p.model)===null||bn===void 0?void 0:bn.getData();(Nr=p.eventCenter)===null||Nr===void 0||Nr.emit(Pn["".concat(p.eventType,"_MOUSEDOWN")],{e:ln,data:p.data||sr}),p.startTime=new Date().getTime()}}),ae(this,"handleMouseMove",function(ln){if(p.isStopPropagation&&ln.stopPropagation(),p.isStartDragging&&(p.sumDeltaX+=ln.clientX-p.startX,p.sumDeltaY+=ln.clientY-p.startY,p.startX=ln.clientX,p.startY=ln.clientY,p.step<=1||Math.abs(p.sumDeltaX)>p.step||Math.abs(p.sumDeltaY)>p.step)){var jn,bn=p.sumDeltaX%p.step,Nr=p.sumDeltaY%p.step,Dr=p.sumDeltaX-bn,sr=p.sumDeltaY-Nr;p.sumDeltaX=bn,p.sumDeltaY=Nr;var Gr,ii=(jn=p.model)===null||jn===void 0?void 0:jn.getData();p.isDragging||((Gr=p.eventCenter)===null||Gr===void 0||Gr.emit(Pn["".concat(p.eventType,"_DRAGSTART")],{e:ln,data:p.data||ii}),p.onDragStart({event:ln})),p.isDragging=!0,Promise.resolve().then(function(){var ai,oa;p.onDragging({deltaX:Dr,deltaY:sr,event:ln}),(ai=p.eventCenter)===null||ai===void 0||ai.emit(Pn["".concat(p.eventType,"_MOUSEMOVE")],{e:ln,data:p.data||ii}),(oa=p.eventCenter)===null||oa===void 0||oa.emit(Pn["".concat(p.eventType,"_DRAG")],{e:ln,data:p.data||ii})})}}),ae(this,"handleMouseUp",function(ln){var jn=window.document;p.isStartDragging=!1,p.isStopPropagation&&ln.stopPropagation(),Promise.resolve().then(function(){var bn,Nr,Dr;jn.removeEventListener("mousemove",p.handleMouseMove,!1),jn.removeEventListener("mouseup",p.handleMouseUp,!1);var sr=(bn=p.model)===null||bn===void 0?void 0:bn.getData();(Nr=p.eventCenter)===null||Nr===void 0||Nr.emit(Pn["".concat(p.eventType,"_MOUSEUP")],{e:ln,data:p.data||sr}),p.isDragging&&(p.isDragging=!1,p.onDragEnd({event:ln}),(Dr=p.eventCenter)===null||Dr===void 0||Dr.emit(Pn["".concat(p.eventType,"_DROP")],{e:ln,data:p.data||sr}))})}),ae(this,"cancelDrag",function(){var ln,jn=(ln=window)===null||ln===void 0?void 0:ln.document;jn.removeEventListener("mousemove",p.handleMouseMove,!1),jn.removeEventListener("mouseup",p.handleMouseUp,!1),p.onDragEnd({event:null}),p.isDragging=!1}),this.onDragStart=v,this.onDragging=O,this.onDragEnd=C,this.step=Je,this.isStopPropagation=vt,this.eventType=Y,this.eventCenter=xe,this.model=hn,this.data=Gn}var o,u;return o=i,(u=[{key:"setStep",value:function(s){this.step=s}},{key:"setModel",value:function(s){this.model=s}}])&&pr(o.prototype,u),i}();function Se(i){return Se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Se(i)}function Ue(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function ze(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Ne(i,o,u){return o&&ze(i.prototype,o),u&&ze(i,u),i}function Te(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&d(i,o)}function Ie(i){var o=Ye();return function(){var u,s=m(i);if(o){var p=m(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return se(this,u)}}function se(i,o){if(o&&(Se(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return be(i)}function be(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ue(i){var o=typeof Map=="function"?new Map:void 0;return ue=function(u){if(u===null||(s=u,Function.toString.call(s).indexOf("[native code]")===-1))return u;var s;if(typeof u!="function")throw new TypeError("Super expression must either be null or a function");if(o!==void 0){if(o.has(u))return o.get(u);o.set(u,p)}function p(){return Be(u,arguments,m(this).constructor)}return p.prototype=Object.create(u.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d(p,u)},ue(i)}function Be(i,o,u){return Be=Ye()?Reflect.construct:function(s,p,f){var v=[null];v.push.apply(v,p);var _=new(Function.bind.apply(s,v));return f&&d(_,f.prototype),_},Be.apply(null,arguments)}function Ye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(i,o){return d=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},d(i,o)}function m(i){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},m(i)}function w(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function R(i,o){return i instanceof q&&o instanceof q}var U=function(i){Te(u,i);var o=Ie(u);function u(s,p,f){var v;return Ue(this,u),w(be(v=o.call(this,3)),"x",void 0),w(be(v),"y",void 0),w(be(v),"z",void 0),v[0]=s,v[1]=p,v[2]=f,v.x=s,v.y=p,v.z=f,Object.setPrototypeOf(be(v),u.prototype),v}return Ne(u,[{key:"add",value:function(s){if(R(this,s))return new q(this.x+s.x,this.y+s.y);var p=this.z+s.z;return new le((this.x+s.x)/p,(this.y+s.y)/p)}},{key:"subtract",value:function(s){if(R(this,s))return new q(this.x-s.x,this.y-s.y);var p=this.z-s.z;return p===0?new q(this.x-s.x,this.y-s.y):new le((this.x-s.x)/p,(this.y-s.y)/p)}}]),u}(ue(Array)),q=function(i){Te(u,i);var o=Ie(u);function u(s,p,f){var v;return Ue(this,u),v=o.call(this,s,p,f??0),Object.setPrototypeOf(be(v),u.prototype),v}return Ne(u,[{key:"toString",value:function(){return"Vector"}},{key:"dot",value:function(s){var p=this;return s.reduce(function(f,v,_){return f+v*p[_]})}},{key:"cross",value:function(s){return new u(this.y*s.z-this.z*s.y,this.z*s.x-this.x*s.z,this.x*s.y-this.y*s.x)}},{key:"getLength",value:function(){return Math.hypot(this.x,this.y)}},{key:"normalize",value:function(){var s=this.getLength();return new u(this.x/s,this.y/s)}},{key:"crossZ",value:function(s){return this.x*s.y-this.y*s.x}},{key:"angle",value:function(s){var p=this.crossZ(s),f=Math.acos(this.normalize().dot(s.normalize()));return p>=0?f:-f}}]),u}(U),le=function(i){Te(u,i);var o=Ie(u);function u(s,p){var f;return Ue(this,u),f=o.call(this,s,p,1),Object.setPrototypeOf(be(f),u.prototype),f}return Ne(u,[{key:"toString",value:function(){return"Point"}}]),u}(U);r(67),r(218);function _e(i){return _e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_e(i)}function Le(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||gt(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ft(i){return function(o){if(Array.isArray(o))return Gt(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||gt(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function gt(i,o){if(i){if(typeof i=="string")return Gt(i,o);var u=Object.prototype.toString.call(i).slice(8,-1);return u==="Object"&&i.constructor&&(u=i.constructor.name),u==="Map"||u==="Set"?Array.from(i):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?Gt(i,o):void 0}}function Gt(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function Sn(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function En(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Hn(i,o,u){return o&&En(i.prototype,o),u&&En(i,u),i}function Mt(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&Ln(i,o)}function Zt(i){var o=kr();return function(){var u,s=Qn(i);if(o){var p=Qn(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return fr(this,u)}}function fr(i,o){if(o&&(_e(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mn(i)}function mn(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ir(i){var o=typeof Map=="function"?new Map:void 0;return ir=function(u){if(u===null||(s=u,Function.toString.call(s).indexOf("[native code]")===-1))return u;var s;if(typeof u!="function")throw new TypeError("Super expression must either be null or a function");if(o!==void 0){if(o.has(u))return o.get(u);o.set(u,p)}function p(){return rr(u,arguments,Qn(this).constructor)}return p.prototype=Object.create(u.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),Ln(p,u)},ir(i)}function rr(i,o,u){return rr=kr()?Reflect.construct:function(s,p,f){var v=[null];v.push.apply(v,p);var _=new(Function.bind.apply(s,v));return f&&Ln(_,f.prototype),_},rr.apply(null,arguments)}function kr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ln(i,o){return Ln=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},Ln(i,o)}function Qn(i){return Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Qn(i)}function Fo(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var nt,Iu,fi,fs,Ws,Xf,Xd,$c,Ml,lv,cv,Yd,Xp,Nl=function(i){Mt(u,i);var o=Zt(u);function u(){var s;Sn(this,u);for(var p=arguments.length,f=new Array(p),v=0;v<p;v++)f[v]=arguments[v];return Fo(mn(s=o.call(this,f.length)),"rows",void 0),Fo(mn(s),"columns",void 0),s.fill(new Array(3)),f.forEach(function(_,O){s[O]=_}),s.columns=f[0].length,s.rows=f.length,Object.setPrototypeOf(mn(s),u.prototype),s}return Hn(u,[{key:"getRow",value:function(s){return this[s]}},{key:"getColumn",value:function(s){return ft(this.map(function(p){return p[s]}))}},{key:"transpose",value:function(){for(var s=[],p=0;p<this.columns;p++)s.push(this.getColumn(p));return rr(u,s)}},{key:"cross",value:function(s){var p=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===s.rows)for(var f=0;f<this.rows;f++)for(var v=this.getRow(f),_=function(P){var C=s.getColumn(P);p[f][P]=v.reduce(function(W,Y,fe){return W+Y*C[fe]},0)},O=0;O<s.columns;O++)_(O);return rr(u,ft(p))}},{key:"to2D",value:function(){return this.map(function(s){return[s[0],s[1]]})}},{key:"toPoints",value:function(){return this.map(function(s){return new le(s[0],s[1])})}},{key:"toString",value:function(){var s=Le(this[0],2),p=s[0],f=s[1],v=Le(this[1],2),_=v[0],O=v[1],P=Le(this[2],2),C=P[0],W=P[1];return"matrix(".concat(p," ").concat(f," ").concat(_," ").concat(O," ").concat(C," ").concat(W,")")}},{key:"translate",value:function(s,p){return this.cross(new Pl(s,p))}},{key:"rotate",value:function(s){return this.cross(new qd(s))}},{key:"scale",value:function(s,p){return this.cross(new fv(s,p))}}]),u}(ir(Array)),qd=function(i){Mt(u,i);var o=Zt(u);function u(s){var p;return Sn(this,u),p=o.call(this,new q(+Math.cos(s).toFixed(2),+Math.sin(s).toFixed(2),0),new q(-Math.sin(s).toFixed(2),+Math.cos(s).toFixed(2),0),new q(0,0,1)),Object.setPrototypeOf(mn(p),u.prototype),p}return Hn(u,[{key:"inverse",value:function(){return this.transpose()}}]),u}(Nl),fv=function(i){Mt(u,i);var o=Zt(u);function u(s,p){var f;return Sn(this,u),Fo(mn(f=o.call(this,new q(s,0,0),new q(0,p,0),new q(0,0,1))),"sx",void 0),Fo(mn(f),"sy",void 0),f.sx=s,f.sy=p,Object.setPrototypeOf(mn(f),u.prototype),f}return Hn(u,[{key:"inverse",value:function(){return new u(1/this.sx,1/this.sy)}}]),u}(Nl),Pl=function(i){Mt(u,i);var o=Zt(u);function u(s,p){var f;return Sn(this,u),Fo(mn(f=o.call(this,new q(1,0,0),new q(0,1,0),new q(s,p,1))),"tx",void 0),Fo(mn(f),"ty",void 0),f.tx=s,f.ty=p,Object.setPrototypeOf(mn(f),u.prototype),f}return Hn(u,[{key:"inverse",value:function(){return new u(-this.tx,-this.ty)}}]),u}(Nl),Kd={node:!1,edge:!1},VN={node:!0,edge:!0};function fw(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function cy(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?fw(Object(u),!0).forEach(function(s){zs(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):fw(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function Yp(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||dw(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qp(i){return function(o){if(Array.isArray(o))return Sg(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||dw(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dw(i,o){if(i){if(typeof i=="string")return Sg(i,o);var u=Object.prototype.toString.call(i).slice(8,-1);return u==="Object"&&i.constructor&&(u=i.constructor.name),u==="Map"||u==="Set"?Array.from(i):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?Sg(i,o):void 0}}function Sg(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function fy(i){return fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},fy(i)}function ds(i,o,u,s){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(s):void 0})}function HN(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function zs(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function Xn(i,o,u,s,p){var f={};return Object.keys(s).forEach(function(v){f[v]=s[v]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(v,_){return _(i,o,v)||v},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var pw,hw=200,vw=(nt=function(){function i(s){(function(fe,xe){if(!(fe instanceof xe))throw new TypeError("Cannot call a class as a function")})(this,i),zs(this,"rootEl",void 0),ds(this,"width",Iu,this),ds(this,"height",fi,this),zs(this,"theme",void 0),zs(this,"eventCenter",void 0),zs(this,"modelMap",new Map),zs(this,"topElement",void 0),zs(this,"animation",void 0),zs(this,"idGenerator",void 0),zs(this,"edgeGenerator",void 0),zs(this,"nodeMoveRules",[]),zs(this,"customTrajectory",void 0),ds(this,"edgeType",fs,this),ds(this,"nodes",Ws,this),ds(this,"edges",Xf,this),ds(this,"overlapMode",Xd,this),ds(this,"background",$c,this),ds(this,"transformModel",Ml,this),ds(this,"editConfigModel",lv,this),ds(this,"gridSize",cv,this),ds(this,"partial",Yd,this),ds(this,"fakerNode",Xp,this);var p,f=s.container,v=s.background,_=v===void 0?{}:v,O=s.grid,P=s.idGenerator,C=s.edgeGenerator,W=s.animation,Y=s.customTrajectory;this.background=_,fy(O)==="object"&&(this.gridSize=O.size),this.rootEl=f,this.editConfigModel=new xf(s),this.eventCenter=new Oc,this.transformModel=new Sd(this.eventCenter,s),this.theme=hl(s.style),this.edgeType=s.edgeType||"polyline",this.width=s.width,this.height=s.height,this.animation=(p=W)&&typeof p!="boolean"?os(vo(Kd),p):vo(p===!0?VN:Kd),this.partial=s.partial,this.overlapMode=s.overlapMode||0,this.idGenerator=P,this.customTrajectory=Y,this.edgeGenerator=Ke(this,C),this.width=s.width||this.rootEl.getBoundingClientRect().width,this.height=s.height||this.rootEl.getBoundingClientRect().height,this.flowId=$a()}var o,u;return o=i,u=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(s,p,f){return s[p.id]={index:f,model:p},s},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(s,p,f){return s[p.id]={index:f,model:p},s},{})}},{key:"modelsMap",get:function(){return[].concat(qp(this.nodes),qp(this.edges)).reduce(function(s,p){return s[p.id]=p,s},{})}},{key:"sortElements",get:function(){var s=[];this.nodes.forEach(function(P){return s.push(P)}),this.edges.forEach(function(P){return s.push(P)}),s=s.sort(function(P,C){return P.zIndex-C.zIndex});for(var p=[],f=[-200,-200],v=[this.width+hw,this.height+hw],_=0;_<s.length;_++){var O=s[_];O.visible&&(!this.partial||O.isSelected||this.isElementInArea(O,f,v,!1,!1))&&p.push(O)}return p}},{key:"textEditElement",get:function(){var s=this.nodes.find(function(f){return f.state===Ur.TEXT_EDIT}),p=this.edges.find(function(f){return f.state===Ur.TEXT_EDIT});return s||p}},{key:"selectElements",get:function(){var s=new Map;return this.nodes.forEach(function(p){p.isSelected&&s.set(p.id,p)}),this.edges.forEach(function(p){p.isSelected&&s.set(p.id,p)}),s}},{key:"selectNodes",get:function(){var s=[];return this.nodes.forEach(function(p){p.isSelected&&s.push(p)}),s}},{key:"getAreaElement",value:function(s,p){var f=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],v=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],_=arguments.length>4&&arguments[4]!==void 0&&arguments[4],O=[],P=[];this.nodes.forEach(function(Y){return P.push(Y)}),this.edges.forEach(function(Y){return P.push(Y)});for(var C=0;C<P.length;C++){var W=P[C];_&&!W.visible||!this.isElementInArea(W,s,p,f,v)||O.push(W)}return O}},{key:"getModel",value:function(s){return this.modelMap.get(s)}},{key:"getNodeModelById",value:function(s){var p;return this.fakerNode&&s===this.fakerNode.id?this.fakerNode:(p=this.nodesMap[s])===null||p===void 0?void 0:p.model}},{key:"getPointByClient",value:function(s){var p=s.x,f=s.y,v=this.rootEl.getBoundingClientRect(),_={x:p-v.left,y:f-v.top},O=Yp(this.transformModel.HtmlPointToCanvasPoint([_.x,_.y]),2);return{domOverlayPosition:_,canvasOverlayPosition:{x:O[0],y:O[1]}}}},{key:"isElementInArea",value:function(s,p,f){var v=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],_=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(s.BaseType===to.NODE){for(var O=Ni(s=s),P=O.minX,C=O.minY,W=O.maxX,Y=O.maxY,fe=[{x:P,y:C},{x:W,y:C},{x:W,y:Y},{x:P,y:Y}],xe=_,ke=0;ke<fe.length;ke++){var Je=fe[ke],Qe=Je.x,vt=Je.y,$t=this.transformModel.CanvasPointToHtmlPoint([Qe,vt]),hn=Yp($t,2);if(Qe=hn[0],vt=hn[1],Lf([Qe,vt],p,f)!==_){xe=!_;break}}return xe}if(s.BaseType===to.EDGE){var dn=s=s,Gn=dn.startPoint,ln=dn.endPoint,jn=this.transformModel.CanvasPointToHtmlPoint([Gn.x,Gn.y]),bn=this.transformModel.CanvasPointToHtmlPoint([ln.x,ln.y]),Nr=Lf(jn,p,f),Dr=Lf(bn,p,f);return v?Nr&&Dr:Nr||Dr}return!1}},{key:"graphDataToModel",value:function(s){var p=this;if(this.width&&this.height||this.resize(),!s)return this.nodes=[],void(this.edges=[]);s.nodes?this.nodes=_f(s.nodes,function(f){return p.getModelAfterSnapToGrid(f)}):this.nodes=[],s.edges?this.edges=_f(s.edges,function(f){var v=p.getModel(f.type);if(!v)throw new Error("找不到".concat(f.type,"对应的边。"));return new v(f,p)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var s=[];this.edges.forEach(function(f){var v=f.getData();v&&!f.virtual&&s.push(v)});var p=[];return this.nodes.forEach(function(f){var v=f.getData();v&&!f.virtual&&p.push(v)}),{nodes:p,edges:s}}},{key:"modelToHistoryData",value:function(){for(var s=!1,p=[],f=0;f<this.nodes.length;f++){var v=this.nodes[f];if(v.isDragging){s=!0;break}p.push(v.getHistoryData())}if(s)return!1;for(var _=!1,O=[],P=0;P<this.edges.length;P++){var C=this.edges[P];if(C.isDragging){_=!0;break}O.push(C.getHistoryData())}return!_&&{nodes:p,edges:O}}},{key:"getEdgeModelById",value:function(s){var p;return(p=this.edgesMap[s])===null||p===void 0?void 0:p.model}},{key:"getElement",value:function(s){return this.modelsMap[s]}},{key:"getNodeEdges",value:function(s){for(var p=[],f=0;f<this.edges.length;f++){var v=this.edges[f],_=this.edges[f].sourceNodeId===s,O=this.edges[f].targetNodeId===s;(_||O)&&p.push(v)}return p}},{key:"getSelectElements",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],p=this.selectElements,f={nodes:[],edges:[]};return p.forEach(function(v){if(v.BaseType===to.NODE&&f.nodes.push(v.getData()),v.BaseType===to.EDGE){var _=v.getData(),O=p.get(_.sourceNodeId)&&p.get(_.targetNodeId);(s||O)&&f.edges.push(_)}}),f}},{key:"updateAttributes",value:function(s,p){this.getElement(s).updateAttributes(p)}},{key:"changeNodeId",value:function(s,p){return p||(p=$a()),this.nodesMap[p]?"":this.nodesMap[s]?(this.edges.forEach(function(f){f.sourceNodeId===s&&(f.sourceNodeId=p),f.targetNodeId===s&&(f.targetNodeId=p)}),this.nodesMap[s].model.id=p,this.nodesMap[p]=this.nodesMap[s],p):""}},{key:"changeEdgeId",value:function(s,p){return p||(p=$a()),this.edgesMap[p]?"":this.edgesMap[s]?(this.edges.forEach(function(f){f.id===s&&f.changeEdgeId(p)}),p):""}},{key:"setFakerNode",value:function(s){this.fakerNode=s}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(s,p){return this.modelMap.set(s,p)}},{key:"toFront",value:function(s){var p,f,v,_=((p=this.nodesMap[s])===null||p===void 0?void 0:p.model)||((f=this.edgesMap[s])===null||f===void 0?void 0:f.model);_&&(this.overlapMode===ho.DEFAULT&&((v=this.topElement)===null||v===void 0||v.setZIndex(),_.setZIndex(9999),this.topElement=_),this.overlapMode===ho.INCREASE&&this.setElementZIndex(s,"top"))}},{key:"setElementZIndex",value:function(s,p){var f,v,_,O=((f=this.nodesMap[s])===null||f===void 0?void 0:f.model)||((v=this.edgesMap[s])===null||v===void 0?void 0:v.model);O&&(typeof p=="number"&&(_=p),p==="top"&&(_=ju()),p==="bottom"&&(_=--Ic),O.setZIndex(_))}},{key:"deleteNode",value:function(s){var p=this.nodesMap[s].model.getData();this.deleteEdgeBySource(s),this.deleteEdgeByTarget(s),this.nodes.splice(this.nodesMap[s].index,1),this.eventCenter.emit(Pn.NODE_DELETE,{data:p})}},{key:"addNode",value:function(s){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pn.NODE_ADD,f=arguments.length>2?arguments[2]:void 0,v=zo(s);v.id&&this.nodesMap[s.id]&&delete v.id;var _=this.getModelAfterSnapToGrid(v);this.nodes.push(_);var O=_.getData(),P={data:O};return f&&(P.e=f),this.eventCenter.emit(p,P),_}},{key:"getModelAfterSnapToGrid",value:function(s){var p=this.getModel(s.type);if(!p)throw new Error("找不到".concat(s.type,"对应的节点，请确认是否已注册此类型节点。"));var f=s.x,v=s.y;return f&&v&&(s.x=au(f,this.gridSize),s.y=au(v,this.gridSize),fy(s.text)==="object"&&(s.text.x+=s.x-f,s.text.y+=s.y-v)),new p(s,this)}},{key:"cloneNode",value:function(s){var p=this.getNodeModelById(s),f=p.getData();f.x+=30,f.y+=30,delete f.id,f.text&&(f.text.x+=30,f.text.y+=30);var v=this.addNode(f);return v.setSelected(!0),p.setSelected(!1),v.getData()}},{key:"moveNode",value:function(s,p,f){var v=arguments.length>3&&arguments[3]!==void 0&&arguments[3],_=this.nodesMap[s];if(_){var O=_.model,P=O.getMoveDistance(p,f,v),C=Yp(P,2);p=C[0],f=C[1],this.moveEdge(s,p,f)}}},{key:"moveNode2Coordinate",value:function(s,p,f){var v=arguments.length>3&&arguments[3]!==void 0&&arguments[3],_=this.nodesMap[s];if(_){var O=_.model,P=O.x,C=O.y,W=p-P,Y=f-C;this.moveNode(s,W,Y,v)}}},{key:"editText",value:function(s){this.setElementStateById(s,Ur.TEXT_EDIT)}},{key:"addEdge",value:function(s){var p=zo(s),f=p.type;f||(f=this.edgeType),p.id&&this.edgesMap[p.id]&&delete p.id;var v=this.getModel(f);if(!v)throw new Error("找不到".concat(f,"对应的边，请确认是否已注册此类型边。"));var _=new v(cy(cy({},p),{},{type:f}),this),O=_.getData();return this.edges.push(_),this.eventCenter.emit(Pn.EDGE_ADD,{data:O}),_}},{key:"moveEdge",value:function(s,p,f){for(var v=0;v<this.edges.length;v++){var _=this.edges[v],O=_.textPosition,P=O.x,C=O.y,W=this.edges[v].sourceNodeId===s,Y=this.edges[v].targetNodeId===s;W&&_.moveStartPoint(p,f),Y&&_.moveEndPoint(p,f),(W||Y)&&this.handleEdgeTextMove(_,P,C)}}},{key:"handleEdgeTextMove",value:function(s,p,f){var v;if(s.customTextPosition===!0)s.resetTextPosition();else if(s.modelType===_r.POLYLINE_EDGE&&(v=s.text)!==null&&v!==void 0&&v.value){var _=s.text,O=Du(_,s.points);s.moveText(O.x-_.x,O.y-_.y)}else{var P=s.textPosition,C=P.x,W=P.y;s.moveText(C-p,W-f)}}},{key:"deleteEdgeBySourceAndTarget",value:function(s,p){for(var f=0;f<this.edges.length;f++)if(this.edges[f].sourceNodeId===s&&this.edges[f].targetNodeId===p){var v=this.edges[f].getData();this.edges.splice(f,1),f--,this.eventCenter.emit(Pn.EDGE_DELETE,{data:v})}}},{key:"deleteEdgeById",value:function(s){if(this.edgesMap[s]){var p=this.edgesMap[s].index,f=this.edgesMap[s].model.getData();this.edges.splice(p,1),this.eventCenter.emit(Pn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeBySource",value:function(s){for(var p=0;p<this.edges.length;p++)if(this.edges[p].sourceNodeId===s){var f=this.edges[p].getData();this.edges.splice(p,1),p--,this.eventCenter.emit(Pn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeByTarget",value:function(s){for(var p=0;p<this.edges.length;p++)if(this.edges[p].targetNodeId===s){var f=this.edges[p].getData();this.edges.splice(p,1),p--,this.eventCenter.emit(Pn.EDGE_DELETE,{data:f})}}},{key:"setElementStateById",value:function(s,p,f){this.nodes.forEach(function(v){v.id===s?v.setElementState(p,f):v.setElementState(Ur.DEFAULT)}),this.edges.forEach(function(v){v.id===s?v.setElementState(p,f):v.setElementState(Ur.DEFAULT)})}},{key:"updateText",value:function(s,p){this.nodes.forEach(function(f){f.id===s&&f.updateText(p)}),this.edges.forEach(function(f){f.id===s&&f.updateText(p)})}},{key:"selectNodeById",value:function(s){var p,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var v=(p=this.nodesMap[s])===null||p===void 0?void 0:p.model;v==null||v.setSelected(!0)}},{key:"selectEdgeById",value:function(s){var p,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var v=(p=this.edgesMap[s])===null||p===void 0?void 0:p.model;v==null||v.setSelected(!0)}},{key:"selectElementById",value:function(s){var p=arguments.length>1&&arguments[1]!==void 0&&arguments[1];p||this.clearSelectElements();var f=this.getElement(s);f==null||f.setSelected(!0)}},{key:"clearSelectElements",value:function(){var s;this.selectElements.forEach(function(p){p==null||p.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===ho.DEFAULT&&((s=this.topElement)===null||s===void 0||s.setZIndex())}},{key:"moveNodes",value:function(s,p,f){for(var v=this,_=arguments.length>3&&arguments[3]!==void 0&&arguments[3],O=s.reduce(function(dn,Gn){var ln=v.nodesMap[Gn].model.getMoveDistance(p,f,_);return dn[Gn]=ln,dn},{}),P=0;P<this.edges.length;P++){var C=this.edges[P],W=C.textPosition,Y=W.x,fe=W.y,xe=O[C.sourceNodeId],ke=O[C.targetNodeId],Je=void 0,Qe=void 0;if(xe&&ke&&C.modelType===_r.POLYLINE_EDGE){var vt=Yp(xe,2);Je=vt[0],Qe=vt[1],C.updatePointsList(Je,Qe)}else{if(xe){var $t=Yp(xe,2);Je=$t[0],Qe=$t[1],C.moveStartPoint(Je,Qe)}if(ke){var hn=Yp(ke,2);Je=hn[0],Qe=hn[1],C.moveEndPoint(Je,Qe)}}(xe||ke)&&this.handleEdgeTextMove(C,Y,fe)}}},{key:"addNodeMoveRules",value:function(s){this.nodeMoveRules.includes(s)||this.nodeMoveRules.push(s)}},{key:"setDefaultEdgeType",value:function(s){this.edgeType=s}},{key:"changeNodeType",value:function(s,p){var f=this.getNodeModelById(s);if(f){var v=f.getData();v.type=p;var _=this.getModel(p);if(!_)throw new Error("找不到".concat(p,"对应的节点，请确认是否已注册此类型节点。"));var O=new _(v,this);this.nodes.splice(this.nodesMap[s].index,1,O),this.getNodeEdges(s).forEach(function(P){if(P.sourceNodeId===s){var C=xl(O,P.startPoint,O.width,O.height);P.updateStartPoint(C)}if(P.targetNodeId===s){var W=xl(O,P.endPoint,O.width,O.height);P.updateEndPoint(W)}})}}},{key:"changeEdgeType",value:function(s,p){var f=this.getEdgeModelById(s);if(f&&f.type!==p){var v=f.getData();v.type=p;var _=this.getModel(p);if(!_)throw new Error("找不到".concat(p,"对应的节点，请确认是否已注册此类型节点。"));delete v.pointsList;var O=new _(v,this);this.edges.splice(this.edgesMap[s].index,1,O)}}},{key:"getNodeIncomingEdge",value:function(s){var p=[];return this.edges.forEach(function(f){f.targetNodeId===s&&p.push(f)}),p}},{key:"getNodeOutgoingEdge",value:function(s){var p=[];return this.edges.forEach(function(f){f.sourceNodeId===s&&p.push(f)}),p}},{key:"getAnchorIncomingEdge",value:function(s){var p=[];return this.edges.forEach(function(f){f.targetAnchorId===s&&p.push(f)}),p}},{key:"getAnchorOutcomingEdge",value:function(s){var p=[];return this.edges.forEach(function(f){f.sourceAnchorId===s&&p.push(f)}),p}},{key:"getNodeIncomingNode",value:function(s){var p=this,f=[];return this.edges.forEach(function(v){v.targetNodeId===s&&f.push(p.nodesMap[v.sourceNodeId].model)}),f}},{key:"getNodeOutgoingNode",value:function(s){var p=this,f=[];return this.edges.forEach(function(v){v.sourceNodeId===s&&f.push(p.nodesMap[v.targetNodeId].model)}),f}},{key:"setTheme",value:function(s){this.theme=hl(cy(cy({},this.theme),s))}},{key:"resize",value:function(s,p){this.width=s||this.rootEl.getBoundingClientRect().width,this.height=p||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var s=this.nodes,p=[],f=[];s.forEach(function(W){var Y=W.x,fe=W.y,xe=W.width,ke=W.height,Je=W.getNodeStyle().strokeWidth,Qe=Je===void 0?0:Je,vt=Y+xe/2+Qe,$t=Y-xe/2-Qe,hn=fe+ke/2+Qe,dn=fe-ke/2-Qe;p=p.concat([vt,$t].filter(function(Gn){return!Number.isNaN(Gn)})),f=f.concat([hn,dn].filter(function(Gn){return!Number.isNaN(Gn)}))});var v=Math.min.apply(Math,qp(p)),_=Math.max.apply(Math,qp(p)),O=Math.min.apply(Math,qp(f)),P=_-v||0,C=Math.max.apply(Math,qp(f))-O||0;return{virtualRectWidth:P,virtualRectHeight:C,virtualRectCenterPositionX:v+P/2,virtualRectCenterPositionY:O+C/2}}},{key:"translateCenter",value:function(){var s=this.nodes,p=this.width,f=this.height,v=this.rootEl,_=this.transformModel;if(s.length){var O=p||v.clientWidth,P=f||v.clientHeight,C=this.getVirtualRectSize(),W=C.virtualRectCenterPositionX,Y=C.virtualRectCenterPositionY;_.focusOn(W,Y,O,P)}}},{key:"fitView",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,f=this.nodes,v=this.width,_=this.height,O=this.rootEl,P=this.transformModel;if(f.length){var C=v||O.clientWidth,W=_||O.clientHeight,Y=this.getVirtualRectSize(),fe=Y.virtualRectWidth,xe=Y.virtualRectHeight,ke=Y.virtualRectCenterPositionX,Je=Y.virtualRectCenterPositionY,Qe=(fe+p)/C,vt=(xe+s)/W,$t=0;$t=1/Math.max(Qe,vt);var hn=[C/2,W/2];P.zoom($t,hn),P.focusOn(ke,Je,C,W)}}},{key:"openEdgeAnimation",value:function(s){this.getEdgeModelById(s).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(s){this.getEdgeModelById(s).closeEdgeAnimation()}}],u&&HN(o.prototype,u),i}(),Iu=Xn(nt.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fi=Xn(nt.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fs=Xn(nt.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ws=Xn(nt.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Xf=Xn(nt.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Xd=Xn(nt.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ho.DEFAULT}}),$c=Xn(nt.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ml=Xn(nt.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lv=Xn(nt.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cv=Xn(nt.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Yd=Xn(nt.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Xp=Xn(nt.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xn(nt.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"nodesMap"),nt.prototype),Xn(nt.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"edgesMap"),nt.prototype),Xn(nt.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"modelsMap"),nt.prototype),Xn(nt.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"sortElements"),nt.prototype),Xn(nt.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"textEditElement"),nt.prototype),Xn(nt.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"selectElements"),nt.prototype),Xn(nt.prototype,"selectNodes",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"selectNodes"),nt.prototype),Xn(nt.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"setFakerNode"),nt.prototype),Xn(nt.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"removeFakerNode"),nt.prototype),Xn(nt.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"setModel"),nt.prototype),Xn(nt.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"toFront"),nt.prototype),Xn(nt.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"setElementZIndex"),nt.prototype),Xn(nt.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"deleteNode"),nt.prototype),Xn(nt.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"addNode"),nt.prototype),Xn(nt.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"cloneNode"),nt.prototype),Xn(nt.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveNode"),nt.prototype),Xn(nt.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveNode2Coordinate"),nt.prototype),Xn(nt.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"editText"),nt.prototype),Xn(nt.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"addEdge"),nt.prototype),Xn(nt.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveEdge"),nt.prototype),Xn(nt.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"deleteEdgeBySourceAndTarget"),nt.prototype),Xn(nt.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"deleteEdgeById"),nt.prototype),Xn(nt.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"deleteEdgeBySource"),nt.prototype),Xn(nt.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"deleteEdgeByTarget"),nt.prototype),Xn(nt.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"setElementStateById"),nt.prototype),Xn(nt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateText"),nt.prototype),Xn(nt.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"selectNodeById"),nt.prototype),Xn(nt.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"selectEdgeById"),nt.prototype),Xn(nt.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"selectElementById"),nt.prototype),Xn(nt.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"clearSelectElements"),nt.prototype),Xn(nt.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveNodes"),nt.prototype),Xn(nt.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"setDefaultEdgeType"),nt.prototype),Xn(nt.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"changeNodeType"),nt.prototype),Xn(nt.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"changeEdgeType"),nt.prototype),Xn(nt.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"getNodeIncomingEdge"),nt.prototype),Xn(nt.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"getNodeOutgoingEdge"),nt.prototype),Xn(nt.prototype,"getAnchorIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"getAnchorIncomingEdge"),nt.prototype),Xn(nt.prototype,"getAnchorOutcomingEdge",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"getAnchorOutcomingEdge"),nt.prototype),Xn(nt.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"getNodeIncomingNode"),nt.prototype),Xn(nt.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"getNodeOutgoingNode"),nt.prototype),Xn(nt.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"setTheme"),nt.prototype),Xn(nt.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"resize"),nt.prototype),Xn(nt.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"clearData"),nt.prototype),Xn(nt.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"translateCenter"),nt.prototype),Xn(nt.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"fitView"),nt.prototype),Xn(nt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"openEdgeAnimation"),nt.prototype),Xn(nt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"closeEdgeAnimation"),nt.prototype),nt),XN=vw;function Ag(i){return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ag(i)}function Tg(){return Tg=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])}return i},Tg.apply(this,arguments)}function YN(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Mg(i,o){return Mg=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},Mg(i,o)}function qN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=dy(i);if(o){var p=dy(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return KN(this,u)}}function KN(i,o){if(o&&(Ag(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kl(i)}function kl(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function dy(i){return dy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},dy(i)}function Bc(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var yw,ZN=Ys(pw=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&Mg(f,v)})(p,i);var o,u,s=qN(p);function p(f){var v;(function(C,W){if(!(C instanceof W))throw new TypeError("Cannot call a class as a function")})(this,p),Bc(kl(v=s.call(this)),"stepDrag",void 0),Bc(kl(v),"stepScrollX",0),Bc(kl(v),"stepScrollY",0),Bc(kl(v),"onDragging",function(C){var W=C.deltaX,Y=C.deltaY;v.setState({isDragging:!0});var fe=v.props.graphModel,xe=fe.transformModel;fe.editConfigModel.stopMoveGraph!==!0&&xe.translate(W,Y)}),Bc(kl(v),"onDragEnd",function(){v.setState({isDragging:!1})}),Bc(kl(v),"zoomHandler",function(C){var W=v.props,Y=W.graphModel,fe=Y.editConfigModel,xe=Y.transformModel,ke=Y.gridSize,Je=W.graphModel,Qe=C.deltaX,vt=C.deltaY;if(fe.stopScrollGraph||C.ctrlKey===!0){if(!fe.stopZoomGraph){C.preventDefault();var $t=Je.getPointByClient({x:C.clientX,y:C.clientY}).canvasOverlayPosition,hn=$t.x,dn=$t.y;xe.zoom(C.deltaY<0,[hn,dn])}}else{if(C.preventDefault(),v.stepScrollX+=Qe,v.stepScrollY+=vt,Math.abs(v.stepScrollX)>=ke){var Gn=v.stepScrollX%ke,ln=v.stepScrollX-Gn;xe.translate(-ln*xe.SCALE_X,0),v.stepScrollX=Gn}if(Math.abs(v.stepScrollY)>=ke){var jn=v.stepScrollY%ke,bn=v.stepScrollY-jn;xe.translate(0,-bn*xe.SCALE_Y),v.stepScrollY=jn}}}),Bc(kl(v),"clickHandler",function(C){if(C.target.getAttribute("name")==="canvas-overlay"){var W=v.props.graphModel;W.selectElements.size>0&&W.clearSelectElements(),W.eventCenter.emit(Pn.BLANK_CLICK,{e:C})}}),Bc(kl(v),"handleContextMenu",function(C){if(C.target.getAttribute("name")==="canvas-overlay"){C.preventDefault();var W=v.props.graphModel,Y=W.getPointByClient({x:C.clientX,y:C.clientY});W.eventCenter.emit(Pn.BLANK_CONTEXTMENU,{e:C,position:Y})}}),Bc(kl(v),"mouseDownHandler",function(C){var W=v.props.graphModel,Y=W.eventCenter,fe=W.editConfigModel,xe=W.transformModel.SCALE_X,ke=W.gridSize,Je=C.target,Qe=!fe.adjustEdge&&!fe.adjustNodePosition;(Je.getAttribute("name")==="canvas-overlay"||Qe)&&(fe.stopMoveGraph!==!0?(v.stepDrag.setStep(ke*xe),v.stepDrag.handleMouseDown(C)):Y.emit(Pn.BLANK_MOUSEDOWN,{e:C}),v.clickHandler(C))});var _=f.graphModel,O=_.gridSize,P=_.eventCenter;return v.stepDrag=new Z({onDragging:v.onDragging,onDragEnd:v.onDragEnd,step:O,eventType:"BLANK",isStopPropagation:!1,eventCenter:P,model:null}),v.state={isDragging:!1},v}return o=p,(u=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,v=this.props,_=v.children,O=v.dnd,P=this.state.isDragging;return Object($e.g)("svg",Tg({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:P?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},O.eventMap()),Object($e.g)("g",{transform:f},_))}}])&&YN(o.prototype,u),p}($e.a))||pw;function Ng(i){return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ng(i)}function JN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function QN(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Pg(i,o){return Pg=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},Pg(i,o)}function eP(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=py(i);if(o){var p=py(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return tP(this,u)}}function tP(i,o){if(o&&(Ng(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function py(i){return py=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},py(i)}var nP=Ys(yw=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&Pg(f,v)})(p,i);var o,u,s=eP(p);function p(){return JN(this,p),s.apply(this,arguments)}return o=p,(u=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var f=this.props,v=f.tool,_=f.graphModel,O=v.getTools().map(function(P){return Object($e.g)(P,{graphModel:_,logicFlow:v.instance})});return v.components=O,O}},{key:"triggerToolRender",value:function(){var f=this.props,v=f.tool,_=f.graphModel,O=document.querySelector("#ToolOverlay_".concat(_.flowId)),P=v.getInstance();P.components.forEach(function(C){return C(P,O)}),P.components=[]}},{key:"render",value:function(){var f=this.props.graphModel;return Object($e.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(f.flowId)},this.getTools())}}])&&QN(o.prototype,u),p}($e.a))||yw;function kg(i){return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},kg(i)}function rP(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function oP(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Rg(i,o){return Rg=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},Rg(i,o)}function iP(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=hy(i);if(o){var p=hy(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return aP(this,u)}}function aP(i,o){if(o&&(kg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function hy(i){return hy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},hy(i)}var mw,uP=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&Rg(f,v)})(p,i);var o,u,s=iP(p);function p(){return rP(this,p),s.apply(this,arguments)}return o=p,(u=[{key:"render",value:function(){var f=this.props.background;return Object($e.g)("div",{className:"lf-background"},Object($e.g)("div",{style:f,className:"lf-background-area"}))}}])&&oP(o.prototype,u),p}($e.a);function jg(i){return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},jg(i)}function sP(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function lP(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Cg(i,o){return Cg=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},Cg(i,o)}function cP(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=vy(i);if(o){var p=vy(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return fP(this,u)}}function fP(i,o){if(o&&(jg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gw(i)}function gw(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function vy(i){return vy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},vy(i)}function dP(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var _w=Ys(mw=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&Cg(f,v)})(p,i);var o,u,s=cP(p);function p(){var f;sP(this,p);for(var v=arguments.length,_=new Array(v),O=0;O<v;O++)_[O]=arguments[O];return dP(gw(f=s.call.apply(s,[this].concat(_))),"id",$a()),f}return o=p,(u=[{key:"renderDot",value:function(){var f=this.props,v=f.config,_=v.color,O=v.thickness,P=O===void 0?2:O,C=f.size,W=f.visible,Y=Math.min(Math.max(2,P),C/2),fe=1;return W||(fe=0),Object($e.g)("rect",{width:Y,height:Y,rx:Y/2,ry:Y/2,fill:_,opacity:fe})}},{key:"renderMesh",value:function(){var f=this.props,v=f.config,_=v.color,O=v.thickness,P=O===void 0?1:O,C=f.size,W=f.visible,Y=Math.min(Math.max(1,P),C/2),fe="M ".concat(C," 0 H0 M0 0 V0 ").concat(C),xe=1;return W||(xe=0),Object($e.g)("path",{d:fe,stroke:_,strokeWidth:Y,opacity:xe})}},{key:"render",value:function(){var f=this.props,v=f.type,_=f.size,O=f.graphModel.transformModel,P=[O.SCALE_X,O.SKEW_Y,O.SKEW_X,O.SCALE_Y,O.TRANSLATE_X,O.TRANSLATE_Y].join(","),C="matrix(".concat(P,")");return Object($e.g)("div",{className:"lf-grid"},Object($e.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object($e.g)("defs",null,Object($e.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:C,x:"0",y:"0",width:_,height:_},v==="dot"&&this.renderDot(),v==="mesh"&&this.renderMesh())),Object($e.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&lP(o.prototype,u),p}($e.a))||mw;_w.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},r(53);function Dg(i){return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Dg(i)}function pP(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return bw(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return bw(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function bw(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}var ww,Kp=function(i){var o={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(i).forEach(function(u){var s=pP(u,2),p=s[0],f=s[1];(p==="style"||Dg(f)!=="object")&&(o[p]=f)}),Object($e.g)("line",o)};function Ig(i){return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ig(i)}function Ew(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function yy(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?Ew(Object(u),!0).forEach(function(s){hP(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):Ew(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function hP(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function vP(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function yP(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Lg(i,o){return Lg=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},Lg(i,o)}function mP(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=my(i);if(o){var p=my(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return gP(this,u)}}function gP(i,o){if(o&&(Ig(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function my(i){return my=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},my(i)}var Ow,_P=Ys(ww=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&Lg(f,v)})(p,i);var o,u,s=mP(p);function p(){return vP(this,p),s.apply(this,arguments)}return o=p,(u=[{key:"render",value:function(){var f=this.props.snaplineModel,v=f.position,_=f.isShowHorizontal,O=f.isShowVertical,P=f.getStyle(),C=v.x,W=C===void 0?0:C,Y=v.y,fe=Y===void 0?0:Y,xe=yy(yy({x1:-1e5,y1:fe,x2:1e5,y2:fe},P),{},{stroke:_?P.stroke:"none"}),ke=yy(yy({x1:W,y1:-1e5,x2:W,y2:1e5},P),{},{stroke:O?P.stroke:"none"});return Object($e.g)("g",{className:"lf-snapline"},Object($e.g)(Kp,xe),Object($e.g)(Kp,ke))}}])&&yP(o.prototype,u),p}($e.a))||ww;function Fg(i){return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Fg(i)}function bP(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return xw(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return xw(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function xw(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function Yf(i){var o=i.x,u=i.y,s=i.width,p=i.height,f=i.className,v=i.radius,_=o-s/2,O=u-p/2,P={};return Object.entries(i).forEach(function(C){var W=bP(C,2),Y=W[0],fe=W[1];Fg(fe)!=="object"&&(P[Y]=fe)}),P.className=f?"lf-basic-shape ".concat(f):"lf-basic-shape",v&&(P.rx=v,P.ry=v),P.x=_,P.y=O,Object($e.g)("rect",P)}function $g(i){return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},$g(i)}function Zp(){return Zp=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])}return i},Zp.apply(this,arguments)}function Sw(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function Aw(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?Sw(Object(u),!0).forEach(function(s){wP(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):Sw(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function wP(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function EP(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function OP(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Bg(i,o){return Bg=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},Bg(i,o)}function xP(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=gy(i);if(o){var p=gy(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return SP(this,u)}}function SP(i,o){if(o&&($g(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function gy(i){return gy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},gy(i)}Yf.defaultProps={className:"",radius:""};var Tw,AP=Ys(Ow=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&Bg(f,v)})(p,i);var o,u,s=xP(p);function p(){return EP(this,p),s.apply(this,arguments)}return o=p,(u=[{key:"getNodesOutline",value:function(){var f=this.props.graphModel,v=f.nodes,_=f.editConfigModel,O=_.hoverOutline,P=_.nodeSelectedOutline,C=[];return v.forEach(function(W){if(W.isHovered||W.isSelected){var Y=W.isHovered,fe=W.isSelected,xe=W.x,ke=W.y,Je=W.width,Qe=W.height;if(P&&fe||O&&Y){var vt=W.getOutlineStyle(),$t={};if(Object.keys(vt).forEach(function(dn){dn!=="hover"&&($t[dn]=vt[dn])}),Y){var hn=vt.hover;$t=Aw(Aw({},$t),hn)}C.push(Object($e.g)(Yf,Zp({transform:W.transform,className:"lf-outline-node",x:xe,y:ke,width:Je+10,height:Qe+10},$t)))}}}),C}},{key:"getEdgeOutline",value:function(){for(var f=this.props.graphModel,v=f.edges,_=f.editConfigModel,O=_.edgeSelectedOutline,P=_.hoverOutline,C=[],W=0;W<v.length;W++){var Y=v[W];(O&&Y.isSelected||P&&Y.isHovered)&&(Y.modelType===_r.LINE_EDGE?C.push(this.getLineOutline(Y)):Y.modelType===_r.POLYLINE_EDGE?C.push(this.getPolylineOutline(Y)):Y.modelType===_r.BEZIER_EDGE&&C.push(this.getBezierOutline(Y)))}return C}},{key:"getLineOutline",value:function(f){var v=f.startPoint,_=f.endPoint,O=(v.x+_.x)/2,P=(v.y+_.y)/2,C=Math.abs(v.x-_.x)+10,W=Math.abs(v.y-_.y)+10,Y=f.getOutlineStyle();return Object($e.g)(Yf,Zp({className:"lf-outline-edge",x:O,y:P,width:C,height:W},Y))}},{key:"getPolylineOutline",value:function(f){var v=f.points,_=co(v),O=zt(_,8),P=O.x,C=O.y,W=O.width,Y=O.height,fe=f.getOutlineStyle();return Object($e.g)(Yf,Zp({className:"lf-outline",x:P,y:C,width:W,height:Y},fe))}},{key:"getBezierOutline",value:function(f){var v=f.path,_=Un(v),O=zt(_,8),P=O.x,C=O.y,W=O.width,Y=O.height,fe=f.getOutlineStyle();return Object($e.g)(Yf,Zp({className:"lf-outline",x:P,y:C,width:W,height:Y},fe))}},{key:"render",value:function(){return Object($e.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&OP(o.prototype,u),p}($e.a))||Ow;function Ug(i){return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ug(i)}function TP(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return Mw(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Mw(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Mw(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function Jp(i){var o=i.x,u=o===void 0?0:o,s=i.y,p=s===void 0?0:s,f=i.r,v=f===void 0?4:f,_=i.className,O={cx:u,cy:p,r:v,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(i).forEach(function(P){var C=TP(P,2),W=C[0],Y=C[1];Ug(Y)!=="object"&&(O[W]=Y)}),O.className=_?"lf-basic-shape ".concat(_):"lf-basic-shape",Object($e.g)("circle",O)}function Gg(i){return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Gg(i)}function MP(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return Nw(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Nw(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Nw(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function dv(){return dv=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])}return i},dv.apply(this,arguments)}function Pw(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function kw(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Rw(i,o,u){return o&&kw(i.prototype,o),u&&kw(i,u),i}function jw(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&Wg(i,o)}function Wg(i,o){return Wg=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},Wg(i,o)}function Cw(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=by(i);if(o){var p=by(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return NP(this,u)}}function NP(i,o){if(o&&(Gg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _y(i)}function _y(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function by(i){return by=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},by(i)}function zg(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var Dw,Iw=function(i){jw(u,i);var o=Cw(u);function u(){var s;return Pw(this,u),zg(_y(s=o.call(this)),"dragHandler",void 0),zg(_y(s),"onDragging",function(p){var f=p.event,v=s.props,_=v.graphModel,O=v.bezierModel,P=v.type,C=_.getPointByClient({x:f.clientX,y:f.clientY}).canvasOverlayPosition,W=C.x,Y=C.y;O.updateAdjustAnchor({x:W,y:Y},P),_.eventCenter.emit(Pn.EDGE_ADJUST,{data:O.getData()})}),zg(_y(s),"onDragEnd",function(){s.props.bezierModel.isDragging=!1}),s.dragHandler=new Z({onDragging:s.onDragging,onDragEnd:s.onDragEnd}),s}return Rw(u,[{key:"render",value:function(){var s=this,p=this.props.position,f=p.x,v=p.y,_=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object($e.g)(Jp,dv({className:"lf-bezier-adjust-anchor",x:f,y:v},_,{onMouseDown:function(O){s.dragHandler.handleMouseDown(O)}}))}}]),u}($e.a),PP=Ys(Tw=function(i){jw(u,i);var o=Cw(u);function u(){return Pw(this,u),o.apply(this,arguments)}return Rw(u,[{key:"getBezierAdjust",value:function(s,p){var f=s.path,v=s.id,_=MP(Un(f),4),O=_[0],P=_[1],C=_[2],W=_[3],Y=s.getEdgeStyle().adjustLine,fe=[];return fe.push(Object($e.g)(Kp,dv({x1:O.x,y1:O.y,x2:P.x,y2:P.y},Y))),fe.push(Object($e.g)(Iw,{position:P,bezierModel:s,graphModel:p,key:"".concat(v,"_ePre"),type:"sNext"})),fe.push(Object($e.g)(Kp,dv({x1:W.x,y1:W.y,x2:C.x,y2:C.y},Y))),fe.push(Object($e.g)(Iw,{position:C,bezierModel:s,graphModel:p,key:"".concat(v,"_sNext"),type:"ePre"})),fe}},{key:"selectedBezierEdge",value:function(){for(var s=this.props.graphModel,p=s.edges,f=[],v=0;v<p.length;v++){var _=p[v];_.isSelected&&_.modelType===_r.BEZIER_EDGE&&_.draggable&&f.push(this.getBezierAdjust(_,s))}return f}},{key:"render",value:function(){return Object($e.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),u}($e.a))||Tw;function Vg(i){return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Vg(i)}function kP(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function RP(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Hg(i,o){return Hg=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},Hg(i,o)}function jP(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=wy(i);if(o){var p=wy(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return CP(this,u)}}function CP(i,o){if(o&&(Vg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function wy(i){return wy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},wy(i)}var Lw,DP=Ys(Dw=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&Hg(f,v)})(p,i);var o,u,s=jP(p);function p(){return kP(this,p),s.apply(this,arguments)}return o=p,(u=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,v=this.props.children;return Object($e.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object($e.g)("g",{transform:f},v))}}])&&RP(o.prototype,u),p}($e.a))||Dw;function Xg(i){return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Xg(i)}function Yg(){return Yg=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])}return i},Yg.apply(this,arguments)}function IP(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function LP(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function qg(i,o){return qg=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},qg(i,o)}function FP(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=Ey(i);if(o){var p=Ey(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return $P(this,u)}}function $P(i,o){if(o&&(Xg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function Ey(i){return Ey=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ey(i)}var BP=Ys(Lw=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&qg(f,v)})(p,i);var o,u,s=FP(p);function p(){return IP(this,p),s.apply(this,arguments)}return o=p,u=[{key:"getComponent",value:function(f,v){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",O=this.props.getView,P=O(f.type);return Object($e.g)(P,{key:f.id,model:f,graphModel:v,overlay:_})}},{key:"render",value:function(){var f=this,v=this.props,_=v.graphModel,O=v.tool,P=v.options,C=v.dnd,W=v.snaplineModel,Y={};P.width&&(Y.width="".concat(_.width,"px")),P.height&&(Y.height="".concat(_.height,"px"));var fe=P.grid,xe=_.fakerNode,ke=_.editConfigModel.adjustEdge;return Object($e.g)("div",{className:"lf-graph","flow-id":_.flowId,style:Y},Object($e.g)(ZN,{graphModel:_,dnd:C},Object($e.g)("g",{className:"lf-base"},_f(_.sortElements,function(Je){return f.getComponent(Je,_)})),xe?this.getComponent(xe,_):""),Object($e.g)(DP,{graphModel:_},Object($e.g)(AP,{graphModel:_}),ke?Object($e.g)(PP,{graphModel:_}):"",P.snapline!==!1?Object($e.g)(_P,{snaplineModel:W}):""),Object($e.g)(nP,{graphModel:_,tool:O}),P.background&&Object($e.g)(uP,{background:P.background}),P.grid&&Object($e.g)(_w,Yg({},fe,{graphModel:_})))}}],u&&LP(o.prototype,u),p}($e.a))||Lw,UP=BP;function Fw(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function Oy(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?Fw(Object(u),!0).forEach(function(s){Uc(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):Fw(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function GP(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Uc(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var WP=function(){function i(s){var p=this;(function(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")})(this,i),Uc(this,"nodeConfig",void 0),Uc(this,"lf",void 0),Uc(this,"fakerNode",void 0),Uc(this,"stopDrag",function(){p.nodeConfig=null,window.document.removeEventListener("mouseup",p.stopDrag)}),Uc(this,"dragEnter",function(v){p.nodeConfig&&!p.fakerNode&&(p.fakerNode=p.lf.createFakerNode(Oy(Oy({},p.nodeConfig),p.clientToLocalPoint({x:v.clientX,y:v.clientY}))))}),Uc(this,"onDragOver",function(v){if(v.preventDefault(),p.fakerNode){var _=p.clientToLocalPoint({x:v.clientX,y:v.clientY}),O=_.x,P=_.y;p.fakerNode.moveTo(O,P);var C=p.fakerNode.getData();p.lf.setNodeSnapLine(C),p.lf.graphModel.eventCenter.emit(Pn.NODE_DND_DRAG,{data:C})}return!1}),Uc(this,"onDragLeave",function(){p.fakerNode&&(p.lf.removeNodeSnapLine(),p.lf.graphModel.removeFakerNode(),p.fakerNode=null)}),Uc(this,"onDrop",function(v){p.lf.graphModel&&v&&p.nodeConfig&&(p.lf.addNode(Oy(Oy({},p.nodeConfig),p.clientToLocalPoint({x:v.clientX,y:v.clientY})),Pn.NODE_DND_ADD,v),v.preventDefault(),v.stopPropagation(),p.nodeConfig=null,p.lf.removeNodeSnapLine(),p.lf.graphModel.removeFakerNode(),p.fakerNode=null)});var f=s.lf;this.lf=f}var o,u;return o=i,(u=[{key:"clientToLocalPoint",value:function(s){var p=s.x,f=s.y,v=Ms(this.lf.options,["grid","size"]),_=this.lf.graphModel.getPointByClient({x:p,y:f}).canvasOverlayPosition,O=_.x,P=_.y;return{x:au(O,v),y:au(P,v)}}},{key:"startDrag",value:function(s){var p=this.lf.graphModel.editConfigModel;p!=null&&p.isSilentMode||(this.nodeConfig=s,window.document.addEventListener("mouseup",this.stopDrag))}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&GP(o.prototype,u),i}();function $w(i){var o=i.container,u=i.grid,s=i.width,p=i.height;if(!o)throw new Error("请检查 container 参数是否有效");if(typeof s=="string"||typeof p=="string")throw new Error("width或height不支持传入字符串，请传数字");return u&&(i.grid=os({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},u)),os({},Uw,i)}var eo,Bw,Uw={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function Kg(i){return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Kg(i)}function Zg(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return Gw(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Gw(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Gw(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function Ww(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function xy(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?Ww(Object(u),!0).forEach(function(s){zw(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):Ww(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function zP(i,o,u,s){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(s):void 0})}function VP(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function HP(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function pv(){return pv=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,u){var s=XP(i,o);if(s){var p=Object.getOwnPropertyDescriptor(s,o);return p.get?p.get.call(arguments.length<3?i:u):p.value}},pv.apply(this,arguments)}function XP(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=qf(i))!==null;);return i}function Jg(i,o){return Jg=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},Jg(i,o)}function YP(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=qf(i);if(o){var p=qf(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return qP(this,u)}}function qP(i,o){if(o&&(Kg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sy(i)}function Sy(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function qf(i){return qf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},qf(i)}function zw(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function Vs(i,o,u,s,p){var f={};return Object.keys(s).forEach(function(v){f[v]=s[v]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(v,_){return _(i,o,v)||v},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Qg=(eo=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&Jg(f,v)})(p,i);var o,u,s=YP(p);function p(){var f;VP(this,p);for(var v=arguments.length,_=new Array(v),O=0;O<v;O++)_[O]=arguments[O];return zw(Sy(f=s.call.apply(s,[this].concat(_))),"modelType",_r.BEZIER_EDGE),zP(Sy(f),"path",Bw,Sy(f)),f}return o=p,(u=[{key:"initEdgeData",value:function(f){this.offset=100,pv(qf(p.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.bezier;return xy(xy({},pv(qf(p.prototype),"getEdgeStyle",this).call(this)),vo(f))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var f=0,v=0;return this.pointsList.forEach(function(_){var O=_.x,P=_.y;f+=O,v+=P}),{x:f/this.pointsList.length,y:v/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var f=pv(qf(p.prototype),"getData",this).call(this),v=this.pointsList.map(function(_){return{x:_.x,y:_.y}});return xy(xy({},f),{},{pointsList:v})}},{key:"getControls",value:function(){var f=this.startPoint,v=this.endPoint;return cr({start:f,end:v,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(f){var v=Zg(f,4),_=v[0],O=v[1],P=v[2],C=v[3];return"M ".concat(_.x," ").concat(_.y,`
    C `).concat(O.x," ").concat(O.y,`,
    `).concat(P.x," ").concat(P.y,`,
    `).concat(C.x," ").concat(C.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var f=this.getControls(),v=f.sNext,_=f.ePre;this.updatePath(v,_)}},{key:"updatePath",value:function(f,v){f=vo(f),v=vo(v);var _={x:this.startPoint.x,y:this.startPoint.y},O={x:this.endPoint.x,y:this.endPoint.y};if(!f||!v){var P=this.getControls();f=P.sNext,v=P.ePre}this.pointsList=[_,f,v,O],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,v){this.startPoint.x+=f,this.startPoint.y+=v;var _=Zg(this.pointsList,3),O=_[1],P=_[2];O.x+=f,O.y+=v,this.updatePath(O,P)}},{key:"moveEndPoint",value:function(f,v){this.endPoint.x+=f,this.endPoint.y+=v;var _=Zg(this.pointsList,3),O=_[1],P=_[2];P.x+=f,P.y+=v,this.updatePath(O,P)}},{key:"updateAdjustAnchor",value:function(f,v){v==="sNext"?this.pointsList[1]=f:v==="ePre"&&(this.pointsList[2]=f),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var v=f.startPoint,_=f.endPoint,O=f.sourceNode,P=f.targetNode,C=cr({start:v,end:_,sourceNode:O,targetNode:P,offset:this.offset}),W=C.sNext,Y=C.ePre;this.pointsList=[v,W,Y,_],this.initPoints()}}])&&HP(o.prototype,u),p}(Us),Bw=Vs(eo.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Vs(eo.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(eo.prototype,"initPoints"),eo.prototype),Vs(eo.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(eo.prototype,"updatePoints"),eo.prototype),Vs(eo.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(eo.prototype,"updateStartPoint"),eo.prototype),Vs(eo.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(eo.prototype,"updateEndPoint"),eo.prototype),Vs(eo.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(eo.prototype,"moveStartPoint"),eo.prototype),Vs(eo.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(eo.prototype,"moveEndPoint"),eo.prototype),Vs(eo.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(eo.prototype,"updateAdjustAnchor"),eo.prototype),Vs(eo.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(eo.prototype,"getAdjustStart"),eo.prototype),Vs(eo.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(eo.prototype,"getAdjustEnd"),eo.prototype),Vs(eo.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(eo.prototype,"updateAfterAdjustStartAndEnd"),eo.prototype),eo),tn,Vw,Hw,Xw,Yw,qw,Kw,Zw,Jw,Qw,eE,tE,nE,rE,oE,iE,aE,uE,sE,lE,cE,fE,dE,KP=function(i){return i==null};function ZP(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||pE(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function e_(i){return e_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},e_(i)}function pE(i,o){if(i){if(typeof i=="string")return hE(i,o);var u=Object.prototype.toString.call(i).slice(8,-1);return u==="Object"&&i.constructor&&(u=i.constructor.name),u==="Map"||u==="Set"?Array.from(i):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?hE(i,o):void 0}}function hE(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function vE(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function Wa(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?vE(Object(u),!0).forEach(function(s){du(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):vE(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function di(i,o,u,s){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(s):void 0})}function JP(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function du(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function Er(i,o,u,s,p){var f={};return Object.keys(s).forEach(function(v){f[v]=s[v]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(v,_){return _(i,o,v)||v},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Gc,yE,Wc=(tn=function(){function i(s,p){(function(f,v){if(!(f instanceof v))throw new TypeError("Cannot call a class as a function")})(this,i),du(this,"id",""),di(this,"type",Vw,this),di(this,"x",Hw,this),di(this,"y",Xw,this),di(this,"text",Yw,this),di(this,"properties",qw,this),di(this,"_width",Kw,this),di(this,"_height",Zw,this),di(this,"anchorsOffset",Jw,this),di(this,"isSelected",Qw,this),di(this,"isHovered",eE,this),di(this,"isShowAnchor",tE,this),di(this,"isDragging",nE,this),di(this,"isHitable",rE,this),di(this,"draggable",oE,this),di(this,"visible",iE,this),di(this,"enableRotate",aE,this),du(this,"virtual",!1),du(this,"graphModel",void 0),di(this,"zIndex",uE,this),di(this,"state",sE,this),di(this,"autoToFront",lE,this),di(this,"style",cE,this),di(this,"transform",fE,this),di(this,"_rotate",dE,this),du(this,"BaseType",to.NODE),du(this,"modelType",_r.NODE),du(this,"additionStateData",void 0),du(this,"targetRules",[]),du(this,"sourceRules",[]),du(this,"moveRules",[]),du(this,"hasSetTargetRules",!1),du(this,"hasSetSourceRules",!1),this.graphModel=p,this.initNodeData(s),this.setAttributes()}var o,u;return o=i,u=[{key:"width",get:function(){return this._width},set:function(s){this._width=s}},{key:"height",get:function(){return this._height},set:function(s){this._height=s}},{key:"rotate",get:function(){return this._rotate},set:function(s){this._rotate=s;var p=this.x,f=p===void 0?0:p,v=this.y,_=v===void 0?0:v;this.transform=new Pl(-f,-_).rotate(s).translate(f,_).toString()}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(s){if(s.properties||(s.properties={}),!s.id){var p=this.graphModel.idGenerator,f=p&&p(s.type),v=this.createId();s.id=v||f||$a()}this.formatText(s),gi(this,function(_){return Da(_,["id","type","x","y","text","properties","virtual","rotate"])}(s)),this.graphModel.overlapMode===ho.INCREASE&&(this.zIndex=s.zIndex||ju())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(s){s.text||(s.text={value:"",x:s.x,y:s.y,draggable:!1,editable:!0}),s.text&&typeof s.text=="string"?s.text={value:s.text,x:s.x,y:s.y,draggable:!1,editable:!0}:s.text&&s.text.editable===void 0&&(s.text.editable=!0)}},{key:"getData",value:function(){var s=this.text,p=s.x,f=s.y,v=s.value,_=this.properties;Object(c.x)(_)&&(_=Object(c.I)(_));var O={id:this.id,type:this.type,x:this.x,y:this.y,properties:_};return this.rotate&&(O.rotate=this.rotate),this.graphModel.overlapMode===ho.INCREASE&&(O.zIndex=this.zIndex),v&&(O.text={x:p,y:f,value:v}),O}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getOuterGAttributes",value:function(){return{className:""}}},{key:"getNodeStyle",value:function(){return Wa(Wa({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var s=this.graphModel.theme.nodeText;return vo(s)}},{key:"getRotateControlStyle",value:function(){var s=this.graphModel.theme.rotateControl;return vo(s)}},{key:"getAnchorStyle",value:function(s){var p=this.graphModel.theme.anchor;return vo(p)}},{key:"getAnchorLineStyle",value:function(s){var p=this.graphModel.theme.anchorLine;return vo(p)}},{key:"getOutlineStyle",value:function(){var s=this.graphModel.theme.outline;return vo(s)}},{key:"isAllowConnectedAsSource",value:function(s,p,f,v){var _=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var O,P=!0,C=0;C<_.length;C++){var W=_[C];if(!W.validate.call(this,this,s,p,f,v)){P=!1,O=W.message;break}}return{isAllPass:P,msg:O}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(s,p,f,v){var _=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var O,P=!0,C=0;C<_.length;C++){var W=_[C];if(!W.validate.call(this,s,this,p,f,v)){P=!1,O=W.message;break}}return{isAllPass:P,msg:O}}},{key:"isAllowMoveNode",value:function(s,p){var f,v=!0,_=!0,O=function(W,Y){var fe=typeof Symbol<"u"&&W[Symbol.iterator]||W["@@iterator"];if(!fe){if(Array.isArray(W)||(fe=pE(W))||Y&&W&&typeof W.length=="number"){fe&&(W=fe);var xe=0,ke=function(){};return{s:ke,n:function(){return xe>=W.length?{done:!0}:{done:!1,value:W[xe++]}},e:function($t){throw $t},f:ke}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Je,Qe=!0,vt=!1;return{s:function(){fe=fe.call(W)},n:function(){var $t=fe.next();return Qe=$t.done,$t},e:function($t){vt=!0,Je=$t},f:function(){try{Qe||fe.return==null||fe.return()}finally{if(vt)throw Je}}}}(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(O.s();!(f=O.n()).done;){var P=(0,f.value)(this,s,p);if(!P)return!1;if(e_(P)==="object"){var C=P;if(C.x===!1&&C.y===!1)return!1;v=v&&C.x,_=_&&C.y}}}catch(W){O.e(W)}finally{O.f()}return{x:v,y:_}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var s=this.anchorsOffset,p=this.id,f=this.x,v=this.y;return s&&s.length>0?s.map(function(_,O){return _.length?(_=_,{id:"".concat(p,"_").concat(O),x:f+_[0],y:v+_[1]}):Wa(Wa({},_=_),{},{x:f+_.x,y:v+_.y,id:_.id||"".concat(p,"_").concat(O)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(s){return function(p,f){for(var v,_=Mi(f),O=Number.MAX_SAFE_INTEGER,P=0;P<_.length;P++){var C=Vi(p.x,p.y,_[P].x,_[P].y);C<O&&(O=C,v={index:P,anchor:us(us({},_[P]),{},{x:_[P].x,y:_[P].y,id:_[P].id})})}return v}(s,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){var s=this.getAnchorsByOffset(),p=this.x,f=this.y,v=this.rotate;return s.forEach(function(_){var O=_.x,P=_.y,C=ZP(new Nl([O,P,1]).translate(-p,-f).rotate(v).translate(p,f)[0],2),W=C[0],Y=C[1];_.x=W,_.y=Y}),s}},{key:"getAnchorInfo",value:function(s){if(!KP(s))for(var p=0;p<this.anchors.length;p++){var f=this.anchors[p];if(f.id===s)return f}}},{key:"addNodeMoveRules",value:function(s){this.moveRules.includes(s)||this.moveRules.push(s)}},{key:"move",value:function(s,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],v=!1,_=!1;if(f)v=!0,_=!0;else{var O=this.isAllowMoveNode(s,p);typeof O=="boolean"?(v=O,_=O):(v=O.x,_=O.y)}if(v){var P=this.x+s;this.x=P,this.text&&this.moveText(s,0)}if(_){var C=this.y+p;this.y=C,this.text&&this.moveText(0,p)}return v||_}},{key:"getMoveDistance",value:function(s,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],v=!1,_=!1,O=0,P=0;if(f)v=!0,_=!0;else{var C=this.isAllowMoveNode(s,p);typeof C=="boolean"?(v=C,_=C):(v=C.x,_=C.y)}if(v&&s){var W=this.x+s;this.x=W,this.text&&this.moveText(s,0),O=s}if(_&&p){var Y=this.y+p;this.y=Y,this.text&&this.moveText(0,p),P=p}return[O,P]}},{key:"moveTo",value:function(s,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],v=s-this.x,_=p-this.y;return!(!f&&!this.isAllowMoveNode(v,_)||(this.text&&this.text&&this.moveText(v,_),this.x=s,this.y=p,0))}},{key:"moveText",value:function(s,p){var f=this.text,v=f.x,_=f.y,O=f.value,P=f.draggable,C=f.editable;this.text={value:O,editable:C,draggable:P,x:v+s,y:_+p}}},{key:"updateText",value:function(s){this.text=Wa(Wa({},Object(c.I)(this.text)),{},{value:s})}},{key:"setSelected",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=s}},{key:"setHovered",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=s,this.setIsShowAnchor(s)}},{key:"setIsShowAnchor",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=s}},{key:"setEnableRotate",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.enableRotate=s}},{key:"setHitable",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=s}},{key:"setElementState",value:function(s,p){this.state=s,this.additionStateData=p}},{key:"setProperty",value:function(s,p){this.properties=Wa(Wa({},Object(c.I)(this.properties)),{},du({},s,zo(p))),this.setAttributes()}},{key:"setProperties",value:function(s){this.properties=Wa(Wa({},Object(c.I)(this.properties)),zo(s)),this.setAttributes()}},{key:"deleteProperty",value:function(s){delete this.properties[s],this.setAttributes()}},{key:"setStyle",value:function(s,p){this.style=Wa(Wa({},this.style),{},du({},s,zo(p)))}},{key:"setStyles",value:function(s){this.style=Wa(Wa({},this.style),zo(s))}},{key:"updateStyles",value:function(s){this.style=Wa({},zo(s))}},{key:"setZIndex",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=s}},{key:"updateAttributes",value:function(s){gi(this,s)}}],u&&JP(o.prototype,u),i}(),Vw=Er(tn.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Hw=Er(tn.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Xw=Er(tn.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Yw=Er(tn.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),qw=Er(tn.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Kw=Er(tn.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),Zw=Er(tn.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),Jw=Er(tn.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Qw=Er(tn.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),eE=Er(tn.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tE=Er(tn.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),nE=Er(tn.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),rE=Er(tn.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),oE=Er(tn.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),iE=Er(tn.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),aE=Er(tn.prototype,"enableRotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),uE=Er(tn.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),sE=Er(tn.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),lE=Er(tn.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),cE=Er(tn.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),fE=Er(tn.prototype,"transform",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dE=Er(tn.prototype,"_rotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Er(tn.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(tn.prototype,"incoming"),tn.prototype),Er(tn.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(tn.prototype,"outgoing"),tn.prototype),Er(tn.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"addNodeMoveRules"),tn.prototype),Er(tn.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"move"),tn.prototype),Er(tn.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"getMoveDistance"),tn.prototype),Er(tn.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"moveTo"),tn.prototype),Er(tn.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"moveText"),tn.prototype),Er(tn.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"updateText"),tn.prototype),Er(tn.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setSelected"),tn.prototype),Er(tn.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setHovered"),tn.prototype),Er(tn.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setIsShowAnchor"),tn.prototype),Er(tn.prototype,"setEnableRotate",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setEnableRotate"),tn.prototype),Er(tn.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setHitable"),tn.prototype),Er(tn.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setElementState"),tn.prototype),Er(tn.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setProperty"),tn.prototype),Er(tn.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setProperties"),tn.prototype),Er(tn.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"deleteProperty"),tn.prototype),Er(tn.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setStyle"),tn.prototype),Er(tn.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setStyles"),tn.prototype),Er(tn.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"updateStyles"),tn.prototype),Er(tn.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setZIndex"),tn.prototype),Er(tn.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"updateAttributes"),tn.prototype),tn);function t_(i){return t_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},t_(i)}function mE(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function gE(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?mE(Object(u),!0).forEach(function(s){_E(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):mE(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function QP(i,o,u,s){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(s):void 0})}function ek(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function tk(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function n_(){return n_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,u){var s=nk(i,o);if(s){var p=Object.getOwnPropertyDescriptor(s,o);return p.get?p.get.call(arguments.length<3?i:u):p.value}},n_.apply(this,arguments)}function nk(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Qp(i))!==null;);return i}function r_(i,o){return r_=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},r_(i,o)}function rk(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=Qp(i);if(o){var p=Qp(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return ok(this,u)}}function ok(i,o){if(o&&(t_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ay(i)}function Ay(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Qp(i){return Qp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Qp(i)}function _E(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function o_(i,o,u,s,p){var f={};return Object.keys(s).forEach(function(v){f[v]=s[v]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(v,_){return _(i,o,v)||v},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Oa,bE,wE,i_=(Gc=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&r_(f,v)})(p,i);var o,u,s=rk(p);function p(){var f;ek(this,p);for(var v=arguments.length,_=new Array(v),O=0;O<v;O++)_[O]=arguments[O];return _E(Ay(f=s.call.apply(s,[this].concat(_))),"modelType",_r.CIRCLE_NODE),QP(Ay(f),"r",yE,Ay(f)),f}return o=p,(u=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var f=n_(Qp(p.prototype),"getNodeStyle",this).call(this),v=this.graphModel.theme.circle;return gE(gE({},f),vo(v))}},{key:"getDefaultAnchor",value:function(){var f=this.x,v=this.y,_=this.r;return[{x:f,y:v-_,id:"".concat(this.id,"_0")},{x:f+_,y:v,id:"".concat(this.id,"_1")},{x:f,y:v+_,id:"".concat(this.id,"_2")},{x:f-_,y:v,id:"".concat(this.id,"_3")}]}}])&&tk(o.prototype,u),p}(Wc),yE=o_(Gc.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),o_(Gc.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Gc.prototype,"width"),Gc.prototype),o_(Gc.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Gc.prototype,"height"),Gc.prototype),Gc);r(129);function a_(i){return a_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},a_(i)}function u_(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return EE(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return EE(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function EE(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function OE(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function xE(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?OE(Object(u),!0).forEach(function(s){AE(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):OE(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function SE(i,o,u,s){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(s):void 0})}function ik(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function ak(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function s_(){return s_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,u){var s=uk(i,o);if(s){var p=Object.getOwnPropertyDescriptor(s,o);return p.get?p.get.call(arguments.length<3?i:u):p.value}},s_.apply(this,arguments)}function uk(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=th(i))!==null;);return i}function l_(i,o){return l_=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},l_(i,o)}function sk(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=th(i);if(o){var p=th(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return lk(this,u)}}function lk(i,o){if(o&&(a_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eh(i)}function eh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function th(i){return th=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},th(i)}function AE(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function nh(i,o,u,s,p){var f={};return Object.keys(s).forEach(function(v){f[v]=s[v]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(v,_){return _(i,o,v)||v},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Rl,TE,ME,c_=(Oa=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&l_(f,v)})(p,i);var o,u,s=sk(p);function p(){var f;ik(this,p);for(var v=arguments.length,_=new Array(v),O=0;O<v;O++)_[O]=arguments[O];return AE(eh(f=s.call.apply(s,[this].concat(_))),"modelType",_r.DIAMOND_NODE),SE(eh(f),"rx",bE,eh(f)),SE(eh(f),"ry",wE,eh(f)),f}return o=p,(u=[{key:"getNodeStyle",value:function(){var f=s_(th(p.prototype),"getNodeStyle",this).call(this),v=this.graphModel.theme.diamond;return xE(xE({},f),vo(v))}},{key:"points",get:function(){var f=this.x,v=this.y,_=this.rx,O=this.ry;return[[f,v-O],[f+_,v],[f,v+O],[f-_,v]]}},{key:"pointsPosition",get:function(){return this.points.map(function(f){return{x:f[0],y:f[1]}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(_){var O=u_(_,1)[0];O<f&&(f=O),O>v&&(v=O)}),v-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(_){var O=u_(_,2)[1];O<f&&(f=O),O>v&&(v=O)}),v-f}},{key:"getDefaultAnchor",value:function(){var f=this;return this.points.map(function(v,_){var O=u_(v,2);return{x:O[0],y:O[1],id:"".concat(f.id,"_").concat(_)}})}}])&&ak(o.prototype,u),p}(Wc),bE=nh(Oa.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),wE=nh(Oa.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),nh(Oa.prototype,"points",[c.m],Object.getOwnPropertyDescriptor(Oa.prototype,"points"),Oa.prototype),nh(Oa.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Oa.prototype,"pointsPosition"),Oa.prototype),nh(Oa.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Oa.prototype,"width"),Oa.prototype),nh(Oa.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Oa.prototype,"height"),Oa.prototype),Oa);function f_(i){return f_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},f_(i)}function NE(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function PE(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?NE(Object(u),!0).forEach(function(s){RE(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):NE(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function kE(i,o,u,s){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(s):void 0})}function ck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function fk(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function d_(){return d_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,u){var s=dk(i,o);if(s){var p=Object.getOwnPropertyDescriptor(s,o);return p.get?p.get.call(arguments.length<3?i:u):p.value}},d_.apply(this,arguments)}function dk(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=oh(i))!==null;);return i}function p_(i,o){return p_=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},p_(i,o)}function pk(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=oh(i);if(o){var p=oh(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return hk(this,u)}}function hk(i,o){if(o&&(f_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rh(i)}function rh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function oh(i){return oh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},oh(i)}function RE(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function Ty(i,o,u,s,p){var f={};return Object.keys(s).forEach(function(v){f[v]=s[v]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(v,_){return _(i,o,v)||v},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var ps,jE,h_=(Rl=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&p_(f,v)})(p,i);var o,u,s=pk(p);function p(){var f;ck(this,p);for(var v=arguments.length,_=new Array(v),O=0;O<v;O++)_[O]=arguments[O];return RE(rh(f=s.call.apply(s,[this].concat(_))),"modelType",_r.ELLIPSE_NODE),kE(rh(f),"rx",TE,rh(f)),kE(rh(f),"ry",ME,rh(f)),f}return o=p,(u=[{key:"getNodeStyle",value:function(){var f=d_(oh(p.prototype),"getNodeStyle",this).call(this),v=this.graphModel.theme.ellipse;return PE(PE({},f),vo(v))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var f=this.x,v=this.y,_=this.rx,O=this.ry;return[{x:f,y:v-O,id:"".concat(this.id,"_0")},{x:f+_,y:v,id:"".concat(this.id,"_1")},{x:f,y:v+O,id:"".concat(this.id,"_2")},{x:f-_,y:v,id:"".concat(this.id,"_3")}]}}])&&fk(o.prototype,u),p}(Wc),TE=Ty(Rl.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),ME=Ty(Rl.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),Ty(Rl.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Rl.prototype,"width"),Rl.prototype),Ty(Rl.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Rl.prototype,"height"),Rl.prototype),Rl);function v_(i){return v_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},v_(i)}function y_(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return CE(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return CE(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function CE(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function DE(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function IE(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?DE(Object(u),!0).forEach(function(s){LE(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):DE(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function vk(i,o,u,s){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(s):void 0})}function yk(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function mk(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function m_(){return m_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,u){var s=gk(i,o);if(s){var p=Object.getOwnPropertyDescriptor(s,o);return p.get?p.get.call(arguments.length<3?i:u):p.value}},m_.apply(this,arguments)}function gk(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=ih(i))!==null;);return i}function g_(i,o){return g_=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},g_(i,o)}function _k(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=ih(i);if(o){var p=ih(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return bk(this,u)}}function bk(i,o){if(o&&(v_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return My(i)}function My(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ih(i){return ih=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ih(i)}function LE(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function Ny(i,o,u,s,p){var f={};return Object.keys(s).forEach(function(v){f[v]=s[v]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(v,_){return _(i,o,v)||v},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var __,FE,b_=(ps=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&g_(f,v)})(p,i);var o,u,s=_k(p);function p(){var f;yk(this,p);for(var v=arguments.length,_=new Array(v),O=0;O<v;O++)_[O]=arguments[O];return LE(My(f=s.call.apply(s,[this].concat(_))),"modelType",_r.POLYGON_NODE),vk(My(f),"points",jE,My(f)),f}return o=p,(u=[{key:"getNodeStyle",value:function(){var f=m_(ih(p.prototype),"getNodeStyle",this).call(this),v=this.graphModel.theme.polygon;return IE(IE({},f),vo(v))}},{key:"pointsPosition",get:function(){var f=this.x,v=this.y,_=this.width,O=this.height;return this.points.map(function(P){return{x:P[0]+f-_/2,y:P[1]+v-O/2}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(_){var O=y_(_,1)[0];O<f&&(f=O),O>v&&(v=O)}),v-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(_){var O=y_(_,2)[1];O<f&&(f=O),O>v&&(v=O)}),v-f}},{key:"getDefaultAnchor",value:function(){var f=this,v=this.x,_=this.y,O=this.width,P=this.height;return this.points.map(function(C,W){var Y=y_(C,2),fe=Y[0],xe=Y[1];return{x:v+fe-O/2,y:_+xe-P/2,id:"".concat(f.id,"_").concat(W)}})}}])&&mk(o.prototype,u),p}(Wc),jE=Ny(ps.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),Ny(ps.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(ps.prototype,"pointsPosition"),ps.prototype),Ny(ps.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(ps.prototype,"width"),ps.prototype),Ny(ps.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(ps.prototype,"height"),ps.prototype),ps);function w_(i){return w_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},w_(i)}function $E(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function BE(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?$E(Object(u),!0).forEach(function(s){UE(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):$E(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function wk(i,o,u,s){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(s):void 0})}function Ek(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function Ok(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function E_(){return E_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,u){var s=xk(i,o);if(s){var p=Object.getOwnPropertyDescriptor(s,o);return p.get?p.get.call(arguments.length<3?i:u):p.value}},E_.apply(this,arguments)}function xk(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=ah(i))!==null;);return i}function O_(i,o){return O_=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},O_(i,o)}function Sk(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=ah(i);if(o){var p=ah(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return Ak(this,u)}}function Ak(i,o){if(o&&(w_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Py(i)}function Py(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ah(i){return ah=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ah(i)}function UE(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var Kf,x_=(__=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&O_(f,v)})(p,i);var o,u,s=Sk(p);function p(){var f;Ek(this,p);for(var v=arguments.length,_=new Array(v),O=0;O<v;O++)_[O]=arguments[O];return UE(Py(f=s.call.apply(s,[this].concat(_))),"modelType",_r.RECT_NODE),wk(Py(f),"radius",FE,Py(f)),f}return o=p,(u=[{key:"getDefaultAnchor",value:function(){var f=this.x,v=this.y,_=this.width,O=this.height;return[{x:f,y:v-O/2,id:"".concat(this.id,"_0")},{x:f+_/2,y:v,id:"".concat(this.id,"_1")},{x:f,y:v+O/2,id:"".concat(this.id,"_2")},{x:f-_/2,y:v,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var f=E_(ah(p.prototype),"getNodeStyle",this).call(this),v=this.graphModel.theme.rect;return BE(BE({},f),vo(v))}}])&&Ok(o.prototype,u),p}(Wc),FE=function(i,o,u,s,p){var f={};return Object.keys(s).forEach(function(v){f[v]=s[v]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(v,_){return _(i,o,v)||v},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}(__.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),__);function S_(i){return S_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},S_(i)}function GE(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function WE(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?GE(Object(u),!0).forEach(function(s){VE(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):GE(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function Tk(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function Mk(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function A_(){return A_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,u){var s=Nk(i,o);if(s){var p=Object.getOwnPropertyDescriptor(s,o);return p.get?p.get.call(arguments.length<3?i:u):p.value}},A_.apply(this,arguments)}function Nk(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=uh(i))!==null;);return i}function T_(i,o){return T_=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},T_(i,o)}function Pk(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=uh(i);if(o){var p=uh(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return kk(this,u)}}function kk(i,o){if(o&&(S_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zE(i)}function zE(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function uh(i){return uh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},uh(i)}function VE(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function HE(i,o,u,s,p){var f={};return Object.keys(s).forEach(function(v){f[v]=s[v]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(v,_){return _(i,o,v)||v},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var M_=(Kf=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&T_(f,v)})(p,i);var o,u,s=Pk(p);function p(){var f;Tk(this,p);for(var v=arguments.length,_=new Array(v),O=0;O<v;O++)_[O]=arguments[O];return VE(zE(f=s.call.apply(s,[this].concat(_))),"modelType",_r.TEXT_NODE),f}return o=p,(u=[{key:"getTextStyle",value:function(){var f=A_(uh(p.prototype),"getTextStyle",this).call(this),v=this.graphModel.theme.text;return WE(WE({},f),vo(v))}},{key:"width",get:function(){var f=String(this.text.value).split(/[\r\n]/g),v=this.getTextStyle().fontSize;return Bs({rows:f,fontSize:v,rowsLength:f.length}).width}},{key:"height",get:function(){var f=String(this.text.value).split(/[\r\n]/g),v=this.getTextStyle().fontSize;return Bs({rows:f,fontSize:v,rowsLength:f.length}).height}}])&&Mk(o.prototype,u),p}(Wc),HE(Kf.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Kf.prototype,"width"),Kf.prototype),HE(Kf.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Kf.prototype,"height"),Kf.prototype),Kf);function N_(i){return N_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},N_(i)}function Rk(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function jk(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function P_(i,o){return P_=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},P_(i,o)}function Ck(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=ky(i);if(o){var p=ky(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return Dk(this,u)}}function Dk(i,o){if(o&&(N_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XE(i)}function XE(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ky(i){return ky=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ky(i)}function Ik(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var Hs,YE,qE,KE,k_=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&P_(f,v)})(p,i);var o,u,s=Ck(p);function p(){var f;Rk(this,p);for(var v=arguments.length,_=new Array(v),O=0;O<v;O++)_[O]=arguments[O];return Ik(XE(f=s.call.apply(s,[this].concat(_))),"modelType",_r.HTML_NODE),f}return o=p,(u=[{key:"getDefaultAnchor",value:function(){var f=this.x,v=this.y,_=this.width,O=this.height;return[{x:f,y:v-O/2,id:"".concat(this.id,"_0")},{x:f+_/2,y:v,id:"".concat(this.id,"_1")},{x:f,y:v+O/2,id:"".concat(this.id,"_2")},{x:f-_/2,y:v,id:"".concat(this.id,"_3")}]}}])&&jk(o.prototype,u),p}(Wc);function ZE(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function R_(i,o,u,s){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(s):void 0})}function Lk(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function JE(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function hv(i,o,u,s,p){var f={};return Object.keys(s).forEach(function(v){f[v]=s[v]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(v,_){return _(i,o,v)||v},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var QE=(Hs=function(){function i(s){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,i),JE(this,"graphModel",void 0),R_(this,"isShowHorizontal",YE,this),R_(this,"isShowVertical",qE,this),R_(this,"position",KE,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=s}var o,u;return o=i,u=[{key:"getStyle",value:function(){return function(s){for(var p=1;p<arguments.length;p++){var f=arguments[p]!=null?arguments[p]:{};p%2?ZE(Object(f),!0).forEach(function(v){JE(s,v,f[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(f)):ZE(Object(f)).forEach(function(v){Object.defineProperty(s,v,Object.getOwnPropertyDescriptor(f,v))})}return s}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(s,p){for(var f=s.x,v=s.y,_=!1,O=!1,P=0;P<p.length;P++){var C=p[P];if(C.id!==s.id&&(f===C.x&&(_=!0),v===C.y&&(O=!0),_&&O))break}return{isShowVertical:_,isShowHorizontal:O,position:{x:f,y:v}}}},{key:"getHorizontalSnapline",value:function(s,p){var f,v,_=!1,O=s.id;if(O){var P=this.graphModel.fakerNode;if(P&&P.id===O)v=Ni(P);else{var C=this.graphModel.getNodeModelById(O);v=Ni(C)}}for(var W=0;W<p.length;W++){var Y=p[W];if(Y.id!==s.id){var fe=Ni(Y);if(fe.minY===v.minY||fe.maxY===v.minY){_=!0,f=v.minY;break}if(fe.minY===v.maxY||fe.maxY===v.maxY){_=!0,f=v.maxY;break}}}return gi({isShowHorizontal:_,position:{y:f}})}},{key:"getVerticalSnapline",value:function(s,p){var f,v,_=!1,O=s.id;if(O){var P=this.graphModel.fakerNode;if(P&&P.id===O)v=Ni(P);else{var C=this.graphModel.getNodeModelById(O);v=Ni(C)}}for(var W=0;W<p.length;W++){var Y=p[W];if(Y.id!==s.id){var fe=Ni(Y);if(fe.minX===v.minX||fe.maxX===v.minX){_=!0,f=v.minX;break}if(fe.minX===v.maxX||fe.maxX===v.maxX){_=!0,f=v.maxX;break}}}return gi({isShowVertical:_,position:{x:f}})}},{key:"getSnapLinePosition",value:function(s,p){var f=this.getCenterSnapLine(s,p),v=f.isShowHorizontal,_=f.isShowVertical;if(!v){var O=this.getHorizontalSnapline(s,p);O.isShowHorizontal&&(f.isShowHorizontal=O.isShowHorizontal,f.position.y=O.position.y)}if(!_){var P=this.getVerticalSnapline(s,p);P.isShowVertical&&(f.isShowVertical=P.isShowVertical,f.position.x=P.position.x)}return f}},{key:"setSnaplineInfo",value:function(s){var p=s.isShowHorizontal,f=s.isShowVertical,v=s.position;this.position=v,this.isShowHorizontal=p,this.isShowVertical=f}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(s){var p=this.graphModel.nodes,f=this.getSnapLinePosition(s,p);this.setSnaplineInfo(f)}}],u&&Lk(o.prototype,u),i}(),YE=hv(Hs.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qE=hv(Hs.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),KE=hv(Hs.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hv(Hs.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(Hs.prototype,"clearSnapline"),Hs.prototype),hv(Hs.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(Hs.prototype,"setNodeSnapLine"),Hs.prototype),Hs),vv=new Map,eO=function(i){var o=$a(),u=window.requestAnimationFrame(function s(){if(i(),vv.get(o)){var p=window.requestAnimationFrame(s);vv.set(o,p)}});return vv.set(o,u),o},Ry=function(i){var o=vv.get(i);o&&(window.cancelAnimationFrame(o),vv.delete(i))};function j_(i){return j_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},j_(i)}function yv(){return yv=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])}return i},yv.apply(this,arguments)}function tO(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function mv(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?tO(Object(u),!0).forEach(function(s){Cl(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):tO(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function Fk(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return nO(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return nO(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function nO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function $k(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function C_(i,o){return C_=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},C_(i,o)}function Bk(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=jy(i);if(o){var p=jy(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return Uk(this,u)}}function Uk(i,o){if(o&&(j_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jl(i)}function jl(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function jy(i){return jy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},jy(i)}function Cl(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var Gk=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&C_(f,v)})(p,i);var o,u,s=Bk(p);function p(){var f;return function(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")}(this,p),Cl(jl(f=s.call(this)),"preTargetNode",void 0),Cl(jl(f),"sourceRuleResults",void 0),Cl(jl(f),"targetRuleResults",void 0),Cl(jl(f),"dragHandler",void 0),Cl(jl(f),"t",void 0),Cl(jl(f),"onDragStart",function(v){var _=v.event,O=f.props,P=O.anchorData,C=O.nodeModel,W=O.graphModel;W.overlapMode,W.selectNodeById(C.id),C.autoToFront&&W.toFront(C.id),W.eventCenter.emit(Pn.ANCHOR_DRAGSTART,{data:P,e:_,nodeModel:C}),f.setState({startX:P.x,startY:P.y,endX:P.x,endY:P.y})}),Cl(jl(f),"onDragging",function(v){var _=v.event,O=f.props,P=O.graphModel,C=O.nodeModel,W=O.anchorData,Y=P.transformModel,fe=P.eventCenter,xe=P.width,ke=P.height,Je=P.editConfigModel,Qe=Je.autoExpand,vt=Je.stopMoveGraph,$t=_.clientX,hn=_.clientY,dn=P.getPointByClient({x:$t,y:hn}),Gn=dn.domOverlayPosition,ln=Gn.x,jn=Gn.y,bn=dn.canvasOverlayPosition,Nr=bn.x,Dr=bn.y;f.t&&Ry(f.t);var sr=[];ln<10?sr=[10,0]:ln+10>xe?sr=[-10,0]:jn<10?sr=[0,10]:jn+10>ke&&(sr=[0,-10]),f.setState({endX:Nr,endY:Dr,dragging:!0}),f.moveAnchorEnd(Nr,Dr),sr.length>0&&!vt&&Qe&&(f.t=eO(function(){var Gr=Fk(sr,2),ii=Gr[0],ai=Gr[1];Y.translate(ii,ai);var oa=f.state,$u=oa.endX,Bu=oa.endY;f.setState({endX:$u-ii,endY:Bu-ai}),f.moveAnchorEnd($u-ii,Bu-ai)})),fe.emit(Pn.ANCHOR_DRAG,{data:W,e:_,nodeModel:C})}),Cl(jl(f),"onDragEnd",function(v){var _=v.event;f.t&&Ry(f.t);var O=f.checkEnd(_);f.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),f.sourceRuleResults.clear(),f.targetRuleResults.clear();var P=f.props,C=P.graphModel,W=P.nodeModel,Y=P.anchorData;C.eventCenter.emit(Pn.ANCHOR_DRAGEND,{data:Y,e:_,nodeModel:W,edgeModel:O})}),Cl(jl(f),"checkEnd",function(v){var _=f.props,O=_.graphModel,P=_.nodeModel,C=_.anchorData,W=C.x,Y=C.y,fe=C.id,xe=(O.edgeType,f.state),ke=xe.endX,Je=xe.endY,Qe=xe.dragging,vt=Fs({x:ke,y:Je},O);if(f.preTargetNode&&f.preTargetNode.state!==Ur.DEFAULT&&f.preTargetNode.setElementState(Ur.DEFAULT),Qe&&vt&&vt.node){var $t=vt.node,hn=vt.anchor.id,dn="".concat(P.id,"_").concat($t.id,"_").concat(hn,"_").concat(fe),Gn=f.sourceRuleResults.get(dn)||{},ln=Gn.isAllPass,jn=Gn.msg,bn=f.targetRuleResults.get(dn)||{},Nr=bn.isAllPass,Dr=bn.msg;if(ln&&Nr){$t.setElementState(Ur.DEFAULT);var sr=O.edgeGenerator(P.getData(),O.getNodeModelById(vt.node.id).getData()),Gr=O.addEdge(mv(mv({},sr),{},{sourceNodeId:P.id,sourceAnchorId:fe,startPoint:{x:W,y:Y},targetNodeId:vt.node.id,targetAnchorId:vt.anchor.id,endPoint:{x:vt.anchor.x,y:vt.anchor.y}})),ii=f.props.anchorData;return O.eventCenter.emit(Pn.ANCHOR_DROP,{data:ii,e:v,nodeModel:P,edgeModel:Gr}),Gr}var ai=$t.getData();return O.eventCenter.emit(Pn.CONNECTION_NOT_ALLOWED,{data:ai,msg:Dr||jn||"不允许添加连线"}),null}}),f.sourceRuleResults=new Map,f.targetRuleResults=new Map,f.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},f.dragHandler=new Z({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd}),f}return o=p,(u=[{key:"getAnchorShape",value:function(){var f=this.props,v=f.anchorData,_=f.style,O=f.node.getAnchorShape(v);if(O)return O;var P=v.x,C=v.y,W=mv(mv({},_),_.hover);return Object($e.g)("g",null,Object($e.g)(Jp,yv({className:"lf-node-anchor-hover"},W,{x:P,y:C})),Object($e.g)(Jp,yv({className:"lf-node-anchor"},_,{x:P,y:C})))}},{key:"customTrajectory",get:function(){return this.props.graphModel.customTrajectory}},{key:"relateEdges",get:function(){var f=this.props,v=f.graphModel,_=v.getAnchorIncomingEdge,O=v.getAnchorOutcomingEdge,P=f.anchorData.id;return{incomingEdgeList:_(P),outcomingEdgeList:O(P)}}},{key:"moveAnchorEnd",value:function(f,v){var _=this.props,O=_.graphModel,P=_.nodeModel,C=_.anchorData,W=Fs({x:f,y:v},O);if(W){var Y=W.node,fe=W.anchor.id;if(this.preTargetNode&&this.preTargetNode!==W.node&&this.preTargetNode.setElementState(Ur.DEFAULT),C.id===fe)return;this.preTargetNode=Y;var xe="".concat(P.id,"_").concat(Y.id,"_").concat(fe,"_").concat(C.id);if(!this.targetRuleResults.has(xe)){var ke=W.anchor,Je=P.isAllowConnectedAsSource(Y,C,ke),Qe=Y.isAllowConnectedAsTarget(P,C,ke);this.sourceRuleResults.set(xe,Ru(Je)),this.targetRuleResults.set(xe,Ru(Qe))}var vt=this.sourceRuleResults.get(xe).isAllPass,$t=this.targetRuleResults.get(xe).isAllPass;vt&&$t?Y.setElementState(Ur.ALLOW_CONNECT):Y.setElementState(Ur.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==Ur.DEFAULT&&this.preTargetNode.setElementState(Ur.DEFAULT)}},{key:"isShowLine",value:function(){var f=this.state,v=f.startX,_=f.startY,O=f.endX,P=f.endY;return Vi(v,_,O,P)>10}},{key:"render",value:function(){var f=this,v=this.state,_=v.startX,O=v.startY,P=v.endX,C=v.endY,W=this.props,Y=W.anchorData.edgeAddable,fe=W.edgeStyle;return Object($e.g)("g",{className:"lf-anchor"},Object($e.g)("g",{onMouseDown:function(xe){Y!==!1&&f.dragHandler.handleMouseDown(xe)}},this.getAnchorShape()),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(mv({sourcePoint:{x:_,y:O},targetPoint:{x:P,y:C}},fe)):Object($e.g)(Kp,yv({x1:_,y1:O,x2:P,y2:C},fe,{"pointer-events":"none"}))))}}])&&$k(o.prototype,u),p}($e.a);function rO(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function Wk(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?rO(Object(u),!0).forEach(function(s){zk(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):rO(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function zk(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function D_(i){return D_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},D_(i)}function Vk(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return oO(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return oO(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function oO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function iO(i){var o=i.x,u=o===void 0?0:o,s=i.y,p=s===void 0?0:s,f=i.value,v=i.fontSize,_=i.fill,O=_===void 0?"currentColor":_,P=i.overflowMode,C=P===void 0?"default":P,W=i.textWidth,Y=W===void 0?"":W,fe=i.model,xe={textAnchor:"middle","dominant-baseline":"middle",x:u,y:p,fill:O};if(Object.entries(i).forEach(function(hn){var dn=Vk(hn,2),Gn=dn[0],ln=dn[1];D_(ln)!=="object"&&(xe[Gn]=ln)}),f){var ke=String(f).split(/[\r\n]/g),Je=ke.length;if(C!=="default"){var Qe=fe.BaseType,vt=fe.modelType;if(Qe===to.NODE&&vt!==_r.TEXT_NODE||Qe===to.EDGE&&Y)return function(hn){var dn=hn.value,Gn=hn.fontSize,ln=hn.model,jn=hn.fontFamily,bn=jn===void 0?"":jn,Nr=hn.lineHeight,Dr=hn.wrapPadding,sr=Dr===void 0?"0, 0":Dr,Gr=hn.overflowMode,ii=hn.x,ai=hn.y,oa=ln.width,$u=ln.textHeight,Bu=hn.textWidth||oa,Ll=String(dn).split(/[\r\n]/g),tp=Ll.length,om=Sl({rows:Ll,style:{fontSize:"".concat(Gn,"px"),width:"".concat(Bu,"px"),fontFamily:bn,lineHeight:Nr,padding:sr},rowsLength:tp,className:"lf-get-text-height"}),np=ln.height>om?ln.height:om;$u&&(np=$u);var Qf=Gr==="ellipsis";return Qf&&(np=Gn+2),Object($e.g)("g",null,Object($e.g)("foreignObject",{width:Bu,height:np,x:ii-Bu/2,y:ai-np/2},Object($e.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:np,width:Bu,padding:sr}},Object($e.g)("div",{className:Qf?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:Qf?Ll.join(""):"",style:Wk({},hn)},Ll.map(function(ed){return Object($e.g)("div",{className:"lf-node-text--auto-wrap-inner"},ed)})))))}(i)}if(Je>1){var $t=ke.map(function(hn,dn){var Gn=(dn-(Je-1)/2)*(v+2);return Object($e.g)("tspan",{className:"lf-text-tspan",x:u,y:p+Gn},hn)});return Object($e.g)("text",xe,$t)}return Object($e.g)("text",xe,f)}}function I_(i){return I_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},I_(i)}function L_(){return L_=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])}return i},L_.apply(this,arguments)}function Hk(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return aO(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return aO(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function aO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function Xk(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function F_(i,o){return F_=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},F_(i,o)}function Yk(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=Cy(i);if(o){var p=Cy(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return qk(this,u)}}function qk(i,o){if(o&&(I_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zf(i)}function Zf(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Cy(i){return Cy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Cy(i)}function Zd(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var uO=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&F_(f,v)})(p,i);var o,u,s=Yk(p);function p(f){var v;(function(O,P){if(!(O instanceof P))throw new TypeError("Cannot call a class as a function")})(this,p),Zd(Zf(v=s.call(this)),"dragHandler",void 0),Zd(Zf(v),"sumDeltaX",0),Zd(Zf(v),"sumDeltaY",0),Zd(Zf(v),"stepDrag",void 0),Zd(Zf(v),"onDragging",function(O){var P=O.deltaX,C=O.deltaY,W=v.props,Y=W.model,fe=Hk(W.graphModel.transformModel.fixDeltaXY(P,C),2),xe=fe[0],ke=fe[1];Y.moveText(xe,ke)}),Zd(Zf(v),"dblClickHandler",function(){v.props.editable&&v.props.model.setElementState(Ur.TEXT_EDIT)}),Zd(Zf(v),"mouseDownHandle",function(O){var P=v.props,C=P.draggable,W=P.model,Y=P.graphModel.editConfigModel.nodeTextDraggable;(C||Y)&&(v.stepDrag.model=W,v.stepDrag.handleMouseDown(O))}),f.model;var _=f.draggable;return v.stepDrag=new Z({onDragging:v.onDragging,step:1,isStopPropagation:_}),v}return o=p,(u=[{key:"getShape",value:function(){var f=this.props,v=f.model,_=f.graphModel,O=v.text,P=_.editConfigModel,C=O.value,W=O.x,Y=O.y,fe=O.editable,xe=O.draggable,ke={x:W,y:Y,className:"",value:C};fe?ke.className="lf-element-text":xe||P.nodeTextDraggable?ke.className="lf-text-draggable":ke.className="lf-text-disabled";var Je=v.getTextStyle();return Object($e.g)(iO,L_({},ke,Je,{model:v}))}},{key:"render",value:function(){if(this.props.model.text)return Object($e.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&Xk(o.prototype,u),p}($e.a),Kk=Ms(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null,sO=r(130);function $_(i){return $_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},$_(i)}function B_(){return B_=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])}return i},B_.apply(this,arguments)}function Zk(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function U_(i,o){return U_=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},U_(i,o)}function Jk(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=Dy(i);if(o){var p=Dy(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return Qk(this,u)}}function Qk(i,o){if(o&&($_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sh(i)}function sh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Dy(i){return Dy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Dy(i)}function gv(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var eR=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&U_(f,v)})(p,i);var o,u,s=Jk(p);function p(f){var v;return function(_,O){if(!(_ instanceof O))throw new TypeError("Cannot call a class as a function")}(this,p),gv(sh(v=s.call(this,f)),"style",{}),gv(sh(v),"defaultAngle",void 0),gv(sh(v),"normal",void 0),gv(sh(v),"stepperDrag",void 0),gv(sh(v),"onDragging",function(_){var O,P=_.event,C=v.props,W=C.graphModel,Y=C.nodeModel,fe=C.eventCenter,xe=W.selectNodes,ke=Y.x,Je=Y.y,Qe=P.clientX,vt=P.clientY,$t=W.getPointByClient({x:Qe,y:vt}).canvasOverlayPosition,hn=$t.x,dn=$t.y,Gn=new q(hn-ke,dn-Je),ln=((O=v.normal)===null||O===void 0?void 0:O.angle(Gn))-v.defaultAngle,jn=new Pl(-ke,-Je).rotate(ln).translate(ke,Je).toString();Y.transform=jn,Y.rotate=ln;var bn=Object(sO.map)(xe,function(Dr){return Dr.id});bn.indexOf(Y.id)===-1&&(bn=[Y.id]);var Nr=Object(sO.reduce)(bn,function(Dr,sr){var Gr=W.getNodeModelById(sr);return Dr[sr]=Gr==null?void 0:Gr.getMoveDistance(0,0,!1),Dr},{});bn.forEach(function(Dr){W.getNodeEdges(Dr).forEach(function(sr){if(Nr[sr.sourceNodeId]){var Gr=W.getNodeModelById(sr.sourceNodeId).anchors.find(function(ai){return ai.id===sr.sourceAnchorId});sr.updateStartPoint(Gr)}if(Nr[sr.targetNodeId]){var ii=W.getNodeModelById(sr.targetNodeId).anchors.find(function(ai){return ai.id===sr.targetAnchorId});sr.updateEndPoint(ii)}})}),fe.emit(Pn.NODE_ROTATE,{e:P,nodeModel:Y})}),v.style=f.style,v.stepperDrag=new Z({onDragging:v.onDragging}),v}return o=p,(u=[{key:"render",value:function(){var f=this,v=this.props.nodeModel,_=v.x,O=v.y,P=_+v.width/2+20,C=O-v.height/2-20;return this.normal=new q(1,0),this.defaultAngle=this.normal.angle(new q(P-_,C-O)),v.defaultAngle=this.defaultAngle,Object($e.g)("g",{className:"lf-rotate-control"},Object($e.g)("g",{onMouseDown:function(W){f.stepperDrag.handleMouseDown(W)}},Object($e.g)(Jp,B_({},this.style,{cx:P,cy:C}))))}}])&&Zk(o.prototype,u),p}($e.a);function G_(i){return G_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},G_(i)}var tR=["className"];function Iy(){return Iy=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])}return i},Iy.apply(this,arguments)}function nR(i,o){if(i==null)return{};var u,s,p=function(v,_){if(v==null)return{};var O,P,C={},W=Object.keys(v);for(P=0;P<W.length;P++)O=W[P],_.indexOf(O)>=0||(C[O]=v[O]);return C}(i,o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(i);for(s=0;s<f.length;s++)u=f[s],o.indexOf(u)>=0||Object.prototype.propertyIsEnumerable.call(i,u)&&(p[u]=i[u])}return p}function Ly(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return lO(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return lO(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function lO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function cO(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function W_(i,o){return W_=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},W_(i,o)}function rR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=Fy(i);if(o){var p=Fy(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return oR(this,u)}}function oR(i,o){if(o&&(G_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ii(i)}function Ii(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Fy(i){return Fy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Fy(i)}function Yi(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var zc=function(i){(function(v,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(_&&_.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),_&&W_(v,_)})(f,i);var o,u,s,p=rR(f);function f(v){var _;(function(Y,fe){if(!(Y instanceof fe))throw new TypeError("Cannot call a class as a function")})(this,f),Yi(Ii(_=p.call(this)),"t",void 0),Yi(Ii(_),"moveOffset",void 0),Yi(Ii(_),"stepDrag",void 0),Yi(Ii(_),"contextMenuTime",void 0),Yi(Ii(_),"mouseUpDrag",void 0),Yi(Ii(_),"startTime",void 0),Yi(Ii(_),"clickTimer",void 0),Yi(Ii(_),"modelDisposer",void 0),Yi(Ii(_),"onDragStart",function(Y){var fe=Y.event,xe=fe.clientX,ke=fe.clientY,Je=_.props,Qe=Je.model,vt=Je.graphModel.getPointByClient({x:xe,y:ke}).canvasOverlayPosition,$t=vt.x,hn=vt.y;_.moveOffset={x:Qe.x-$t,y:Qe.y-hn}}),Yi(Ii(_),"onDragging",function(Y){var fe=Y.event,xe=_.props,ke=xe.model,Je=xe.graphModel,Qe=Je.editConfigModel,vt=Qe.stopMoveGraph,$t=Qe.autoExpand,hn=Je.transformModel,dn=Je.selectNodes,Gn=Je.width,ln=Je.height,jn=Je.gridSize;ke.isDragging=!0;var bn=fe.clientX,Nr=fe.clientY,Dr=Je.getPointByClient({x:bn,y:Nr}).canvasOverlayPosition,sr=Dr.x,Gr=Dr.y,ii=Ly(hn.CanvasPointToHtmlPoint([sr,Gr]),2),ai=ii[0],oa=ii[1];if(sr+=_.moveOffset.x,Gr+=_.moveOffset.y,sr=au(sr,jn),Gr=au(Gr,jn),Gn&&ln){if(!$t||vt||!(ai<0||oa<0||ai>Gn||oa>ln)){var $u=Ly(hn.CanvasPointToHtmlPoint([sr-ke.width/2,Gr-ke.height/2]),2),Bu=$u[0],Ll=$u[1],tp=Ly(hn.CanvasPointToHtmlPoint([sr+ke.width/2,Gr+ke.height/2]),2),om=tp[0],np=tp[1],Qf=Math.max(jn,20),ed=[];Bu<0?ed=[Qf,0]:om>Je.width?ed=[-Qf,0]:Ll<0?ed=[0,Qf]:np>Je.height&&(ed=[0,-Qf]),_.t&&Ry(_.t);var Uj=new Pl(-sr,-Gr).rotate(ke.rotate).translate(sr,Gr).toString();ke.transform=Uj;var im=dn.map(function(am){return am.id});im.indexOf(ke.id)===-1&&(im=[ke.id]),ed.length>0&&!vt&&$t?_.t=eO(function(){var am=Ly(ed,2),zO=am[0],VO=am[1];hn.translate(zO,VO);var Gj=-zO/hn.SCALE_X,Wj=-VO/hn.SCALE_X;Je.moveNodes(im,Gj,Wj)}):Je.moveNodes(im,sr-ke.x,Gr-ke.y)}}else Je.moveNode2Coordinate(ke.id,sr,Gr)}),Yi(Ii(_),"onDragEnd",function(){_.t&&Ry(_.t),_.props.model.isDragging=!1}),Yi(Ii(_),"handleMouseUp",function(){var Y=_.props.model;_.mouseUpDrag=Y.isDragging}),Yi(Ii(_),"handleClick",function(Y){var fe=_.mouseUpDrag===!1;if(_.startTime){var xe=_.props,ke=xe.model,Je=xe.graphModel;if(fe){var Qe={data:ke.getData(),e:Y,position:Je.getPointByClient({x:Y.clientX,y:Y.clientY}),isSelected:!1,isMultiple:!1},vt=Y.button===2,$t=Y.detail===2;if(!vt){var hn=Je.editConfigModel,dn=Ff(Y,hn);Qe.isMultiple=dn,ke.isSelected&&!$t&&dn?(Qe.isSelected=!1,ke.setSelected(!1)):(Je.selectNodeById(ke.id,dn),Qe.isSelected=!0,_.toFront()),$t?(hn.nodeTextEdit&&ke.text.editable&&(ke.setSelected(!1),Je.setElementStateById(ke.id,Ur.TEXT_EDIT)),Je.eventCenter.emit(Pn.NODE_DBCLICK,Qe)):(Je.eventCenter.emit(Pn.ELEMENT_CLICK,Qe),Je.eventCenter.emit(Pn.NODE_CLICK,Qe))}}}}),Yi(Ii(_),"handleContextMenu",function(Y){Y.preventDefault();var fe=_.props,xe=fe.model,ke=fe.graphModel,Je=xe.getData(),Qe=ke.getPointByClient({x:Y.clientX,y:Y.clientY});ke.setElementStateById(xe.id,Ur.SHOW_MENU,Qe.domOverlayPosition),xe.isSelected||ke.selectNodeById(xe.id),ke.eventCenter.emit(Pn.NODE_CONTEXTMENU,{data:Je,e:Y,position:Qe}),_.toFront()}),Yi(Ii(_),"handleMouseDown",function(Y){var fe=_.props,xe=fe.model,ke=fe.graphModel;_.startTime=new Date().getTime(),ke.editConfigModel.adjustNodePosition&&xe.draggable&&_.stepDrag&&_.stepDrag.handleMouseDown(Y)}),Yi(Ii(_),"setHoverON",function(Y){var fe=_.props,xe=fe.model,ke=fe.graphModel;if(!xe.isHovered){var Je=xe.getData();xe.setHovered(!0),ke.eventCenter.emit(Pn.NODE_MOUSEENTER,{data:Je,e:Y})}}),Yi(Ii(_),"setHoverOFF",function(Y){var fe=_.props,xe=fe.model,ke=fe.graphModel,Je=xe.getData();xe.isHovered&&(xe.setHovered(!1),ke.eventCenter.emit(Pn.NODE_MOUSELEAVE,{data:Je,e:Y}))}),Yi(Ii(_),"onMouseOut",function(Y){Kk&&_.setHoverOFF(Y)});var O=v.graphModel,P=O.gridSize,C=O.eventCenter,W=v.model;return _.stepDrag=new Z({onDragStart:_.onDragStart,onDragging:_.onDragging,onDragEnd:_.onDragEnd,step:P,eventType:"NODE",isStopPropagation:!1,eventCenter:C,model:W}),_.modelDisposer=Object(c.F)(function(){return _.props},function(Y){Y&&Y.model&&_.stepDrag.setModel(Y.model)}),_}return o=f,s=[{key:"getModel",value:function(v){return v}}],(u=[{key:"componentWillUnmount",value:function(){this.modelDisposer&&this.modelDisposer()}},{key:"getAnchorShape",value:function(v){return null}},{key:"getAnchors",value:function(){var v=this,_=this.props,O=_.model,P=_.graphModel,C=O.isSelected,W=O.isHitable,Y=O.isDragging,fe=O.isShowAnchor;return W&&(C||fe)&&!Y?_f(O.anchors,function(xe,ke){var Je=O.getAnchorLineStyle(xe),Qe=O.getAnchorStyle(xe);return Object($e.g)(Gk,{anchorData:xe,node:v,style:Qe,edgeStyle:Je,anchorIndex:ke,nodeModel:O,graphModel:P,setHoverOFF:v.setHoverOFF})}):[]}},{key:"getRotateControl",value:function(){var v=this.props,_=v.model,O=v.graphModel,P=_.isSelected,C=_.isHitable,W=_.enableRotate,Y=_.isHovered,fe=_.getRotateControlStyle().style;if(C&&(P||Y)&&W)return Object($e.g)(eR,{graphModel:O,nodeModel:_,eventCenter:O.eventCenter,style:fe})}},{key:"getText",value:function(){var v=this.props,_=v.model,O=v.graphModel;if(_.state===Ur.TEXT_EDIT)return"";if(_.text){var P=O.editConfigModel,C=!1;return(_.text.draggable||P.nodeTextDraggable)&&(C=!0),Object($e.g)(uO,{editable:P.nodeTextEdit&&_.text.editable,model:_,graphModel:O,draggable:C})}}},{key:"getStateClassName",value:function(){var v=this.props.model,_=v.state,O=v.isDragging,P=v.isSelected,C="lf-node";switch(_){case Ur.ALLOW_CONNECT:C+=" lf-node-allow";break;case Ur.NOT_ALLOW_CONNECT:C+=" lf-node-not-allow";break;default:C+=" lf-node-default"}return O&&(C+=" lf-isDragging"),P&&(C+=" lf-node-selected"),C}},{key:"toFront",value:function(){var v=this.props,_=v.model,O=v.graphModel;_.autoToFront&&O.toFront(_.id)}},{key:"render",value:function(){var v,_=this.props,O=_.model,P=_.graphModel,C=P.editConfigModel,W=C.hideAnchors,Y=C.adjustNodePosition,fe=C.allowRotation,xe=P.gridSize,ke=P.transformModel.SCALE_X,Je=O.isHitable,Qe=O.draggable,vt=O.transform,$t=O.getOuterGAttributes(),hn=$t.className,dn=hn===void 0?"":hn,Gn=nR($t,tR),ln=Object($e.g)("g",{className:"lf-node-content"},Object($e.g)("g",{transform:vt},this.getShape(),this.getText(),fe&&this.getRotateControl()),!W&&this.getAnchors());return Je?(Y&&Qe&&this.stepDrag.setStep(xe*ke),v=Object($e.g)("g",Iy({className:"".concat(this.getStateClassName()," ").concat(dn),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},Gn),ln)):v=Object($e.g)("g",Iy({className:"".concat(this.getStateClassName()," ").concat(dn)},Gn),ln),v}}])&&cO(o.prototype,u),s&&cO(o,s),f}($e.a);function z_(i){return z_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},z_(i)}function V_(){return V_=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])}return i},V_.apply(this,arguments)}function iR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function aR(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function H_(i,o){return H_=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},H_(i,o)}function uR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=$y(i);if(o){var p=$y(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return sR(this,u)}}function sR(i,o){if(o&&(z_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function $y(i){return $y=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},$y(i)}var X_=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&H_(f,v)})(p,i);var o,u,s=uR(p);function p(){return iR(this,p),s.apply(this,arguments)}return o=p,(u=[{key:"getShape",value:function(){var f=this.props.model,v=f.getNodeStyle();return Object($e.g)(Yf,V_({},v,{x:f.x,y:f.y,width:f.width,height:f.height,radius:f.radius}))}}])&&aR(o.prototype,u),p}(zc);function Y_(i){return Y_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Y_(i)}function q_(){return q_=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])}return i},q_.apply(this,arguments)}function lR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function cR(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function K_(i,o){return K_=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},K_(i,o)}function fR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=By(i);if(o){var p=By(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return dR(this,u)}}function dR(i,o){if(o&&(Y_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function By(i){return By=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},By(i)}var Z_=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&K_(f,v)})(p,i);var o,u,s=fR(p);function p(){return lR(this,p),s.apply(this,arguments)}return o=p,(u=[{key:"getShape",value:function(){var f=this.props.model,v=f.x,_=f.y,O=f.r,P=f.getNodeStyle();return Object($e.g)(Jp,q_({},P,{x:v,y:_,r:O}))}}])&&cR(o.prototype,u),p}(zc);function J_(i){return J_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},J_(i)}function pR(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return fO(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return fO(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function fO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function dO(i){var o=i.points,u=i.className,s={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(i).forEach(function(p){var f=pR(p,2),v=f[0],_=f[1];J_(_)!=="object"&&(s[v]=_)}),s.className=u?"lf-basic-shape ".concat(u):"lf-basic-shape",s.points=o.map(function(p){return p.join(",")}).join(" "),Object($e.g)("polygon",s)}function Q_(i){return Q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Q_(i)}function eb(){return eb=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])}return i},eb.apply(this,arguments)}function hR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function vR(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function tb(i,o){return tb=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},tb(i,o)}function yR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=Uy(i);if(o){var p=Uy(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return mR(this,u)}}function mR(i,o){if(o&&(Q_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function Uy(i){return Uy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Uy(i)}var nb=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&tb(f,v)})(p,i);var o,u,s=yR(p);function p(){return hR(this,p),s.apply(this,arguments)}return o=p,(u=[{key:"getShape",value:function(){var f=this.props.model,v=f.x,_=f.y,O=f.width,P=f.height,C=f.points,W=f.getNodeStyle(),Y={transform:"matrix(1 0 0 1 ".concat(v-O/2," ").concat(_-P/2,")")};return Object($e.g)("g",Y,Object($e.g)(dO,eb({},W,{points:C,x:v,y:_})))}}])&&vR(o.prototype,u),p}(zc);function rb(i){return rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},rb(i)}function ob(){return ob=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])}return i},ob.apply(this,arguments)}function gR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _R(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function ib(i,o){return ib=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},ib(i,o)}function bR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=Gy(i);if(o){var p=Gy(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return wR(this,u)}}function wR(i,o){if(o&&(rb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function Gy(i){return Gy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Gy(i)}var ab=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&ib(f,v)})(p,i);var o,u,s=bR(p);function p(){return gR(this,p),s.apply(this,arguments)}return o=p,(u=[{key:"getShape",value:function(){var f=this.props.model,v=f.getNodeStyle();return Object($e.g)("g",null,Object($e.g)(dO,ob({},v,{points:f.points,x:f.x,y:f.y})))}}])&&_R(o.prototype,u),p}(zc);function ub(i){return ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ub(i)}function ER(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return pO(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return pO(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function OR(i){var o=i.x,u=o===void 0?0:o,s=i.y,p=s===void 0?0:s,f=i.rx,v=f===void 0?4:f,_=i.ry,O=_===void 0?4:_,P=i.className,C={cx:u,cy:p,rx:v,ry:O,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(i).forEach(function(W){var Y=ER(W,2),fe=Y[0],xe=Y[1];ub(xe)!=="object"&&(C[fe]=xe)}),C.className=P?"lf-basic-shape ".concat(P):"lf-basic-shape",Object($e.g)("ellipse",C)}function sb(i){return sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},sb(i)}function lb(){return lb=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])}return i},lb.apply(this,arguments)}function xR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function SR(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function cb(i,o){return cb=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},cb(i,o)}function AR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=Wy(i);if(o){var p=Wy(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return TR(this,u)}}function TR(i,o){if(o&&(sb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function Wy(i){return Wy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Wy(i)}var fb=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&cb(f,v)})(p,i);var o,u,s=AR(p);function p(){return xR(this,p),s.apply(this,arguments)}return o=p,(u=[{key:"getShape",value:function(){var f=this.props.model,v=f.getNodeStyle();return Object($e.g)(OR,lb({},v,{x:f.x,y:f.y,rx:f.rx,ry:f.ry}))}}])&&SR(o.prototype,u),p}(zc);function db(i){return db=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},db(i)}function hO(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function vO(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?hO(Object(u),!0).forEach(function(s){MR(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):hO(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function MR(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function NR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function PR(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function pb(i,o){return pb=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},pb(i,o)}function kR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=zy(i);if(o){var p=zy(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return RR(this,u)}}function RR(i,o){if(o&&(db(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function zy(i){return zy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},zy(i)}var hb=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&pb(f,v)})(p,i);var o,u,s=kR(p);function p(){return NR(this,p),s.apply(this,arguments)}return o=p,(u=[{key:"getBackground",value:function(){var f=this.props.model,v=f.getTextStyle(),_=f.width,O=f.height,P=f.x,C=f.y,W=vO(vO({},v.background),{},{x:P,y:C-1,width:_,height:O});return Object($e.g)(Yf,W)}},{key:"getShape",value:function(){return Object($e.g)("g",null,this.getBackground())}}])&&PR(o.prototype,u),p}(zc);function vb(i){return vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},vb(i)}function yb(){return yb=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])}return i},yb.apply(this,arguments)}function jR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function CR(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function mb(i,o){return mb=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},mb(i,o)}function DR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=Vy(i);if(o){var p=Vy(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return IR(this,u)}}function IR(i,o){if(o&&(vb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _v(i)}function _v(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Vy(i){return Vy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Vy(i)}function Hy(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var gb=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&mb(f,v)})(p,i);var o,u,s=DR(p);function p(){var f;jR(this,p);for(var v=arguments.length,_=new Array(v),O=0;O<v;O++)_[O]=arguments[O];return Hy(_v(f=s.call.apply(s,[this].concat(_))),"ref",void 0),Hy(_v(f),"currentProperties",void 0),Hy(_v(f),"preProperties",void 0),Hy(_v(f),"setRef",function(P){f.ref=P}),f}return o=p,(u=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(f){f.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var f=this.props.model,v=f.x,_=f.y,O=f.height,P=f.width,C=f.getNodeStyle();return this.currentProperties=JSON.stringify(f.properties),Object($e.g)("foreignObject",yb({},C,{x:v-P/2,y:_-O/2,width:P,height:O,ref:this.setRef}))}}])&&CR(o.prototype,u),p}(zc);function _b(i){return _b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_b(i)}function bb(){return bb=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])}return i},bb.apply(this,arguments)}function yO(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function Jd(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?yO(Object(u),!0).forEach(function(s){Ob(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):yO(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function LR(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function wb(i,o){return wb=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},wb(i,o)}function FR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=Xy(i);if(o){var p=Xy(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return $R(this,u)}}function $R(i,o){if(o&&(_b(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eb(i)}function Eb(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Xy(i){return Xy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Xy(i)}function Ob(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var BR=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&wb(f,v)})(p,i);var o,u,s=FR(p);function p(f){var v;return function(_,O){if(!(_ instanceof O))throw new TypeError("Cannot call a class as a function")}(this,p),Ob(Eb(v=s.call(this,f)),"setHoverON",function(){v.setState({isHovered:!0})}),Ob(Eb(v),"setHoverOFF",function(){v.setState({isHovered:!1})}),v.state={isHovered:!1},v}return o=p,(u=[{key:"getBackground",value:function(){var f=this.props.model,v=f.getTextStyle(),_=f.text,O=f.width,P=v.background||{};if(this.state.isHovered&&v.hover&&v.hover.background&&(P=Jd(Jd({},P),v.hover.background)),_&&_.value&&P.fill!=="transparent"){var C,W=v.fontSize,Y=v.overflowMode,fe=v.lineHeight,xe=v.wrapPadding,ke=v.textWidth,Je=_.value,Qe=_.x,vt=_.y,$t=String(Je).split(/[\r\n]/g),hn=$t.length;if(Y==="autoWrap"&&ke){var dn=Sl({rows:$t,style:{fontSize:"".concat(W,"px"),width:"".concat(ke,"px"),lineHeight:fe,padding:xe},rowsLength:hn,className:"lf-get-text-height"});C=Jd(Jd({},P),{},{x:Qe-1,y:vt-1,width:ke,height:dn})}else{$t&&$t.forEach(function(Nr){Kn(Nr)});var Gn=Bs({rows:$t,fontSize:W,rowsLength:hn}),ln=Gn.width,jn=Gn.height;if(Y==="ellipsis"&&(ln=ke||O,jn=W+2),typeof P.wrapPadding=="string"){var bn=P.wrapPadding.split(",").filter(function(Nr){return Nr.trim()}).map(function(Nr){return parseFloat(Nr.trim())});bn.length>0&&bn.length<=4&&(bn.length===1?bn=[bn[0],bn[0],bn[0],bn[0]]:bn.length===2?bn=[bn[0],bn[1],bn[0],bn[1]]:bn.length===3&&(bn=[bn[0],bn[1],bn[2],bn[1]]),ln+=bn[1]+bn[3],jn+=bn[0]+bn[2],Qe+=(bn[1]-bn[3])/2,vt+=(bn[2]-bn[0])/2)}C=Jd(Jd({},P),{},{x:Qe-1,y:vt-1,width:ln,height:jn})}return Object($e.g)(Yf,C)}}},{key:"getShape",value:function(){var f=this.props.model,v=f.text,_=v.value,O=v.x,P=v.y;if(_){var C=Jd({x:O,y:P,className:"lf-element-text",value:_},f.getTextStyle());return Object($e.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object($e.g)(iO,bb({},C,{model:f})))}}}])&&LR(o.prototype,u),p}(uO);function xb(i){return xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},xb(i)}var Dl,UR=["text","sourceAnchorId","targetAnchorId"];function mO(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function Vc(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?mO(Object(u),!0).forEach(function(s){Fu(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):mO(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function GR(i,o){if(i==null)return{};var u,s,p=function(v,_){if(v==null)return{};var O,P,C={},W=Object.keys(v);for(P=0;P<W.length;P++)O=W[P],_.indexOf(O)>=0||(C[O]=v[O]);return C}(i,o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(i);for(s=0;s<f.length;s++)u=f[s],o.indexOf(u)>=0||Object.prototype.propertyIsEnumerable.call(i,u)&&(p[u]=i[u])}return p}function WR(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return gO(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return gO(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function gO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function zR(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Sb(i,o){return Sb=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},Sb(i,o)}function VR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=Yy(i);if(o){var p=Yy(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return HR(this,u)}}function HR(i,o){if(o&&(xb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lu(i)}function Lu(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Yy(i){return Yy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Yy(i)}function Fu(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}(function(i){i.SOURCE="SOURCE",i.TARGET="TARGET"})(Dl||(Dl={}));var _O=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&Sb(f,v)})(p,i);var o,u,s=VR(p);function p(f){var v;(function(C,W){if(!(C instanceof W))throw new TypeError("Cannot call a class as a function")})(this,p),Fu(Lu(v=s.call(this)),"stepDragData",void 0),Fu(Lu(v),"stepDrag",void 0),Fu(Lu(v),"oldEdge",void 0),Fu(Lu(v),"preTargetNode",void 0),Fu(Lu(v),"targetRuleResults",void 0),Fu(Lu(v),"sourceRuleResults",void 0),Fu(Lu(v),"handleMouseDown",function(C){v.stepDrag&&v.stepDrag.handleMouseDown(C)}),Fu(Lu(v),"onDragStart",function(){var C=v.props,W=C.x,Y=C.y,fe=C.edgeModel,xe=fe.startPoint,ke=fe.endPoint,Je=fe.pointsList;v.oldEdge={startPoint:xe,endPoint:ke,pointsList:Je},v.setState({endX:W,endY:Y,dragging:!0})}),Fu(Lu(v),"onDragging",function(C){var W=C.deltaX,Y=C.deltaY,fe=v.state,xe=fe.endX,ke=fe.endY,Je=v.props,Qe=Je.graphModel,vt=Je.type,$t=Qe.transformModel,hn=Qe.editConfigModel,dn=WR($t.moveCanvasPointByHtml([xe,ke],W,Y),2),Gn=dn[0],ln=dn[1];v.setState({endX:Gn,endY:ln,dragging:!0});var jn=v.props.edgeModel,bn=Fs({x:xe,y:ke},Qe);if(bn&&bn.node&&v.isAllowAdjust(bn).pass){var Nr,Dr=jn.startPoint,sr=jn.endPoint,Gr=jn.sourceNode,ii=jn.targetNode;vt===Dl.SOURCE?Nr={startPoint:{x:bn.anchor.x,y:bn.anchor.y},endPoint:{x:sr.x,y:sr.y},sourceNode:bn.node,targetNode:ii}:vt===Dl.TARGET&&(Nr={startPoint:{x:Dr.x,y:Dr.y},endPoint:{x:bn.anchor.x,y:bn.anchor.y},sourceNode:Gr,targetNode:bn.node}),jn.updateAfterAdjustStartAndEnd(Nr)}else vt===Dl.SOURCE?jn.updateStartPoint({x:Gn,y:ln}):vt===Dl.TARGET&&jn.updateEndPoint({x:Gn,y:ln});jn.text.value&&hn.adjustEdge&&jn.setText(Object.assign({},jn.text,jn.textPosition))}),Fu(Lu(v),"onDragEnd",function(C){var W=C.event;try{var Y;v.setState({dragging:!1});var fe=v.props,xe=fe.graphModel,ke=fe.edgeModel,Je=fe.type,Qe=v.state,vt=Qe.endX,$t=Qe.endY,hn=Qe.dragging,dn=Fs({x:vt,y:$t},xe);if(!hn)return;var Gn,ln=!1;if(dn&&dn.node){var jn=v.isAllowAdjust(dn),bn=jn.pass,Nr=jn.msg,Dr=jn.newTargetNode;if(bn){var sr=ke.getData(),Gr=sr.text,ii=sr.sourceAnchorId,ai=ii===void 0?"":ii,oa=sr.targetAnchorId;Gn=Vc(Vc({sourceAnchorId:ai,targetAnchorId:oa===void 0?"":oa},GR(sr,UR)),{},{text:(Gr==null?void 0:Gr.value)||""}),Je===Dl.SOURCE?(Gn=Vc(Vc({},xe.edgeGenerator(xe.getNodeModelById(dn.node.id).getData(),xe.getNodeModelById(ke.targetNodeId).getData(),Gn)),{},{sourceNodeId:dn.node.id,sourceAnchorId:dn.anchor.id,startPoint:{x:dn.anchor.x,y:dn.anchor.y},targetNodeId:ke.targetNodeId,endPoint:Vc({},ke.endPoint)}),ke.sourceNodeId===dn.node.id&&ke.sourceAnchorId===dn.anchor.id&&(ln=!0)):Je===Dl.TARGET&&(Gn=Vc(Vc({},xe.edgeGenerator(xe.getNodeModelById(ke.sourceNodeId).getData(),xe.getNodeModelById(dn.node.id).getData(),Gn)),{},{sourceNodeId:ke.sourceNodeId,startPoint:Vc({},ke.startPoint),targetNodeId:dn.node.id,targetAnchorId:dn.anchor.id,endPoint:{x:dn.anchor.x,y:dn.anchor.y}}),ke.targetNodeId===dn.node.id&&ke.targetAnchorId===dn.anchor.id&&(ln=!0))}else{ln=!0;var $u=Dr.getData();xe.eventCenter.emit(Pn.CONNECTION_NOT_ALLOWED,{data:$u,msg:Nr})}}else ln=!0;if(ln)v.recoveryEdge();else{var Bu=ke.getData();xe.deleteEdgeById(ke.id);var Ll=xe.addEdge(Vc({},Gn));xe.eventCenter.emit(Pn.EDGE_EXCHANGE_NODE,{data:{newEdge:Ll.getData(),oldEdge:Bu}})}(Y=v.preTargetNode)===null||Y===void 0||Y.setElementState(Ur.DEFAULT)}finally{v.props.graphModel.eventCenter.emit(Pn.ADJUST_POINT_DRAGEND,{e:W,data:v.stepDragData})}}),Fu(Lu(v),"recoveryEdge",function(){var C=v.props.edgeModel,W=v.oldEdge,Y=W.startPoint,fe=W.endPoint,xe=W.pointsList;C.updateStartPoint(Y),C.updateEndPoint(fe),C.modelType!==_r.LINE_EDGE&&(C.pointsList=xe,C.initPoints())}),Fu(Lu(v),"getAdjustPointStyle",function(){var C=v.props,W=C.graphModel.theme;return C.edgeModel,W.edgeAdjust}),v.state={dragging:!1,endX:0,endY:0},v.targetRuleResults=new Map,v.sourceRuleResults=new Map;var _=f.type,O=f.edgeModel,P=f.graphModel.eventCenter;return v.stepDragData={type:_,edgeData:O.getData()},v.stepDrag=new Z({onDragStart:v.onDragStart,onDragging:v.onDragging,onDragEnd:v.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:P,data:v.stepDragData}),v}return o=p,(u=[{key:"isAllowAdjust",value:function(f){var v=this.props,_=v.edgeModel,O=_.id,P=_.sourceNode,C=_.targetNode,W=_.sourceAnchorId,Y=_.targetAnchorId,fe=v.type,xe=null,ke=null,Je=null,Qe=null;if(fe===Dl.SOURCE?(xe=f.node,ke=C,Je=f.anchor,Qe=C.getAnchorInfo(Y)):(xe=P,ke=f.node,Qe=f.anchor,Je=P.getAnchorInfo(W)),this.preTargetNode&&this.preTargetNode!==f.node&&this.preTargetNode.setElementState(Ur.DEFAULT),this.preTargetNode=f.node,Qe.id===Je.id)return{pass:!1,msg:"",newTargetNode:ke};var vt="".concat(xe.id,"_").concat(ke.id,"_").concat(Je.id,"_").concat(Qe.id);if(!this.targetRuleResults.has(vt)){var $t=xe.isAllowConnectedAsSource(ke,Je,Qe,O),hn=ke.isAllowConnectedAsTarget(xe,Je,Qe,O);this.sourceRuleResults.set(vt,Ru($t)),this.targetRuleResults.set(vt,Ru(hn))}var dn=this.sourceRuleResults.get(vt),Gn=dn.isAllPass,ln=dn.msg,jn=this.targetRuleResults.get(vt),bn=jn.isAllPass,Nr=jn.msg,Dr=Gn&&bn?Ur.ALLOW_CONNECT:Ur.NOT_ALLOW_CONNECT;return fe===Dl.SOURCE?xe.setElementState(Dr):ke.setElementState(Dr),{pass:Gn&&bn,msg:Nr||ln,newTargetNode:ke}}},{key:"render",value:function(){var f=this.props,v=f.x,_=f.y,O=f.getAdjustPointShape,P=f.edgeModel,C=this.state.dragging;return Object($e.g)("g",{pointerEvents:C?"none":"",onMouseDown:this.handleMouseDown},C?"":O(v,_,P))}}])&&zR(o.prototype,u),p}($e.a);function Ab(i){return Ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ab(i)}function bv(){return bv=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])}return i},bv.apply(this,arguments)}function XR(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return bO(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return bO(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function bO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function YR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function qR(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Tb(i,o){return Tb=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},Tb(i,o)}function KR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=qy(i);if(o){var p=qy(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return ZR(this,u)}}function ZR(i,o){if(o&&(Ab(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xs(i)}function Xs(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function qy(i){return qy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},qy(i)}function Il(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var wv=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&Tb(f,v)})(p,i);var o,u,s=KR(p);function p(){var f;YR(this,p);for(var v=arguments.length,_=new Array(v),O=0;O<v;O++)_[O]=arguments[O];return Il(Xs(f=s.call.apply(s,[this].concat(_))),"startTime",void 0),Il(Xs(f),"contextMenuTime",void 0),Il(Xs(f),"clickTimer",void 0),Il(Xs(f),"textRef",Object($e.f)()),Il(Xs(f),"handleHover",function(P,C){var W=f.props,Y=W.model,fe=W.graphModel.eventCenter;Y.setHovered(P);var xe=P?Pn.EDGE_MOUSEENTER:Pn.EDGE_MOUSELEAVE,ke=Y.getData();fe.emit(xe,{data:ke,e:C})}),Il(Xs(f),"setHoverON",function(P){f.props.model.isHovered||(f.textRef&&f.textRef.current&&f.textRef.current.setHoverON(),f.handleHover(!0,P))}),Il(Xs(f),"setHoverOFF",function(P){f.props.model.isHovered&&(f.textRef&&f.textRef.current&&f.textRef.current.setHoverOFF(),f.handleHover(!1,P))}),Il(Xs(f),"handleContextMenu",function(P){P.preventDefault(),f.contextMenuTime=new Date().getTime(),f.clickTimer&&clearTimeout(f.clickTimer);var C=f.props,W=C.model,Y=C.graphModel,fe=Y.getPointByClient({x:P.clientX,y:P.clientY});Y.setElementStateById(W.id,Ur.SHOW_MENU,fe.domOverlayPosition),f.toFront(),W.isSelected||Y.selectEdgeById(W.id);var xe=W==null?void 0:W.getData();Y.eventCenter.emit(Pn.EDGE_CONTEXTMENU,{data:xe,e:P,position:fe})}),Il(Xs(f),"handleMouseDown",function(P){P.stopPropagation(),f.startTime=new Date().getTime()}),Il(Xs(f),"handleMouseUp",function(P){if(f.startTime&&!(new Date().getTime()-f.startTime>200||P.button===2)){var C=P.detail===2,W=f.props,Y=W.model,fe=W.graphModel,xe=Y==null?void 0:Y.getData(),ke=fe.getPointByClient({x:P.clientX,y:P.clientY});if(C){var Je=fe.editConfigModel,Qe=fe.textEditElement;if(Qe&&Qe.id===Y.id&&fe.setElementStateById(Y.id,Ur.DEFAULT),Je.edgeTextEdit&&Y.text.editable&&fe.setElementStateById(Y.id,Ur.TEXT_EDIT),Y.modelType===_r.POLYLINE_EDGE){var vt=Y,$t=fe.getPointByClient({x:P.x,y:P.y}).canvasOverlayPosition,hn=$t.x,dn=$t.y,Gn=Du({x:hn,y:dn},vt.points);vt.dbClickPosition=Gn}fe.eventCenter.emit(Pn.EDGE_DBCLICK,{data:xe,e:P,position:ke})}else fe.eventCenter.emit(Pn.ELEMENT_CLICK,{data:xe,e:P,position:ke}),fe.eventCenter.emit(Pn.EDGE_CLICK,{data:xe,e:P,position:ke});var ln=fe.editConfigModel;fe.selectEdgeById(Y.id,Ff(P,ln)),f.toFront()}}),f}return o=p,(u=[{key:"getShape",value:function(){return Object($e.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var f=this.props,v=f.model,_=f.graphModel;if(v.state===Ur.TEXT_EDIT)return null;var O=!1,P=_.editConfigModel;return(v.text.draggable||P.edgeTextDraggable)&&(O=!0),Object($e.g)(BR,{ref:this.textRef,editable:P.edgeTextEdit&&v.text.editable,model:v,graphModel:_,draggable:O})}},{key:"getArrowInfo",value:function(){var f=this.props.model,v=f.startPoint,_=f.endPoint,O=f.isSelected;return{start:v,end:_,hover:this.state.hover,isSelected:O}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model;return[f.startPoint,f.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var f=this.props.model,v=f.id,_=f.getArrowStyle(),O=_.refY,P=O===void 0?0:O,C=_.refX,W=C===void 0?2:C,Y=XR(this.getLastTwoPoints(),2),fe=Y[0],xe=Y[1],ke="auto";return fe!==null&&xe!==null&&(ke=Ze(ct({x:xe.x-fe.x,y:xe.y-fe.y,z:0}))),Object($e.g)("g",null,Object($e.g)("defs",null,Object($e.g)("marker",{id:"marker-start-".concat(v),refX:-W,refY:P,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object($e.g)("marker",{id:"marker-end-".concat(v),refX:W,refY:P,overflow:"visible",orient:ke,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var f=this.props.model.getArrowStyle();return f.stroke,f.strokeWidth,f.offset,f.verticalLength,Object($e.g)("path",null)}},{key:"getEndArrow",value:function(){var f=this.props.model.getArrowStyle(),v=f.stroke,_=f.strokeWidth,O=f.offset,P=f.verticalLength;return Object($e.g)("path",{stroke:v,fill:v,strokeWidth:_,transform:"rotate(180)",d:"M 0 0 L ".concat(O," -").concat(P," L ").concat(O," ").concat(P," Z")})}},{key:"getAdjustPointShape",value:function(f,v,_){var O=_.getAdjustPointStyle();return Object($e.g)(Jp,bv({className:"lf-edge-adjust-point"},O,{x:f,y:v}))}},{key:"getAdjustPoints",value:function(){var f=this.props,v=f.model,_=f.graphModel,O=v.getAdjustStart(),P=v.getAdjustEnd();return Object($e.g)("g",null,Object($e.g)(_O,bv({type:"SOURCE"},O,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:v,graphModel:_})),Object($e.g)(_O,bv({type:"TARGET"},P,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:v,graphModel:_})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object($e.g)("g",null)}},{key:"getAppend",value:function(){return Object($e.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var f=this.props,v=f.graphModel,_=f.model;v.toFront(_.id)}},{key:"render",value:function(){var f=this.props,v=f.model,_=v.isSelected,O=v.isHitable,P=v.isShowAdjustPoint;return f.graphModel.animation,Object($e.g)("g",null,Object($e.g)("g",{className:["lf-edge",!O&&"pointer-none",_&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),P&&_?this.getAdjustPoints():"")}}])&&qR(o.prototype,u),p}($e.a);function Mb(i){return Mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Mb(i)}function JR(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return wO(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return wO(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function wO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}var Ev=function(i){var o={d:""};return Object.entries(i).forEach(function(u){var s=JR(u,2),p=s[0],f=s[1],v=Mb(f);p!=="style"&&v==="object"||(o[p]=f)}),Object($e.g)("path",o)};function Nb(i){return Nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Nb(i)}function Pb(){return Pb=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])}return i},Pb.apply(this,arguments)}function QR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function ej(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function kb(i,o){return kb=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},kb(i,o)}function tj(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=Ky(i);if(o){var p=Ky(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return nj(this,u)}}function nj(i,o){if(o&&(Nb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function Ky(i){return Ky=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ky(i)}var Rb=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&kb(f,v)})(p,i);var o,u,s=tj(p);function p(){return QR(this,p),s.apply(this,arguments)}return o=p,(u=[{key:"getEdge",value:function(){var f=this.props.model,v=f.startPoint,_=f.endPoint,O=f.isAnimation,P=f.arrowConfig,C=f.getEdgeStyle(),W=f.getEdgeAnimationStyle(),Y=W.strokeDasharray,fe=W.stroke,xe=W.strokeDashoffset,ke=W.animationName,Je=W.animationDuration,Qe=W.animationIterationCount,vt=W.animationTimingFunction,$t=W.animationDirection;return Object($e.g)(Kp,Pb({},C,{x1:v.x,y1:v.y,x2:_.x,y2:_.y},P,O?{strokeDasharray:Y,stroke:fe,style:{strokeDashoffset:xe,animationName:ke,animationDuration:Je,animationIterationCount:Qe,animationTimingFunction:vt,animationDirection:$t}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model,v=f.startPoint,_=f.endPoint,O=kn({start:v,end:_}),P=O.d,C=O.strokeWidth,W=O.fill,Y=O.strokeDasharray,fe=O.stroke;return Object($e.g)(Ev,{d:P,fill:W,strokeWidth:C,stroke:fe,strokeDasharray:Y})}}])&&ej(o.prototype,u),p}(wv);function jb(i){return jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},jb(i)}function rj(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return EO(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return EO(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function EO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}var oj=function(i){var o={points:"",fill:"none"};return Object.entries(i).forEach(function(u){var s=rj(u,2),p=s[0],f=s[1];(p==="style"||jb(f)!=="object")&&(o[p]=f)}),Object($e.g)("polyline",o)};function Cb(i){return Cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Cb(i)}function OO(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function Zy(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?OO(Object(u),!0).forEach(function(s){Xc(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):OO(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function Db(){return Db=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])}return i},Db.apply(this,arguments)}function ij(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return xO(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return xO(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function xO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function aj(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Ib(i,o){return Ib=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},Ib(i,o)}function uj(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=Jy(i);if(o){var p=Jy(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return sj(this,u)}}function sj(i,o){if(o&&(Cb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hc(i)}function Hc(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Jy(i){return Jy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Jy(i)}function Xc(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var Lb=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&Ib(f,v)})(p,i);var o,u,s=uj(p);function p(){var f;return function(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")}(this,p),Xc(Hc(f=s.call(this)),"drag",void 0),Xc(Hc(f),"isDragging",void 0),Xc(Hc(f),"isShowAdjustPointTemp",void 0),Xc(Hc(f),"appendInfo",void 0),Xc(Hc(f),"onDragStart",function(){var v=f.props.model;v.dragAppendStart(),f.isShowAdjustPointTemp=v.isShowAdjustPoint,v.isShowAdjustPoint=!1}),Xc(Hc(f),"onDragging",function(v){var _=v.deltaX,O=v.deltaY,P=f.props,C=P.model,W=P.graphModel;f.isDragging=!0;var Y=W.transformModel,fe=W.editConfigModel,xe=ij(Y.fixDeltaXY(_,O),2),ke=xe[0],Je=xe[1],Qe=C,vt=fe.adjustEdgeMiddle;f.appendInfo=vt?Qe.dragAppendSimple(f.appendInfo,{x:ke,y:Je}):Qe.dragAppend(f.appendInfo,{x:ke,y:Je})}),Xc(Hc(f),"onDragEnd",function(){var v=f.props,_=v.model,O=v.graphModel.eventCenter,P=_;P.dragAppendEnd(),f.isDragging=!1,P.isShowAdjustPoint=f.isShowAdjustPointTemp,f.appendInfo=void 0,O.emit(Pn.EDGE_ADJUST,{data:P.getData()})}),Xc(Hc(f),"beforeDragStart",function(v,_){_.dragAble&&f.drag.handleMouseDown(v),f.appendInfo=_}),f.drag=new Z({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd,isStopPropagation:!1}),f}return o=p,(u=[{key:"getEdge",value:function(){var f=this.props.model,v=f.points,_=f.isAnimation,O=f.arrowConfig,P=f.getEdgeStyle(),C=f.getEdgeAnimationStyle(),W=C.strokeDasharray,Y=C.stroke,fe=C.strokeDashoffset,xe=C.animationName,ke=C.animationDuration,Je=C.animationIterationCount,Qe=C.animationTimingFunction,vt=C.animationDirection;return Object($e.g)(oj,Db({points:v},P,O,_?{strokeDasharray:W,stroke:Y,style:{strokeDashoffset:fe,animationName:xe,animationDuration:ke,animationIterationCount:Je,animationTimingFunction:Qe,animationDirection:vt}}:{}))}},{key:"getArrowInfo",value:function(){var f=this.props.model,v=f.points,_=f.isSelected,O={start:null,end:null,hover:this.state.hover,isSelected:_},P=co(v);return P.length>=2&&(O.start=P[P.length-2],O.end=P[P.length-1]),O}},{key:"getLastTwoPoints",value:function(){var f=this.props.model.points,v=co(f);return v.length>=2?[v[v.length-2],v[v.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(f){var v,_=f.start,O=f.end;if(_.x===O.x&&_.y===O.y)v="";else{var P={start:_,end:O,offset:10,verticalLength:5},C=I(Zy(Zy({},P),{},{type:"start"})),W=I(Zy(Zy({},P),{},{type:"end"}));v="M".concat(C.leftX," ").concat(C.leftY,` 
      L`).concat(C.rightX," ").concat(C.rightY,` 
      L`).concat(W.rightX," ").concat(W.rightY,`
      L`).concat(W.leftX," ").concat(W.leftY," z")}return{d:v,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(f){var v=this.getAppendAttributes(f),_=v.d,O=v.strokeWidth,P=v.fill,C=v.strokeDasharray,W=v.stroke;return Object($e.g)(Ev,{d:_,fill:P,strokeWidth:O,stroke:W,strokeDasharray:C})}},{key:"getAppendWidth",value:function(){for(var f=this,v=this.props,_=v.model,O=v.graphModel,P=_.pointsList,C=_.draggable,W=[],Y=P.length,fe=function(ke){var Je="lf-polyline-append",Qe={start:{x:P[ke].x,y:P[ke].y},end:{x:P[ke+1].x,y:P[ke+1].y},startIndex:ke,endIndex:ke+1,direction:"",dragAble:!0},vt=Object($e.g)("g",{className:Je},f.getAppendShape(Qe)),$t=O.editConfigModel,hn=$t.adjustEdge,dn=$t.adjustEdgeMiddle;if(hn&&C){var Gn=Qe.startIndex,ln=Qe.endIndex,jn=dn&&(Gn===0||ln===Y-1);Qe.dragAble=!jn,Qe.start.x===Qe.end.x?(Qe.dragAble&&(Je+="-ew-resize"),Qe.direction=no.VERTICAL):Qe.start.y===Qe.end.y&&(Qe.dragAble&&(Je+="-ns-resize"),Qe.direction=no.HORIZONTAL),vt=Object($e.g)("g",{className:f.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(bn){return f.beforeDragStart(bn,Qe)}},Object($e.g)("g",{className:Je},f.getAppendShape(Qe)))}W.push(vt)},xe=0;xe<Y-1;xe++)fe(xe);return Object($e.g)("g",null,W)}}])&&aj(o.prototype,u),p}(wv);function Fb(i){return Fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Fb(i)}function lj(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return SO(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return SO(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function SO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function $b(){return $b=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])}return i},$b.apply(this,arguments)}function cj(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function fj(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Bb(i,o){return Bb=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},Bb(i,o)}function dj(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=Qy(i);if(o){var p=Qy(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return pj(this,u)}}function pj(i,o){if(o&&(Fb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function Qy(i){return Qy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Qy(i)}var Ub=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&Bb(f,v)})(p,i);var o,u,s=dj(p);function p(){return cj(this,p),s.apply(this,arguments)}return o=p,(u=[{key:"getEdge",value:function(){var f=this.props.model,v=f.getEdgeStyle(),_=f.path,O=f.isAnimation,P=f.arrowConfig,C=f.getEdgeAnimationStyle(),W=C.strokeDasharray,Y=C.stroke,fe=C.strokeDashoffset,xe=C.animationName,ke=C.animationDuration,Je=C.animationIterationCount,Qe=C.animationTimingFunction,vt=C.animationDirection;return Object($e.g)(Ev,$b({d:_},v,P,O?{strokeDasharray:W,stroke:Y,style:{strokeDashoffset:fe,animationName:xe,animationDuration:ke,animationIterationCount:Je,animationTimingFunction:Qe,animationDirection:vt}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model.path;return Object($e.g)(Ev,{d:f,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var f=this.props.model,v=this.state.hover,_=f.isSelected,O=f.getArrowStyle().offset,P=f.pointsList.map(function(W){return{x:W.x,y:W.y}}),C=lj(Ea(P,O),2);return{start:C[0],end:C[1],hover:v,isSelected:_}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model,v=f.getArrowStyle().offset,_=f.pointsList.map(function(O){return{x:O.x,y:O.y}});return Ea(_,v)}}])&&fj(o.prototype,u),p}(wv);function Gb(i){return Gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Gb(i)}function AO(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function hj(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function vj(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function yj(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Wb(i,o){return Wb=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},Wb(i,o)}function mj(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=em(i);if(o){var p=em(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return gj(this,u)}}function gj(i,o){if(o&&(Gb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function em(i){return em=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},em(i)}var _j=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&Wb(f,v)})(p,i);var o,u,s=mj(p);function p(){return vj(this,p),s.apply(this,arguments)}return o=p,u=[{key:"getArrowAttributes",value:function(){var f=this.props,v=f.arrowInfo,_=f.style,O=v.start,P=v.end,C={start:O,end:P,offset:_.offset,verticalLength:_.verticalLength,type:"end"},W=I(C),Y=W.leftX,fe=W.leftY,xe=W.rightX,ke=W.rightY;return function(Je){for(var Qe=1;Qe<arguments.length;Qe++){var vt=arguments[Qe]!=null?arguments[Qe]:{};Qe%2?AO(Object(vt),!0).forEach(function($t){hj(Je,$t,vt[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Je,Object.getOwnPropertyDescriptors(vt)):AO(Object(vt)).forEach(function($t){Object.defineProperty(Je,$t,Object.getOwnPropertyDescriptor(vt,$t))})}return Je}({d:"M".concat(Y," ").concat(fe," L").concat(P.x," ").concat(P.y," L").concat(xe," ").concat(ke," z")},_)}},{key:"getShape",value:function(){var f=this.getArrowAttributes(),v=f.d,_=f.strokeWidth,O=f.stroke,P=f.fill;return Object($e.g)(Ev,{d:v,fill:P,strokeWidth:_,stroke:O})}},{key:"render",value:function(){return Object($e.g)("g",{className:"lf-arrow"},this.getShape())}}],u&&yj(o.prototype,u),p}($e.a),TO=function(i,o){return ht(i,o)},bj=function(i){var o=i==null?0:i.length;return o?i[o-1]:void 0},zb=function(){return Nn.a.Date.now()},wj=Math.max,Ej=Math.min,Oj=function(i,o,u){var s,p,f,v,_,O,P=0,C=!1,W=!1,Y=!0;if(typeof i!="function")throw new TypeError("Expected a function");function fe($t){var hn=s,dn=p;return s=p=void 0,P=$t,v=i.apply(dn,hn)}function xe($t){return P=$t,_=setTimeout(Je,o),C?fe($t):v}function ke($t){var hn=$t-O;return O===void 0||hn>=o||hn<0||W&&$t-P>=f}function Je(){var $t=zb();if(ke($t))return Qe($t);_=setTimeout(Je,function(hn){var dn=o-(hn-O);return W?Ej(dn,f-(hn-P)):dn}($t))}function Qe($t){return _=void 0,Y&&s?fe($t):(s=p=void 0,v)}function vt(){var $t=zb(),hn=ke($t);if(s=arguments,p=this,O=$t,hn){if(_===void 0)return xe(O);if(W)return clearTimeout(_),_=setTimeout(Je,o),fe(O)}return _===void 0&&(_=setTimeout(Je,o)),v}return o=Pu(o)||0,Mr(u)&&(C=!!u.leading,f=(W="maxWait"in u)?wj(Pu(u.maxWait)||0,o):f,Y="trailing"in u?!!u.trailing:Y),vt.cancel=function(){_!==void 0&&clearTimeout(_),P=0,s=O=p=_=void 0},vt.flush=function(){return _===void 0?v:Qe(zb())},vt},xj=r(172);function Sj(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Jf(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var MO,NO,PO,Aj=function(){function i(s){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,i),Jf(this,"undos",[]),Jf(this,"redos",[]),Jf(this,"callbacks",[]),Jf(this,"stopWatch",null),Jf(this,"curData",null),Jf(this,"maxSize",50),Jf(this,"waitTime",100),Jf(this,"eventCenter",void 0),this.eventCenter=s}var o,u;return o=i,(u=[{key:"add",value:function(s){TO(bj(this.undos),s)||(this.undos.push(s),TO(this.curData,s)||(this.redos=[]),this.eventCenter.emit(Pn.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var s=this.undos.pop();this.redos.push(s);var p=this.undos.pop();return this.curData=vo(p),p}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var s=this.redos.pop();return this.curData=vo(s),s}}},{key:"watch",value:function(s){var p=this;this.stopWatch&&this.stopWatch(),this.undos.push(s.modelToGraphData()),this.stopWatch=Object(xj.a)(s,Oj(function(){var f=s.modelToHistoryData();f&&p.add(f)},this.waitTime))}}])&&Sj(o.prototype,u),i}();function Vb(i){return Vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Vb(i)}function Tj(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||function(u,s){if(u){if(typeof u=="string")return kO(u,s);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return kO(u,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function kO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function RO(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function Qd(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?RO(Object(u),!0).forEach(function(s){ep(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):RO(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function jO(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Hb(i,o){return Hb=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},Hb(i,o)}function Mj(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=tm(i);if(o){var p=tm(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return Nj(this,u)}}function Nj(i,o){if(o&&(Vb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lh(i)}function lh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function tm(i){return tm=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},tm(i)}function ep(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var CO,DO,IO,Xb=Ys((PO=NO=function(i){(function(v,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(_&&_.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),_&&Hb(v,_)})(f,i);var o,u,s,p=Mj(f);function f(){var v;return function(_,O){if(!(_ instanceof O))throw new TypeError("Cannot call a class as a function")}(this,f),ep(lh(v=p.call(this)),"ref",Object($e.f)()),ep(lh(v),"__prevText",{type:"",text:"",id:""}),ep(lh(v),"keyupHandler",function(_){var O=v.props.graphModel.textEditElement;_.key==="Enter"&&_.altKey&&O.setElementState(0)}),ep(lh(v),"inputHandler",function(_){var O=_.target.innerText,P=v.props.graphModel.textEditElement;v.__prevText={type:P.type,text:O.replace(/(\r\n)+$|(\n)+$/,""),id:P.id}}),ep(lh(v),"keydownHandler",function(_){_.stopPropagation()}),v.state={style:{left:0,top:0}},v}return o=f,s=[{key:"getDerivedStateFromProps",value:function(v){var _,O=v.graphModel,P=O.transformModel,C=O.theme,W=C.inputText,Y=O.textEditElement;if(Y){var fe;if((fe=Y.text)===null||fe===void 0||!fe.value)if(Y.BaseType===to.EDGE){var xe=(Y=Y).text,ke=Y.textPosition,Je=ke.x,Qe=ke.y;xe.x=Je,xe.y=Qe,Y.setText(xe)}else Y=Y;var vt={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(Y.BaseType===to.EDGE){var $t=C.edgeText,hn=$t.overflowMode,dn=$t.lineHeight,Gn=$t.wrapPadding,ln=$t.textWidth;ln&&hn==="autoWrap"&&(_=Qd(Qd({},vt),{},{width:ln,minWidth:ln,lineHeight:dn,padding:Gn}))}else if(Y.BaseType===to.NODE){var jn=C.nodeText,bn=jn.overflowMode,Nr=jn.lineHeight,Dr=jn.wrapPadding,sr=jn.textWidth,Gr=Y,ii=Gr.width,ai=Gr.modelType,oa=Gr.textWidth||sr||ii;(ai!==_r.TEXT_NODE&&bn==="autoWrap"||ai===_r.TEXT_NODE&&sr)&&(_=Qd(Qd({},vt),{},{width:oa,minWidth:oa,lineHeight:Nr,padding:Dr}))}var $u=Y.text,Bu=$u.x,Ll=$u.y,tp=Tj(P.CanvasPointToHtmlPoint([Bu,Ll]),2);return{style:Qd(Qd({left:tp[0],top:tp[1]},_),W)}}}}],(u=[{key:"componentDidUpdate",value:function(){var v=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var _=this.__prevText,O=_.text,P=_.id;v.updateText(P,O),v.eventCenter.emit(Pn.TEXT_UPDATE,Qd({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(v){if(window.getSelection!==void 0&&document.createRange!==void 0){var _=document.createRange();_.selectNodeContents(v),_.collapse(!1);var O=window.getSelection();O.removeAllRanges(),O.addRange(_)}}},{key:"render",value:function(){var v,_=this.props.graphModel.textEditElement,O=this.state.style;return _?Object($e.g)("div",{contentEditable:!0,className:"lf-text-input",style:O,ref:this.ref,key:_.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(v=_.text)===null||v===void 0?void 0:v.value):null}}])&&jO(o.prototype,u),s&&jO(o,s),f}($e.a),ep(NO,"toolName","textEdit"),MO=PO))||MO,Pj=function(i){return i.modelType===_r.LINE_EDGE?function(o){var u=o.startPoint,s=o.endPoint,p=(u.x+s.x)/2,f=(u.y+s.y)/2,v=Math.abs(u.x-s.x)+10,_=Math.abs(u.y-s.y)+10;return{x:p-v/2,y:f-_/2,x1:p+v/2,y1:f+_/2}}(i):i.modelType===_r.POLYLINE_EDGE?function(o){var u=o.points,s=co(u),p=zt(s,8),f=p.x,v=p.y,_=p.width,O=p.height;return{x:f-_/2,y:v-O/2,x1:f+_/2,y1:v+O/2}}(i):i.modelType===_r.BEZIER_EDGE?function(o){var u=o.path,s=Un(u),p=zt(s,8),f=p.x,v=p.y,_=p.width,O=p.height;return{x:f-_/2,y:v-O/2,x1:f+_/2,y1:v+O/2}}(i):void 0};function Yb(i){return Yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Yb(i)}function LO(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,s){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,v,_=[],O=!0,P=!1;try{for(p=p.call(u);!(O=(f=p.next()).done)&&(_.push(f.value),!s||_.length!==s);O=!0);}catch(C){P=!0,v=C}finally{try{O||p.return==null||p.return()}finally{if(P)throw v}}return _}}(i,o)||FO(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function kj(i){return function(o){if(Array.isArray(o))return qb(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||FO(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function FO(i,o){if(i){if(typeof i=="string")return qb(i,o);var u=Object.prototype.toString.call(i).slice(8,-1);return u==="Object"&&i.constructor&&(u=i.constructor.name),u==="Map"||u==="Set"?Array.from(i):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?qb(i,o):void 0}}function qb(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,s=new Array(o);u<o;u++)s[u]=i[u];return s}function Rj(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Kb(i,o){return Kb=Object.setPrototypeOf||function(u,s){return u.__proto__=s,u},Kb(i,o)}function jj(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,s=nm(i);if(o){var p=nm(this).constructor;u=Reflect.construct(s,arguments,p)}else u=s.apply(this,arguments);return Cj(this,u)}}function Cj(i,o){if(o&&(Yb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ch(i)}function ch(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function nm(i){return nm=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},nm(i)}function fh(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var Zb=Ys((IO=DO=function(i){(function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),v&&Kb(f,v)})(p,i);var o,u,s=jj(p);function p(f){var v;(function(C,W){if(!(C instanceof W))throw new TypeError("Cannot call a class as a function")})(this,p),fh(ch(v=s.call(this)),"stepDrag",void 0),fh(ch(v),"handleMouseDown",function(C){v.stepDrag.handleMouseDown(C)}),fh(ch(v),"handleWheelEvent",function(C){var W,Y;C.preventDefault();var fe=C.deltaX,xe=C.deltaY,ke=C.clientX,Je=C.clientY,Qe=C.ctrlKey,vt=new WheelEvent("wheel",{deltaX:fe,deltaY:xe,clientX:ke,clientY:Je,ctrlKey:Qe});(W=v.props.logicFlow.container)===null||W===void 0||(Y=W.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||Y===void 0||Y.dispatchEvent(vt)}),fh(ch(v),"onDragging",function(C){var W=C.deltaX,Y=C.deltaY,fe=v.props.graphModel,xe=fe.getSelectElements(!0);fe.moveNodes(xe.nodes.map(function(ke){return ke.id}),W,Y)}),fh(ch(v),"handleContextMenu",function(C){C.preventDefault();var W=v.props,Y=W.graphModel,fe=W.graphModel,xe=fe.eventCenter,ke=fe.selectElements,Je=Y.getPointByClient({x:C.clientX,y:C.clientY}),Qe={nodes:[],edges:[]};kj(ke.values()).forEach(function(vt){vt.BaseType===to.NODE&&Qe.nodes.push(vt.getData()),vt.BaseType===to.EDGE&&Qe.edges.push(vt.getData())}),xe.emit(Pn.SELECTION_CONTEXTMENU,{data:Qe,e:C,position:Je})});var _=f.graphModel,O=_.gridSize,P=_.eventCenter;return v.stepDrag=new Z({onDragging:v.onDragging,step:O,eventType:"SELECTION",eventCenter:P}),v}return o=p,(u=[{key:"render",value:function(){var f=this.props.graphModel,v=f.selectElements,_=f.transformModel;if(!(v.size<=1)){var O=Number.MAX_SAFE_INTEGER,P=Number.MAX_SAFE_INTEGER,C=Number.MIN_SAFE_INTEGER,W=Number.MIN_SAFE_INTEGER;v.forEach(function(ke){var Je={x:0,y:0,x1:0,y1:0};ke.BaseType===to.NODE&&(Je=function(Qe){var vt=Qe.x,$t=Qe.y,hn=Qe.width,dn=Qe.height;return{x:vt-hn/2,y:$t-dn/2,x1:vt+hn/2,y1:$t+dn/2}}(ke)),ke.BaseType===to.EDGE&&(Je=Pj(ke)),O=Math.min(O,Je.x),P=Math.min(P,Je.y),C=Math.max(C,Je.x1),W=Math.max(W,Je.y1)});var Y=LO(_.CanvasPointToHtmlPoint([O,P]),2);O=Y[0],P=Y[1];var fe=LO(_.CanvasPointToHtmlPoint([C,W]),2);C=fe[0],W=fe[1];var xe={left:"".concat(O-10,"px"),top:"".concat(P-10,"px"),width:"".concat(C-O+20,"px"),height:"".concat(W-P+20,"px")};return Object($e.g)("div",{className:"lf-multiple-select",style:xe,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}}}])&&Rj(o.prototype,u),p}($e.a),fh(DO,"toolName","multipleSelect"),CO=IO))||CO;function Dj(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function rm(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var Ij=function(){function i(s){(function(f,v){if(!(f instanceof v))throw new TypeError("Cannot call a class as a function")})(this,i),rm(this,"tools",void 0),rm(this,"components",void 0),rm(this,"toolMap",new Map),rm(this,"instance",void 0),this.instance=s,this.isDisabledTool(Xb.toolName)||this.registerTool(Xb.toolName,Xb),this.isDisabledTool(Zb.toolName)||this.registerTool(Zb.toolName,Zb);var p=s.graphModel;p.eventCenter.on("".concat(Pn.GRAPH_TRANSFORM,",").concat(Pn.NODE_CLICK,",").concat(Pn.BLANK_CLICK," "),function(){var f=p.textEditElement,v=p.editConfigModel,_=v.edgeTextEdit,O=v.nodeTextEdit;(_||O)&&f&&p.textEditElement.setElementState(Ur.DEFAULT)})}var o,u;return o=i,(u=[{key:"isDisabledTool",value:function(s){return this.instance.options.disabledTools.indexOf(s)!==-1}},{key:"registerTool",value:function(s,p){this.toolMap.set(s,p)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&Dj(o.prototype,u),i}(),Lj=r(173),Fj=r.n(Lj);function $j(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Jb(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var $O=function(){function i(s){(function(f,v){if(!(f instanceof v))throw new TypeError("Cannot call a class as a function")})(this,i),Jb(this,"mousetrap",void 0),Jb(this,"options",void 0),Jb(this,"target",void 0),s.keyboard||(s.keyboard={enabled:!1}),this.options=s;var p=s.lf;this.target=p.container,this.mousetrap=new Fj.a(this.target),s.keyboard.enabled&&!p.options.isSilentMode&&this.enable(!0)}var o,u;return o=i,(u=[{key:"initShortcuts",value:function(){var s=this,p=this.options.keyboard.shortcuts;if(p)if(Jr(p))p.forEach(function(O){var P=O.keys,C=O.callback,W=O.action;return s.on(P,C,W)});else{var f=p.keys,v=p.callback,_=p.action;this.on(f,v,_)}}},{key:"on",value:function(s,p,f){this.mousetrap.bind(this.getKeys(s),p,f)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(s,p){this.mousetrap.unbind(this.getKeys(s),p)}},{key:"enable",value:function(s){(this.disabled||s)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(s){var p=this;return(Array.isArray(s)?s:[s]).map(function(f){return p.formatKey(f)})}},{key:"formatKey",value:function(s){return s.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&$j(o.prototype,u),i}(),Bj=$O,Yc=null;function BO(i,o){return i.x+=o,i.y+=o,i.text&&(i.text.x+=o,i.text.y+=o),i}function UO(i,o){return i.startPoint&&(i.startPoint.x+=o,i.startPoint.y+=o),i.endPoint&&(i.endPoint.x+=o,i.endPoint.y+=o),i.pointsList&&i.pointsList.length>0&&i.pointsList.forEach(function(u){u.x+=o,u.y+=o}),i.text&&(i.text.x+=o,i.text.y+=o),i}var dh=40,Qb=40;function e0(i){return e0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},e0(i)}function GO(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,s)}return u}function Ov(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?GO(Object(u),!0).forEach(function(s){ei(i,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):GO(Object(u)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(u,s))})}return i}function WO(i,o){for(var u=0;u<o.length;u++){var s=o[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function ei(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var t0=Symbol("plugin register by Logicflow.use"),n0=function(){function i(p){var f,v,_=this;(function(O,P){if(!(O instanceof P))throw new TypeError("Cannot call a class as a function")})(this,i),ei(this,"container",void 0),ei(this,"width",void 0),ei(this,"height",void 0),ei(this,"graphModel",void 0),ei(this,"history",void 0),ei(this,"viewMap",new Map),ei(this,"tool",void 0),ei(this,"keyboard",void 0),ei(this,"dnd",void 0),ei(this,"options",void 0),ei(this,"snaplineModel",void 0),ei(this,"components",[]),ei(this,"plugins",void 0),ei(this,"extension",{}),ei(this,"adapterIn",void 0),ei(this,"adapterOut",void 0),ei(this,"getView",function(O){return _.viewMap.get(O)}),p=$w(p),this.options=p,this.container=this.initContainer(p.container),this.plugins=p.plugins,this.graphModel=new XN(Ov({},p)),this.tool=new Ij(this),this.history=new Aj(this.graphModel.eventCenter),this.dnd=new WP({lf:this}),this.keyboard=new Bj({lf:this,keyboard:p.keyboard}),p.snapline!==!1&&(this.snaplineModel=new QE(this.graphModel),f=this.graphModel.eventCenter,v=this.snaplineModel,f.on("node:mousemove",function(O){var P=O.data;v.setNodeSnapLine(P)}),f.on("node:mouseup",function(){v.clearSnapline()})),function(O,P){var C=O.keyboard,W=C.options.keyboard;C.on(["cmd + c","ctrl + c"],function(){if(Qb=dh,!W.enabled||P.textEditElement)return!0;var Y=O.options.guards,fe=P.getSelectElements(!1);return Y&&Y.beforeClone&&!Y.beforeClone(fe)||fe.nodes.length===0&&fe.edges.length===0?(Yc=null,!0):((Yc=fe).nodes.forEach(function(xe){return BO(xe,dh)}),Yc.edges.forEach(function(xe){return UO(xe,dh)}),!1)}),C.on(["cmd + v","ctrl + v"],function(){if(!W.enabled||P.textEditElement)return!0;if(Yc&&(Yc.nodes||Yc.edges)){O.clearSelectElements();var Y=O.addElements(Yc,Qb);if(!Y)return!0;Y.nodes.forEach(function(fe){return O.selectElementById(fe.id,!0)}),Y.edges.forEach(function(fe){return O.selectElementById(fe.id,!0)}),Yc.nodes.forEach(function(fe){return BO(fe,dh)}),Yc.edges.forEach(function(fe){return UO(fe,dh)}),Qb+=dh}return!1}),C.on(["cmd + z","ctrl + z"],function(){return!W.enabled||!!P.textEditElement||(O.undo(),!1)}),C.on(["cmd + y","ctrl + y"],function(){return!W.enabled||!!P.textEditElement||(O.redo(),!1)}),C.on(["backspace"],function(){if(!W.enabled||P.textEditElement)return!0;var Y=P.getSelectElements(!0);return O.clearSelectElements(),Y.edges.forEach(function(fe){return O.deleteEdge(fe.id)}),Y.nodes.forEach(function(fe){return O.deleteNode(fe.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(p.disabledPlugins)}var o,u,s;return o=i,u=[{key:"register",value:function(p,f){var v=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof p=="string"){var _={BaseEdge:wv,BaseEdgeModel:Vf,BaseNode:zc,BaseNodeModel:Wc,RectNode:X_,RectNodeModel:x_,CircleNode:Z_,CircleNodeModel:i_,PolygonNode:nb,PolygonNodeModel:b_,TextNode:hb,TextNodeModel:M_,LineEdge:Rb,LineEdgeModel:_i,DiamondNode:ab,DiamondNodeModel:c_,PolylineEdge:Lb,PolylineEdgeModel:Fc,BezierEdge:Ub,BezierEdgeModel:Qg,EllipseNode:fb,EllipseNodeModel:h_,HtmlNode:gb,HtmlNodeModel:k_,h:$e.g,type:p};this.viewMap.forEach(function(Y){var fe=Y.extendKey;fe&&(_[fe]=Y)}),this.graphModel.modelMap.forEach(function(Y){var fe=Y.extendKey;fe&&(_[fe]=Y)});var O=f(_),P=O.view,C=O.model,W=P;v&&!W.isObervered&&(W.isObervered=!0,W=gn(W)),this.setView(p,W),this.graphModel.setModel(p,C)}else this.registerElement(p)}},{key:"registerElement",value:function(p){var f=p.view;p.isObserverView===!1||f.isObervered||(f.isObervered=!0,f=gn(f)),this.setView(p.type,f),this.graphModel.setModel(p.type,p.model)}},{key:"batchRegister",value:function(){var p=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];f.forEach(function(v){p.registerElement(v)})}},{key:"defaultRegister",value:function(){this.registerElement({view:X_,model:x_,type:"rect"}),this.registerElement({type:"circle",view:Z_,model:i_}),this.registerElement({type:"polygon",view:nb,model:b_}),this.registerElement({type:"line",view:Rb,model:_i}),this.registerElement({type:"polyline",view:Lb,model:Fc}),this.registerElement({type:"bezier",view:Ub,model:Qg}),this.registerElement({type:"text",view:hb,model:M_}),this.registerElement({type:"ellipse",view:fb,model:h_}),this.registerElement({type:"diamond",view:ab,model:c_}),this.registerElement({type:"html",view:gb,model:k_})}},{key:"selectElementById",value:function(p){var f=arguments.length>1&&arguments[1]!==void 0&&arguments[1],v=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(p,f),!f&&v&&this.graphModel.toFront(p)}},{key:"focusOn",value:function(p){var f=this.graphModel.transformModel,v=p.coordinate,_=p.id;if(!v){var O=this.getNodeModelById(_);O&&(v=O.getData());var P=this.getEdgeModelById(_);P&&(v=P.textPosition)}var C=v,W=C.x,Y=C.y;f.focusOn(W,Y,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(p){this.graphModel.setTheme(p)}},{key:"resize",value:function(p,f){this.graphModel.resize(p,f),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(p){this.graphModel.setDefaultEdgeType(p)}},{key:"updateText",value:function(p,f){this.graphModel.updateText(p,f)}},{key:"deleteElement",value:function(p){var f,v,_,O=this.getModelById(p);return!!O&&(v=(_=(ei(f={},to.NODE,this.deleteNode),ei(f,to.EDGE,this.deleteEdge),f)[O.BaseType])===null||_===void 0?void 0:_.call(this,p))!==null&&v!==void 0&&v}},{key:"getModelById",value:function(p){return this.graphModel.getElement(p)}},{key:"getDataById",value:function(p){var f;return(f=this.graphModel.getElement(p))===null||f===void 0?void 0:f.getData()}},{key:"changeNodeType",value:function(p,f){this.graphModel.changeNodeType(p,f)}},{key:"changeEdgeType",value:function(p,f){this.graphModel.changeEdgeType(p,f)}},{key:"getNodeEdges",value:function(p){return this.graphModel.getNodeEdges(p)}},{key:"addNode",value:function(p){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pn.NODE_ADD,v=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(p,f,v)}},{key:"deleteNode",value:function(p){var f=this.graphModel.getNodeModelById(p);if(!f)return!1;var v=f.getData(),_=this.options.guards,O=!_||!_.beforeDelete||_.beforeDelete(v);return O&&this.graphModel.deleteNode(p),O}},{key:"cloneNode",value:function(p){var f=this.graphModel.getNodeModelById(p).getData(),v=this.options.guards;if(!v||!v.beforeClone||v.beforeClone(f))return this.graphModel.cloneNode(p)}},{key:"changeNodeId",value:function(p,f){return this.graphModel.changeNodeId(p,f)}},{key:"getNodeModelById",value:function(p){return this.graphModel.getNodeModelById(p)}},{key:"getNodeDataById",value:function(p){var f;return(f=this.graphModel.getNodeModelById(p))===null||f===void 0?void 0:f.getData()}},{key:"addEdge",value:function(p){return this.graphModel.addEdge(p)}},{key:"deleteEdge",value:function(p){var f=this.options.guards,v=this.graphModel.edgesMap[p];if(!v)return!1;var _=v.model.getData(),O=!f||!f.beforeDelete||f.beforeDelete(_);return O&&this.graphModel.deleteEdgeById(p),O}},{key:"deleteEdgeByNodeId",value:function(p){var f=p.sourceNodeId,v=p.targetNodeId;f&&v?this.graphModel.deleteEdgeBySourceAndTarget(f,v):f?this.graphModel.deleteEdgeBySource(f):v&&this.graphModel.deleteEdgeByTarget(v)}},{key:"changeEdgeId",value:function(p,f){return this.graphModel.changeEdgeId(p,f)}},{key:"getEdgeModelById",value:function(p){var f;return(f=this.graphModel.edgesMap[p])===null||f===void 0?void 0:f.model}},{key:"getEdgeModels",value:function(p){var f=this.graphModel.edges,v=p.sourceNodeId,_=p.targetNodeId;if(v&&_){var O=[];return f.forEach(function(W){W.sourceNodeId===v&&W.targetNodeId===_&&O.push(W)}),O}if(v){var P=[];return f.forEach(function(W){W.sourceNodeId===v&&P.push(W)}),P}if(_){var C=[];return f.forEach(function(W){W.targetNodeId===_&&C.push(W)}),C}return[]}},{key:"getEdgeDataById",value:function(p){var f;return(f=this.getEdgeModelById(p))===null||f===void 0?void 0:f.getData()}},{key:"getNodeIncomingEdge",value:function(p){return this.graphModel.getNodeIncomingEdge(p)}},{key:"getNodeOutgoingEdge",value:function(p){return this.graphModel.getNodeOutgoingEdge(p)}},{key:"getNodeIncomingNode",value:function(p){return this.graphModel.getNodeIncomingNode(p)}},{key:"getNodeOutgoingNode",value:function(p){return this.graphModel.getNodeOutgoingNode(p)}},{key:"editText",value:function(p){this.graphModel.editText(p)}},{key:"setProperties",value:function(p,f){var v;(v=this.graphModel.getElement(p))===null||v===void 0||v.setProperties(zo(f))}},{key:"deleteProperty",value:function(p,f){var v;(v=this.graphModel.getElement(p))===null||v===void 0||v.deleteProperty(f)}},{key:"getProperties",value:function(p){var f;return(f=this.graphModel.getElement(p))===null||f===void 0?void 0:f.getProperties()}},{key:"toFront",value:function(p){this.graphModel.toFront(p)}},{key:"setElementZIndex",value:function(p,f){return this.graphModel.setElementZIndex(p,f)}},{key:"addElements",value:function(p){for(var f=this,v=p.nodes,_=p.edges,O={},P={nodes:[],edges:[]},C=0;C<v.length;C++){var W=v[C],Y=W.id,fe=this.addNode(W);if(!fe)return;Y&&(O[Y]=fe.id),P.nodes.push(fe)}return _.forEach(function(xe){var ke=xe.sourceNodeId,Je=xe.targetNodeId;O[ke]&&(ke=O[ke]),O[Je]&&(Je=O[Je]);var Qe=f.graphModel.addEdge(Ov(Ov({},xe),{},{sourceNodeId:ke,targetNodeId:Je}));P.edges.push(Qe)}),P}},{key:"getAreaElement",value:function(p,f){var v=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],_=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],O=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(p,f,v,_,O).map(function(P){return P.getData()})}},{key:"getSelectElements",value:function(){var p=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(p)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var p=this.graphModel.modelToGraphData();if(this.adapterOut){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];return this.adapterOut.apply(this,[p].concat(v))}return p}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(p){var f=this.graphModel,v=f.editConfigModel,_=f.transformModel;v.updateEditConfig(p),(p==null?void 0:p.stopMoveGraph)!==void 0&&_.updateTranslateLimits(p.stopMoveGraph),p!=null&&p.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(p,f){return this.graphModel.getPointByClient({x:p,y:f})}},{key:"undo",value:function(){if(this.history.undoAble()){var p=zo(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(p)}}},{key:"redo",value:function(){if(this.history.redoAble()){var p=zo(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(p)}}},{key:"zoom",value:function(p,f){return this.graphModel.transformModel.zoom(p,f)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(p){this.graphModel.transformModel.setZoomMiniSize(p)}},{key:"setZoomMaxSize",value:function(p){this.graphModel.transformModel.setZoomMaxSize(p)}},{key:"getTransform",value:function(){var p=this.graphModel.transformModel;return{SCALE_X:p.SCALE_X,SCALE_Y:p.SCALE_Y,TRANSLATE_X:p.TRANSLATE_X,TRANSLATE_Y:p.TRANSLATE_Y}}},{key:"translate",value:function(p,f){this.graphModel.transformModel.translate(p,f)}},{key:"resetTranslate",value:function(){var p=this.graphModel.transformModel,f=p.TRANSLATE_X,v=p.TRANSLATE_Y;this.translate(-f,-v)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(p,f){f===void 0&&(f=p),this.graphModel.fitView(p,f)}},{key:"openEdgeAnimation",value:function(p){this.graphModel.openEdgeAnimation(p)}},{key:"closeEdgeAnimation",value:function(p){this.graphModel.closeEdgeAnimation(p)}},{key:"on",value:function(p,f){this.graphModel.eventCenter.on(p,f)}},{key:"off",value:function(p,f){this.graphModel.eventCenter.off(p,f)}},{key:"once",value:function(p,f){this.graphModel.eventCenter.once(p,f)}},{key:"emit",value:function(p,f){this.graphModel.eventCenter.emit(p,f)}},{key:"initContainer",value:function(p){var f=document.createElement("div");return f.style.position="relative",f.style.width="100%",f.style.height="100%",p.innerHTML="",p.appendChild(f),f}},{key:"installPlugins",value:function(){var p,f=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],_=(p=this.plugins)!==null&&p!==void 0?p:i.extensions;_.forEach(function(O){var P=null,C=null;O[t0]?(P=O.extension,C=O.props):P=O;var W=P.pluginName||P.name;v.indexOf(W)===-1&&f.installPlugin(P,C)})}},{key:"installPlugin",value:function(p,f){if(e0(p)==="object"){var v=p.install,_=p.render;return v&&v.call(p,this,i),_&&this.components.push(_.bind(p)),void(this.extension[p.pluginName]=p)}var O=p,P=new O({lf:this,LogicFlow:i,options:this.options.pluginsOptions,props:f});P.render&&this.components.push(P.render.bind(P)),this.extension[O.pluginName]=P}},{key:"updateAttributes",value:function(p,f){this.graphModel.updateAttributes(p,f)}},{key:"createFakerNode",value:function(p){var f=this.graphModel.modelMap.get(p.type);if(f){var v=new f(Ov(Ov({},p),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(v),v}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(p){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(p)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(p,f){this.viewMap.set(p,f)}},{key:"renderRawData",value:function(p){this.graphModel.graphDataToModel(zo(p)),this.options.history!==!1&&this.history.watch(this.graphModel),Object($e.j)(Object($e.g)(UP,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(Pn.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(p=this.adapterIn(p)),this.renderRawData(p)}}],s=[{key:"use",value:function(p,f){var v,_,O=p.pluginName;O||(O=p.name);var P=(v=this.extensions.get(O))===null||v===void 0?void 0:v.extension;P&&P.destroy&&P.destroy(),this.extensions.set(O,(ei(_={},t0,t0),ei(_,"extension",p),ei(_,"props",f),_))}}],u&&WO(o.prototype,u),s&&WO(o,s),i}();function Ys(i){return gn(i)}ei(n0,"extensions",new Map),a.default=n0}])})})(B0,B0.exports);var cn=B0.exports;const sG=HC(cn);var lG=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),cG=(globalThis==null?void 0:globalThis._ids)||new lG;function qh(){return cG.next()}var VM=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){VM(t,e);function t(n,a){var r=this;return n.id||(n.id="Event_"+qh()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedTargetRules=function(){var n=e.prototype.getConnectedTargetRules.call(this),a={message:"起始节点不能作为边的终点",validate:function(){return!1}};return n.push(a),n},t.extendKey="StartEventModel",t})(cn.CircleNodeModel);(function(e){VM(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="StartEventNode",t})(cn.CircleNode);var HM=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Sm=globalThis&&globalThis.__assign||function(){return Sm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Sm.apply(this,arguments)};(function(e){HM(t,e);function t(n,a){var r=this;return n.id||(n.id="Event_"+qh()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedSourceRules=function(){var n=e.prototype.getConnectedSourceRules.call(this),a={message:"结束节点不能作为边的起点",validate:function(){return!1}};return n.push(a),n},t.extendKey="EndEventModel",t})(cn.CircleNodeModel);(function(e){HM(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},t.prototype.getShape=function(){var n=this.props.model,a=n.getNodeStyle(),r=n.x,l=n.y,c=n.r,y=e.prototype.getShape.call(this);return cn.h("g",{},y,cn.h("circle",Sm(Sm({},a),{cx:r,cy:l,r:c-5})))},t.extendKey="EndEventView",t})(cn.CircleNode);var XM=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Rv=globalThis&&globalThis.__assign||function(){return Rv=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Rv.apply(this,arguments)};(function(e){XM(t,e);function t(n,a){var r=this;return n.id||(n.id="Gateway_"+qh()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r.points=[[25,0],[50,25],[25,50],[0,25]],r}return t.extendKey="ExclusiveGatewayModel",t})(cn.PolygonNodeModel);(function(e){XM(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,l=n.width,c=n.height,y=n.points,h=n.getNodeStyle();return cn.h("g",{transform:"matrix(1 0 0 1 "+(a-l/2)+" "+(r-c/2)+")"},cn.h("polygon",Rv(Rv({},h),{x:a,y:r,points:y})),cn.h("path",Rv({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},h)))},t.extendKey="ExclusiveGatewayNode",t})(cn.PolygonNode);var YM=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Am=globalThis&&globalThis.__assign||function(){return Am=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Am.apply(this,arguments)};(function(e){YM(t,e);function t(n,a){var r=this;return n.id||(n.id="Activity_"+qh()),r=e.call(this,n,a)||this,r}return t.extendKey="UserTaskModel",t})(cn.RectNodeModel);(function(e){YM(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,a=n.x,r=n.y,l=n.width,c=n.height,y=n.getNodeStyle();return cn.h("svg",{x:a-l/2+5,y:r-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},cn.h("path",{fill:y.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,l=n.width,c=n.height,y=n.radius,h=n.getNodeStyle();return cn.h("g",{},[cn.h("rect",Am(Am({},h),{x:a-l/2,y:r-c/2,rx:y,ry:y,width:l,height:c})),this.getLabelShape()])},t.extendKey="UserTaskNode",t})(cn.RectNode);var qM=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),U0=globalThis&&globalThis.__assign||function(){return U0=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},U0.apply(this,arguments)};(function(e){qM(t,e);function t(n,a){var r=this;return n.id||(n.id="Activity_"+qh()),r=e.call(this,n,a)||this,r}return t.extendKey="ServiceTaskModel",t})(cn.RectNodeModel);(function(e){qM(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,a=n.x,r=n.y,l=n.width,c=n.height,y=n.getNodeStyle();return cn.h("svg",{x:a-l/2+5,y:r-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},cn.h("path",{fill:y.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,l=n.width,c=n.height,y=n.radius,h=n.getNodeStyle();return cn.h("g",{},[cn.h("rect",U0({x:a-l/2,y:r-c/2,rx:y,ry:y,width:l,height:c},h)),this.getLabelShape()])},t.extendKey="ServiceTaskNode",t})(cn.RectNode);var KM=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){KM(t,e);function t(n,a){var r=this;return n.id||(n.id="Flow_"+qh()),r=e.call(this,n,a)||this,r}return t.extendKey="SequenceFlowModel",t})(cn.PolylineEdgeModel);(function(e){KM(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="SequenceFlowEdge",t})(cn.PolylineEdge);var xx={width:40,height:40},Sx={width:40,height:40},Ax={width:40,height:40},Tx={width:100,height:80},Mx={width:100,height:80},fG=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),dG=(globalThis==null?void 0:globalThis._ids)||new fG;function Nx(){return dG.next()}function ZM(e){return Object.prototype.toString.call(e)}function pG(e){return"  ".repeat(e)}function Tm(e){var t=e;return ZM(e)==="[object Object]"?(t={},Object.keys(e).forEach(function(n){var a=n;n.charAt(0)==="-"&&(a=n.substring(1)),t[a]=Tm(e[n])})):Array.isArray(e)&&(t=[],e.forEach(function(n,a){t[a]=Tm(n)})),t}function hG(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Tm(e)).replace(/"/g,"'")}return t}var ph=`	
`;function vm(e,t,n){var a=pG(n),r="";if(t==="#text")return ph+a+e;if(t==="#cdata-section")return ph+a+"<![CDATA["+e+"]]>";if(t==="#comment")return ph+a+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+hG(e)+'"';if(Array.isArray(e))e.forEach(function(h){r+=vm(h,t,n+1)});else if(ZM(e)==="[object Object]"){var l=Object.keys(e),c="",y="";r+=(n===0?"":ph+a)+"<"+t,l.forEach(function(h){h.charAt(0)==="-"?c+=vm(e[h],h,n+1):y+=vm(e[h],h,n+1)}),r+=c+(y!==""?">"+y+(ph+a)+"</"+t+">":" />")}else r+=ph+a+("<"+t+">"+e.toString()+"</"+t+">");return r}function vG(e){var t="";for(var n in e)t+=vm(e[n],n,0);return t}var Xa=function(){};Xa.ObjTree=function(){return this};Xa.ObjTree.VERSION="0.23";Xa.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;Xa.ObjTree.prototype.attr_prefix="-";Xa.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,a=n.parseFromString(e,"application/xml");if(!a)return;t=a.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t)return this.parseDOM(t)};Xa.ObjTree.prototype.parseHTTP=function(e,t,n){var a={};for(var r in t)a[r]=t[r];if(a.method||(typeof a.postBody>"u"&&typeof a.postbody>"u"&&typeof a.parameters>"u"?a.method="get":a.method="post"),n){a.asynchronous=!0;var l=this,c=n,y=a.onComplete;a.onComplete=function(b){var E;b&&b.responseXML&&b.responseXML.documentElement&&(E=l.parseDOM(b.responseXML.documentElement)),c(E,b),y&&y(b)}}else a.asynchronous=!1;var h;if(typeof HTTP<"u"&&HTTP.Request){a.uri=e;var g=new HTTP.Request(a);g&&(h=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,a);g&&(h=g.transport)}if(n)return h;if(h&&h.responseXML&&h.responseXML.documentElement)return this.parseDOM(h.responseXML.documentElement)};Xa.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!=11){var a={};a[e.nodeName]=n,n=a}return n}};Xa.ObjTree.prototype.parseElement=function(e){if(e.nodeType!=7){if(e.nodeType==3||e.nodeType==4||e.nodeType==8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,a={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var l=e.attributes[r].nodeName;if(typeof l=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c&&(l=this.attr_prefix+l,typeof a[l]>"u"&&(a[l]=0),a[l]++,this.addNode(n,l,a[l],c))}}}if(e.childNodes&&e.childNodes.length){var y=!0;n&&(y=!1);for(var r=0;r<e.childNodes.length&&y;r++){var h=e.childNodes[r].nodeType;h==3||h==4||h==8||(y=!1)}if(y){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var l=e.childNodes[r].nodeName;if(typeof l=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof a[l]>"u"&&(a[l]=0),a[l]++,this.addNode(n,l,a[l],c))}}}}else n===null&&(n={});return n}};Xa.ObjTree.prototype.addNode=function(e,t,n,a){this.__force_array[t]?(n==1&&(e[t]=[]),e[t][e[t].length]=a):n==1?e[t]=a:n==2?e[t]=[e[t],a]:e[t][e[t].length]=a};Xa.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};Xa.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],a=[];for(var r in t)if(t.hasOwnProperty(r)){var l=t[r];r.charAt(0)!=this.attr_prefix?typeof l>"u"||l==null?n[n.length]="<"+r+" />":typeof l=="object"&&l.constructor==Array?n[n.length]=this.array_to_xml(r,l):typeof l=="object"?n[n.length]=this.hash_to_xml(r,l):n[n.length]=this.scalar_to_xml(r,l):a[a.length]=" "+r.substring(1)+'="'+this.xml_escape(l)+'"'}var c=a.join(""),y=n.join("");return typeof e>"u"||e==null||(n.length>0?y.match(/\n/)?y="<"+e+c+`>
`+y+"</"+e+`>
`:y="<"+e+c+">"+y+"</"+e+`>
`:y="<"+e+c+` />
`),y};Xa.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],a=0;a<t.length;a++){var r=t[a];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor==Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};Xa.ObjTree.prototype.scalar_to_xml=function(e,t){return e=="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};Xa.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var yG=function(e){return new Xa.ObjTree().parseXML(e)},mG=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),G0=globalThis&&globalThis.__assign||function(){return G0=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},G0.apply(this,arguments)},sg=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,l=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(y){c={error:y}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return l},Gl;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow"})(Gl||(Gl={}));var JM=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],Px=["properties","startPoint","endPoint","pointsList"];function kx(e){var t=e?Px.concat(e):Px;return function(n){function a(r){var l={};return typeof r=="string"?r:Array.isArray(r)?r.map(function(c){return a(c)}):(Object.entries(r).forEach(function(c){var y=sg(c,2),h=y[0],g=y[1];typeof g!="object"?h.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(h)?l[h]=g:l["-"+h]=g:t.includes(h)?l["-"+h]=a(g):l[h]=a(g)}),l)}return a(n)}}function Mm(e){var t={};return Object.entries(e).forEach(function(n){var a=sg(n,2),r=a[0],l=a[1];r.indexOf("-")===0?t[r.substring(1)]=Tm(l):typeof l=="string"?t[r]=l:Object.prototype.toString.call(l)==="[object Object]"?t[r]=Mm(l):Array.isArray(l)?t[r]=l.map(function(c){return Mm(c)}):t[r]=l}),t}function gG(e,t,n){var a=new Map;t.nodes.forEach(function(l){var c,y={"-id":l.id};if(!((c=l.text)===null||c===void 0)&&c.value&&(y["-name"]=l.text.value),l.properties){var h=kx(n)(l.properties);Object.assign(y,h)}a.set(l.id,y),e[l.type]?Array.isArray(e[l.type])?e[l.type].push(y):e[l.type]=[e[l.type],y]:e[l.type]=y});var r=t.edges.map(function(l){var c,y,h=a.get(l.targetNodeId);h["bpmn:incoming"]?Array.isArray(h["bpmn:incoming"])?h["bpmn:incoming"].push(l.id):h["bpmn:incoming"]=[h["bpmn:incoming"],l.id]:h["bpmn:incoming"]=l.id;var g={"-id":l.id,"-sourceRef":l.sourceNodeId,"-targetRef":l.targetNodeId};if(!((c=l.text)===null||c===void 0)&&c.value&&(g["-name"]=(y=l.text)===null||y===void 0?void 0:y.value),l.properties){var b=kx(n)(l.properties);Object.assign(g,b)}return g});t.edges.forEach(function(l){var c=a.get(l.sourceNodeId);c["bpmn:outgoing"]?Array.isArray(c["bpmn:outgoing"])?c["bpmn:outgoing"].push(l.id):c["bpmn:outgoing"]=[c["bpmn:outgoing"],l.id]:c["bpmn:outgoing"]=l.id}),e[Gl.FLOW]=r}function _G(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var a,r=n.id,l=n.pointsList.map(function(y){var h=y.x,g=y.y;return{"-x":h,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":l};return!((a=n.text)===null||a===void 0)&&a.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var a,r=n.id,l=100,c=80,y=n.x,h=n.y,g=ld.shapeConfigMap.get(n.type);g&&(l=g.width,c=g.height),y-=l/2,h-=c/2;var b={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":y,"-y":h,"-width":l,"-height":c}};return!((a=n.text)===null||a===void 0)&&a.value&&(b["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),b})}function bG(e){var t=[],n=[],a=e["bpmn:definitions"];if(a){var r=a["bpmn:process"];Object.keys(r).forEach(function(l){if(l.indexOf("bpmn:")===0){var c=r[l];if(l===Gl.FLOW){var y=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=EG(c,y)}else{var h=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];t=t.concat(wG(c,h,l))}}})}return{nodes:t,edges:n}}function wG(e,t,n){var a=[];if(Array.isArray(e))e.forEach(function(c){var y;Array.isArray(t)?y=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):y=t;var h=Rx(y,n,c);a.push(h)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var l=Rx(r,n,e);a.push(l)}return a}function Rx(e,t,n){var a=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),l=n["-name"],c=ld.shapeConfigMap.get(t);c&&(a+=c.width/2,r+=c.height/2);var y;Object.entries(n).forEach(function(E){var x=sg(E,2),T=x[0],j=x[1];JM.indexOf(T)===-1&&(y||(y={}),y[T]=j)}),y&&(y=Mm(y));var h;if(l&&(h={x:a,y:r,value:l},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var g=e["bpmndi:BPMNLabel"]["dc:Bounds"];h.x=Number(g["-x"])+Number(g["-width"])/2,h.y=Number(g["-y"])+Number(g["-height"])/2}var b={id:e["-bpmnElement"],type:t,x:a,y:r,properties:y};return h&&(b.text=h),b}function EG(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var l;Array.isArray(t)?l=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):l=t,n.push(jx(l,r))});else{var a=void 0;Array.isArray(t)?a=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):a=t,n.push(jx(a,e))}return n}function jx(e,t){var n,a=t["-name"];if(a){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],l=0;a.split(`
`).forEach(function(h){l<h.length&&(l=h.length)}),n={value:a,x:Number(r["-x"])+l*10/2,y:Number(r["-y"])+7}}var c;Object.entries(t).forEach(function(h){var g=sg(h,2),b=g[0],E=g[1];JM.indexOf(b)===-1&&(c||(c={}),c[b]=E)}),c&&(c=Mm(c));var y={id:t["-id"],type:Gl.FLOW,pointsList:e["di:waypoint"].map(function(h){return{x:Number(h["-x"]),y:Number(h["-y"])}}),sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(y.text=n),y}var ld=function(){function e(t){var n=this,a=t.lf;this.adapterOut=function(r,l){var c=G0({},n.processAttributes);gG(c,r,l);var y={"-id":"BPMNPlane_1","-bpmnElement":c["-id"]};_G(y,r);var h=n.definitionAttributes;h["bpmn:process"]=c,h["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":y};var g={"bpmn:definitions":h};return g},this.adapterIn=function(r){if(r)return bG(r)},a.adapterIn=function(r){return n.adapterIn(r)},a.adapterOut=function(r,l){return n.adapterOut(r,l)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+Nx()},this.definitionAttributes={"-id":"Definitions_"+Nx(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();ld.shapeConfigMap.set(Gl.START,{width:xx.width,height:xx.height});ld.shapeConfigMap.set(Gl.END,{width:Sx.width,height:Sx.height});ld.shapeConfigMap.set(Gl.GATEWAY,{width:Ax.width,height:Ax.height});ld.shapeConfigMap.set(Gl.SYSTEM,{width:Tx.width,height:Tx.height});ld.shapeConfigMap.set(Gl.USER,{width:Mx.width,height:Mx.height});(function(e){mG(t,e);function t(n){var a=e.call(this,n)||this;a.adapterXmlIn=function(l){var c=yG(l);return a.adapterIn(c)},a.adapterXmlOut=function(l,c){var y=a.adapterOut(l,c);return vG(y)};var r=n.lf;return r.adapterIn=a.adapterXmlIn,r.adapterOut=a.adapterXmlOut,a}return t.pluginName="bpmnXmlAdapter",t})(ld);var OG=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),xG=(globalThis==null?void 0:globalThis._ids)||new OG;function SG(){return xG.next()}globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();var Cx=globalThis&&globalThis.__assign||function(){return Cx=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Cx.apply(this,arguments)},AG=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,l=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(y){c={error:y}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();var Dx=globalThis&&globalThis.__assign||function(){return Dx=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Dx.apply(this,arguments)},TG=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,l=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(y){c={error:y}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();var Ix=globalThis&&globalThis.__assign||function(){return Ix=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ix.apply(this,arguments)},MG=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,l=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(y){c={error:y}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();var Lx=globalThis&&globalThis.__assign||function(){return Lx=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Lx.apply(this,arguments)},NG=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,l=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(y){c={error:y}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();var Fx=globalThis&&globalThis.__assign||function(){return Fx=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Fx.apply(this,arguments)},PG=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,l=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(y){c={error:y}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;cn.h("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),cn.h("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});cn.h("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"});cn.h("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"});globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();var $x=globalThis&&globalThis.__assign||function(){return $x=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},$x.apply(this,arguments)};globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();var Bx=globalThis&&globalThis.__assign||function(){return Bx=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Bx.apply(this,arguments)},kG=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,l=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(y){c={error:y}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;var $1,pi,QM,ip,Ux,e2,W0,t2,B1,z0,V0,H0={},n2=[],RG=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,U1=Array.isArray;function nd(e,t){for(var n in t)e[n]=t[n];return e}function G1(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function jv(e,t,n){var a,r,l,c={};for(l in t)l=="key"?a=t[l]:l=="ref"?r=t[l]:c[l]=t[l];if(arguments.length>2&&(c.children=arguments.length>3?$1.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(l in e.defaultProps)c[l]===void 0&&(c[l]=e.defaultProps[l]);return ym(e,c,a,r,null)}function ym(e,t,n,a,r){var l={type:e,props:t,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++QM,__i:-1,__u:0};return r==null&&pi.vnode!=null&&pi.vnode(l),l}function W1(e){return e.children}function Ah(e,t){this.props=e,this.context=t}function Lh(e,t){if(t==null)return e.__?Lh(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Lh(e):null}function r2(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return r2(e)}}function Gx(e){(!e.__d&&(e.__d=!0)&&ip.push(e)&&!Nm.__r++||Ux!==pi.debounceRendering)&&((Ux=pi.debounceRendering)||e2)(Nm)}function Nm(){var e,t,n,a,r,l,c,y;for(ip.sort(W0);e=ip.shift();)e.__d&&(t=ip.length,a=void 0,l=(r=(n=e).__v).__e,c=[],y=[],n.__P&&((a=nd({},r)).__v=r.__v+1,pi.vnode&&pi.vnode(a),a2(n.__P,a,r,n.__n,n.__P.namespaceURI,32&r.__u?[l]:null,c,l??Lh(r),!!(32&r.__u),y),a.__v=r.__v,a.__.__k[a.__i]=a,DG(c,a,y),a.__e!=l&&r2(a)),ip.length>t&&ip.sort(W0));Nm.__r=0}function o2(e,t,n,a,r,l,c,y,h,g,b){var E,x,T,j,N,M,D=a&&a.__k||n2,k=t.length;for(h=jG(n,t,D,h,k),E=0;E<k;E++)(T=n.__k[E])!=null&&(x=T.__i===-1?H0:D[T.__i]||H0,T.__i=E,M=a2(e,T,x,r,l,c,y,h,g,b),j=T.__e,T.ref&&x.ref!=T.ref&&(x.ref&&z1(x.ref,null,T),b.push(T.ref,T.__c||j,T)),N==null&&j!=null&&(N=j),4&T.__u||x.__k===T.__k?h=i2(T,h,e):typeof T.type=="function"&&M!==void 0?h=M:j&&(h=j.nextSibling),T.__u&=-7);return n.__e=N,h}function jG(e,t,n,a,r){var l,c,y,h,g,b=n.length,E=b,x=0;for(e.__k=new Array(r),l=0;l<r;l++)(c=t[l])!=null&&typeof c!="boolean"&&typeof c!="function"?(h=l+x,(c=e.__k[l]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?ym(null,c,null,null,null):U1(c)?ym(W1,{children:c},null,null,null):c.constructor===void 0&&c.__b>0?ym(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,y=null,(g=c.__i=CG(c,n,h,E))!==-1&&(E--,(y=n[g])&&(y.__u|=2)),y==null||y.__v===null?(g==-1&&x--,typeof c.type!="function"&&(c.__u|=4)):g!=h&&(g==h-1?x--:g==h+1?x++:(g>h?x--:x++,c.__u|=4))):e.__k[l]=null;if(E)for(l=0;l<b;l++)(y=n[l])!=null&&!(2&y.__u)&&(y.__e==a&&(a=Lh(y)),u2(y,y));return a}function i2(e,t,n){var a,r;if(typeof e.type=="function"){for(a=e.__k,r=0;a&&r<a.length;r++)a[r]&&(a[r].__=e,t=i2(a[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=Lh(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function CG(e,t,n,a){var r,l,c=e.key,y=e.type,h=t[n];if(h===null||h&&c==h.key&&y===h.type&&!(2&h.__u))return n;if(a>(h!=null&&!(2&h.__u)?1:0))for(r=n-1,l=n+1;r>=0||l<t.length;){if(r>=0){if((h=t[r])&&!(2&h.__u)&&c==h.key&&y===h.type)return r;r--}if(l<t.length){if((h=t[l])&&!(2&h.__u)&&c==h.key&&y===h.type)return l;l++}}return-1}function Wx(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||RG.test(t)?n:n+"px"}function sm(e,t,n,a,r){var l;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof a=="string"&&(e.style.cssText=a=""),a)for(t in a)n&&t in n||Wx(e.style,t,"");if(n)for(t in n)a&&n[t]===a[t]||Wx(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")l=t!=(t=t.replace(t2,"$1")),t=t.toLowerCase()in e||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+l]=n,n?a?n.u=a.u:(n.u=B1,e.addEventListener(t,l?V0:z0,l)):e.removeEventListener(t,l?V0:z0,l);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function zx(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=B1++;else if(t.t<n.u)return;return n(pi.event?pi.event(t):t)}}}function a2(e,t,n,a,r,l,c,y,h,g){var b,E,x,T,j,N,M,D,k,F,te,V,z,J,K,B,H,ne=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(h=!!(32&n.__u),l=[y=t.__e=n.__e]),(b=pi.__b)&&b(t);e:if(typeof ne=="function")try{if(D=t.props,k="prototype"in ne&&ne.prototype.render,F=(b=ne.contextType)&&a[b.__c],te=b?F?F.props.value:b.__:a,n.__c?M=(E=t.__c=n.__c).__=E.__E:(k?t.__c=E=new ne(D,te):(t.__c=E=new Ah(D,te),E.constructor=ne,E.render=LG),F&&F.sub(E),E.props=D,E.state||(E.state={}),E.context=te,E.__n=a,x=E.__d=!0,E.__h=[],E._sb=[]),k&&E.__s==null&&(E.__s=E.state),k&&ne.getDerivedStateFromProps!=null&&(E.__s==E.state&&(E.__s=nd({},E.__s)),nd(E.__s,ne.getDerivedStateFromProps(D,E.__s))),T=E.props,j=E.state,E.__v=t,x)k&&ne.getDerivedStateFromProps==null&&E.componentWillMount!=null&&E.componentWillMount(),k&&E.componentDidMount!=null&&E.__h.push(E.componentDidMount);else{if(k&&ne.getDerivedStateFromProps==null&&D!==T&&E.componentWillReceiveProps!=null&&E.componentWillReceiveProps(D,te),!E.__e&&(E.shouldComponentUpdate!=null&&E.shouldComponentUpdate(D,E.__s,te)===!1||t.__v==n.__v)){for(t.__v!=n.__v&&(E.props=D,E.state=E.__s,E.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(X){X&&(X.__=t)}),V=0;V<E._sb.length;V++)E.__h.push(E._sb[V]);E._sb=[],E.__h.length&&c.push(E);break e}E.componentWillUpdate!=null&&E.componentWillUpdate(D,E.__s,te),k&&E.componentDidUpdate!=null&&E.__h.push(function(){E.componentDidUpdate(T,j,N)})}if(E.context=te,E.props=D,E.__P=e,E.__e=!1,z=pi.__r,J=0,k){for(E.state=E.__s,E.__d=!1,z&&z(t),b=E.render(E.props,E.state,E.context),K=0;K<E._sb.length;K++)E.__h.push(E._sb[K]);E._sb=[]}else do E.__d=!1,z&&z(t),b=E.render(E.props,E.state,E.context),E.state=E.__s;while(E.__d&&++J<25);E.state=E.__s,E.getChildContext!=null&&(a=nd(nd({},a),E.getChildContext())),k&&!x&&E.getSnapshotBeforeUpdate!=null&&(N=E.getSnapshotBeforeUpdate(T,j)),y=o2(e,U1(B=b!=null&&b.type===W1&&b.key==null?b.props.children:b)?B:[B],t,n,a,r,l,c,y,h,g),E.base=t.__e,t.__u&=-161,E.__h.length&&c.push(E),M&&(E.__E=E.__=null)}catch(X){if(t.__v=null,h||l!=null)if(X.then){for(t.__u|=h?160:128;y&&y.nodeType==8&&y.nextSibling;)y=y.nextSibling;l[l.indexOf(y)]=null,t.__e=y}else for(H=l.length;H--;)G1(l[H]);else t.__e=n.__e,t.__k=n.__k;pi.__e(X,t,n)}else l==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):y=t.__e=IG(n.__e,t,n,a,r,l,c,h,g);return(b=pi.diffed)&&b(t),128&t.__u?void 0:y}function DG(e,t,n){for(var a=0;a<n.length;a++)z1(n[a],n[++a],n[++a]);pi.__c&&pi.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(l){l.call(r)})}catch(l){pi.__e(l,r.__v)}})}function IG(e,t,n,a,r,l,c,y,h){var g,b,E,x,T,j,N,M=n.props,D=t.props,k=t.type;if(k=="svg"?r="http://www.w3.org/2000/svg":k=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),l!=null){for(g=0;g<l.length;g++)if((T=l[g])&&"setAttribute"in T==!!k&&(k?T.localName==k:T.nodeType==3)){e=T,l[g]=null;break}}if(e==null){if(k==null)return document.createTextNode(D);e=document.createElementNS(r,k,D.is&&D),y&&(pi.__m&&pi.__m(t,l),y=!1),l=null}if(k===null)M===D||y&&e.data===D||(e.data=D);else{if(l=l&&$1.call(e.childNodes),M=n.props||H0,!y&&l!=null)for(M={},g=0;g<e.attributes.length;g++)M[(T=e.attributes[g]).name]=T.value;for(g in M)if(T=M[g],g!="children"){if(g=="dangerouslySetInnerHTML")E=T;else if(!(g in D)){if(g=="value"&&"defaultValue"in D||g=="checked"&&"defaultChecked"in D)continue;sm(e,g,null,T,r)}}for(g in D)T=D[g],g=="children"?x=T:g=="dangerouslySetInnerHTML"?b=T:g=="value"?j=T:g=="checked"?N=T:y&&typeof T!="function"||M[g]===T||sm(e,g,T,M[g],r);if(b)y||E&&(b.__html===E.__html||b.__html===e.innerHTML)||(e.innerHTML=b.__html),t.__k=[];else if(E&&(e.innerHTML=""),o2(e,U1(x)?x:[x],t,n,a,k=="foreignObject"?"http://www.w3.org/1999/xhtml":r,l,c,l?l[0]:n.__k&&Lh(n,0),y,h),l!=null)for(g=l.length;g--;)G1(l[g]);y||(g="value",k=="progress"&&j==null?e.removeAttribute("value"):j!==void 0&&(j!==e[g]||k=="progress"&&!j||k=="option"&&j!==M[g])&&sm(e,g,j,M[g],r),g="checked",N!==void 0&&N!==e[g]&&sm(e,g,N,M[g],r))}return e}function z1(e,t,n){try{if(typeof e=="function"){var a=typeof e.__u=="function";a&&e.__u(),a&&t==null||(e.__u=e(t))}else e.current=t}catch(r){pi.__e(r,n)}}function u2(e,t,n){var a,r;if(pi.unmount&&pi.unmount(e),(a=e.ref)&&(a.current&&a.current!==e.__e||z1(a,null,t)),(a=e.__c)!=null){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(l){pi.__e(l,t)}a.base=a.__P=null}if(a=e.__k)for(r=0;r<a.length;r++)a[r]&&u2(a[r],t,n||typeof e.type!="function");n||G1(e.__e),e.__c=e.__=e.__e=void 0}function LG(e,t,n){return this.constructor(e,n)}$1=n2.slice,pi={__e:function(e,t,n,a){for(var r,l,c;t=t.__;)if((r=t.__c)&&!r.__)try{if((l=r.constructor)&&l.getDerivedStateFromError!=null&&(r.setState(l.getDerivedStateFromError(e)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,a||{}),c=r.__d),c)return r.__E=r}catch(y){e=y}throw e}},QM=0,Ah.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=nd({},this.state),typeof e=="function"&&(e=e(nd({},n),this.props)),e&&nd(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Gx(this))},Ah.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Gx(this))},Ah.prototype.render=W1,ip=[],e2=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,W0=function(e,t){return e.__v.__b-t.__v.__b},Nm.__r=0,t2=/(PointerCapture)$|Capture$/i,B1=0,z0=zx(!1),V0=zx(!0);var Cv=globalThis&&globalThis.__assign||function(){return Cv=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Cv.apply(this,arguments)};function V1(e){var t=e.x,n=e.y,a=e.width,r=e.height,l=e.radius,c=e.className,y=t-a/2,h=n-r/2,g=Cv(Cv({width:10,height:10,cx:0,cy:0,rx:l||0,ry:l||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},e),{x:y,y:h});return cn.h("rect",Cv({},g))}V1.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var Oh;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.HTML_NODE="html-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(Oh||(Oh={}));var FG=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),ap=globalThis&&globalThis.__assign||function(){return ap=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ap.apply(this,arguments)},$G=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,l=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(y){c={error:y}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return l},BG=cn.LogicFlowUtil.StepDrag,UG=function(e){FG(t,e);function t(n){var a=e.call(this)||this;return a.updatePosition=function(r){var l=r.deltaX,c=r.deltaY,y=a.nodeModel,h=y.x,g=y.y;a.nodeModel.x=h+l/2,a.nodeModel.y=g+c/2,a.nodeModel.moveText(l/2,c/2)},a.getResize=function(r){var l=r.index,c=r.deltaX,y=r.deltaY,h=r.width,g=r.height,b=r.PCTResizeInfo,E=r.pct,x=E===void 0?1:E,T=r.freezeWidth,j=T===void 0?!1:T,N=r.freezeHeight,M=N===void 0?!1:N,D={width:h,height:g,deltaX:c,deltaY:y};if(b){var k=4,F=0,te=0;switch(l){case 0:te=(c*-1-y)/k;break;case 1:te=(c-y)/k;break;case 2:te=(c+y)/k;break;case 3:te=(c*-1+y)/k;break}te!==0&&(F=Math.round(te/b.ResizeBasis.basisHeight*1e5)/1e3),b.ResizePCT.widthPCT=Math.max(Math.min(b.ResizePCT.widthPCT+F,b.ScaleLimit.maxScaleLimit),b.ScaleLimit.minScaleLimit),b.ResizePCT.hightPCT=Math.max(Math.min(b.ResizePCT.hightPCT+F,b.ScaleLimit.maxScaleLimit),b.ScaleLimit.minScaleLimit);var V=Math.round(b.ResizePCT.widthPCT*b.ResizeBasis.basisWidth/100),z=Math.round(b.ResizePCT.hightPCT*b.ResizeBasis.basisHeight/100);switch(l){case 0:c=h-V,y=g-z;break;case 1:c=V-h,y=g-z;break;case 2:c=V-h,y=z-g;break;case 3:c=h-V,y=z-g;break}return D.width=V,D.height=z,D.deltaX=c/x,D.deltaY=y/x,D}switch(l){case 0:D.width=j?h:h-c*x,D.height=M?g:g-y*x;break;case 1:D.width=j?h:h+c*x,D.height=M?g:g-y*x;break;case 2:D.width=j?h:h+c*x,D.height=M?g:g+y*x;break;case 3:D.width=j?h:h-c*x,D.height=M?g:g+y*x;break}return D},a.updateEdgePointByAnchors=function(){var r=a.nodeModel,l=r.id,c=r.anchors,y=a.getNodeEdges(l);y.sourceEdges.forEach(function(h){var g=c.find(function(b){return b.id===h.sourceAnchorId});h.updateStartPoint({x:g.x,y:g.y})}),y.targetEdges.forEach(function(h){var g=c.find(function(b){return b.id===h.targetAnchorId});h.updateEndPoint({x:g.x,y:g.y})})},a.updateRect=function(r){var l=r.deltaX,c=r.deltaY,y=a.nodeModel,h=y.id,g=y.x,b=y.y,E=y.width,x=y.height,T=y.radius,j=y.PCTResizeInfo,N=a.nodeModel,M=N.minWidth,D=N.minHeight,k=N.maxWidth,F=N.maxHeight,te=a.index,V=M===k,z=D===F,J=a.getResize({index:te,deltaX:l,deltaY:c,width:E,height:x,PCTResizeInfo:j,pct:1,freezeWidth:V,freezeHeight:z});if(J.width<M||J.width>k||J.height<D||J.height>F){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:V?0:J.deltaX,deltaY:z?0:J.deltaY}),a.nodeModel.width=J.width,a.nodeModel.height=J.height,a.nodeModel.setProperties({nodeSize:{width:J.width,height:J.height}}),a.getNodeEdges(h);var K={x:g,y:b,width:E,height:x,radius:T},B={x:a.nodeModel.x,y:a.nodeModel.y,width:a.nodeModel.width,height:a.nodeModel.height,radius:T};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:K,afterNode:B})},a.updateEllipse=function(r){var l=r.deltaX,c=r.deltaY,y=a.nodeModel,h=y.id,g=y.rx,b=y.ry,E=y.x,x=y.y,T=y.PCTResizeInfo,j=a.index,N=a.nodeModel,M=N.minWidth,D=N.minHeight,k=N.maxWidth,F=N.maxHeight,te=M===k,V=D===F,z=g,J=b,K=a.getResize({index:j,deltaX:l,deltaY:c,width:z,height:J,PCTResizeInfo:T,pct:1/2,freezeWidth:te,freezeHeight:V});if(K.width<M/2||K.width>k/2||K.height<D/2||K.height>F/2){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:te?0:K.deltaX,deltaY:V?0:K.deltaY}),a.nodeModel.rx=K.width,a.nodeModel.ry=K.height,a.nodeModel.setProperties({nodeSize:{rx:K.width,ry:K.height}}),a.getNodeEdges(h);var B={x:E,y:x},H={rx:K.width,ry:K.height,x:a.nodeModel.x,y:a.nodeModel.y};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:ap(ap({},B),{rx:g,ry:b}),afterNode:H})},a.updateDiamond=function(r){var l=r.deltaX,c=r.deltaY,y=a.nodeModel;y.id;var h=y.rx,g=y.ry,b=y.x,E=y.y,x=y.PCTResizeInfo,T=a.index,j=a.nodeModel,N=j.minWidth,M=j.minHeight,D=j.maxWidth,k=j.maxHeight,F=N===D,te=M===k,V=h,z=g,J=a.getResize({index:T,deltaX:l,deltaY:c,width:V,height:z,PCTResizeInfo:x,pct:1/2,freezeWidth:F,freezeHeight:te});if(J.width<N/2||J.width>D/2||J.height<M/2||J.height>k/2){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:F?0:J.deltaX,deltaY:te?0:J.deltaY}),a.nodeModel.rx=J.width,a.nodeModel.ry=J.height,a.nodeModel.setProperties({nodeSize:{rx:J.width,ry:J.height}});var K={x:b,y:E,rx:h,ry:g},B={rx:J.width,ry:J.height,x:a.nodeModel.x,y:a.nodeModel.y};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:K,afterNode:B})},a.eventEmit=function(r){var l=r.beforeNode,c=r.afterNode,y=a.nodeModel,h=y.id,g=y.modelType,b=y.type,E=ap({id:h,modelType:g,type:b},l),x=ap({id:h,modelType:g,type:b},c);a.graphModel.eventCenter.emit("node:resize",{oldNodeSize:E,newNodeSize:x})},a.onDragging=function(r){var l,c=r.deltaX,y=r.deltaY,h=a.graphModel.transformModel,g=a.nodeModel.modelType;l=$G(h.fixDeltaXY(c,y),2),c=l[0],y=l[1],g===Oh.RECT_NODE||g===Oh.HTML_NODE?a.updateRect({deltaX:c,deltaY:y}):g===Oh.ELLIPSE_NODE?a.updateEllipse({deltaX:c,deltaY:y}):g===Oh.DIAMOND_NODE&&a.updateDiamond({deltaX:c,deltaY:y})},a.onDragEnd=function(){var r=a.graphModel.gridSize,l=r===void 0?1:r,c=l*Math.round(a.nodeModel.x/l),y=l*Math.round(a.nodeModel.y/l);a.nodeModel.moveTo(c,y),a.updateEdgePointByAnchors()},a.index=n.index,a.nodeModel=n.model,a.graphModel=n.graphModel,a.state={},a.dragHandler=new BG({onDragging:a.onDragging,onDragEnd:a.onDragEnd,step:1}),a}return t.prototype.getNodeEdges=function(n){for(var a=this.graphModel,r=a.edges,l=[],c=[],y=0;y<r.length;y++){var h=r[y];h.sourceNodeId===n?l.push(h):r[y].targetNodeId===n&&c.push(h)}return{sourceEdges:l,targetEdges:c}},t.prototype.render=function(){var n=this.props,a=n.x,r=n.y,l=n.index,c=n.model,y=c.getControlPointStyle();return jv("g",{className:"lf-resize-control-"+l},jv(V1,ap({className:"lf-node-control"},{x:a,y:r},y,{onMouseDown:this.dragHandler.handleMouseDown})))},t}(Ah),GG=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Pm=globalThis&&globalThis.__assign||function(){return Pm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Pm.apply(this,arguments)},lg=function(e){GG(t,e);function t(){var n=e.call(this)||this;return n.state={},n}return t.prototype.getResizeControl=function(){var n=this.props,a=n.model,r=n.graphModel,l=a.x,c=a.y,y=a.width,h=a.height,g={minX:l-y/2,minY:c-h/2,maxX:l+y/2,maxY:c+h/2},b=g.minX,E=g.minY,x=g.maxX,T=g.maxY,j=[{x:b,y:E},{x,y:E},{x,y:T},{x:b,y:T}];return j.map(function(N,M){return jv(UG,Pm({index:M},N,{model:a,graphModel:r}))})},t.prototype.getGroupSolid=function(){var n=this.props.model,a=n.x,r=n.y,l=n.width,c=n.height,y=n.getResizeOutlineStyle();return jv(V1,Pm({fill:"none"},y,{x:a,y:r,width:l,height:c}))},t.prototype.render=function(){return jv("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},t}(Ah),s2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),WG=function(e){s2(t,e);function t(n,a){var r=e.call(this,n,a)||this,l=r.properties.nodeSize;return l&&(r.width=l.width,r.height=l.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.resize=function(n,a){console.log(n,a)},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},l={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:l}}else delete this.PCTResizeInfo},t}(cn.RectNodeModel),zG=function(e){s2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return cn.h(lg,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t}(cn.RectNode),l2={type:"rect",view:zG,model:WG},c2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){c2(t,e);function t(n,a){var r=e.call(this,n,a)||this,l=r.properties.nodeSize;return l&&(r.rx=l.rx,r.ry=l.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},l={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:l}}else delete this.PCTResizeInfo},t})(cn.EllipseNodeModel);(function(e){c2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return cn.h(lg,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),a.isSelected&&!r?this.getControlGroup():"")},t})(cn.EllipseNode);var X0=globalThis&&globalThis.__assign||function(){return X0=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},X0.apply(this,arguments)};function VG(e){var t=e.fillOpacity,n=t===void 0?1:t,a=e.strokeWidth,r=a===void 0?1:a,l=e.strokeOpacity,c=l===void 0?1:l,y=e.fill,h=y===void 0?"transparent":y,g=e.stroke,b=g===void 0?"#000":g,E=e.points,x=e.className,T=x===void 0?"lf-basic-shape":x,j={fill:h,fillOpacity:n,strokeWidth:r,stroke:b,strokeOpacity:c,points:"",className:T};return j.points=E.map(function(N){return N.join(",")}).join(" "),cn.h("polygon",X0({},j))}var f2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Y0=globalThis&&globalThis.__assign||function(){return Y0=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Y0.apply(this,arguments)};(function(e){f2(t,e);function t(n,a){var r=e.call(this,n,a)||this,l=r.properties.nodeSize;return l&&(r.rx=l.rx,r.ry=l.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},l={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:l}}else delete this.PCTResizeInfo},t})(cn.DiamondNodeModel);(function(e){f2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return cn.h(lg,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){var n=this.props.model,a=n.points,r=n.getNodeStyle();return cn.h("g",null,cn.h(VG,Y0({},r,{points:a})))},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t})(cn.DiamondNode);var d2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),HG=function(e){d2(t,e);function t(n,a){var r=e.call(this,n,a)||this,l=r.properties.nodeSize;return l&&(r.width=l.width,r.height=l.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},l={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:l}}else delete this.PCTResizeInfo},t}(cn.HtmlNodeModel),XG=function(e){d2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return cn.h(lg,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t}(cn.HtmlNode),p2={type:"html",view:XG,model:HG},h2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),km=globalThis&&globalThis.__assign||function(){return km=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},km.apply(this,arguments)},YG=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,l=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(y){c={error:y}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return l},qG=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(YG(arguments[t]));return e},Vx=500,Hx=300,KG=-1e4;(function(e){h2(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isGroup=!0,n.unfoldedWidth=Vx,n.unfoldedHight=Hx,n.childrenLastFoldStatus={},n}return t.prototype.initNodeData=function(n){var a=this;e.prototype.initNodeData.call(this,n);var r=[];Array.isArray(n.children)&&(r=n.children),this.children=new Set(r),this.width=Vx,this.height=Hx,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=KG,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){a.isFolded&&a.foldGroup(a.isFolded)})},t.prototype.getResizeOutlineStyle=function(){var n=e.prototype.getResizeOutlineStyle.call(this);return n.stroke="none",n},t.prototype.foldGroup=function(n){var a=this;if(n!==this.isFolded){this.setProperty("isFolded",n),this.isFolded=n,n?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var r=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(l){var c=a.graphModel.getElement(l),y=c.isFolded;if(c.isGroup&&!c.isFolded&&c.foldGroup(n),c.isGroup&&!n){var h=a.childrenLastFoldStatus[l];h!==void 0&&h!==c.isFolded&&c.foldGroup(h)}a.childrenLastFoldStatus[l]=y,c.visible=!n,r=r.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(n,r)}},t.prototype.getAnchorStyle=function(n){var a=e.prototype.getAnchorStyle.call(this,n);return a.stroke="transparent",a.fill="transparent",a.hover.fill="transparent",a.hover.stroke="transparent",a},t.prototype.foldEdge=function(n,a){var r=this;a.forEach(function(l,c){var y=l.id,h=l.sourceNodeId,g=l.targetNodeId,b=l.startPoint,E=l.endPoint,x=l.type,T=l.text,j=l.getProperties(),N={id:y+"__"+c,sourceNodeId:h,targetNodeId:g,startPoint:b,endPoint:E,type:x,properties:j,text:T==null?void 0:T.value};l.virtual&&r.graphModel.deleteEdgeById(l.id);var M=r.graphModel.group.getNodeGroup(g);M||(M=r.graphModel.getNodeModelById(g));var D=r.graphModel.group.getNodeGroup(h);D||(D=r.graphModel.getNodeModelById(h)),n&&l.visible!==!1&&(r.children.has(h)||r.id===h?(N.startPoint=void 0,N.sourceNodeId=r.id):(N.endPoint=void 0,N.targetNodeId=r.id),(M.id!==r.id||D.id!==r.id)&&r.createVirtualEdge(N),l.visible=!1),!n&&l.visible===!1&&(M&&M.isGroup&&M.isFolded?(N.targetNodeId=M.id,N.endPoint=void 0,r.createVirtualEdge(N)):D&&D.isGroup&&D.isFolded?(N.sourceNodeId=D.id,N.startPoint=void 0,r.createVirtualEdge(N)):l.visible=!0)})},t.prototype.createVirtualEdge=function(n){n.pointsList=void 0;var a=this.graphModel.addEdge(n);a.virtual=!0,a.text.editable=!1,a.isFoldedEdge=!0},t.prototype.isInRange=function(n){var a=n.x1,r=n.y1,l=n.x2,c=n.y2;return a>=this.x-this.width/2&&l<=this.x+this.width/2&&r>=this.y-this.height/2&&c<=this.y+this.height/2},t.prototype.isAllowMoveTo=function(n){var a=n.x1,r=n.y1,l=n.x2,c=n.y2;return{x:a>=this.x-this.width/2&&l<=this.x+this.width/2,y:r>=this.y-this.height/2&&c<=this.y+this.height/2}},t.prototype.setAllowAppendChild=function(n){this.setProperty("groupAddable",n)},t.prototype.addChild=function(n){this.children.add(n),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},t.prototype.removeChild=function(n){this.children.delete(n),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},t.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},t.prototype.getData=function(){var n=this,a=e.prototype.getData.call(this);a.children=[],this.children.forEach(function(l){var c=n.graphModel.getNodeModelById(l);c&&!c.virtual&&a.children.push(l)});var r=a.properties;return delete r.groupAddable,delete r.isFolded,a},t.prototype.getHistoryData=function(){var n=e.prototype.getData.call(this);n.children=qG(this.children),n.isGroup=!0;var a=n.properties;return delete a.groupAddable,a.isFolded&&(n.x=n.x+this.unfoldedWidth/2-this.foldedWidth/2,n.y=n.y+this.unfoldedHight/2-this.foldedHeight/2),n},t.prototype.isAllowAppendIn=function(n){return!0},t.prototype.toBack=function(){this.zIndex--},t})(l2.model);(function(e){h2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props.model,a=n.resizable,r=n.properties;return a&&!r.isFolded?e.prototype.getControlGroup.call(this):null},t.prototype.getAddableShape=function(){var n=this.props.model,a=n.width,r=n.height,l=n.x,c=n.y,y=n.radius,h=n.properties;if(!h.groupAddable)return null;var g=this.props.model.getNodeStyle().strokeWidth,b=this.props.model.getAddableOutlineStyle(),E=a+g+8,x=r+g+8;return cn.h("rect",km(km({},b),{width:E,height:x,x:l-E/2,y:c-x/2,rx:y,ry:y}))},t.prototype.getFoldIcon=function(){var n=this.props.model,a=n.x-n.width/2+5,r=n.y-n.height/2+5;if(!n.foldable)return null;var l=cn.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:n.properties.isFolded?"M "+(a+3)+","+(r+6)+" "+(a+11)+","+(r+6)+" M"+(a+7)+","+(r+2)+" "+(a+7)+","+(r+10):"M "+(a+3)+","+(r+6)+" "+(a+11)+","+(r+6)+" "});return cn.h("g",{},[cn.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:n.x-n.width/2+5,y:n.y-n.height/2+5,onClick:function(){n.foldGroup(!n.properties.isFolded)}}),l])},t.prototype.getResizeShape=function(){return cn.h("g",{},[this.getAddableShape(),e.prototype.getResizeShape.call(this),this.getFoldIcon()])},t})(l2.view);var Xx=globalThis&&globalThis.__assign||function(){return Xx=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Xx.apply(this,arguments)};globalThis&&globalThis.__rest;var ZG=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,l=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(y){c={error:y}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();var Yx=globalThis&&globalThis.__assign||function(){return Yx=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Yx.apply(this,arguments)};globalThis&&globalThis.__values;var qx=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Dv=globalThis&&globalThis.__assign||function(){return Dv=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Dv.apply(this,arguments)};function JG(e){var t=function(a){qx(r,a);function r(l,c){var y=this;l.id||(l.id="Flow_"+SG());var h=Dv(Dv(Dv({},e||{}),l.properties),{isDefaultFlow:!1});return l.properties=h,y=a.call(this,l,c)||this,y}return r.extendKey="SequenceFlowModel",r}(cn.PolylineEdgeModel),n=function(a){qx(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getStartArrow=function(){var l=this.props.model,c=l.properties.isDefaultFlow;return c?cn.h("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):cn.h("path",{d:""})},r.extendKey="SequenceFlowEdge",r}(cn.PolylineEdge);return{type:"bpmn:sequenceFlow",view:n,model:t}}JG();globalThis&&globalThis.__read;var Kx={width:40,height:40},Zx={width:40,height:40},Jx={width:100,height:80},Rm={width:100,height:80},Qx={width:100,height:80},eS={width:100,height:80},tS={width:100,height:80},nS={width:100,height:80},rS={width:100,height:80},oS={width:100,height:80},Ya=function(){};Ya.ObjTree=function(){return this};Ya.ObjTree.VERSION="0.23";Ya.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;Ya.ObjTree.prototype.attr_prefix="-";Ya.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,a=n.parseFromString(e,"application/xml");if(!a)return;t=a.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t){var r=this.parseDOM(t);return r}};Ya.ObjTree.prototype.parseHTTP=function(e,t,n){var a={};for(var r in t)a[r]=t[r];if(a.method||(typeof a.postBody>"u"&&typeof a.postbody>"u"&&typeof a.parameters>"u"?a.method="get":a.method="post"),n){a.asynchronous=!0;var l=this,c=n,y=a.onComplete;a.onComplete=function(b){var E;b&&b.responseXML&&b.responseXML.documentElement&&(E=l.parseDOM(b.responseXML.documentElement)),c(E,b),y&&y(b)}}else a.asynchronous=!1;var h;if(typeof HTTP<"u"&&HTTP.Request){a.uri=e;var g=new HTTP.Request(a);g&&(h=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,a);g&&(h=g.transport)}if(n)return h;if(h&&h.responseXML&&h.responseXML.documentElement)return this.parseDOM(h.responseXML.documentElement)};Ya.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!==11){var a={};a[e.nodeName]=n,n=a}return n}};Ya.ObjTree.prototype.parseElement=function(e){if(e.nodeType!==7){if(e.nodeType===3||e.nodeType===4||e.nodeType===8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,a={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var l=e.attributes[r].nodeName;if(typeof l=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c!=null&&(l=this.attr_prefix+l,typeof a[l]>"u"&&(a[l]=0),a[l]++,this.addNode(n,l,a[l],c))}}}if(e.childNodes&&e.childNodes.length){var y=!0;n&&(y=!1);for(var r=0;r<e.childNodes.length&&y;r++){var h=e.childNodes[r].nodeType;h===3||h===4||h===8||(y=!1)}if(y){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var l=e.childNodes[r].nodeName;if(typeof l=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof a[l]>"u"&&(a[l]=0),a[l]++,this.addNode(n,l,a[l],c))}}}}else n===null&&(n={});return n}};Ya.ObjTree.prototype.addNode=function(e,t,n,a){this.__force_array[t]?(n===1&&(e[t]=[]),e[t][e[t].length]=a):n===1?e[t]=a:n===2?e[t]=[e[t],a]:e[t][e[t].length]=a};Ya.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};Ya.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],a=[];for(var r in t)if(t!=null&&t.hasOwnProperty(r)){var l=t[r];r.charAt(0)!==this.attr_prefix?typeof l>"u"||l==null?n[n.length]="<"+r+" />":typeof l=="object"&&l.constructor===Array?n[n.length]=this.array_to_xml(r,l):typeof l=="object"?n[n.length]=this.hash_to_xml(r,l):n[n.length]=this.scalar_to_xml(r,l):a[a.length]=" "+r.substring(1)+'="'+this.xml_escape(l)+'"'}var c=a.join(""),y=n.join("");return typeof e>"u"||e==null||(n.length>0?y.match(/\n/)?y="<"+e+c+`>
`+y+"</"+e+`>
`:y="<"+e+c+">"+y+"</"+e+`>
`:y="<"+e+c+` />
`),y};Ya.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],a=0;a<t.length;a++){var r=t[a];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor===Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};Ya.ObjTree.prototype.scalar_to_xml=function(e,t){return e==="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};Ya.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var QG=function(e){return new Ya.ObjTree().parseXML(e)};function v2(e){return Object.prototype.toString.call(e)}function iS(e){return"  ".repeat(e)}function jm(e){return v2(e)==="[object Object]"?Object.keys(e).reduce(function(t,n){var a=n;return n.charAt(0)==="-"&&(a=n.substring(1)),t[a]=jm(e[n]),t},{}):Array.isArray(e)?e.map(function(t){return jm(t)}):e}function e7(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(jm(e)).replace(/"/g,"'")}return t}var aS=`	
`;function mm(e,t,n){var a=iS(n),r="",l=aS+a;if(t==="-json")return"";if(t==="#text")return l+e;if(t==="#cdata-section")return l+"<![CDATA["+e+"]]>";if(t==="#comment")return l+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+e7(e)+'"';if(Array.isArray(e))r+=e.map(function(g){return mm(g,t,n+1)}).join("");else if(v2(e)==="[object Object]"){var c=Object.keys(e),y="",h=e["-json"]?aS+iS(n+1)+e["-json"]:"";r+=(n===0?"":l)+"<"+t,c.forEach(function(g){g.charAt(0)==="-"?y+=mm(e[g],g,n+1):h+=mm(e[g],g,n+1)}),r+=y+(h!==""?">"+h+l+"</"+t+">":" />")}else r+=l+"<"+t+">"+e.toString()+"</"+t+">";return r}function t7(e){var t="";for(var n in e)t+=mm(e[n],n,0);return t}var n7=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),q0=globalThis&&globalThis.__assign||function(){return q0=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},q0.apply(this,arguments)},uS=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},H1=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Kh=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,l=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(y){c={error:y}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return l},Th=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Kh(arguments[t]));return e},Va;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",e.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",e.BOUNDARY="bpmn:boundaryEvent",e.PARALLEL_GATEWAY="bpmn:parallelGateway",e.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",e.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow",e.SUBPROCESS="bpmn:subProcess"})(Va||(Va={}));var y2=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],r7=["properties","startPoint","endPoint","pointsList"],Cm={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},m2=function(e,t){var n=Object.keys(t||{});return n.forEach(function(a){if(e[a]){var r=t[a],l=r.in,c=r.out;l&&(e[a].in=l),c&&(e[a].out=c)}else e[a]=t[a]}),e},ys={"bpmn:startEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=ys[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateCatchEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=ys[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateThrowEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=ys[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:boundaryEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=ys[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:sequenceFlow":{out:function(e){var t=e.properties,n=t.expressionType,a=t.condition;return a?n==="cdata"?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'+a+"}]]></bpmn:conditionExpression>"}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'+a+"</bpmn:conditionExpression>"}:{json:""}}},"bpmn:timerEventDefinition":{out:function(e){var t=e.properties,n=t.timerType,a=t.timerValue,r=t.definitionId,l=function(){return"<bpmn:"+n+' xsi:type="bpmn:tFormalExpression">'+a+"</bpmn:"+n+">"};return{json:'<bpmn:timerEventDefinition id="'+r+'"'+(n&&a?">"+l()+"</bpmn:timerEventDefinition>":"/>")}},in:function(e,t){var n,a,r,l,c=e,y=t["-id"],h="",g="";try{for(var b=H1(Object.keys(t)),E=b.next();!E.done;E=b.next()){var x=E.value;x.includes("bpmn:")&&(r=Kh(x.split(":"),2),h=r[1],g=(l=t[x])===null||l===void 0?void 0:l["#text"])}}catch(T){n={error:T}}finally{try{E&&!E.done&&(a=b.return)&&a.call(b)}finally{if(n)throw n.error}}return{"-definitionId":y,"-definitionType":c,"-timerType":h,"-timerValue":g}}},"bpmn:conditionExpression":{in:function(e,t){var n,a="",r="";return t["#cdata-section"]?(r="cdata",a=((n=/^\$\{(.*)\}$/g.exec(t["#cdata-section"]))===null||n===void 0?void 0:n[1])||""):t["#text"]&&(r="normal",a=t["#text"]),{"-condition":a,"-expressionType":r}}}};function o7(e){var t=e??{},n=t.retainedAttrsFields,a=t.excludeFields,r=t.transformer,l=new Set(Th(r7,n||[])),c={in:new Set(Th(Cm.in,(a==null?void 0:a.in)||[])),out:new Set(Th(Cm.out,(a==null?void 0:a.out)||[]))};return ys=m2(ys,r),function(y){var h=y.nodes,g=y.edges;function b(E,x){var T,j,N;if((E==null?void 0:E.flag)!==1){var M;if((M=ys[E.type])&&M.out){var D=M.out(E),k=Object.keys(D);k.length>0&&k.forEach(function(H){E[H]=D[H]})}E!=null&&E.children&&(E.children=E.children.map(function(H){var ne=h.find(function(X){return X.id===H})||g.find(function(X){return X.id===H});return ne||{}}));var F={};if(typeof E=="string")return E;if(Array.isArray(E))return E.map(function(H){return b(H,"")}).filter(function(H){return H!=null});try{for(var te=H1(Object.entries(E)),V=te.next();!V.done;V=te.next()){var z=Kh(V.value,2),J=z[0],K=z[1];if(((N=K)===null||N===void 0?void 0:N.flag)===1)return;var B=[x,J].filter(function(H){return H}).join(".");c.out.has(B)||(typeof K!="object"?J.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(J)?F[J]=K:F["-"+J]=K:l.has(B)?F["-"+J]=b(K,B):F[J]=b(K,B))}}catch(H){T={error:H}}finally{try{V&&!V.done&&(j=te.return)&&j.call(te)}finally{if(T)throw T.error}}return F}}return b(y,"")}}function Dm(e){var t,n,a={};try{for(var r=H1(Object.entries(e)),l=r.next();!l.done;l=r.next()){var c=Kh(l.value,2),y=c[0],h=c[1];y.indexOf("-")===0?a[y.substring(1)]=jm(h):typeof h=="string"?a[y]=h:Object.prototype.toString.call(h)==="[object Object]"?a[y]=Dm(h):Array.isArray(h)?a[y]=h.map(function(g){return Dm(g)}):a[y]=h}}catch(g){t={error:g}}finally{try{l&&!l.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return a}function i7(e,t,n){var a,r=new Map,l=o7(n)(t);l.nodes.forEach(function(y){var h=y["-id"],g=y["-type"],b=y.text,E=y.children,x=uS(y,["-id","-type","text","children"]),T={"-id":h};b!=null&&b["-value"]&&(T["-name"]=b["-value"]),x["-json"]&&(T["-json"]=x["-json"]),x["-properties"]&&Object.assign(T,x["-properties"]),E&&(T.children=E),e[g]||(e[g]=[]),e[g].push(T),r.set(h,T)});var c=l.edges.map(function(y){var h=y["-id"];y["-type"];var g=y["-sourceNodeId"],b=y["-targetNodeId"],E=y.text,x=uS(y,["-id","-type","-sourceNodeId","-targetNodeId","text"]),T=r.get(b);T["bpmn:incoming"]||(T["bpmn:incoming"]=[]),T["bpmn:incoming"].push(h);var j={"-id":h,"-sourceRef":g,"-targetRef":b};return E!=null&&E["-value"]&&(j["-name"]=E["-value"]),x["-json"]&&(j["-json"]=x["-json"]),x["-properties"]&&Object.assign(j,x["-properties"]),j});return t.edges.forEach(function(y){var h=y.sourceNodeId,g=y.id,b=r.get(h);b["bpmn:outgoing"]||(b["bpmn:outgoing"]=[]),b["bpmn:outgoing"].push(g)}),(a=e["bpmn:subProcess"])===null||a===void 0||a.forEach(function(y){var h={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},g=[];y.children.forEach(function(N){var M,D=r.get(N["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach(function(F){D[F]&&D[F].forEach(function(te){h[F].add(te)})});var k=(M=e[N["-type"]])===null||M===void 0?void 0:M.findIndex(function(F){return F["-id"]===N["-id"]});k>=0&&e[N["-type"]].splice(k,1),r.delete(N["-id"]),y[N["-type"]]||(y[N["-type"]]=[]),y[N["-type"]].push(D)});var b=h["bpmn:incoming"],E=h["bpmn:outgoing"];E.forEach(function(N){b.has(N)&&g.push(N)});for(var x=function(N){var M=c.findIndex(function(D){return D["-id"]===g[N]});M>=0?(y["bpmn:sequenceFlow"]||(y["bpmn:sequenceFlow"]=[]),y["bpmn:sequenceFlow"].push(c[M]),c.splice(M,1)):N++,T=N},T,j=0;j<g.length;)x(j),j=T;delete y.children}),e[Va.FLOW]=c,e}function a7(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var a,r=n.id,l=n.pointsList.map(function(y){var h=y.x,g=y.y;return{"-x":h,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":l};return!((a=n.text)===null||a===void 0)&&a.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var a,r=n.id,l=100,c=80,y=n.x,h=n.y,g=vu.shapeConfigMap.get(n.type);g&&(l=g.width,c=g.height),y-=l/2,h-=c/2;var b={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":y,"-y":h,"-width":l,"-height":c}};return!((a=n.text)===null||a===void 0)&&a.value&&(b["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),b})}var u7=["bpmn:incoming","bpmn:outgoing"];function s7(e,t){var n=[],a=[],r=new Map,l=t??{},c=l.transformer,y=l.excludeFields,h={in:new Set(Th(Cm.in,(y==null?void 0:y.in)||[])),out:new Set(Th(Cm.out,(y==null?void 0:y.out)||[]))};ys=m2(ys,c);var g=e["bpmn:definitions"];if(g){var b=g["bpmn:process"];(function(x,T){T.forEach(function(j){try{Object.keys(x).forEach(function(N){try{j(N)}catch(M){console.error(M)}})}catch(N){console.error(N)}})})(b,[function(x){function T(N){N["-children"]||(N["-children"]=[]),Object.keys(N).forEach(function(M){var D;M.indexOf("bpmn:")===0&&!u7.includes(M)&&(b[M]||(b[M]=[]),!Array.isArray(b[M])&&(b[M]=[b[M]]),Array.isArray(N[M])?(D=b[M]).push.apply(D,Th(N[M])):b[M].push(N[M]),Array.isArray(N[M])?N[M].forEach(function(k){!M.includes("Flow")&&N["-children"].push(k["-id"])}):!M.includes("Flow")&&N["-children"].push(N[M]["-id"]),delete N[M])})}if(x==="bpmn:subProcess"){var j=b[x];Array.isArray(j)?j.forEach(function(N){x==="bpmn:subProcess"&&T(N)}):T(j)}},function(x){var T=function(N){Object.keys(N).forEach(function(M){var D,k;if(M.includes("bpmn:")){var F={};ys[M]&&ys[M].in?(F=(k=(D=ys[M]).in)===null||k===void 0?void 0:k.call(D,M,ie.cloneDeep(N[M])),delete N[M]):j(N[M]);var te=void 0;(te=Reflect.ownKeys(F)).length>0&&te.forEach(function(V){Reflect.set(N,V,F[V])})}})};function j(N){r.set(N["-id"],N),Array.isArray(N)?N.forEach(function(M){j(M)}):typeof N=="object"&&T(N)}j(b[x])},function(x){if(x.indexOf("bpmn:")===0){var T=b[x];if(x==="bpmn:sequenceFlow"){var j=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];a=c7(T,j)}else{var N=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if(x==="bpmn:boundaryEvent"){var M=b[x],D=function(k){var F=k["-attachedToRef"],te=r.get(F);te["-boundaryEvents"]||(te["-boundaryEvents"]=[]),te["-boundaryEvents"].push(k["-id"])};Array.isArray(M)?M.forEach(function(k){D(k)}):D(M)}n=n.concat(l7(T,N,x))}}}])}var E=function(x,T,j){Object.keys(x).forEach(function(N){var M=j?j+"."+N:N;T.has(M)?delete x[N]:typeof x[N]=="object"&&E(x[N],T,M)})};return n.forEach(function(x){var T,j;if(!((T=t==null?void 0:t.mapping)===null||T===void 0)&&T.in){var N=(j=t==null?void 0:t.mapping)===null||j===void 0?void 0:j.in,M=x.type;N[M]&&(x.type=N[M])}E(x,h.in,"")}),a.forEach(function(x){var T,j;if(!((T=t==null?void 0:t.mapping)===null||T===void 0)&&T.in){var N=(j=t==null?void 0:t.mapping)===null||j===void 0?void 0:j.in,M=x.type;N[M]&&(x.type=N[M])}E(x,h.in,"")}),{nodes:n,edges:a}}function l7(e,t,n){var a=[];if(Array.isArray(e))e.forEach(function(c){var y;Array.isArray(t)?y=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):y=t;var h=sS(y,n,c);a.push(h)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var l=sS(r,n,e);a.push(l)}return a}function sS(e,t,n){var a=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),l=n["-children"],c=n["-name"],y=vu.shapeConfigMap.get(t);y&&(a+=y.width/2,r+=y.height/2);var h={};Object.entries(n).forEach(function(x){var T=Kh(x,2),j=T[0],N=T[1];y2.includes(j)||(h[j]=N)}),h=Dm(h);var g;if(c&&(g={x:a,y:r,value:c},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var b=e["bpmndi:BPMNLabel"]["dc:Bounds"];g.x=Number(b["-x"])+Number(b["-width"])/2,g.y=Number(b["-y"])+Number(b["-height"])/2}var E={id:e["-bpmnElement"],type:t,x:a,y:r,properties:h};return l&&(E.children=l),g&&(E.text=g),E}function c7(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var l;Array.isArray(t)?l=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):l=t,n.push(lS(l,r))});else{var a=void 0;Array.isArray(t)?a=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):a=t,n.push(lS(a,e))}return n}function lS(e,t){var n,a=t["-name"];if(a){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],l=0;a.split(`
`).forEach(function(g){l<g.length&&(l=g.length)}),n={value:a,x:Number(r["-x"])+l*10/2,y:Number(r["-y"])+7}}var c={};Object.entries(t).forEach(function(g){var b=Kh(g,2),E=b[0],x=b[1];y2.includes(E)||(c[E]=x)}),c=Dm(c);var y=e["di:waypoint"].map(function(g){return{x:Number(g["-x"]),y:Number(g["-y"])}}),h={id:t["-id"],type:Va.FLOW,pointsList:y,sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(h.text=n),h}var vu=function(){function e(t){var n=this,a=t.lf;this.adapterOut=function(r,l){var c,y,h=q0({},n.processAttributes);i7(h,r,l);var g={"-id":"BPMNPlane_1","-bpmnElement":h["-id"]};a7(g,r);var b=n.definitionAttributes;b["bpmn:process"]=h,b["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":g};var E={"bpmn:definitions":b};if(!((c=l==null?void 0:l.mapping)===null||c===void 0)&&c.out){var x=(y=l==null?void 0:l.mapping)===null||y===void 0?void 0:y.out,T=function(j){Array.isArray(j)&&j.forEach(function(N){return T(N)}),typeof j=="object"&&Object.keys(j).forEach(function(N){var M;(M=x[N])?(j[M]=ie.cloneDeep(j[N]),delete j[N],T(j[M])):T(j[N])})};T(E)}return E},this.adapterIn=function(r,l){if(r)return s7(r,l)},a.adapterIn=this.adapterIn,a.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();vu.shapeConfigMap.set(Va.START,{width:Kx.width,height:Kx.height});vu.shapeConfigMap.set(Va.END,{width:Zx.width,height:Zx.height});vu.shapeConfigMap.set(Va.INTERMEDIATE_CATCH,{width:Rm.width,height:Rm.height});vu.shapeConfigMap.set(Va.INTERMEDIATE_THROW,{width:Rm.width,height:Rm.height});vu.shapeConfigMap.set(Va.BOUNDARY,{width:Jx.width,height:Jx.height});vu.shapeConfigMap.set(Va.PARALLEL_GATEWAY,{width:Qx.width,height:Qx.height});vu.shapeConfigMap.set(Va.INCLUSIVE_GATEWAY,{width:eS.width,height:eS.height});vu.shapeConfigMap.set(Va.EXCLUSIVE_GATEWAY,{width:tS.width,height:tS.height});vu.shapeConfigMap.set(Va.SYSTEM,{width:nS.width,height:nS.height});vu.shapeConfigMap.set(Va.USER,{width:rS.width,height:rS.height});vu.shapeConfigMap.set(Va.SUBPROCESS,{width:oS.width,height:oS.height});(function(e){n7(t,e);function t(n){var a=e.call(this,n)||this;a.adapterXmlIn=function(c){var y=QG(c);return a.adapterIn(y,a.props)},a.adapterXmlOut=function(c){var y=a.adapterOut(c,a.props);return t7(y)};var r=n.lf,l=n.props;return r.adapterIn=a.adapterXmlIn,r.adapterOut=a.adapterXmlOut,a.props=l,a}return t.pluginName="BPMNAdapter",t})(vu);var cS=globalThis&&globalThis.__assign||function(){return cS=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},cS.apply(this,arguments)};globalThis&&globalThis.__read;var fS;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(fS||(fS={}));var f7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,l=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(y){c={error:y}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;var d7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,l=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(y){c={error:y}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;var p7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,l=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(y){c={error:y}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;globalThis&&globalThis.__read;globalThis&&globalThis.__values;var g2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),xh=globalThis&&globalThis.__assign||function(){return xh=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},xh.apply(this,arguments)},Iv=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,l=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(y){c={error:y}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return l},h7={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function v7(e){for(var t=e,n=1;n<t.length-1;){var a=Iv(t[n-1],2),r=a[0],l=a[1],c=Iv(t[n],2),y=c[0],h=c[1],g=Iv(t[n+1],2),b=g[0],E=g[1];r===y&&y===b||l===h&&h===E?t.splice(n,1):n++}return t}function y7(e,t,n,a){var r=[e[0],e[1]],l=[e[0],e[1]];switch(n){case"tl":return t==="tr"?(r[1]+=a,l[0]+=a):t==="lb"&&(r[0]+=a,l[1]+=a),[r,l];case"tr":return t==="tl"?(r[1]+=a,l[0]-=a):t==="rb"&&(r[0]-=a,l[1]+=a),[r,l];case"bl":return t==="br"?(r[1]-=a,l[0]+=a):t==="lt"&&(r[0]+=a,l[1]-=a),[r,l];case"br":return t==="bl"?(r[1]-=a,l[0]-=a):t==="rt"&&(r[0]-=a,l[1]-=a),[r,l];default:return[]}}function m7(e,t,n,a){var r,l="",c="";e[0]===t[0]?l=e[1]>t[1]?"t":"b":e[1]===t[1]&&(l=e[0]>t[0]?"l":"r"),t[0]===n[0]?c=t[1]>n[1]?"t":"b":t[1]===n[1]&&(c=t[0]>n[0]?"l":"r");var y=Math.min(Math.hypot(t[0]-e[0],t[1]-e[1])/2,Math.hypot(n[0]-t[0],n[1]-t[1])/2,a)||1/5*a,h=""+l+c,g=h7[h]||"-",b="L "+e[0]+" "+e[1];if(g==="-")b+="L "+t[0]+" "+t[1]+" L "+n[0]+" "+n[1];else{var E=Iv(y7(t,h,g,y),2),x=E[0],T=E[1];x&&T&&(b+="L "+x[0]+" "+x[1]+" Q "+t[0]+" "+t[1]+" "+T[0]+" "+T[1],r=Iv(T,2),t[0]=r[0],t[1]=r[1])}return b}function g7(e,t){var n=0,a="";if(e.length===2)a+="M"+e[n][0]+" "+e[n++][1]+" L "+e[n][0]+" "+e[n][1];else{for(a+="M"+e[n][0]+" "+e[n++][1];n+1<e.length;){var r=e[n-1],l=e[n],c=e[n+++1];a+=m7(r,l,c,t)}a+="L "+e[n][0]+" "+e[n][1]}return a}(function(e){g2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEdge=function(){var n=this.props.model,a=n.points,r=n.isAnimation,l=n.arrowConfig,c=n.radius,y=c===void 0?5:c,h=n.getEdgeStyle(),g=n.getEdgeAnimationStyle(),b=v7(a.split(" ").map(function(T){return T.split(",").map(function(j){return+j})})),E=g7(b,y),x=xh(xh(xh({style:r?g:{}},h),l),{fill:"none"});return cn.h("path",xh({d:E},x))},t})(cn.PolylineEdge);(function(e){g2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(cn.PolylineEdgeModel);var _7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,l=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(y){c={error:y}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;var dS=globalThis&&globalThis.__assign||function(){return dS=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},dS.apply(this,arguments)},pS=globalThis&&globalThis.__assign||function(){return pS=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},pS.apply(this,arguments)},b7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,l=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(y){c={error:y}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;let cg=!1;const Im=KA({});function _2(e,t,n,a,r,l){l||(l=(c,y)=>({nodeModel:c,graph:y})),cg&&(Im[e]=XC(Vr({render:()=>Dh(YC,{to:n},[Dh(t,l(a,r))]),provide:()=>({getNode:()=>a,getGraph:()=>r})})))}function b2(e){cg&&delete Im[e]}function Lm(){return cg}function w7(){return cg=!0,Vr({props:{flowId:{type:String,required:!0}},setup(e){return()=>{const t=[];return Object.keys(Im).forEach(n=>{n.startsWith(e.flowId)&&t.push(Im[n])}),Dh(Fi,{},t.map(n=>Dh(n)))}}})}class la extends p2.view{constructor(n,a){super(n);xa(this,"isMounted");xa(this,"r");xa(this,"component");xa(this,"app");xa(this,"root");xa(this,"VueNode");if(this.component=a,this.isMounted=!1,n.model.properties.noRender)delete n.model.properties.noRender;else{const l=n.graphModel.nodes.filter(c=>c.type===n.model.type);l.length-1>0&&r(l.length-1)}function r(l){var h;let c=l;const y=n.model.properties.stepName+c;(h=n.graphModel.nodes)!=null&&h.some(g=>g.properties.stepName===y.trim())?(c+=1,r(c)):n.model.properties.stepName=y}n.model.properties.config=OU[n.model.type].properties.config,n.model.properties.height&&(n.model.height=n.model.properties.height)}getAnchorShape(n){const{x:a,y:r,type:l}=n;let c=!1;return l=="left"?c=this.props.graphModel.edges.some(y=>y.targetAnchorId==n.id):c=this.props.graphModel.edges.some(y=>y.sourceAnchorId==n.id),cn.h("foreignObject",{...n,x:a-10,y:r-12,width:30,height:30},[cn.h("div",{style:{zindex:0},onClick:()=>{l=="right"&&this.props.model.openNodeMenu(n)},dangerouslySetInnerHTML:{__html:c?`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g filter="url(#filter0_d_5119_232585)">
              <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M20.9998 27.5C26.7988 27.5 31.4998 22.799 31.4998 17C31.4998 11.201 26.7988 6.49996 20.9998 6.49996C15.2008 6.49996 10.4998 11.201 10.4998 17C10.4998 22.799 15.2008 27.5 20.9998 27.5ZM33.8332 17C33.8332 24.0876 28.0875 29.8333 20.9998 29.8333C13.9122 29.8333 8.1665 24.0876 8.1665 17C8.1665 9.91231 13.9122 4.16663 20.9998 4.16663C28.0875 4.16663 33.8332 9.91231 33.8332 17Z" fill="#3370FF"/>
              </g>
              <defs>
              <filter id="filter0_d_5119_232585" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="4"/>
              <feGaussianBlur stdDeviation="4"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5119_232585"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5119_232585" result="shape"/>
              </filter>
              </defs>
              </svg>
              `:`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g filter="url(#filter0_d_5199_166905)">
        <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="#3370FF"/>
        <path d="M19.8332 11.75C19.8332 11.4278 20.0943 11.1666 20.4165 11.1666H21.5832C21.9053 11.1666 22.1665 11.4278 22.1665 11.75V15.8333H26.2498C26.572 15.8333 26.8332 16.0945 26.8332 16.4166V17.5833C26.8332 17.9055 26.572 18.1666 26.2498 18.1666H22.1665V22.25C22.1665 22.5721 21.9053 22.8333 21.5832 22.8333H20.4165C20.0943 22.8333 19.8332 22.5721 19.8332 22.25V18.1666H15.7498C15.4277 18.1666 15.1665 17.9055 15.1665 17.5833V16.4166C15.1665 16.0945 15.4277 15.8333 15.7498 15.8333H19.8332V11.75Z" fill="white"/>
        </g>
        <defs>
        <filter id="filter0_d_5199_166905" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
        <feOffset dy="4"/>
        <feGaussianBlur stdDeviation="4"/>
        <feComposite in2="hardAlpha" operator="out"/>
        <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5199_166905"/>
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5199_166905" result="shape"/>
        </filter>
        </defs>
        </svg>`}})])}setHtml(n){if(this.isMounted)this.r&&this.r.component&&(this.r.component.props.properties=this.props.model.getProperties());else{this.isMounted=!0;const a=document.createElement("div");n.appendChild(a),this.renderVueComponent(a)}}componentWillUnmount(){super.componentWillUnmount(),this.unmount()}getComponentContainer(){return this.root}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}renderVueComponent(n){var l;this.unmountVueComponent(),this.root=n;const{model:a,graphModel:r}=this.props;if(n)if(Lm())_2(this.targetId(),this.component,n,a,r);else{this.r=Dh(this.component,{properties:this.props.model.properties,nodeModel:this.props.model}),this.app=JA({render(){return this.r},provide(){return{getNode:()=>a,getGraph:()=>r}}}),this.app.use(qC,{locale:KC}),this.app.use(ZC),this.app.use(JC),this.app.use(ZA);for(const[c,y]of Object.entries(QC))this.app.component(c,y);(l=this.app)==null||l.mount(n)}}unmountVueComponent(){return this.app&&(this.app.unmount(),this.app=null),this.root&&(this.root.innerHTML=""),this.root}unmount(){Lm()&&b2(this.targetId()),this.unmountVueComponent()}}class ca extends p2.model{refreshDeges(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}set_position(t){const{x:n,y:a}=t;n&&(this.x=n),a&&(this.y=a),this.refreshDeges()}getResizeOutlineStyle(){const t=super.getResizeOutlineStyle();return t.stroke="none",t}getControlPointStyle(){const t=super.getControlPointStyle();return t.stroke="none",t.fill="none",t}getNodeStyle(){return{overflow:"visible"}}getOutlineStyle(){const t=super.getOutlineStyle();return t.stroke="none",t.hover&&(t.hover.stroke="none"),t}getAnchorStyle(t){const n=super.getAnchorStyle(t);return t.type==="left"?(n.fill="red",n.hover.fill="transparent",n.hover.stroke="transpanrent",n.className="lf-hide-default"):n.fill="green",n}setHeight(t){const n=this.height,a=t+100;this.height=a,this.properties.height=a,this.move(0,(a-n)/2),this.outgoing.edges.forEach(r=>{r.updatePathByAnchor()}),this.incoming.edges.forEach(r=>{r.updatePathByAnchor()})}get_width(){var t;return((t=this.properties)==null?void 0:t.width)||340}setAttributes(){const{t}=ZA.global;this.width=this.get_width();const n=(r,l)=>{const c=this.graphModel.getNodeIncomingNode(r);for(const y in c){const h=c[y];if(h.id===l)return!0;if(n(h.id,l))return!0}return!1},a={message:t("views.applicationWorkflow.tip.onlyRight"),validate:(r,l,c)=>c.type==="right"};this.sourceRules.push({message:t("views.applicationWorkflow.tip.notRecyclable"),validate:(r,l,c,y)=>!n(r.id,l.id)}),this.sourceRules.push(a),this.targetRules.push({message:t("views.applicationWorkflow.tip.onlyLeft"),validate:(r,l,c,y)=>y.type==="left"})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r}=this,l=this.properties.showNode===void 0?!0:this.properties.showNode,c=[];return this.type!==Wn.Base&&(this.type!==Wn.Start&&c.push({x:n-r/2+10,y:l?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c.push({x:n+r/2-10,y:l?a:a-15,id:`${t}_right`,type:"right"})),c}}let E7=class extends la{constructor(t){super(t,uG)}};const O7={type:"ai-chat-node",model:ca,view:E7},x7=Object.freeze(Object.defineProperty({__proto__:null,default:O7},Symbol.toStringTag,{value:"Module"})),aa=Vr({__name:"NodeCascader",props:{nodeModel:{},modelValue:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const a=e,r=n,l=Co({set:x=>{r("update:modelValue",x)},get:()=>a.modelValue}),c=Bt([]),y=x=>x.ctrlKey===!0?(x.preventDefault(),!0):(x.stopPropagation(),!0);function h(x){x&&(c.value=b(a.nodeModel.id))}function g(x,T,j){let N=a.nodeModel.graphModel.getNodeIncomingNode(x);N=N.filter(D=>D.id!==T);let M=null;return N.length>0&&(N.forEach(D=>{var k,F,te,V,z;j.some(J=>J.id===D.id)||j.some(J=>J.value===D.id)||(j.unshift({value:D.id,label:D.properties.stepName,type:D.type,children:((F=(k=D.properties)==null?void 0:k.config)==null?void 0:F.fields)||[]}),(te=D.properties)!=null&&te.globalFields&&D.type==="start-node"&&(M={value:"global",label:it("views.applicationWorkflow.variable.global"),type:"global",children:((z=(V=D.properties)==null?void 0:V.config)==null?void 0:z.globalFields)||[]}))}),N.forEach(D=>{g(D.id,T,j)})),M&&j.unshift(M),j}function b(x){return g(x,x,[])}const E=()=>{const x=b(a.nodeModel.id);if(c.value=x,!l.value||l.value.length===0)return Promise.reject(it("views.applicationWorkflow.variable.ReferencingRequired"));if(l.value.length<2)return Promise.reject(it("views.applicationWorkflow.variable.ReferencingError"));const T=l.value[0],j=l.value[1],N=x.find(M=>M.value===T);return N?N.children.some(M=>M.value===j)?Promise.resolve(""):(l.value=[],Promise.reject(it("views.applicationWorkflow.variable.NoReferencing"))):(l.value=[],Promise.reject(it("views.applicationWorkflow.variable.NoReferencing")))};return a.nodeModel.graphModel.eventCenter.on("refresh_incoming_node_field",()=>{c.value=b(a.nodeModel.id)}),a.nodeModel.graphModel.eventCenter.on("refreshFileUploadConfig",()=>{c.value=b(a.nodeModel.id)}),t({validate:E}),ni(()=>{c.value=b(a.nodeModel.id)}),(x,T)=>{const j=pe("el-cascader");return _t(),an(j,eD({onWheel:y,teleported:!1,options:c.value,onVisibleChange:h},x.$attrs,{modelValue:l.value,"onUpdate:modelValue":T[0]||(T[0]=N=>l.value=N),separator:" > "}),{default:G(({node:N,data:M})=>[we("span",{class:"flex align-center",onWheel:y},[(_t(),an(wh(Yr(Eh)(`${M.type}-icon`)),{class:"mr-8",size:18})),jt(qe(M.label),1)],32)]),_:1},16,["options","modelValue"])}}}),S7={class:"title-decoration-1 mb-8"},A7={class:"flex align-center"},T7={class:"mr-4"},M7=Vr({__name:"index",props:{nodeModel:{}},setup(e){const t={question_reference_address:["start-node","question"],api_input_field_list:[],user_input_field_list:[],document_list:["start-node","document"],image_list:["start-node","image"],audio_list:["start-node","audio"]},{params:{id:n}}=xs.config.globalProperties.$route,a=Bt(),r=Co({get:()=>(y.nodeModel.properties.node_data||yt.set(y.nodeModel.properties,"node_data",t),y.nodeModel.properties.node_data),set:g=>{yt.set(y.nodeModel.properties,"node_data",g)}});function l(g,b){const E=`${g}_list`;b?y.nodeModel.properties.node_data[E]||yt.set(y.nodeModel.properties.node_data,E,[]):delete y.nodeModel.properties.node_data[E]}const c=()=>{if(!y.nodeModel.properties.node_data.application_id){yt.set(y.nodeModel.properties,"status",500);return}Sa.getApplicationById(n,y.nodeModel.properties.node_data.application_id).then(g=>{const b=y.nodeModel.properties.node_data.api_input_field_list,E=y.nodeModel.properties.node_data.user_input_field_list;if(pm(g.data.type)){const x=g.data.work_flow.nodes[0].properties.node_data,T=g.data.work_flow.nodes[0].properties.api_input_field_list,j=g.data.work_flow.nodes[0].properties.user_input_field_list,N=T.map(F=>{const te=b.find(V=>V.variable==F.variable);return te?{...F,value:te.value,label:typeof F.label=="object"&&F.label!=null?F.label.label:F.label}:F});yt.set(y.nodeModel.properties.node_data,"api_input_field_list",N);const M=j.map(F=>{const te=E.find(V=>V.field==F.field);return te?{...F,value:te.value,label:typeof F.label=="object"&&F.label!=null?F.label.label:F.label}:F});yt.set(y.nodeModel.properties.node_data,"user_input_field_list",M);const D=x.file_upload_enable,k=x.file_upload_setting;D?(l("document",k.document),l("image",k.image),l("audio",k.audio)):["document_list","image_list","audio_list"].forEach(F=>{delete y.nodeModel.properties.node_data[F]}),yt.set(y.nodeModel.properties,"status",g.data.id?200:500)}}).catch(g=>{})},y=e,h=()=>{var g;return(g=a.value)==null?void 0:g.validate().catch(b=>Promise.reject({node:y.nodeModel,errMessage:b}))};return ni(()=>{c(),yt.set(y.nodeModel,"validate",h)}),(g,b)=>{const E=pe("el-form-item"),x=pe("AppIcon"),T=pe("el-tooltip"),j=pe("el-switch"),N=pe("el-form"),M=pe("el-card");return _t(),an(sa,{nodeModel:g.nodeModel},{default:G(()=>[we("h5",S7,qe(g.$t("views.applicationWorkflow.nodeSetting")),1),$(M,{shadow:"never",class:"card-never"},{default:G(()=>[$(N,{onSubmit:b[6]||(b[6]=Mn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"applicationNodeFormRef",ref:a},{default:G(()=>[$(E,{label:g.$t("views.applicationWorkflow.nodes.startNode.question"),prop:"question_reference_address",rules:{message:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:G(()=>[$(aa,{ref_key:"applicationNodeFormRef",ref:a,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.question_reference_address,"onUpdate:modelValue":b[0]||(b[0]=D=>r.value.question_reference_address=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),r.value.hasOwnProperty("document_list")||"document_list"in r.value?(_t(),an(E,{key:0,label:g.$t("views.problem.relateParagraph.selectDocument"),prop:"document_list",rules:{message:g.$t("views.log.documentPlaceholder"),trigger:"blur",required:!1}},{default:G(()=>[$(aa,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.log.documentPlaceholder"),modelValue:r.value.document_list,"onUpdate:modelValue":b[1]||(b[1]=D=>r.value.document_list=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):Ar("",!0),r.value.hasOwnProperty("image_list")||"image_list"in r.value?(_t(),an(E,{key:1,label:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),prop:"image_list",rules:{message:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"blur",required:!1}},{default:G(()=>[$(aa,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:r.value.image_list,"onUpdate:modelValue":b[2]||(b[2]=D=>r.value.image_list=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):Ar("",!0),r.value.hasOwnProperty("audio_list")||"audio_list"in r.value?(_t(),an(E,{key:2,label:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audio_list",rules:{message:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),trigger:"blur",required:!1}},{default:G(()=>[$(aa,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:r.value.audio_list,"onUpdate:modelValue":b[3]||(b[3]=D=>r.value.audio_list=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):Ar("",!0),(_t(!0),er(Fi,null,pu(r.value.api_input_field_list,(D,k)=>(_t(),er("div",{key:"api-input-"+k},[$(E,{label:D.variable,prop:"api_input_field_list."+k+".value",rules:[{required:D.is_required,message:`${g.$t("common.inputPlaceholder")}${D.variable}`,trigger:"blur"}]},{default:G(()=>[$(aa,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.api_input_field_list[k].value,"onUpdate:modelValue":F=>r.value.api_input_field_list[k].value=F},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),(_t(!0),er(Fi,null,pu(r.value.user_input_field_list,(D,k)=>(_t(),er("div",{key:"user-input-"+k},[$(E,{label:D.label,prop:"user_input_field_list."+k+".value",rules:[{required:D.required,message:`${g.$t("common.inputPlaceholder")}${D.label}`,trigger:"blur"}]},{default:G(()=>[$(aa,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.user_input_field_list[k].value,"onUpdate:modelValue":F=>r.value.user_input_field_list[k].value=F},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),$(E,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[5]||(b[5]=Mn(()=>{},["prevent"]))},{label:G(()=>[we("div",A7,[we("div",T7,[we("span",null,[jt(qe(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),b[7]||(b[7]=we("span",{class:"danger"},"*",-1))])]),$(T,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:G(()=>[jt(qe(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:G(()=>[$(x,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:G(()=>[$(j,{size:"small",modelValue:r.value.is_result,"onUpdate:modelValue":b[4]||(b[4]=D=>r.value.is_result=D)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class N7 extends la{constructor(t){super(t,M7)}}const P7={type:"application-node",model:ca,view:N7},k7=Object.freeze(Object.defineProperty({__proto__:null,default:P7},Symbol.toStringTag,{value:"Module"})),R7={class:"dialog-footer"},j7=Vr({__name:"ApiFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Bt(),l=Bt(!1),c=Bt(!1),y=Bt({name:"",variable:"",type:"input",is_required:!0,assignment_method:"api_input",optionList:[""],default_value:""}),h=KA({name:[{required:!0,message:it("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],variable:[{required:!0,message:it("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:it("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),g=Bt(!1);QA(g,T=>{T||(y.value={name:"",variable:"",type:"input",is_required:!0,assignment_method:"api_input",optionList:[""],default_value:""},c.value=!1)});const b=T=>{T&&(y.value=yt.cloneDeep(T),c.value=!0),g.value=!0},E=()=>{g.value=!1,c.value=!1},x=async T=>{T&&await T.validate(j=>{j&&a("refresh",y.value)})};return t({open:b,close:E}),(T,j)=>{const N=pe("el-input"),M=pe("el-form-item"),D=pe("el-switch"),k=pe("el-form"),F=pe("el-button"),te=pe("el-dialog");return _t(),an(te,{title:c.value?T.$t("views.template.templateForm.title.editParam"):T.$t("views.template.templateForm.title.addParam"),modelValue:g.value,"onUpdate:modelValue":j[8]||(j[8]=V=>g.value=V),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":E,"append-to-body":""},{footer:G(()=>[we("span",R7,[$(F,{onClick:j[6]||(j[6]=Mn(V=>g.value=!1,["prevent"]))},{default:G(()=>[jt(qe(T.$t("common.cancel")),1)]),_:1}),$(F,{type:"primary",onClick:j[7]||(j[7]=V=>x(r.value)),loading:l.value},{default:G(()=>[jt(qe(c.value?T.$t("common.save"):T.$t("common.add")),1)]),_:1},8,["loading"])])]),default:G(()=>[$(k,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:h,model:y.value,"require-asterisk-position":"right"},{default:G(()=>[$(M,{label:T.$t("dynamicsForm.paramForm.field.label"),prop:"variable"},{default:G(()=>[$(N,{modelValue:y.value.variable,"onUpdate:modelValue":j[0]||(j[0]=V=>y.value.variable=V),placeholder:T.$t("dynamicsForm.paramForm.field.placeholder"),maxlength:"64","show-word-limit":"",onBlur:j[1]||(j[1]=V=>y.value.variable=y.value.variable.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),$(M,{label:T.$t("dynamicsForm.paramForm.required.label"),onClick:j[3]||(j[3]=Mn(()=>{},["prevent"]))},{default:G(()=>[$(D,{size:"small",modelValue:y.value.is_required,"onUpdate:modelValue":j[2]||(j[2]=V=>y.value.is_required=V)},null,8,["modelValue"])]),_:1},8,["label"]),$(M,{label:T.$t("dynamicsForm.default.label"),prop:"default_value",rules:{required:y.value.is_required,message:T.$t("dynamicsForm.default.placeholder"),trigger:"blur"}},{default:G(()=>[$(N,{modelValue:y.value.default_value,"onUpdate:modelValue":j[4]||(j[4]=V=>y.value.default_value=V),placeholder:T.$t("dynamicsForm.default.placeholder"),onBlur:j[5]||(j[5]=V=>y.value.name=y.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),C7={class:"flex-between mb-16"},D7={class:"lighter"},I7={class:"mr-4"},L7=Vr({__name:"ApiInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Bt(null),a=Bt(),r=Bt([]);function l(h,g){typeof g<"u"&&(n.value=g),a.value.open(h)}function c(h){r.value.splice(h,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}function y(h){for(let b=0;b<r.value.length;b++)if(r.value[b].variable===h.variable&&n.value!==b){za(it("views.applicationWorkflow.tip.paramErrorMessage")+h.variable);return}let g=t.nodeModel.properties.user_input_field_list;for(let b=0;b<g.length;b++)if(g[b].field===h.variable){za(it("views.applicationWorkflow.tip.paramErrorMessage")+h.variable);return}n.value!==null?r.value.splice(n.value,1,h):r.value.push(h),n.value=null,a.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}return ni(()=>{t.nodeModel.properties.api_input_field_list?r.value.push(...t.nodeModel.properties.api_input_field_list):t.nodeModel.properties.input_field_list&&t.nodeModel.properties.input_field_list.filter(h=>h.assignment_method==="api_input").forEach(h=>{r.value.push(h)}),yt.set(t.nodeModel.properties,"api_input_field_list",r)}),(h,g)=>{var F;const b=pe("Plus"),E=pe("el-icon"),x=pe("el-button"),T=pe("el-table-column"),j=pe("el-switch"),N=pe("EditPen"),M=pe("el-tooltip"),D=pe("Delete"),k=pe("el-table");return _t(),er(Fi,null,[we("div",C7,[we("h5",D7,qe(h.$t("views.template.templateForm.title.apiParamPassing")),1),$(x,{link:"",type:"primary",onClick:g[0]||(g[0]=te=>l())},{default:G(()=>[$(E,{class:"mr-4"},{default:G(()=>[$(b)]),_:1}),jt(" "+qe(h.$t("common.add")),1)]),_:1})]),((F=t.nodeModel.properties.api_input_field_list)==null?void 0:F.length)>0?(_t(),an(k,{key:0,data:t.nodeModel.properties.api_input_field_list,class:"mb-16"},{default:G(()=>[$(T,{prop:"variable",label:h.$t("dynamicsForm.paramForm.field.label")},null,8,["label"]),$(T,{prop:"default_value",label:h.$t("dynamicsForm.default.label")},null,8,["label"]),$(T,{label:h.$t("common.required")},{default:G(({row:te})=>[we("div",{onClick:g[1]||(g[1]=Mn(()=>{},["stop"]))},[$(j,{disabled:"",size:"small",modelValue:te.is_required,"onUpdate:modelValue":V=>te.is_required=V},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),$(T,{label:h.$t("common.operation"),align:"left",width:"90"},{default:G(({row:te,$index:V})=>[we("span",I7,[$(M,{effect:"dark",content:h.$t("common.modify"),placement:"top"},{default:G(()=>[$(x,{type:"primary",text:"",onClick:Mn(z=>l(te,V),["stop"])},{default:G(()=>[$(E,null,{default:G(()=>[$(N)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),$(M,{effect:"dark",content:h.$t("common.delete"),placement:"top"},{default:G(()=>[$(x,{type:"primary",text:"",onClick:z=>c(V)},{default:G(()=>[$(E,null,{default:G(()=>[$(D)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):Ar("",!0),$(j7,{ref_key:"ApiFieldFormDialogRef",ref:a,onRefresh:y},null,512)],64)}}}),F7={class:"dialog-footer"},$7=Vr({__name:"UserFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Bt(),l=Bt(!1),c=Bt(!1),y=Bt(),h=(M,D)=>M.every(k=>tD.get(D,k,void 0)!==void 0),g=Co(()=>{if(y.value){const M=y.value;switch(M.type){case"input":return h(["field","input_type","label","required","attrs"],y.value)?y.value:{attrs:M.attrs||{maxlength:20,minlength:0},field:M.field||M.variable,input_type:"TextInput",label:M.label||M.name,default_value:M.default_value,required:M.required!=null?M.required:M.is_required};case"select":return h(["field","input_type","label","required","option_list"],y.value)?y.value:{attrs:M.attrs||{},field:M.field||M.variable,input_type:"SingleSelect",label:M.label||M.name,default_value:M.default_value,required:M.required!=null?M.required:M.is_required,option_list:M.option_list?M.option_list:M.optionList.map(D=>({key:D,value:D}))};case"date":return h(["field","input_type","label","required","attrs.format","attrs.value-format","attrs.type"],y.value)?y.value:{field:M.field||M.variable,input_type:"DatePicker",label:M.label||M.name,default_value:M.default_value,required:M.required!=null?M.required:M.is_required,attrs:{format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime"}};default:return y.value}}else return{input_type:"TextInput",required:!1,attrs:{maxlength:20,minlength:0}}}),b=Bt(null),E=Bt([{label:it("dynamicsForm.input_type_list.TextInput"),value:"TextInputConstructor"},{label:it("dynamicsForm.input_type_list.SingleSelect"),value:"SingleSelectConstructor"},{label:it("dynamicsForm.input_type_list.MultiSelect"),value:"MultiSelectConstructor"},{label:it("dynamicsForm.input_type_list.RadioCard"),value:"RadioCardConstructor"},{label:it("dynamicsForm.input_type_list.DatePicker"),value:"DatePickerConstructor"}]),x=Bt(!1),T=(M,D)=>{x.value=!0,M?(c.value=!0,y.value=yt.cloneDeep(M),b.value=D):y.value=null},j=()=>{x.value=!1,c.value=!1,b.value=null,y.value=null},N=async()=>{const M=r.value;M&&await M.validate().then(()=>{a("refresh",M==null?void 0:M.getData(),b.value),c.value=!1,y.value=null,b.value=null})};return t({open:T,close:j}),(M,D)=>{const k=pe("el-button"),F=pe("el-dialog");return _t(),an(F,{title:c.value?M.$t("views.template.templateForm.title.editParam"):M.$t("views.template.templateForm.title.addParam"),modelValue:x.value,"onUpdate:modelValue":D[2]||(D[2]=te=>x.value=te),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":j,"append-to-body":""},{footer:G(()=>[we("span",F7,[$(k,{onClick:Mn(j,["prevent"])},{default:G(()=>[jt(qe(M.$t("common.cancel")),1)]),_:1}),$(k,{type:"primary",onClick:D[1]||(D[1]=te=>N()),loading:l.value},{default:G(()=>[jt(qe(c.value?M.$t("common.save"):M.$t("common.add")),1)]),_:1},8,["loading"])])]),default:G(()=>[$(p1,{modelValue:g.value,"onUpdate:modelValue":D[0]||(D[0]=te=>g.value=te),"label-position":"top","require-asterisk-position":"right",input_type_list:E.value,ref_key:"DynamicsFormConstructorRef",ref:r},null,8,["modelValue","input_type_list"])]),_:1},8,["title","modelValue"])}}}),B7={class:"flex-between mb-16"},U7={class:"lighter"},G7=["title"],W7={key:0},z7=["title"],V7={key:1},H7=["title"],X7=["title"],Y7={class:"mr-4"},q7=Vr({__name:"UserInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Bt(),a=Bt([]);function r(h,g){n.value.open(h,g)}function l(h){a.value.splice(h,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}function c(h,g){for(let E=0;E<a.value.length;E++)if(a.value[E].field===h.field&&g!==E){za(it("views.applicationWorkflow.tip.paramErrorMessage")+h.field);return}let b=t.nodeModel.properties.api_input_field_list;for(let E=0;E<b.length;E++)if(b[E].variable===h.field){za(it("views.applicationWorkflow.tip.paramErrorMessage")+h.field);return}g!==null?a.value.splice(g,1,h):a.value.push(h),n.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}const y=h=>{var g;if(h.default_value){const b=(g=h.option_list)==null?void 0:g.filter(E=>h.default_value.indexOf(E.value)>-1).map(E=>E.label).join(",");return b||h.default_value}if(h.default_value!==void 0)return h.default_value};return ni(()=>{t.nodeModel.properties.user_input_field_list?a.value.push(...t.nodeModel.properties.user_input_field_list):t.nodeModel.properties.input_field_list&&t.nodeModel.properties.input_field_list.filter(h=>h.assignment_method==="user_input").forEach(h=>{a.value.push(h)}),a.value.forEach((h,g)=>{switch(h.label=h.label||h.name,h.field=h.field||h.variable,h.required=h.required||h.is_required,h.type){case"input":h.input_type="TextInput";break;case"select":h.input_type="SingleSelect";break;case"date":h.input_type="DatePicker";break}}),yt.set(t.nodeModel.properties,"user_input_field_list",a)}),(h,g)=>{var te;const b=pe("Plus"),E=pe("el-icon"),x=pe("el-button"),T=pe("el-table-column"),j=pe("el-tag"),N=pe("el-switch"),M=pe("EditPen"),D=pe("el-tooltip"),k=pe("Delete"),F=pe("el-table");return _t(),er(Fi,null,[we("div",B7,[we("h5",U7,qe(h.$t("chat.userInput")),1),$(x,{link:"",type:"primary",onClick:g[0]||(g[0]=V=>r())},{default:G(()=>[$(E,{class:"mr-4"},{default:G(()=>[$(b)]),_:1}),jt(" "+qe(h.$t("common.add")),1)]),_:1})]),((te=t.nodeModel.properties.user_input_field_list)==null?void 0:te.length)>0?(_t(),an(F,{key:0,data:t.nodeModel.properties.user_input_field_list,class:"mb-16"},{default:G(()=>[$(T,{prop:"field",label:h.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:G(({row:V})=>[we("span",{title:V.field,class:"ellipsis-1"},qe(V.field),9,G7)]),_:1},8,["label"]),$(T,{prop:"label",label:h.$t("dynamicsForm.paramForm.name.label")},{default:G(({row:V})=>[V.label&&V.label.input_type==="TooltipLabel"?(_t(),er("span",W7,[we("span",{title:V.label.label,class:"ellipsis-1"},qe(V.label.label),9,z7)])):(_t(),er("span",V7,[we("span",{title:V.label,class:"ellipsis-1"},qe(V.label),9,H7)]))]),_:1},8,["label"]),$(T,{label:h.$t("dynamicsForm.paramForm.input_type.label")},{default:G(({row:V})=>[V.input_type==="TextInput"?(_t(),an(j,{key:0,type:"info",class:"info-tag"},{default:G(()=>[jt(qe(h.$t("dynamicsForm.input_type_list.TextInput")),1)]),_:1})):Ar("",!0),V.input_type==="Slider"?(_t(),an(j,{key:1,type:"info",class:"info-tag"},{default:G(()=>[jt(qe(h.$t("dynamicsForm.input_type_list.Slider")),1)]),_:1})):Ar("",!0),V.input_type==="SwitchInput"?(_t(),an(j,{key:2,type:"info",class:"info-tag"},{default:G(()=>[jt(qe(h.$t("dynamicsForm.input_type_list.SwitchInput")),1)]),_:1})):Ar("",!0),V.input_type==="SingleSelect"?(_t(),an(j,{key:3,type:"info",class:"info-tag"},{default:G(()=>[jt(qe(h.$t("dynamicsForm.input_type_list.SingleSelect")),1)]),_:1})):Ar("",!0),V.input_type==="MultiSelect"?(_t(),an(j,{key:4,type:"info",class:"info-tag"},{default:G(()=>[jt(qe(h.$t("dynamicsForm.input_type_list.MultiSelect")),1)]),_:1})):Ar("",!0),V.input_type==="RadioCard"?(_t(),an(j,{key:5,type:"info",class:"info-tag"},{default:G(()=>[jt(qe(h.$t("dynamicsForm.input_type_list.RadioCard")),1)]),_:1})):Ar("",!0),V.input_type==="DatePicker"?(_t(),an(j,{key:6,type:"info",class:"info-tag"},{default:G(()=>[jt(qe(h.$t("dynamicsForm.input_type_list.DatePicker")),1)]),_:1})):Ar("",!0)]),_:1},8,["label"]),$(T,{prop:"default_value",label:h.$t("dynamicsForm.default.label")},{default:G(({row:V})=>[we("span",{title:V.default_value,class:"ellipsis-1"},qe(y(V)),9,X7)]),_:1},8,["label"]),$(T,{label:h.$t("common.required")},{default:G(({row:V})=>[we("div",{onClick:g[1]||(g[1]=Mn(()=>{},["stop"]))},[$(N,{disabled:"",size:"small",modelValue:V.required,"onUpdate:modelValue":z=>V.required=z},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),$(T,{label:h.$t("common.operation"),align:"left",width:"90"},{default:G(({row:V,$index:z})=>[we("span",Y7,[$(D,{effect:"dark",content:h.$t("common.modify"),placement:"top"},{default:G(()=>[$(x,{type:"primary",text:"",onClick:Mn(J=>r(V,z),["stop"])},{default:G(()=>[$(E,null,{default:G(()=>[$(M)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),$(D,{effect:"dark",content:h.$t("common.delete"),placement:"top"},{default:G(()=>[$(x,{type:"primary",text:"",onClick:J=>l(z)},{default:G(()=>[$(E,null,{default:G(()=>[$(k)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):Ar("",!0),$($7,{ref_key:"UserFieldFormDialogRef",ref:n,onRefresh:c},null,512)],64)}}}),K7="/ui/assets/icon_file-doc-e47b0d94.svg",Z7="/ui/assets/icon_file-image-b904fbaa.svg",J7="/ui/assets/icon_file-audio-4b01d312.svg",Q7={class:"flex-between"},e9={class:"flex align-center"},t9={class:"line-height-22 mt-4"},n9={class:"flex-between"},r9={class:"flex align-center"},o9={class:"line-height-22 mt-4"},i9={class:"flex-between"},a9={class:"flex align-center"},u9={class:"line-height-22 mt-4"},s9={class:"dialog-footer"},l9=Vr({__name:"FileUploadSettingDialog",props:{nodeModel:{}},emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=e,l=Bt(!1),c=Bt(!1),y=Bt(),h=Bt({maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1});function g(x){l.value=!0,M0(()=>{h.value={...h.value,...x}})}function b(){l.value=!1}async function E(){const x=y.value;x&&await x.validate().then(()=>{a("refresh",h.value),r.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig"),l.value=!1})}return t({open:g}),(x,T)=>{const j=pe("el-slider"),N=pe("el-form-item"),M=pe("el-text"),D=pe("el-checkbox"),k=pe("el-card"),F=pe("el-form"),te=pe("el-button"),V=pe("el-dialog");return _t(),an(V,{title:x.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.title"),modelValue:l.value,"onUpdate:modelValue":T[12]||(T[12]=z=>l.value=z),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":"",width:"600"},{footer:G(()=>[we("span",s9,[$(te,{onClick:Mn(b,["prevent"])},{default:G(()=>[jt(qe(x.$t("common.cancel")),1)]),_:1}),$(te,{type:"primary",onClick:T[11]||(T[11]=z=>E()),loading:c.value},{default:G(()=>[jt(qe(x.$t("common.confirm")),1)]),_:1},8,["loading"])])]),default:G(()=>[$(F,{"label-position":"top",ref_key:"fieldFormRef",ref:y,model:h.value,"require-asterisk-position":"right"},{default:G(()=>[$(N,{label:x.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.maxFiles")},{default:G(()=>[$(j,{modelValue:h.value.maxFiles,"onUpdate:modelValue":T[0]||(T[0]=z=>h.value.maxFiles=z),"show-input":"","show-input-controls":!1,min:1,max:10},null,8,["modelValue"])]),_:1},8,["label"]),$(N,{label:x.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileLimit")},{default:G(()=>[$(j,{modelValue:h.value.fileLimit,"onUpdate:modelValue":T[1]||(T[1]=z=>h.value.fileLimit=z),"show-input":"","show-input-controls":!1,min:1,max:100},null,8,["modelValue"])]),_:1},8,["label"]),$(N,{label:x.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.label")},{default:G(()=>[$(k,{shadow:"hover",class:rd(["card-checkbox cursor w-full mb-8",h.value.document?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:T[4]||(T[4]=Mn(z=>h.value.document=!h.value.document,["stop"]))},{default:G(()=>[we("div",Q7,[we("div",e9,[T[13]||(T[13]=we("img",{class:"mr-12",src:K7,alt:""},null,-1)),we("div",null,[we("p",t9,qe(x.$t("common.fileUpload.document"))+"（TXT、MD、DOCX、HTML、CSV、XLSX、XLS、PDF） ",1),$(M,{class:"color-secondary"},{default:G(()=>[jt(qe(x.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.documentText")),1)]),_:1})])]),$(D,{modelValue:h.value.document,"onUpdate:modelValue":T[2]||(T[2]=z=>h.value.document=z),onChange:T[3]||(T[3]=z=>h.value.document=!h.value.document)},null,8,["modelValue"])])]),_:1},8,["class"]),$(k,{shadow:"hover",class:rd(["card-checkbox cursor w-full mb-8",h.value.image?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:T[7]||(T[7]=Mn(z=>h.value.image=!h.value.image,["stop"]))},{default:G(()=>[we("div",n9,[we("div",r9,[T[14]||(T[14]=we("img",{class:"mr-12",src:Z7,alt:""},null,-1)),we("div",null,[we("p",o9,qe(x.$t("common.fileUpload.image"))+"（JPG、JPEG、PNG、GIF） ",1),$(M,{class:"color-secondary"},{default:G(()=>[jt(qe(x.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.imageText")),1)]),_:1})])]),$(D,{modelValue:h.value.image,"onUpdate:modelValue":T[5]||(T[5]=z=>h.value.image=z),onChange:T[6]||(T[6]=z=>h.value.image=!h.value.image)},null,8,["modelValue"])])]),_:1},8,["class"]),$(k,{shadow:"hover",class:rd(["card-checkbox cursor w-full mb-8",h.value.audio?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:T[10]||(T[10]=Mn(z=>h.value.audio=!h.value.audio,["stop"]))},{default:G(()=>[we("div",i9,[we("div",a9,[T[15]||(T[15]=we("img",{class:"mr-12",src:J7,alt:""},null,-1)),we("div",null,[we("p",u9,qe(x.$t("common.fileUpload.audio"))+"（MP3、WAV、OGG、ACC）",1),$(M,{class:"color-secondary"},{default:G(()=>[jt(qe(x.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.audioText")),1)]),_:1})])]),$(D,{modelValue:h.value.audio,"onUpdate:modelValue":T[8]||(T[8]=z=>h.value.audio=z),onChange:T[9]||(T[9]=z=>h.value.audio=!h.value.audio)},null,8,["modelValue"])])]),_:1},8,["class"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),c9={class:"flex-between"},f9={class:"flex align-center"},d9={class:"mr-4"},p9={class:"flex-between"},h9={class:"mr-4"},v9={class:"flex"},y9={class:"flex-between"},m9={class:"mr-4"},g9={class:"flex"},_9={class:"w-full"},b9={class:"flex-between w-full"},w9=Vr({__name:"index",props:{nodeModel:{}},setup(e){const{params:{id:t}}=xs.config.globalProperties.$route,n=e,a=Bt(null),r=Bt(null),l=Bt(),c=Bt(),y=Bt(),h=Bt(),g={name:"",desc:"",prologue:it("views.application.applicationForm.form.defaultPrologue")},b=B=>B.ctrlKey===!0?(B.preventDefault(),!0):(B.stopPropagation(),!0);function E(B){yt.set(n.nodeModel.properties.node_data,"prologue",B)}const x=Co({get:()=>(n.nodeModel.properties.node_data||yt.set(n.nodeModel.properties,"node_data",g),n.nodeModel.properties.node_data),set:B=>{yt.set(n.nodeModel.properties,"node_data",B)}}),T=Bt(),j=()=>{var B;return x.value.tts_model_enable&&!x.value.tts_model_id&&x.value.tts_type==="TTS"?Promise.reject({node:n.nodeModel,errMessage:it("views.application.applicationForm.form.voicePlay.requiredMessage")}):x.value.stt_model_enable&&!x.value.stt_model_id?Promise.reject({node:n.nodeModel,errMessage:it("views.application.applicationForm.form.voiceInput.requiredMessage")}):(B=T.value)==null?void 0:B.validate().catch(H=>Promise.reject({node:n.nodeModel,errMessage:H}))};function N(){Sa.getApplicationSTTModel(t).then(B=>{a.value=yt.groupBy(B==null?void 0:B.data,"provider")})}function M(){Sa.getApplicationTTSModel(t).then(B=>{r.value=yt.groupBy(B==null?void 0:B.data,"provider")})}function D(){var B;x.value.tts_model_id?(B=l.value)==null||B.reset_default(x.value.tts_model_id,t):V({})}function k(){x.value.tts_model_enable||(x.value.tts_model_id="",x.value.tts_type="BROWSER")}function F(){x.value.stt_model_enable||(x.value.stt_model_id="")}const te=()=>{var H;const B=x.value.tts_model_id;if(!B){Ih(it("views.application.applicationForm.form.voicePlay.requiredMessage"));return}(H=l.value)==null||H.open(B,t,x.value.tts_model_params_setting)},V=B=>{x.value.tts_model_params_setting=B},z=()=>{const B={maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1};x.value.file_upload_enable&&(x.value.file_upload_setting=x.value.file_upload_setting||B),n.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig")},J=()=>{var B;(B=h.value)==null||B.open(x.value.file_upload_setting)},K=B=>{x.value.file_upload_setting=B};return ni(()=>{yt.set(n.nodeModel,"validate",j),n.nodeModel.properties.node_data.tts_type||yt.set(n.nodeModel.properties.node_data,"tts_type","BROWSER"),M(),N()}),(B,H)=>{const ne=pe("el-input"),X=pe("el-form-item"),ge=pe("MdEditorMagnify"),Fe=pe("AppIcon"),Me=pe("el-tooltip"),Xe=pe("Setting"),De=pe("el-icon"),Re=pe("el-button"),ce=pe("el-switch"),he=pe("el-checkbox"),Oe=pe("ModelSelect"),Ae=pe("el-radio"),Ve=pe("el-radio-group"),dt=pe("Operation"),mt=pe("el-form");return _t(),an(sa,{nodeModel:B.nodeModel},{default:G(()=>[$(mt,{onSubmit:H[13]||(H[13]=Mn(()=>{},["prevent"])),model:x.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"baseNodeFormRef",ref:T},{default:G(()=>[$(X,{label:B.$t("views.application.applicationForm.form.appName.label"),prop:"name",rules:{message:Yr(it)("views.application.applicationForm.form.appName.requiredMessage"),trigger:"blur",required:!0}},{default:G(()=>[$(ne,{modelValue:x.value.name,"onUpdate:modelValue":H[0]||(H[0]=pt=>x.value.name=pt),maxlength:"64",placeholder:Yr(it)("views.application.applicationForm.form.appName.placeholder"),"show-word-limit":"",onBlur:H[1]||(H[1]=pt=>{var Jt;return x.value.name=(Jt=x.value.name)==null?void 0:Jt.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),$(X,{label:B.$t("views.application.applicationForm.form.appDescription.label")},{default:G(()=>[$(ne,{modelValue:x.value.desc,"onUpdate:modelValue":H[2]||(H[2]=pt=>x.value.desc=pt),placeholder:B.$t("views.application.applicationForm.form.appDescription.placeholder"),rows:3,type:"textarea",maxlength:"256","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),$(X,{label:B.$t("views.application.applicationForm.form.prologue")},{default:G(()=>[$(ge,{onWheel:b,title:B.$t("views.application.applicationForm.form.prologue"),modelValue:x.value.prologue,"onUpdate:modelValue":H[3]||(H[3]=pt=>x.value.prologue=pt),style:{height:"150px"},onSubmitDialog:E},null,8,["title","modelValue"])]),_:1},8,["label"]),$(X,null,{label:G(()=>[we("div",c9,[we("div",f9,[we("span",d9,qe(B.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.label")),1),$(Me,{effect:"dark",content:B.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.tooltip"),placement:"right"},{default:G(()=>[$(Fe,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])]),we("div",null,[x.value.file_upload_enable?(_t(),an(Re,{key:0,type:"primary",link:"",onClick:J,class:"mr-4"},{default:G(()=>[$(De,{class:"mr-4"},{default:G(()=>[$(Xe)]),_:1})]),_:1})):Ar("",!0),$(ce,{size:"small",modelValue:x.value.file_upload_enable,"onUpdate:modelValue":H[4]||(H[4]=pt=>x.value.file_upload_enable=pt),onChange:z},null,8,["modelValue"])])])]),_:1}),$(q7,{ref_key:"UserInputFieldTableFef",ref:c,"node-model":B.nodeModel},null,8,["node-model"]),$(L7,{ref_key:"ApiInputFieldTableFef",ref:y,"node-model":B.nodeModel},null,8,["node-model"]),$(X,null,{label:G(()=>[we("div",p9,[we("span",h9,qe(B.$t("views.application.applicationForm.form.voiceInput.label")),1),we("div",v9,[x.value.stt_model_enable?(_t(),an(he,{key:0,modelValue:x.value.stt_autosend,"onUpdate:modelValue":H[5]||(H[5]=pt=>x.value.stt_autosend=pt)},{default:G(()=>[jt(qe(B.$t("views.application.applicationForm.form.voiceInput.autoSend")),1)]),_:1},8,["modelValue"])):Ar("",!0),$(ce,{class:"ml-8",size:"small",modelValue:x.value.stt_model_enable,"onUpdate:modelValue":H[6]||(H[6]=pt=>x.value.stt_model_enable=pt),onChange:F},null,8,["modelValue"])])])]),default:G(()=>[Uu($(Oe,{onWheel:b,modelValue:x.value.stt_model_id,"onUpdate:modelValue":H[7]||(H[7]=pt=>x.value.stt_model_id=pt),placeholder:B.$t("views.application.applicationForm.form.voiceInput.placeholder"),options:a.value},null,8,["modelValue","placeholder","options"]),[[Ch,x.value.stt_model_enable]])]),_:1}),$(X,null,{label:G(()=>[we("div",y9,[we("span",m9,qe(B.$t("views.application.applicationForm.form.voicePlay.label")),1),we("div",g9,[x.value.tts_model_enable?(_t(),an(he,{key:0,modelValue:x.value.tts_autoplay,"onUpdate:modelValue":H[8]||(H[8]=pt=>x.value.tts_autoplay=pt)},{default:G(()=>[jt(qe(B.$t("views.application.applicationForm.form.voicePlay.autoPlay")),1)]),_:1},8,["modelValue"])):Ar("",!0),$(ce,{class:"ml-8",size:"small",modelValue:x.value.tts_model_enable,"onUpdate:modelValue":H[9]||(H[9]=pt=>x.value.tts_model_enable=pt),onChange:k},null,8,["modelValue"])])])]),default:G(()=>[we("div",_9,[Uu($(Ve,{modelValue:x.value.tts_type,"onUpdate:modelValue":H[10]||(H[10]=pt=>x.value.tts_type=pt)},{default:G(()=>[$(Ae,{label:B.$t("views.application.applicationForm.form.voicePlay.browser"),value:"BROWSER"},null,8,["label"]),$(Ae,{label:B.$t("views.application.applicationForm.form.voicePlay.tts"),value:"TTS"},null,8,["label"])]),_:1},8,["modelValue"]),[[Ch,x.value.tts_model_enable]])]),we("div",b9,[x.value.tts_type==="TTS"&&x.value.tts_model_enable?(_t(),an(Oe,{key:0,onWheel:b,modelValue:x.value.tts_model_id,"onUpdate:modelValue":H[11]||(H[11]=pt=>x.value.tts_model_id=pt),placeholder:B.$t("views.application.applicationForm.form.voicePlay.placeholder"),options:r.value,onChange:H[12]||(H[12]=pt=>D())},null,8,["modelValue","placeholder","options"])):Ar("",!0),x.value.tts_type==="TTS"&&x.value.tts_model_enable?(_t(),an(Re,{key:1,onClick:te,disabled:!x.value.tts_model_id,class:"ml-8"},{default:G(()=>[$(De,null,{default:G(()=>[$(De,null,{default:G(()=>[$(dt)]),_:1})]),_:1})]),_:1},8,["disabled"])):Ar("",!0)])]),_:1})]),_:1},8,["model"]),$(tT,{ref_key:"TTSModeParamSettingDialogRef",ref:l,onRefresh:V},null,512),$(l9,{ref_key:"FileUploadSettingDialogRef",ref:h,"node-model":B.nodeModel,onRefresh:K},null,8,["node-model"])]),_:1},8,["nodeModel"])}}});const E9=ey(w9,[["__scopeId","data-v-2dd4b09b"]]);class O9 extends la{constructor(t){super(t,E9)}}class x9 extends ca{constructor(t,n){super(t,n)}get_width(){return 600}}const S9={type:"base-node",model:x9,view:O9},A9=Object.freeze(Object.defineProperty({__proto__:null,default:S9},Symbol.toStringTag,{value:"Module"})),T9={class:"flex-between lighter"},M9={key:0,class:"info"},N9={key:0,class:"mt-8"},P9=Vr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={branch:[{conditions:[{field:[],compare:"",value:""}],id:r0(),type:"IF",condition:"and"},{conditions:[],id:r0(),type:"ELSE",condition:"and"}]},a=j=>j.ctrlKey===!0?(j.preventDefault(),!0):(j.stopPropagation(),!0),r=(j,N,M)=>{const k=yt.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]).map(F=>F.id===N.id?{...F,height:j.height,index:M}:F);yt.set(t.nodeModel.properties,"branch_condition_list",k),b(t.nodeModel.properties.node_data.branch,!0)},l=Co({get:()=>(t.nodeModel.properties.node_data||(yt.set(t.nodeModel.properties,"node_data",n),b(n.branch,!0)),t.nodeModel.properties.node_data),set:j=>{yt.set(t.nodeModel.properties,"node_data",j)}}),c=Bt(),y=Bt(),h=()=>{var N;const j=[(N=c.value)==null?void 0:N.validate(),...y.value.map(M=>M.validate())];return Promise.all(j).catch(M=>Promise.reject({node:t.nodeModel,errMessage:M}))};function g(){const j=yt.cloneDeep(t.nodeModel.properties.node_data.branch),N={conditions:[{field:[],compare:"",value:""}],type:"ELSE IF "+(j.length-1),id:r0(),condition:"and"};j.splice(j.length-1,0,N),b(j,!0),yt.set(t.nodeModel.properties.node_data,"branch",j)}function b(j,N){const M=yt.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]),D=j.map((k,F)=>{const te=M.find(V=>V.id===k.id);if(te)return{index:F,height:te.height,id:k.id};if(N)return{index:F,height:12,id:k.id}}).filter(k=>k);yt.set(t.nodeModel.properties,"branch_condition_list",D),t.nodeModel.refreshBranch()}function E(j){const N=yt.cloneDeep(t.nodeModel.properties.node_data.branch);N[j].conditions.push({field:[],compare:"",value:""}),yt.set(t.nodeModel.properties.node_data,"branch",N)}function x(j,N){const M=yt.cloneDeep(t.nodeModel.properties.node_data.branch);if(M[j].conditions.splice(N,1),M[j].conditions.length===0){const k=M.splice(j,1).map(F=>t.nodeModel.id+"_"+F.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter(F=>k.includes(F.sourceAnchorId)).map(F=>F.id)),b(M,!1),M.forEach((F,te)=>{F.type==="ELSE IF "+(te+1)&&(F.type="ELSE IF "+te)})}yt.set(t.nodeModel.properties.node_data,"branch",M)}function T(j,N,M){if(j==="is_null"||j==="is_not_null"){const D=yt.cloneDeep(t.nodeModel.properties.node_data.branch);D[N].conditions[M].value=1,yt.set(t.nodeModel.properties.node_data,"branch",D)}}return ni(()=>{yt.set(t.nodeModel,"validate",h)}),(j,N)=>{const M=pe("el-option"),D=pe("el-select"),k=pe("el-form-item"),F=pe("el-col"),te=pe("el-input"),V=pe("Delete"),z=pe("el-icon"),J=pe("el-button"),K=pe("el-row"),B=pe("Plus"),H=pe("el-card"),ne=pe("el-form"),X=Fv("resize");return _t(),an(sa,{nodeModel:j.nodeModel},{default:G(()=>[$(ne,{model:l.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"ConditionNodeFormRef",ref:c,onSubmit:N[0]||(N[0]=Mn(()=>{},["prevent"]))},{default:G(()=>[(_t(!0),er(Fi,null,pu(l.value.branch,(ge,Fe)=>Uu((_t(),an(H,{key:ge.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:G(()=>[we("div",T9,[jt(qe(ge.type)+" ",1),ge.conditions.length>1?(_t(),er("div",M9,[we("span",null,qe(j.$t("views.applicationWorkflow.nodes.conditionNode.conditions.info")),1),$(D,{teleported:!1,modelValue:ge.condition,"onUpdate:modelValue":Me=>ge.condition=Me,size:"small",style:{width:"60px",margin:"0 8px"}},{default:G(()=>[$(M,{label:j.$t("views.applicationWorkflow.condition.AND"),value:"and"},null,8,["label"]),$(M,{label:j.$t("views.applicationWorkflow.condition.OR"),value:"or"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),we("span",null,qe(j.$t("views.applicationWorkflow.nodes.conditionNode.conditions.label")),1)])):Ar("",!0)]),Fe!==l.value.branch.length-1?(_t(),er("div",N9,[(_t(!0),er(Fi,null,pu(ge.conditions,(Me,Xe)=>(_t(),an(K,{key:Xe,gutter:8},{default:G(()=>[$(F,{span:11},{default:G(()=>[$(k,{prop:"branch."+Fe+".conditions."+Xe+".field",rules:{type:"array",required:!0,message:j.$t("views.applicationWorkflow.variable.fieldMessage"),trigger:"change"}},{default:G(()=>[$(aa,{ref_for:!0,ref_key:"nodeCascaderRef",ref:y,nodeModel:j.nodeModel,class:"w-full",placeholder:j.$t("views.applicationWorkflow.variable.fieldMessage"),modelValue:Me.field,"onUpdate:modelValue":De=>Me.field=De},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),$(F,{span:6},{default:G(()=>[$(k,{prop:"branch."+Fe+".conditions."+Xe+".compare",rules:{required:!0,message:j.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),trigger:"change"}},{default:G(()=>[$(D,{onWheel:a,teleported:!1,modelValue:Me.compare,"onUpdate:modelValue":De=>Me.compare=De,placeholder:j.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),clearable:"",onChange:De=>T(De,Fe,Xe)},{default:G(()=>[(_t(!0),er(Fi,null,pu(Yr(EU),(De,Re)=>(_t(),an(M,{key:Re,label:De.label,value:De.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])]),_:2},1032,["prop","rules"])]),_:2},1024),$(F,{span:6},{default:G(()=>[Me.compare!=="is_null"&&Me.compare!=="is_not_null"?(_t(),an(k,{key:0,prop:"branch."+Fe+".conditions."+Xe+".value",rules:{required:!0,message:j.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage"),trigger:"blur"}},{default:G(()=>[$(te,{modelValue:Me.value,"onUpdate:modelValue":De=>Me.value=De,placeholder:j.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])):Ar("",!0)]),_:2},1024),$(F,{span:1},{default:G(()=>[$(J,{disabled:Fe===0&&Xe===0,link:"",type:"info",class:"mt-4",onClick:De=>x(Fe,Xe)},{default:G(()=>[$(z,null,{default:G(()=>[$(V)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))])):Ar("",!0),Fe!==l.value.branch.length-1?(_t(),an(J,{key:1,link:"",type:"primary",onClick:Me=>E(Fe)},{default:G(()=>[$(z,{class:"mr-4"},{default:G(()=>[$(B)]),_:1}),jt(" "+qe(j.$t("views.applicationWorkflow.nodes.conditionNode.addCondition")),1)]),_:2},1032,["onClick"])):Ar("",!0)]),_:2},1024)),[[X,Me=>r(Me,ge,Fe)]])),128)),$(J,{link:"",type:"primary",onClick:g},{default:G(()=>[$(z,{class:"mr-4"},{default:G(()=>[$(B)]),_:1}),jt(" "+qe(j.$t("views.applicationWorkflow.nodes.conditionNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class k9 extends la{constructor(t){super(t,P9)}}const R9=(e,t)=>e.filter((n,a)=>a<t).map(n=>n.height+8).reduce((n,a)=>n+a,0);class j9 extends ca{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r,height:l,properties:{branch_condition_list:c}}=this;this.height===void 0&&(this.height=200);const y=this.properties.showNode===void 0?!0:this.properties.showNode,h=[];if(h.push({x:n-r/2+10,y:y?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const b=c[g],E=R9(c,g);h.push({x:n+r/2-10,y:y?a-l/2+75+E+b.height/2:a-15,id:`${t}_${b.id}_right`,type:"right"})}return h}}const C9={type:"condition-node",model:j9,view:k9},D9=Object.freeze(Object.defineProperty({__proto__:null,default:C9},Symbol.toStringTag,{value:"Module"})),I9={class:"title-decoration-1 mb-8"},L9=Vr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={document_list:["start-node","document"]},a=Co({get:()=>(t.nodeModel.properties.node_data||yt.set(t.nodeModel.properties,"node_data",n),t.nodeModel.properties.node_data),set:r=>{yt.set(t.nodeModel.properties,"node_data",r)}});return(r,l)=>{const c=pe("el-form-item"),y=pe("el-form"),h=pe("el-card");return _t(),an(sa,{nodeModel:r.nodeModel},{default:G(()=>[we("h5",I9,qe(r.$t("views.applicationWorkflow.nodeSetting")),1),$(h,{shadow:"never",class:"card-never"},{default:G(()=>[$(y,{onSubmit:l[1]||(l[1]=Mn(()=>{},["prevent"])),model:a.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref:"DatasetNodeFormRef"},{default:G(()=>[$(c,{label:r.$t("views.problem.relateParagraph.selectDocument"),rules:{type:"array",required:!0,message:r.$t("views.log.documentPlaceholder"),trigger:"change"}},{default:G(()=>[$(aa,{ref:"nodeCascaderRef",nodeModel:r.nodeModel,class:"w-full",placeholder:r.$t("views.log.documentPlaceholder"),modelValue:a.value.document_list,"onUpdate:modelValue":l[0]||(l[0]=g=>a.value.document_list=g)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});let F9=class extends la{constructor(t){super(t,L9)}};const $9={type:"document-extract-node",model:ca,view:F9},B9=Object.freeze(Object.defineProperty({__proto__:null,default:$9},Symbol.toStringTag,{value:"Module"})),U9={class:"dialog-footer"},G9=Vr({__name:"AddFormCollect",props:{title:{default:it("views.template.templateForm.title.addParam")},addFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const a=e,r=Bt(!1),l=Bt(),c=Bt({}),y=Bt(!1),h=()=>{r.value=!0},g=()=>{r.value=!1,c.value={}},b=()=>{var E;(E=l.value)==null||E.validate().then(()=>{var x;a.addFormField((x=l.value)==null?void 0:x.getData()),g()})};return t({close:g,open:h}),(E,x)=>{const T=pe("el-button"),j=pe("el-dialog");return _t(),an(j,{title:E.title,modelValue:r.value,"onUpdate:modelValue":x[3]||(x[3]=N=>r.value=N),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":g,"append-to-body":""},{footer:G(()=>[we("span",U9,[$(T,{onClick:x[1]||(x[1]=Mn(N=>r.value=!1,["prevent"]))},{default:G(()=>[jt(qe(E.$t("common.cancel")),1)]),_:1}),$(T,{type:"primary",onClick:x[2]||(x[2]=N=>b()),loading:y.value},{default:G(()=>[jt(qe(E.$t("common.add")),1)]),_:1},8,["loading"])])]),default:G(()=>[$(p1,{modelValue:c.value,"onUpdate:modelValue":x[0]||(x[0]=N=>c.value=N),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:l},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),W9={class:"dialog-footer"},z9=Vr({__name:"EditFormCollect",props:{title:{default:it("views.template.templateForm.title.editParam")},editFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const a=e,r=Bt(!1),l=Bt(),c=Bt({}),y=Bt(0),h=Bt(!1),g=(x,T)=>{r.value=!0,c.value=x,y.value=T},b=()=>{r.value=!1,c.value={}},E=()=>{var x;(x=l.value)==null||x.validate().then(()=>{var T;a.editFormField((T=l.value)==null?void 0:T.getData(),y.value),b()})};return t({close:b,open:g}),(x,T)=>{const j=pe("el-button"),N=pe("el-dialog");return _t(),an(N,{title:x.title,modelValue:r.value,"onUpdate:modelValue":T[3]||(T[3]=M=>r.value=M),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":""},{footer:G(()=>[we("span",W9,[$(j,{onClick:T[1]||(T[1]=Mn(M=>r.value=!1,["prevent"]))},{default:G(()=>[jt(qe(x.$t("common.cancel")),1)]),_:1}),$(j,{type:"primary",onClick:T[2]||(T[2]=M=>E()),loading:h.value},{default:G(()=>[jt(qe(x.$t("common.modify")),1)]),_:1},8,["loading"])])]),default:G(()=>[$(p1,{modelValue:c.value,"onUpdate:modelValue":T[0]||(T[0]=M=>c.value=M),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:l},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),V9={class:"title-decoration-1 mb-8"},H9={class:"flex align-center"},X9={class:"mr-4"},Y9={class:"flex-between"},q9={class:"lighter"},K9=["title"],Z9={key:0},J9=["title"],Q9={key:1},eW=["title"],tW=["title"],nW={class:"mr-4"},rW=Vr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Bt(),a=(M,D)=>{const k=x.value.form_field_list.map((F,te)=>D===te?yt.cloneDeep(M):yt.cloneDeep(F));x.value.form_field_list=k,l()},r=M=>{if(x.value.form_field_list.some(D=>D.field===M.field)){za(it("views.applicationWorkflow.tip.paramErrorMessage")+M.field);return}x.value.form_field_list=yt.cloneDeep([...x.value.form_field_list,M]),l()},l=()=>{const M=[{label:it("views.applicationWorkflow.nodes.formNode.formAllContent"),value:"form_data"},...x.value.form_field_list.map(D=>({value:D.field,label:typeof D.label=="string"?D.label:D.label.label}))];yt.set(t.nodeModel.properties.config,"fields",M)},c=Bt(),y=Bt(),h=()=>{var M;(M=c.value)==null||M.open()},g=(M,D)=>{var k;(k=y.value)==null||k.open(yt.cloneDeep(M),D)},b=M=>{x.value.form_field_list=x.value.form_field_list.filter(D=>D.field!==M.field),l()},E=Bt({is_result:!0,form_content_format:`${it("views.applicationWorkflow.nodes.formNode.form_content_format1")}
    {{form}}
    ${it("views.applicationWorkflow.nodes.formNode.form_content_format2")}`,form_field_list:[]}),x=Co({get:()=>(t.nodeModel.properties.node_data||yt.set(t.nodeModel.properties,"node_data",E.value),t.nodeModel.properties.node_data),set:M=>{yt.set(t.nodeModel.properties,"node_data",M)}}),T=M=>{var D;if(M.default_value){const k=(D=M.option_list)==null?void 0:D.filter(F=>M.default_value.indexOf(F.value)>-1).map(F=>F.label).join(",");return k||M.default_value}if(M.default_value!==void 0)return M.default_value},j=()=>{var M;return(M=n.value)==null?void 0:M.validate()};function N(M){yt.set(t.nodeModel.properties.node_data,"form_content_format",M)}return ni(()=>{yt.set(t.nodeModel,"validate",j),l(),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(M,D)=>{const k=pe("AppIcon"),F=pe("el-tooltip"),te=pe("MdEditorMagnify"),V=pe("el-form-item"),z=pe("Plus"),J=pe("el-icon"),K=pe("el-button"),B=pe("el-table-column"),H=pe("el-tag"),ne=pe("el-switch"),X=pe("EditPen"),ge=pe("Delete"),Fe=pe("el-table"),Me=pe("el-form"),Xe=pe("el-card");return _t(),an(sa,{nodeModel:M.nodeModel},{default:G(()=>[we("h5",V9,qe(M.$t("views.applicationWorkflow.nodeSetting")),1),$(Xe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:G(()=>[$(Me,{onSubmit:D[4]||(D[4]=Mn(()=>{},["prevent"])),model:x.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:G(()=>[$(V,{label:M.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),prop:"form_content_format",rules:{required:!0,message:M.$t("views.applicationWorkflow.nodes.formNode.formContent.requiredMessage"),trigger:"blur"}},{label:G(()=>[we("div",H9,[we("div",X9,[we("span",null,[jt(qe(M.$t("views.applicationWorkflow.nodes.formNode.formContent.label")),1),D[5]||(D[5]=we("span",{class:"danger"},"*",-1))])]),$(F,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:G(()=>[jt(qe(M.$t("views.applicationWorkflow.nodes.formNode.formContent.tooltip",{form:"{ form }"})),1)]),default:G(()=>[$(k,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:G(()=>[$(te,{title:M.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),modelValue:x.value.form_content_format,"onUpdate:modelValue":D[0]||(D[0]=De=>x.value.form_content_format=De),style:{height:"150px"},onSubmitDialog:N},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),$(V,{label:M.$t("views.applicationWorkflow.nodes.formNode.formSetting"),onClick:D[3]||(D[3]=Mn(()=>{},["prevent"]))},{label:G(()=>[we("div",Y9,[we("h5",q9,qe(M.$t("views.applicationWorkflow.nodes.formNode.formSetting")),1),$(K,{link:"",type:"primary",onClick:D[1]||(D[1]=De=>h())},{default:G(()=>[$(J,{class:"mr-4"},{default:G(()=>[$(z)]),_:1}),jt(" "+qe(M.$t("common.add")),1)]),_:1})])]),default:G(()=>[x.value.form_field_list.length>0?(_t(),an(Fe,{key:0,class:"border",data:x.value.form_field_list},{default:G(()=>[$(B,{prop:"field",label:M.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:G(({row:De})=>[we("span",{title:De.field,class:"ellipsis-1"},qe(De.field),9,K9)]),_:1},8,["label"]),$(B,{prop:"label",label:M.$t("dynamicsForm.paramForm.name.label")},{default:G(({row:De})=>[De.label&&De.label.input_type==="TooltipLabel"?(_t(),er("span",Z9,[we("span",{title:De.label.label,class:"ellipsis-1"},qe(De.label.label),9,J9)])):(_t(),er("span",Q9,[we("span",{title:De.label,class:"ellipsis-1"},qe(De.label),9,eW)]))]),_:1},8,["label"]),$(B,{label:M.$t("dynamicsForm.paramForm.input_type.label"),width:"110px"},{default:G(({row:De})=>[$(H,{type:"info",class:"info-tag"},{default:G(()=>{var Re;return[jt(qe((Re=Yr(nD).find(ce=>ce.value===De.input_type))==null?void 0:Re.label),1)]}),_:2},1024)]),_:1},8,["label"]),$(B,{prop:"default_value",label:M.$t("dynamicsForm.default.label")},{default:G(({row:De})=>[we("span",{title:De.default_value,class:"ellipsis-1"},qe(T(De)),9,tW)]),_:1},8,["label"]),$(B,{label:M.$t("common.required"),width:"85"},{default:G(({row:De})=>[we("div",{onClick:D[2]||(D[2]=Mn(()=>{},["stop"]))},[$(ne,{disabled:"",size:"small",modelValue:De.required,"onUpdate:modelValue":Re=>De.required=Re},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),$(B,{label:M.$t("common.operation"),align:"left",width:"90"},{default:G(({row:De,$index:Re})=>[we("span",nW,[$(F,{effect:"dark",content:M.$t("common.modify"),placement:"top"},{default:G(()=>[$(K,{type:"primary",text:"",onClick:Mn(ce=>g(De,Re),["stop"])},{default:G(()=>[$(J,null,{default:G(()=>[$(X)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),$(F,{effect:"dark",content:M.$t("common.delete"),placement:"top"},{default:G(()=>[$(K,{type:"primary",text:"",onClick:ce=>b(De)},{default:G(()=>[$(J,null,{default:G(()=>[$(ge)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):Ar("",!0)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),$(G9,{ref_key:"addFormCollectRef",ref:c,addFormField:r},null,512),$(z9,{ref_key:"editFormCollectRef",ref:y,editFormField:a},null,512)]),_:1},8,["nodeModel"])}}});class oW extends la{constructor(t){super(t,rW)}}const iW={type:"form-node",model:ca,view:oW},aW=Object.freeze(Object.defineProperty({__proto__:null,default:iW},Symbol.toStringTag,{value:"Module"})),uW={class:"title-decoration-1 mb-16"},sW={class:"lighter mb-8"},lW={key:0},cW={class:"flex-between"},fW={class:"flex"},dW={class:"flex"},pW={key:0,class:"danger"},hW={class:"flex align-center"},vW={class:"mr-4"},yW=Vr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Bt(),{params:{id:a}}=xs.config.globalProperties.$route,r={input_field_list:[],is_result:!1},l=Co({get:()=>(t.nodeModel.properties.node_data||yt.set(t.nodeModel.properties,"node_data",r),t.nodeModel.properties.node_data),set:g=>{yt.set(t.nodeModel.properties,"node_data",g)}}),c=Bt(),y=()=>{var g;return(g=c.value)==null?void 0:g.validate().catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))},h=()=>{if(!t.nodeModel.properties.node_data.function_lib_id){yt.set(t.nodeModel.properties,"status",500);return}Sa.getFunctionLib(a,t.nodeModel.properties.node_data.function_lib_id).then(g=>{const b=t.nodeModel.properties.node_data.input_field_list,E=g.data.input_field_list.map(x=>{const T=b.find(j=>j.name==x.name);return T&&T.source==x.source?{...x,value:JSON.parse(JSON.stringify(T.value))}:{...x,value:x.source=="reference"?[]:""}});yt.set(t.nodeModel.properties.node_data,"input_field_list",E),yt.set(t.nodeModel.properties,"status",g.data.is_active?200:500)}).catch(g=>{yt.set(t.nodeModel.properties,"status",500)})};return ni(()=>{var g;typeof((g=t.nodeModel.properties.node_data)==null?void 0:g.is_result)>"u"&&iy(t.nodeModel)&&yt.set(t.nodeModel.properties.node_data,"is_result",!0),h(),yt.set(t.nodeModel,"validate",y)}),(g,b)=>{const E=pe("auto-tooltip"),x=pe("el-tag"),T=pe("el-input"),j=pe("el-form-item"),N=pe("el-text"),M=pe("el-card"),D=pe("AppIcon"),k=pe("el-tooltip"),F=pe("el-switch"),te=pe("el-form");return _t(),an(sa,{nodeModel:g.nodeModel},{default:G(()=>[we("h5",uW,qe(g.$t("views.applicationWorkflow.nodeSetting")),1),we("h5",sW,qe(g.$t("views.functionLib.functionForm.form.inputParam.label")),1),$(te,{onSubmit:b[2]||(b[2]=Mn(()=>{},["prevent"])),ref_key:"FunctionNodeFormRef",ref:c,model:l.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:G(()=>[$(M,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:G(()=>{var V;return[((V=l.value.input_field_list)==null?void 0:V.length)>0?(_t(),er("div",lW,[(_t(!0),er(Fi,null,pu(l.value.input_field_list,(z,J)=>(_t(),an(j,{key:z.name,label:z.name,prop:"input_field_list."+J+".value",rules:{required:z.is_required,message:g.$t("views.functionLib.functionForm.form.inputParam.requiredMessage"),trigger:"blur"}},{label:G(()=>[we("div",cW,[we("div",fW,[we("span",dW,[$(E,{content:z.name,style:{"max-width":"130px"}},{default:G(()=>[jt(qe(z.name),1)]),_:2},1032,["content"]),z.is_required?(_t(),er("span",pW,"*")):Ar("",!0)]),$(x,{type:"info",class:"info-tag ml-4"},{default:G(()=>[jt(qe(z.type),1)]),_:2},1024)])])]),default:G(()=>[z.source==="reference"?(_t(),an(aa,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:n,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.functionLib.functionForm.form.inputParam.placeholder"),modelValue:z.value,"onUpdate:modelValue":K=>z.value=K},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(_t(),an(T,{key:1,modelValue:z.value,"onUpdate:modelValue":K=>z.value=K,placeholder:g.$t("views.functionLib.functionForm.form.inputParam.requiredMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(_t(),an(N,{key:1,type:"info"},{default:G(()=>[jt(qe(g.$t("common.noData")),1)]),_:1}))]}),_:1}),$(j,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[1]||(b[1]=Mn(()=>{},["prevent"]))},{label:G(()=>[we("div",hW,[we("div",vW,[we("span",null,[jt(qe(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),b[3]||(b[3]=we("span",{class:"danger"},"*",-1))])]),$(k,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:G(()=>[jt(qe(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:G(()=>[$(D,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:G(()=>[$(F,{size:"small",modelValue:l.value.is_result,"onUpdate:modelValue":b[0]||(b[0]=V=>l.value.is_result=V)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class mW extends la{constructor(t){super(t,yW)}}const gW={type:"function-lib-node",model:ca,view:mW},_W=Object.freeze(Object.defineProperty({__proto__:null,default:gW},Symbol.toStringTag,{value:"Module"})),bW={class:"title-decoration-1 mb-16"},wW={class:"flex-between"},EW={class:"lighter mb-8"},OW={key:0},xW={class:"flex-between"},SW={class:"flex"},AW={class:"flex"},TW={key:0,class:"danger"},MW={class:"lighter mb-8"},NW={key:0,class:"function-CodemirrorEditor mb-8"},PW={class:"function-CodemirrorEditor__footer"},kW={class:"flex align-center"},RW={class:"mr-4"},jW={class:"dialog-footer mt-24"},CW=Vr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=k=>k.ctrlKey===!0?(k.preventDefault(),!0):(k.stopPropagation(),!0),a=Bt(),r=Bt(),l={code:"",input_field_list:[],is_result:!1},c=Bt(null),y=Bt(!1),h=Co({get:()=>(t.nodeModel.properties.node_data||yt.set(t.nodeModel.properties,"node_data",l),t.nodeModel.properties.node_data),set:k=>{yt.set(t.nodeModel.properties,"node_data",k)}}),g=Bt(),b=()=>{var k;return(k=g.value)==null?void 0:k.validate().catch(F=>Promise.reject({node:t.nodeModel,errMessage:F}))},E=Bt(!1),x=Bt("");function T(){x.value=h.value.code,E.value=!0}function j(){yt.set(t.nodeModel.properties.node_data,"code",x.value),E.value=!1}function N(k,F){typeof F<"u"&&(c.value=F),a.value.open(k)}function M(k){const F=yt.cloneDeep(t.nodeModel.properties.node_data.input_field_list);F.splice(k,1),yt.set(t.nodeModel.properties.node_data,"input_field_list",F)}function D(k){const F=yt.cloneDeep(t.nodeModel.properties.node_data.input_field_list),te={...k,value:k.source==="reference"?[]:""};c.value!==null?F.splice(c.value,1,te):F.push(te),yt.set(t.nodeModel.properties.node_data,"input_field_list",F),c.value=null}return ni(()=>{var k;typeof((k=t.nodeModel.properties.node_data)==null?void 0:k.is_result)>"u"&&iy(t.nodeModel)&&yt.set(t.nodeModel.properties.node_data,"is_result",!0),yt.set(t.nodeModel,"validate",b),setTimeout(()=>{y.value=!0},100)}),(k,F)=>{const te=pe("Plus"),V=pe("el-icon"),z=pe("el-button"),J=pe("auto-tooltip"),K=pe("el-tag"),B=pe("EditPen"),H=pe("Delete"),ne=pe("el-input"),X=pe("el-form-item"),ge=pe("el-text"),Fe=pe("el-card"),Me=pe("CodemirrorEditor"),Xe=pe("AppIcon"),De=pe("el-tooltip"),Re=pe("el-switch"),ce=pe("el-form"),he=pe("el-dialog");return _t(),an(sa,{nodeModel:k.nodeModel},{default:G(()=>[we("h5",bW,qe(k.$t("views.applicationWorkflow.nodeSetting")),1),we("div",wW,[we("h5",EW,qe(k.$t("views.functionLib.functionForm.form.inputParam.label")),1),$(z,{link:"",type:"primary",onClick:F[0]||(F[0]=Oe=>N())},{default:G(()=>[$(V,{class:"mr-4"},{default:G(()=>[$(te)]),_:1}),jt(" "+qe(k.$t("common.add")),1)]),_:1})]),$(ce,{onSubmit:F[4]||(F[4]=Mn(()=>{},["prevent"])),ref_key:"FunctionNodeFormRef",ref:g,model:h.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:G(()=>[$(Fe,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:G(()=>{var Oe;return[((Oe=h.value.input_field_list)==null?void 0:Oe.length)>0?(_t(),er("div",OW,[(_t(!0),er(Fi,null,pu(h.value.input_field_list,(Ae,Ve)=>(_t(),an(X,{key:Ve,label:Ae.name,prop:"input_field_list."+Ve+".value",rules:{required:Ae.is_required,message:k.$t("views.functionLib.functionForm.form.inputParam.requiredMessage"),trigger:"blur"}},{label:G(()=>[we("div",xW,[we("div",SW,[we("span",AW,[$(J,{content:Ae.name,style:{"max-width":"130px"}},{default:G(()=>[jt(qe(Ae.name),1)]),_:2},1032,["content"]),Ae.is_required?(_t(),er("span",TW,"*")):Ar("",!0)]),$(K,{type:"info",class:"info-tag ml-4"},{default:G(()=>[jt(qe(Ae.type),1)]),_:2},1024)]),we("div",null,[$(z,{text:"",onClick:Mn(dt=>N(Ae,Ve),["stop"])},{default:G(()=>[$(V,null,{default:G(()=>[$(B)]),_:1})]),_:2},1032,["onClick"]),$(z,{text:"",onClick:dt=>M(Ve),style:{"margin-left":"4px !important"}},{default:G(()=>[$(V,null,{default:G(()=>[$(H)]),_:1})]),_:2},1032,["onClick"])])])]),default:G(()=>[Ae.source==="reference"?(_t(),an(aa,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:r,nodeModel:k.nodeModel,class:"w-full",placeholder:k.$t("views.functionLib.functionForm.form.inputParam.placeholder"),modelValue:Ae.value,"onUpdate:modelValue":dt=>Ae.value=dt,width:100},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(_t(),an(ne,{key:1,modelValue:Ae.value,"onUpdate:modelValue":dt=>Ae.value=dt,placeholder:k.$t("views.functionLib.functionForm.form.inputParam.requiredMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(_t(),an(ge,{key:1,type:"info"},{default:G(()=>[jt(qe(k.$t("common.noData")),1)]),_:1}))]}),_:1}),we("h5",MW,qe(k.$t("views.functionLib.functionForm.form.param.code")),1),y.value?(_t(),er("div",NW,[$(Me,{modelValue:h.value.code,"onUpdate:modelValue":F[1]||(F[1]=Oe=>h.value.code=Oe),onWheel:n,style:{height:"130px !important"}},null,8,["modelValue"]),we("div",PW,[$(z,{text:"",type:"info",onClick:T,class:"magnify"},{default:G(()=>[$(Xe,{iconName:"app-magnify",style:{"font-size":"16px"}})]),_:1})])])):Ar("",!0),$(X,{label:k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:F[3]||(F[3]=Mn(()=>{},["prevent"]))},{label:G(()=>[we("div",kW,[we("div",RW,[we("span",null,[jt(qe(k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),F[7]||(F[7]=we("span",{class:"danger"},"*",-1))])]),$(De,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:G(()=>[jt(qe(k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:G(()=>[$(Xe,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:G(()=>[$(Re,{size:"small",modelValue:h.value.is_result,"onUpdate:modelValue":F[2]||(F[2]=Oe=>h.value.is_result=Oe)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"]),$(DD,{ref_key:"FieldFormDialogRef",ref:a,onRefresh:D},null,512),$(he,{modelValue:E.value,"onUpdate:modelValue":F[6]||(F[6]=Oe=>E.value=Oe),title:k.$t("views.functionLib.functionForm.form.param.code"),"append-to-body":"",fullscreen:""},{footer:G(()=>[we("div",jW,[$(z,{type:"primary",onClick:j},{default:G(()=>[jt(qe(k.$t("common.confirm")),1)]),_:1})])]),default:G(()=>[$(Me,{modelValue:x.value,"onUpdate:modelValue":F[5]||(F[5]=Oe=>x.value=Oe),style:{height:"calc(100vh - 160px) !important",border:"1px solid #bbbfc4","border-radius":"4px"}},null,8,["modelValue"])]),_:1},8,["modelValue","title"])]),_:1},8,["nodeModel"])}}});class DW extends la{constructor(t){super(t,CW)}}const IW={type:"function-node",model:ca,view:DW},LW=Object.freeze(Object.defineProperty({__proto__:null,default:IW},Symbol.toStringTag,{value:"Module"})),FW={class:"title-decoration-1 mb-8"},$W={class:"flex-between w-full"},BW={class:"flex align-center"},UW={class:"mr-4"},GW={class:"flex align-center"},WW={class:"mr-4"},zW={class:"flex align-center"},VW={class:"mr-4"},HW=Vr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=tf(),{params:{id:n}}=xs.config.globalProperties.$route,a=e,r=Bt(null),l=Bt(),c=Bt(),y=()=>{var k;return(k=c.value)==null?void 0:k.validate().catch(F=>Promise.reject({node:a.nodeModel,errMessage:F}))},h=k=>k.ctrlKey===!0?(k.preventDefault(),!0):(k.stopPropagation(),!0),b={model_id:"",system:"",prompt:`{{${it("views.applicationWorkflow.nodes.startNode.label")}.question}}`,negative_prompt:"",dialogue_number:0,dialogue_type:"NODE",is_result:!0,temperature:null,max_tokens:null,image_list:["start-node","image"]},E=Co({get:()=>(a.nodeModel.properties.node_data||yt.set(a.nodeModel.properties,"node_data",b),a.nodeModel.properties.node_data),set:k=>{yt.set(a.nodeModel.properties,"node_data",k)}});function x(){n?Sa.getApplicationTTIModel(n).then(k=>{r.value=yt.groupBy(k==null?void 0:k.data,"provider")}):t.asyncGetModel().then(k=>{r.value=yt.groupBy(k==null?void 0:k.data,"provider")})}const T=()=>{var k;E.value.model_id?(k=l.value)==null||k.reset_default(E.value.model_id,n):N({})},j=k=>{var F;k&&((F=l.value)==null||F.open(k,n,E.value.model_params_setting))};function N(k){yt.set(a.nodeModel.properties.node_data,"model_params_setting",k)}function M(k){yt.set(a.nodeModel.properties.node_data,"prompt",k)}function D(k){yt.set(a.nodeModel.properties.node_data,"negative_prompt",k)}return ni(()=>{x(),yt.set(a.nodeModel,"validate",y)}),(k,F)=>{const te=pe("Setting"),V=pe("el-icon"),z=pe("el-button"),J=pe("ModelSelect"),K=pe("el-form-item"),B=pe("AppIcon"),H=pe("el-tooltip"),ne=pe("MdEditorMagnify"),X=pe("el-switch"),ge=pe("el-form"),Fe=pe("el-card");return _t(),an(sa,{"node-model":k.nodeModel},{default:G(()=>[we("h5",FW,qe(k.$t("views.applicationWorkflow.nodeSetting")),1),$(Fe,{shadow:"never",class:"card-never"},{default:G(()=>[$(ge,{onSubmit:F[6]||(F[6]=Mn(()=>{},["prevent"])),model:E.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:G(()=>[$(K,{label:k.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label"),prop:"model_id",rules:{required:!0,message:k.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),trigger:"change"}},{label:G(()=>[we("div",$W,[we("div",null,[we("span",null,[jt(qe(k.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label")),1),F[7]||(F[7]=we("span",{class:"danger"},"*",-1))])]),$(z,{disabled:!E.value.model_id,type:"primary",link:"",onClick:F[0]||(F[0]=Me=>j(E.value.model_id)),onRefreshForm:N},{default:G(()=>[$(V,null,{default:G(()=>[$(te)]),_:1})]),_:1},8,["disabled"])])]),default:G(()=>[$(J,{onChange:T,onWheel:h,teleported:!1,modelValue:E.value.model_id,"onUpdate:modelValue":F[1]||(F[1]=Me=>E.value.model_id=Me),placeholder:k.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),options:r.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),$(K,{label:k.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),prop:"prompt",rules:{required:!0,message:k.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:G(()=>[we("div",BW,[we("div",UW,[we("span",null,[jt(qe(k.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label")),1),F[8]||(F[8]=we("span",{class:"danger"},"*",-1))])]),$(H,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:G(()=>[jt(qe(k.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.tooltip")),1)]),default:G(()=>[$(B,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:G(()=>[$(ne,{onWheel:h,title:k.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),modelValue:E.value.prompt,"onUpdate:modelValue":F[2]||(F[2]=Me=>E.value.prompt=Me),style:{height:"150px"},onSubmitDialog:M},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),$(K,{label:k.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),prop:"prompt",rules:{required:!1,message:k.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:G(()=>[we("div",GW,[we("div",WW,[we("span",null,qe(k.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label")),1)]),$(H,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:G(()=>[jt(qe(k.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.tooltip")),1)]),default:G(()=>[$(B,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:G(()=>[$(ne,{onWheel:h,title:k.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),modelValue:E.value.negative_prompt,"onUpdate:modelValue":F[3]||(F[3]=Me=>E.value.negative_prompt=Me),placeholder:k.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.placeholder"),style:{height:"150px"},onSubmitDialog:D},null,8,["title","modelValue","placeholder"])]),_:1},8,["label","rules"]),$(K,{label:k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:F[5]||(F[5]=Mn(()=>{},["prevent"]))},{label:G(()=>[we("div",zW,[we("div",VW,[we("span",null,[jt(qe(k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),F[9]||(F[9]=we("span",{class:"danger"},"*",-1))])]),$(H,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:G(()=>[jt(qe(k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:G(()=>[$(B,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:G(()=>[$(X,{size:"small",modelValue:E.value.is_result,"onUpdate:modelValue":F[4]||(F[4]=Me=>E.value.is_result=Me)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),$(Zm,{ref_key:"AIModeParamSettingDialogRef",ref:l,onRefresh:N},null,512)]),_:1},8,["node-model"])}}});let XW=class extends la{constructor(t){super(t,HW)}};const YW={type:"image-generate-node",model:ca,view:XW},qW=Object.freeze(Object.defineProperty({__proto__:null,default:YW},Symbol.toStringTag,{value:"Module"})),KW={class:"title-decoration-1 mb-8"},ZW={class:"flex-between w-full"},JW={class:"flex align-center"},QW={class:"mr-4"},ez={class:"flex-between"},tz={class:"flex align-center"},nz={class:"mr-4"},rz=Vr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=tf(),{params:{id:n}}=xs.config.globalProperties.$route,a=e,r=Bt(null),l=Bt(),c=Bt(),y=Bt(),h=()=>{var k;return Promise.all([y.value?y.value.validate():Promise.resolve(""),(k=c.value)==null?void 0:k.validate()]).catch(F=>Promise.reject({node:a.nodeModel,errMessage:F}))},g=k=>k.ctrlKey===!0?(k.preventDefault(),!0):(k.stopPropagation(),!0),E={model_id:"",system:"",prompt:`{{${it("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogue_number:0,dialogue_type:"NODE",is_result:!0,temperature:null,max_tokens:null,image_list:["start-node","image"]},x=Co({get:()=>(a.nodeModel.properties.node_data||yt.set(a.nodeModel.properties,"node_data",E),a.nodeModel.properties.node_data),set:k=>{yt.set(a.nodeModel.properties,"node_data",k)}});function T(){n?Sa.getApplicationImageModel(n).then(k=>{r.value=yt.groupBy(k==null?void 0:k.data,"provider")}):t.asyncGetModel().then(k=>{r.value=yt.groupBy(k==null?void 0:k.data,"provider")})}function j(k){yt.set(a.nodeModel.properties.node_data,"system",k)}function N(k){yt.set(a.nodeModel.properties.node_data,"prompt",k)}const M=k=>{var F;k&&((F=l.value)==null||F.open(k,n,x.value.model_params_setting))};function D(k){yt.set(a.nodeModel.properties.node_data,"model_params_setting",k)}return ni(()=>{T(),yt.set(a.nodeModel,"validate",h)}),(k,F)=>{const te=pe("Setting"),V=pe("el-icon"),z=pe("el-button"),J=pe("ModelSelect"),K=pe("el-form-item"),B=pe("MdEditorMagnify"),H=pe("AppIcon"),ne=pe("el-tooltip"),X=pe("el-option"),ge=pe("el-select"),Fe=pe("el-input-number"),Me=pe("el-switch"),Xe=pe("el-form"),De=pe("el-card");return _t(),an(sa,{"node-model":k.nodeModel},{default:G(()=>[we("h5",KW,qe(k.$t("views.applicationWorkflow.nodeSetting")),1),$(De,{shadow:"never",class:"card-never"},{default:G(()=>[$(Xe,{onSubmit:F[9]||(F[9]=Mn(()=>{},["prevent"])),model:x.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:G(()=>[$(K,{label:k.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.label"),prop:"model_id",rules:{required:!0,message:k.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),trigger:"change"}},{label:G(()=>[we("div",ZW,[we("div",null,[we("span",null,[jt(qe(Yr(it)("views.applicationWorkflow.nodes.imageUnderstandNode.model.label")),1),F[10]||(F[10]=we("span",{class:"danger"},"*",-1))])]),$(z,{disabled:!x.value.model_id,type:"primary",link:"",onClick:F[0]||(F[0]=Re=>M(x.value.model_id)),onRefreshForm:D},{default:G(()=>[$(V,null,{default:G(()=>[$(te)]),_:1})]),_:1},8,["disabled"])])]),default:G(()=>[$(J,{onWheel:g,teleported:!1,modelValue:x.value.model_id,"onUpdate:modelValue":F[1]||(F[1]=Re=>x.value.model_id=Re),placeholder:k.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),options:r.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),$(K,{label:k.$t("views.application.applicationForm.form.roleSettings.label")},{default:G(()=>[$(B,{title:k.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:x.value.system,"onUpdate:modelValue":F[2]||(F[2]=Re=>x.value.system=Re),style:{height:"100px"},onSubmitDialog:j,placeholder:k.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),$(K,{label:k.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:k.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:G(()=>[we("div",JW,[we("div",QW,[we("span",null,[jt(qe(k.$t("views.application.applicationForm.form.prompt.label")),1),F[11]||(F[11]=we("span",{class:"danger"},"*",-1))])]),$(ne,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:G(()=>[jt(qe(k.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:G(()=>[$(H,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:G(()=>[$(B,{onWheel:g,title:k.$t("views.application.applicationForm.form.prompt.label"),modelValue:x.value.prompt,"onUpdate:modelValue":F[3]||(F[3]=Re=>x.value.prompt=Re),style:{height:"150px"},onSubmitDialog:N},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),$(K,null,{label:G(()=>[we("div",ez,[we("div",null,qe(k.$t("views.application.applicationForm.form.historyRecord.label")),1),$(ge,{modelValue:x.value.dialogue_type,"onUpdate:modelValue":F[4]||(F[4]=Re=>x.value.dialogue_type=Re),type:"small",style:{width:"100px"}},{default:G(()=>[$(X,{label:k.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),$(X,{label:k.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:G(()=>[$(Fe,{modelValue:x.value.dialogue_number,"onUpdate:modelValue":F[5]||(F[5]=Re=>x.value.dialogue_number=Re),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1}),$(K,{label:k.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),rules:{type:"array",required:!0,message:k.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"change"}},{label:G(()=>[jt(qe(k.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label")),1),F[12]||(F[12]=we("span",{class:"danger"},"*",-1))]),default:G(()=>[$(aa,{ref_key:"nodeCascaderRef",ref:y,nodeModel:k.nodeModel,class:"w-full",placeholder:k.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:x.value.image_list,"onUpdate:modelValue":F[6]||(F[6]=Re=>x.value.image_list=Re)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),$(K,{label:k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:F[8]||(F[8]=Mn(()=>{},["prevent"]))},{label:G(()=>[we("div",tz,[we("div",nz,[we("span",null,[jt(qe(k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),F[13]||(F[13]=we("span",{class:"danger"},"*",-1))])]),$(ne,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:G(()=>[jt(qe(k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:G(()=>[$(H,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:G(()=>[$(Me,{size:"small",modelValue:x.value.is_result,"onUpdate:modelValue":F[7]||(F[7]=Re=>x.value.is_result=Re)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),$(Zm,{ref_key:"AIModeParamSettingDialogRef",ref:l,onRefresh:D},null,512)]),_:1},8,["node-model"])}}});let oz=class extends la{constructor(t){super(t,rz)}};const iz={type:"image-understand-node",model:ca,view:oz},az=Object.freeze(Object.defineProperty({__proto__:null,default:iz},Symbol.toStringTag,{value:"Module"})),uz={class:"title-decoration-1 mb-8"},sz={class:"flex-between"},lz={class:"flex align-center"},cz={class:"mr-4"},fz={class:"flex align-center"},dz={class:"mr-4"},pz=Vr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=tf(),n=Bt(),a=k=>k.ctrlKey===!0?(k.preventDefault(),!0):(k.stopPropagation(),!0),r=k=>{var F;k?(F=n.value)==null||F.reset_default(k,y):b({})};function l(k){yt.set(T.nodeModel.properties.node_data,"prompt",k)}function c(k){yt.set(T.nodeModel.properties.node_data,"system",k)}const{params:{id:y}}=xs.config.globalProperties.$route,h=`${it("views.applicationWorkflow.nodes.questionNode.defaultPrompt1")}{{${it("views.applicationWorkflow.nodes.startNode.label")}.question}}
${it("views.applicationWorkflow.nodes.questionNode.defaultPrompt2")}`,g={model_id:"",system:it("views.applicationWorkflow.nodes.questionNode.systemDefault"),prompt:h,dialogue_number:1,is_result:!1};function b(k){yt.set(T.nodeModel.properties.node_data,"model_params_setting",k)}const E=k=>{var F;k&&((F=n.value)==null||F.open(k,y,x.value.model_params_setting))},x=Co({get:()=>(T.nodeModel.properties.node_data||yt.set(T.nodeModel.properties,"node_data",g),T.nodeModel.properties.node_data),set:k=>{yt.set(T.nodeModel.properties,"node_data",k)}}),T=e,j=Bt(),N=Bt(null),M=()=>{var k;return(k=j.value)==null?void 0:k.validate().catch(F=>Promise.reject({node:T.nodeModel,errMessage:F}))};function D(){y?Sa.getApplicationModel(y).then(k=>{N.value=yt.groupBy(k==null?void 0:k.data,"provider")}):t.asyncGetModel().then(k=>{N.value=yt.groupBy(k==null?void 0:k.data,"provider")})}return ni(()=>{var k;D(),typeof((k=T.nodeModel.properties.node_data)==null?void 0:k.is_result)>"u"&&iy(T.nodeModel)&&yt.set(T.nodeModel.properties.node_data,"is_result",!0),yt.set(T.nodeModel,"validate",M)}),(k,F)=>{const te=pe("Setting"),V=pe("el-icon"),z=pe("el-button"),J=pe("ModelSelect"),K=pe("el-form-item"),B=pe("MdEditorMagnify"),H=pe("AppIcon"),ne=pe("EditPen"),X=pe("el-tooltip"),ge=pe("el-input-number"),Fe=pe("el-switch"),Me=pe("el-form"),Xe=pe("el-card");return _t(),an(sa,{nodeModel:k.nodeModel},{default:G(()=>[we("h5",uz,qe(k.$t("views.applicationWorkflow.nodeSetting")),1),$(Xe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:G(()=>[$(Me,{onSubmit:F[7]||(F[7]=Mn(()=>{},["prevent"])),model:x.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"questionNodeFormRef",ref:j,"hide-required-asterisk":""},{default:G(()=>[$(K,{label:k.$t("views.application.applicationForm.form.aiModel.label"),prop:"model_id",rules:{required:!0,message:k.$t("views.application.applicationForm.form.aiModel.placeholder"),trigger:"change"}},{label:G(()=>[we("div",sz,[we("div",null,[we("span",null,[jt(qe(k.$t("views.application.applicationForm.form.aiModel.label")),1),F[8]||(F[8]=we("span",{class:"danger"},"*",-1))])]),$(z,{type:"primary",link:"",disabled:!x.value.model_id,onClick:F[0]||(F[0]=De=>E(x.value.model_id)),onRefreshForm:b},{default:G(()=>[$(V,null,{default:G(()=>[$(te)]),_:1})]),_:1},8,["disabled"])])]),default:G(()=>[$(J,{onChange:r,onWheel:a,teleported:!1,modelValue:x.value.model_id,"onUpdate:modelValue":F[1]||(F[1]=De=>x.value.model_id=De),placeholder:k.$t("views.application.applicationForm.form.aiModel.placeholder"),options:N.value,onSubmitModel:D,showFooter:""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),$(K,{label:k.$t("views.application.applicationForm.form.roleSettings.label")},{default:G(()=>[$(B,{title:k.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:x.value.system,"onUpdate:modelValue":F[2]||(F[2]=De=>x.value.system=De),style:{height:"100px"},onSubmitDialog:c,placeholder:k.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),$(K,{label:k.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:k.$t("views.application.applicationForm.form.prompt.tooltip"),trigger:"blur"}},{label:G(()=>[we("div",lz,[we("div",cz,[we("span",null,[jt(qe(k.$t("views.application.applicationForm.form.prompt.label")),1),F[9]||(F[9]=we("span",{class:"danger"},"*",-1))])]),$(X,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:G(()=>[jt(qe(k.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:G(()=>[$(H,{iconName:"app-warning",class:"app-warning-icon"}),$(V,null,{default:G(()=>[$(ne)]),_:1})]),_:1})])]),default:G(()=>[$(B,{onWheel:a,title:k.$t("views.application.applicationForm.form.prompt.label"),modelValue:x.value.prompt,"onUpdate:modelValue":F[3]||(F[3]=De=>x.value.prompt=De),style:{height:"150px"},onSubmitDialog:l},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),$(K,{label:k.$t("views.application.applicationForm.form.historyRecord.label")},{default:G(()=>[$(ge,{modelValue:x.value.dialogue_number,"onUpdate:modelValue":F[4]||(F[4]=De=>x.value.dialogue_number=De),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),$(K,{label:k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:F[6]||(F[6]=Mn(()=>{},["prevent"]))},{label:G(()=>[we("div",fz,[we("div",dz,[we("span",null,[jt(qe(k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),F[10]||(F[10]=we("span",{class:"danger"},"*",-1))])]),$(X,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:G(()=>[jt(qe(k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:G(()=>[$(H,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:G(()=>[$(Fe,{size:"small",modelValue:x.value.is_result,"onUpdate:modelValue":F[5]||(F[5]=De=>x.value.is_result=De)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),$(Zm,{ref_key:"AIModeParamSettingDialogRef",ref:n,onRefresh:b},null,512)]),_:1},8,["nodeModel"])}}});class hz extends la{constructor(t){super(t,pz)}}const vz={type:"question-node",model:ca,view:hz},yz=Object.freeze(Object.defineProperty({__proto__:null,default:vz},Symbol.toStringTag,{value:"Module"})),mz={class:"flex-between"},gz={class:"flex align-center"},_z={class:"mr-4"},bz=Vr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=g=>g.ctrlKey===!0?(g.preventDefault(),!0):(g.stopPropagation(),!0),a={reply_type:"content",content:"",fields:[],is_result:!1},r=Co({get:()=>(t.nodeModel.properties.node_data||yt.set(t.nodeModel.properties,"node_data",a),t.nodeModel.properties.node_data),set:g=>{yt.set(t.nodeModel.properties,"node_data",g)}});function l(g){yt.set(t.nodeModel.properties.node_data,"content",g)}const c=Bt(),y=Bt(),h=()=>{var g;return Promise.all([y.value?y.value.validate():Promise.resolve(""),(g=c.value)==null?void 0:g.validate()]).catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))};return ni(()=>{var g;typeof((g=t.nodeModel.properties.node_data)==null?void 0:g.is_result)>"u"&&iy(t.nodeModel)&&yt.set(t.nodeModel.properties.node_data,"is_result",!0),yt.set(t.nodeModel,"validate",h)}),(g,b)=>{const E=pe("el-option"),x=pe("el-select"),T=pe("MdEditorMagnify"),j=pe("el-form-item"),N=pe("AppIcon"),M=pe("el-tooltip"),D=pe("el-switch"),k=pe("el-form"),F=pe("el-card");return _t(),an(sa,{nodeModel:g.nodeModel},{default:G(()=>[$(F,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:G(()=>[$(k,{onSubmit:b[5]||(b[5]=Mn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c},{default:G(()=>[$(j,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")},{label:G(()=>[we("div",mz,[we("span",null,qe(g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")),1),$(x,{teleported:!1,modelValue:r.value.reply_type,"onUpdate:modelValue":b[0]||(b[0]=te=>r.value.reply_type=te),size:"small",style:{width:"85px"}},{default:G(()=>[$(E,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),$(E,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:G(()=>[r.value.reply_type==="content"?(_t(),an(T,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label"),modelValue:r.value.content,"onUpdate:modelValue":b[1]||(b[1]=te=>r.value.content=te),style:{height:"150px"},onSubmitDialog:l},null,8,["title","modelValue"])):(_t(),an(aa,{key:1,ref_key:"nodeCascaderRef",ref:y,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.fields,"onUpdate:modelValue":b[2]||(b[2]=te=>r.value.fields=te)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),$(j,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[4]||(b[4]=Mn(()=>{},["prevent"]))},{label:G(()=>[we("div",gz,[we("div",_z,[we("span",null,[jt(qe(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),b[6]||(b[6]=we("span",{class:"danger"},"*",-1))])]),$(M,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:G(()=>[jt(qe(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:G(()=>[$(N,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:G(()=>[$(D,{size:"small",modelValue:r.value.is_result,"onUpdate:modelValue":b[3]||(b[3]=te=>r.value.is_result=te)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class wz extends la{constructor(t){super(t,bz)}}const Ez={type:"reply-node",model:ca,view:wz},Oz=Object.freeze(Object.defineProperty({__proto__:null,default:Ez},Symbol.toStringTag,{value:"Module"})),xz={class:"p-16"},Sz={class:"flex align-center"},Az={class:"mr-4"},Tz={class:"dialog-footer p-16"},Mz=Vr({__name:"ParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Bt(),l=Bt({top_n:3,similarity:0,max_paragraph_char_number:5e3}),c=Bt(!1),y=Bt(!1);QA(c,b=>{b||(l.value={top_n:3,similarity:0,max_paragraph_char_number:5e3})});const h=b=>{l.value={...l.value,...yt.cloneDeep(b)},c.value=!0},g=()=>{var b;(b=r==null?void 0:r.value)==null||b.validate((E,x)=>{E&&(a("refresh",yt.cloneDeep(l.value)),c.value=!1)})};return t({open:h}),(b,E)=>{const x=pe("AppIcon"),T=pe("el-tooltip"),j=pe("el-input-number"),N=pe("el-form-item"),M=pe("el-col"),D=pe("el-row"),k=pe("el-slider"),F=pe("el-form"),te=pe("el-scrollbar"),V=pe("el-button"),z=pe("el-dialog");return _t(),an(z,{"align-center":"",title:b.$t("common.paramSetting"),class:"param-dialog",modelValue:c.value,"onUpdate:modelValue":E[5]||(E[5]=J=>c.value=J),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:G(()=>[we("span",Tz,[$(V,{onClick:E[3]||(E[3]=Mn(J=>c.value=!1,["prevent"]))},{default:G(()=>[jt(qe(b.$t("common.cancel")),1)]),_:1}),$(V,{type:"primary",onClick:E[4]||(E[4]=J=>g()),loading:y.value},{default:G(()=>[jt(qe(b.$t("common.save")),1)]),_:1},8,["loading"])])]),default:G(()=>[we("div",null,[$(te,{always:""},{default:G(()=>[we("div",xz,[$(F,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:l.value},{default:G(()=>[$(D,{gutter:20},{default:G(()=>[$(M,{span:12},{default:G(()=>[$(N,null,{label:G(()=>[we("div",Sz,[we("span",Az,"Score "+qe(b.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1),$(T,{effect:"dark",content:b.$t("views.applicationWorkflow.nodes.rerankerNode.ScoreTooltip"),placement:"right"},{default:G(()=>[$(x,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:G(()=>[$(j,{modelValue:l.value.similarity,"onUpdate:modelValue":E[0]||(E[0]=J=>l.value.similarity=J),min:0,max:l.value.search_mode==="blend"?2:1,precision:3,step:.1,"value-on-clear":0,"controls-position":"right",class:"w-full"},null,8,["modelValue","max"])]),_:1})]),_:1}),$(M,{span:12},{default:G(()=>[$(N,{label:b.$t("views.application.applicationForm.dialog.topReferences")},{default:G(()=>[$(j,{modelValue:l.value.top_n,"onUpdate:modelValue":E[1]||(E[1]=J=>l.value.top_n=J),min:1,max:100,"value-on-clear":1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),$(N,{label:b.$t("views.application.applicationForm.dialog.maxCharacters")},{default:G(()=>[$(k,{modelValue:l.value.max_paragraph_char_number,"onUpdate:modelValue":E[2]||(E[2]=J=>l.value.max_paragraph_char_number=J),"show-input":"","show-input-controls":!1,min:500,max:1e5,class:"custom-slider"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1})])]),_:1},8,["title","modelValue"])}}});const Nz={class:"flex-between"},Pz={class:"flex-between"},kz={class:"w-full"},Rz={class:"flex-between"},jz={class:"flex-between"},Cz=Vr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=tf(),n=e,a=Bt(),{params:{id:r}}=xs.config.globalProperties.$route,l={reranker_reference_list:[[]],reranker_model_id:"",question_reference_address:[],reranker_setting:{top_n:3,similarity:0,max_paragraph_char_number:5e3}},c=Bt(null),y=()=>{var D;(D=a.value)==null||D.open(b.value.reranker_setting)},h=D=>{const k=yt.cloneDeep(n.nodeModel.properties.node_data.reranker_reference_list);k.splice(D,1),yt.set(n.nodeModel.properties.node_data,"reranker_reference_list",k)},g=D=>D.ctrlKey===!0?(D.preventDefault(),!0):(D.stopPropagation(),!0),b=Co({get:()=>(n.nodeModel.properties.node_data||yt.set(n.nodeModel.properties,"node_data",l),n.nodeModel.properties.node_data),set:D=>{yt.set(n.nodeModel.properties,"node_data",D)}});function E(D){yt.set(n.nodeModel.properties.node_data,"reranker_setting",D)}function x(){r?Sa.getApplicationRerankerModel(r).then(D=>{c.value=yt.groupBy(D==null?void 0:D.data,"provider")}):t.asyncGetModel({model_type:"RERANKER"}).then(D=>{c.value=yt.groupBy(D==null?void 0:D.data,"provider")})}const T=()=>{const D=yt.cloneDeep(n.nodeModel.properties.node_data.reranker_reference_list);D.push([]),yt.set(n.nodeModel.properties.node_data,"reranker_reference_list",D)},j=Bt(),N=Bt(),M=()=>{var D;return Promise.all([N.value?N.value.validate():Promise.resolve(""),(D=j.value)==null?void 0:D.validate()]).catch(k=>Promise.reject({node:n.nodeModel,errMessage:k}))};return ni(()=>{x(),yt.set(n.nodeModel,"validate",M)}),(D,k)=>{const F=pe("Plus"),te=pe("el-icon"),V=pe("el-button"),z=pe("el-form-item"),J=pe("el-col"),K=pe("Delete"),B=pe("el-row"),H=pe("Setting"),ne=pe("ModelSelect"),X=pe("el-form"),ge=pe("el-card");return _t(),an(sa,{nodeModel:D.nodeModel},{default:G(()=>[$(ge,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:G(()=>[$(X,{onSubmit:k[2]||(k[2]=Mn(()=>{},["prevent"])),model:b.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"rerankerNodeFormRef",ref:j,"hide-required-asterisk":""},{default:G(()=>[$(z,{label:D.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label"),prop:"reranker_reference_list",rules:{type:"array",message:D.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),trigger:"change",required:!0}},{label:G(()=>[we("div",Nz,[we("span",null,[jt(qe(D.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label")),1),k[3]||(k[3]=we("span",{class:"danger"},"*",-1))]),$(V,{onClick:T,link:"",type:"primary"},{default:G(()=>[$(te,{class:"mr-4"},{default:G(()=>[$(F)]),_:1})]),_:1})])]),default:G(()=>[(_t(!0),er(Fi,null,pu(b.value.reranker_reference_list,(Fe,Me)=>(_t(),an(B,{gutter:8,style:{"margin-bottom":"8px"},key:Me},{default:G(()=>[$(J,{span:22},{default:G(()=>[$(z,{prop:"reranker_reference_list."+Me,rules:{type:"array",required:!0,message:D.$t("views.applicationWorkflow.variable.fieldMessage"),trigger:"change"}},{default:G(()=>[(_t(),an(aa,{key:Me,nodeModel:D.nodeModel,class:"w-full",placeholder:D.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),modelValue:b.value.reranker_reference_list[Me],"onUpdate:modelValue":Xe=>b.value.reranker_reference_list[Me]=Xe},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"]))]),_:2},1032,["prop","rules"])]),_:2},1024),$(J,{span:1},{default:G(()=>[$(V,{link:"",type:"info",class:"mt-4",onClick:Xe=>h(Me)},{default:G(()=>[$(te,null,{default:G(()=>[$(K)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["label","rules"]),$(z,{label:D.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")},{label:G(()=>[we("div",Pz,[we("span",null,qe(D.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")),1),$(V,{type:"primary",link:"",onClick:y},{default:G(()=>[$(te,null,{default:G(()=>[$(H)]),_:1})]),_:1})])]),default:G(()=>[we("div",kz,[$(B,null,{default:G(()=>[$(J,{span:12,class:"color-secondary lighter"},{default:G(()=>[jt(" Score "+qe(D.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1)]),_:1}),$(J,{span:12,class:"lighter"},{default:G(()=>{var Fe;return[jt(qe((Fe=b.value.reranker_setting.similarity)==null?void 0:Fe.toFixed(3)),1)]}),_:1}),$(J,{span:12,class:"color-secondary lighter"},{default:G(()=>[jt(qe(D.$t("chat.KnowledgeSource.referenceParagraph"))+" Top",1)]),_:1}),$(J,{span:12,class:"lighter"},{default:G(()=>[jt(qe(b.value.reranker_setting.top_n),1)]),_:1}),$(J,{span:12,class:"color-secondary lighter"},{default:G(()=>[jt(qe(D.$t("views.applicationWorkflow.nodes.rerankerNode.max_paragraph_char_number")),1)]),_:1}),$(J,{span:12,class:"lighter"},{default:G(()=>[jt(qe(b.value.reranker_setting.max_paragraph_char_number),1)]),_:1})]),_:1})])]),_:1},8,["label"]),$(z,{label:D.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),prop:"question_reference_address",rules:{message:D.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{label:G(()=>[we("div",Rz,[we("span",null,[jt(qe(D.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label")),1),k[4]||(k[4]=we("span",{class:"danger"},"*",-1))])])]),default:G(()=>[$(aa,{ref_key:"nodeCascaderRef",ref:N,nodeModel:D.nodeModel,class:"w-full",placeholder:D.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),modelValue:b.value.question_reference_address,"onUpdate:modelValue":k[0]||(k[0]=Fe=>b.value.question_reference_address=Fe)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),$(z,{label:D.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label"),prop:"reranker_model_id",rules:{required:!0,message:D.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),trigger:"change"}},{label:G(()=>[we("div",jz,[we("span",null,[jt(qe(D.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label")),1),k[5]||(k[5]=we("span",{class:"danger"},"*",-1))])])]),default:G(()=>[$(ne,{onWheel:g,teleported:!1,modelValue:b.value.reranker_model_id,"onUpdate:modelValue":k[1]||(k[1]=Fe=>b.value.reranker_model_id=Fe),placeholder:D.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),options:c.value,onSubmitModel:x,showFooter:""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),$(Mz,{ref_key:"ParamSettingDialogRef",ref:a,onRefresh:E},null,512)]),_:1},8,["nodeModel"])}}});const Dz=ey(Cz,[["__scopeId","data-v-30943fe0"]]);class Iz extends la{constructor(t){super(t,Dz)}}const Lz={type:"reranker-node",model:ca,view:Iz},Fz=Object.freeze(Object.defineProperty({__proto__:null,default:Lz},Symbol.toStringTag,{value:"Module"}));var w2=(e=>(e.embedding="views.application.applicationForm.dialog.vectorSearch",e.keywords="views.application.applicationForm.dialog.fullTextSearch",e.blend="views.application.applicationForm.dialog.hybridSearch",e))(w2||{});const $z={class:"title-decoration-1 mb-8"},Bz={class:"flex-between"},Uz={class:"w-full"},Gz={class:"flex align-center",style:{"line-height":"20px"}},Wz=["title"],zz={class:"flex-between"},Vz={class:"w-full"},Hz=Vr({__name:"index",props:{nodeModel:{}},setup(e){const{dataset:t,application:n,user:a}=tf(),{params:{id:r}}=xs.config.globalProperties.$route,l=e,c=Bt(),y={dataset_id_list:[],dataset_setting:{top_n:3,similarity:.6,max_paragraph_char_number:5e3,search_mode:"embedding"},question_reference_address:[]},h=Co({get:()=>(l.nodeModel.properties.node_data||yt.set(l.nodeModel.properties,"node_data",y),l.nodeModel.properties.node_data),set:z=>{yt.set(l.nodeModel.properties,"node_data",z)}}),g=Bt(),b=Bt(),E=Bt(),x=Bt([]),T=Bt(!1);function j(z){yt.set(l.nodeModel.properties.node_data,"dataset_setting",z.dataset_setting)}const N=()=>{var z;(z=b.value)==null||z.open(h.value,"WORK_FLOW")};function M(z){const J=l.nodeModel.properties.node_data.dataset_id_list.filter(K=>K!==z);yt.set(l.nodeModel.properties.node_data,"dataset_id_list",J)}function D(z){yt.set(l.nodeModel.properties.node_data,"dataset_id_list",z)}function k(){E.value&&E.value.open(h.value.dataset_id_list)}function F(){r?n.asyncGetApplicationDataset(r,T).then(z=>{x.value=z.data}):t.asyncGetAllDataset(T).then(z=>{var J;x.value=(J=z.data)==null?void 0:J.filter(K=>{var B;return K.user_id===((B=a.userInfo)==null?void 0:B.id)})})}function te(){F()}const V=()=>{var z;return Promise.all([c.value.validate(),(z=g.value)==null?void 0:z.validate()]).catch(J=>Promise.reject({node:l.nodeModel,errMessage:J}))};return ni(()=>{F(),yt.set(l.nodeModel,"validate",V)}),(z,J)=>{const K=pe("Plus"),B=pe("el-icon"),H=pe("el-button"),ne=pe("el-text"),X=pe("AppAvatar"),ge=pe("Close"),Fe=pe("el-form-item"),Me=pe("Setting"),Xe=pe("el-col"),De=pe("el-row"),Re=pe("el-form"),ce=pe("el-card");return _t(),an(sa,{nodeModel:z.nodeModel},{default:G(()=>[we("h5",$z,qe(z.$t("views.applicationWorkflow.nodeSetting")),1),$(ce,{shadow:"never",class:"card-never"},{default:G(()=>[$(Re,{onSubmit:J[1]||(J[1]=Mn(()=>{},["prevent"])),model:h.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"DatasetNodeFormRef",ref:g},{default:G(()=>[$(Fe,{label:z.$t("views.log.selectDataset")},{label:G(()=>[we("div",Bz,[we("span",null,qe(z.$t("views.log.selectDataset")),1),$(H,{type:"primary",link:"",onClick:k},{default:G(()=>[$(B,null,{default:G(()=>[$(K)]),_:1})]),_:1})])]),default:G(()=>{var he;return[we("div",Uz,[((he=h.value.dataset_id_list)==null?void 0:he.length)===0?(_t(),an(ne,{key:0,type:"info"},{default:G(()=>[jt(qe(z.$t("views.applicationWorkflow.nodes.searchDatasetNode.selectDatasetText")),1)]),_:1})):(_t(!0),er(Fi,{key:1},pu(h.value.dataset_id_list,(Oe,Ae)=>{var Ve,dt,mt;return _t(),er("div",{key:Ae,class:"flex-between border border-r-4 white-bg mb-4",style:{padding:"5px 8px"}},[we("div",Gz,[((Ve=Yr(o0)(x.value,Oe,"id"))==null?void 0:Ve.type)==="1"?(_t(),an(X,{key:0,class:"mr-8 avatar-purple",shape:"square",size:20},{default:G(()=>J[2]||(J[2]=[we("img",{src:rD,style:{width:"58%"},alt:""},null,-1)])),_:1})):(_t(),an(X,{key:1,class:"mr-8 avatar-blue",shape:"square",size:20},{default:G(()=>J[3]||(J[3]=[we("img",{src:oD,style:{width:"58%"},alt:""},null,-1)])),_:1})),we("div",{class:"ellipsis",title:(dt=Yr(o0)(x.value,Oe,"id"))==null?void 0:dt.name},qe((mt=Yr(o0)(x.value,Oe,"id"))==null?void 0:mt.name),9,Wz)]),$(H,{text:"",onClick:pt=>M(Oe)},{default:G(()=>[$(B,null,{default:G(()=>[$(ge)]),_:1})]),_:2},1032,["onClick"])])}),128))])]}),_:1},8,["label"]),$(Fe,{label:z.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")},{label:G(()=>[we("div",zz,[we("span",null,qe(z.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")),1),$(H,{type:"primary",link:"",onClick:N},{default:G(()=>[$(B,null,{default:G(()=>[$(Me)]),_:1})]),_:1})])]),default:G(()=>[we("div",Vz,[$(De,null,{default:G(()=>[$(Xe,{span:12,class:"color-secondary lighter"},{default:G(()=>[jt(qe(z.$t("views.application.applicationForm.dialog.selectSearchMode")),1)]),_:1}),$(Xe,{span:12,class:"lighter"},{default:G(()=>[jt(qe(z.$t(Yr(w2)[h.value.dataset_setting.search_mode])),1)]),_:1}),$(Xe,{span:12,class:"color-secondary lighter"},{default:G(()=>[jt(qe(z.$t("views.application.applicationForm.dialog.similarityThreshold")),1)]),_:1}),$(Xe,{span:12,class:"lighter"},{default:G(()=>{var he;return[jt(qe((he=h.value.dataset_setting.similarity)==null?void 0:he.toFixed(3)),1)]}),_:1}),$(Xe,{span:12,class:"color-secondary lighter"},{default:G(()=>[jt(qe(z.$t("views.application.applicationForm.dialog.topReferences")),1)]),_:1}),$(Xe,{span:12,class:"lighter"},{default:G(()=>[jt(qe(h.value.dataset_setting.top_n),1)]),_:1}),$(Xe,{span:12,class:"color-secondary lighter"},{default:G(()=>[jt(qe(z.$t("views.application.applicationForm.dialog.maxCharacters")),1)]),_:1}),$(Xe,{span:12,class:"lighter"},{default:G(()=>[jt(qe(h.value.dataset_setting.max_paragraph_char_number),1)]),_:1})]),_:1})])]),_:1},8,["label"]),$(Fe,{label:z.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),prop:"question_reference_address",rules:{message:z.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:G(()=>[$(aa,{ref_key:"nodeCascaderRef",ref:c,nodeModel:z.nodeModel,class:"w-full",placeholder:z.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:h.value.question_reference_address,"onUpdate:modelValue":J[0]||(J[0]=he=>h.value.question_reference_address=he)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),$(sD,{ref_key:"ParamSettingDialogRef",ref:b,onRefresh:j},null,512),$(lD,{ref_key:"AddDatasetDialogRef",ref:E,onAddData:D,data:x.value,onRefresh:te,loading:T.value},null,8,["data","loading"])]),_:1},8,["nodeModel"])}}});class Xz extends la{constructor(t){super(t,Hz)}}const Yz={type:"search-dataset-node",model:ca,view:Xz},qz=Object.freeze(Object.defineProperty({__proto__:null,default:Yz},Symbol.toStringTag,{value:"Module"})),Kz={class:"title-decoration-1 mb-8"},Zz={class:"flex-between w-full"},Jz={class:"flex-between w-full"},Qz={class:"flex align-center"},eV={class:"mr-4"},tV=Vr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=tf(),{params:{id:n}}=xs.config.globalProperties.$route,a=e,r=Bt(null),l=Bt(),c=Bt(),y=()=>{var x;return Promise.all([c.value?c.value.validate():Promise.resolve(""),(x=l.value)==null?void 0:x.validate()]).catch(T=>Promise.reject({node:a.nodeModel,errMessage:T}))},h=x=>x.ctrlKey===!0?(x.preventDefault(),!0):(x.stopPropagation(),!0),g={stt_model_id:"",is_result:!0,audio_list:[]},b=Co({get:()=>(a.nodeModel.properties.node_data||yt.set(a.nodeModel.properties,"node_data",g),a.nodeModel.properties.node_data),set:x=>{yt.set(a.nodeModel.properties,"node_data",x)}});function E(){n?Sa.getApplicationSTTModel(n).then(x=>{r.value=yt.groupBy(x==null?void 0:x.data,"provider")}):t.asyncGetModel().then(x=>{r.value=yt.groupBy(x==null?void 0:x.data,"provider")})}return ni(()=>{E(),yt.set(a.nodeModel,"validate",y)}),(x,T)=>{const j=pe("ModelSelect"),N=pe("el-form-item"),M=pe("AppIcon"),D=pe("el-tooltip"),k=pe("el-switch"),F=pe("el-form"),te=pe("el-card");return _t(),an(sa,{"node-model":x.nodeModel},{default:G(()=>[we("h5",Kz,qe(x.$t("views.applicationWorkflow.nodeSetting")),1),$(te,{shadow:"never",class:"card-never"},{default:G(()=>[$(F,{onSubmit:T[4]||(T[4]=Mn(()=>{},["prevent"])),model:b.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:l,"hide-required-asterisk":""},{default:G(()=>[$(N,{label:x.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label"),prop:"stt_model_id",rules:{required:!0,message:x.$t("views.application.applicationForm.form.voiceInput.placeholder"),trigger:"change"}},{label:G(()=>[we("div",Zz,[we("div",null,[we("span",null,[jt(qe(x.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label")),1),T[5]||(T[5]=we("span",{class:"danger"},"*",-1))])])])]),default:G(()=>[$(j,{onWheel:h,teleported:!1,modelValue:b.value.stt_model_id,"onUpdate:modelValue":T[0]||(T[0]=V=>b.value.stt_model_id=V),placeholder:x.$t("views.application.applicationForm.form.voiceInput.placeholder"),options:r.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),$(N,{label:x.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audio_list",rules:{message:x.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),trigger:"change",required:!0}},{label:G(()=>[we("div",Jz,[we("div",null,[we("span",null,[jt(qe(x.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label")),1),T[6]||(T[6]=we("span",{class:"danger"},"*",-1))])])])]),default:G(()=>[$(aa,{ref_key:"nodeCascaderRef",ref:c,nodeModel:x.nodeModel,class:"w-full",placeholder:x.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:b.value.audio_list,"onUpdate:modelValue":T[1]||(T[1]=V=>b.value.audio_list=V)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),$(N,{label:x.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:T[3]||(T[3]=Mn(()=>{},["prevent"]))},{label:G(()=>[we("div",Qz,[we("div",eV,[we("span",null,[jt(qe(x.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),T[7]||(T[7]=we("span",{class:"danger"},"*",-1))])]),$(D,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:G(()=>[jt(qe(x.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:G(()=>[$(M,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:G(()=>[$(k,{size:"small",modelValue:b.value.is_result,"onUpdate:modelValue":T[2]||(T[2]=V=>b.value.is_result=V)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["node-model"])}}});class nV extends la{constructor(t){super(t,tV)}}const rV={type:"speech-to-text-node",model:ca,view:nV},oV=Object.freeze(Object.defineProperty({__proto__:null,default:rV},Symbol.toStringTag,{value:"Module"})),iV={class:"title-decoration-1 mb-8"},aV=Vr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Bt(!1),a=[{label:it("views.applicationWorkflow.nodes.startNode.currentTime"),value:"time"},{label:it("views.application.applicationForm.form.historyRecord.label"),value:"history_context"},{label:it("chat.chatId"),value:"chat_id"}],r=()=>{const y=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>yt.cloneDeep(g.properties.user_input_field_list)).reduce((g,b)=>[...g,...b],[]).map(g=>g.label&&g.label.input_type==="TooltipLabel"?{label:g.label.label,value:g.field||g.variable}:{label:g.label||g.name,value:g.field||g.variable}),h=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>yt.cloneDeep(g.properties.api_input_field_list)).reduce((g,b)=>[...g,...b],[]).map(g=>({label:g.name||g.variable,value:g.variable}));return[...y,...h]},l=()=>{const y=r();yt.set(t.nodeModel.properties.config,"globalFields",[...a,...y])};t.nodeModel.graphModel.eventCenter.on("refreshFieldList",l);const c=()=>{let y=yt.cloneDeep(t.nodeModel.properties.config.fields);const h=t.nodeModel.graphModel.nodes.filter(b=>b.id==="base-node").filter(b=>b.properties.node_data.file_upload_enable).map(b=>yt.cloneDeep(b.properties.node_data.file_upload_setting)).filter(b=>b);if(y=y.filter(b=>b.value!=="image"&&b.value!=="document"&&b.value!=="audio"&&b.value!=="video"),h.length===0){yt.set(t.nodeModel.properties.config,"fields",y);return}let g=[];h[0].document&&g.push({label:it("common.fileUpload.document"),value:"document"}),h[0].image&&g.push({label:it("common.fileUpload.image"),value:"image"}),h[0].audio&&g.push({label:it("common.fileUpload.audio"),value:"audio"}),h[0].video&&g.push({label:it("common.fileUpload.video"),value:"video"}),yt.set(t.nodeModel.properties.config,"fields",[...y,...g])};return t.nodeModel.graphModel.eventCenter.on("refreshFileUploadConfig",c),ni(()=>{l(),c()}),(y,h)=>{const g=pe("AppIcon"),b=pe("el-button"),E=pe("el-tooltip");return _t(),an(sa,{nodeModel:y.nodeModel},{default:G(()=>[we("h5",iV,qe(y.$t("views.applicationWorkflow.variable.global")),1),(_t(!0),er(Fi,null,pu(y.nodeModel.properties.config.globalFields,(x,T)=>(_t(),er("div",{key:T,class:"flex-between border-r-4 p-8-12 mb-8 layout-bg lighter",onMouseenter:h[0]||(h[0]=j=>n.value=!0),onMouseleave:h[1]||(h[1]=j=>n.value=!1)},[we("span",null,qe(x.label)+" "+qe("{"+x.value+"}"),1),n.value===!0?(_t(),an(E,{key:0,effect:"dark",content:y.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:G(()=>[$(b,{link:"",onClick:j=>Yr(YA)(`{{global.${x.value}}}`),style:{padding:"0"}},{default:G(()=>[$(g,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):Ar("",!0)],32))),128))]),_:1},8,["nodeModel"])}}});class uV extends la{constructor(t){super(t,aV)}}const sV={type:"start-node",model:ca,view:uV},lV=Object.freeze(Object.defineProperty({__proto__:null,default:sV},Symbol.toStringTag,{value:"Module"})),cV={class:"title-decoration-1 mb-8"},fV={class:"flex-between w-full"},dV={class:"flex-between w-full"},pV={class:"flex align-center"},hV={class:"mr-4"},vV=Vr({__name:"index",props:{nodeModel:{}},setup(e){const t=Bt(),{model:n}=tf(),{params:{id:a}}=xs.config.globalProperties.$route,r=e,l=Bt(null),c=Bt(),y=Bt(),h=()=>{var N;return Promise.all([y.value?y.value.validate():Promise.resolve(""),(N=c.value)==null?void 0:N.validate()]).catch(M=>Promise.reject({node:r.nodeModel,errMessage:M}))},g=N=>N.ctrlKey===!0?(N.preventDefault(),!0):(N.stopPropagation(),!0),b={tts_model_id:"",is_result:!0,content_list:[],model_params_setting:{}},E=Co({get:()=>(r.nodeModel.properties.node_data||yt.set(r.nodeModel.properties,"node_data",b),r.nodeModel.properties.node_data),set:N=>{yt.set(r.nodeModel.properties,"node_data",N)}});function x(){a?Sa.getApplicationTTSModel(a).then(N=>{l.value=yt.groupBy(N==null?void 0:N.data,"provider")}):n.asyncGetModel().then(N=>{l.value=yt.groupBy(N==null?void 0:N.data,"provider")})}const T=()=>{var M;const N=E.value.tts_model_id;if(!N){Ih(it("views.application.applicationForm.form.voicePlay.requiredMessage"));return}(M=t.value)==null||M.open(N,a,E.value.model_params_setting)},j=N=>{E.value.model_params_setting=N};return ni(()=>{x(),yt.set(r.nodeModel,"validate",h)}),(N,M)=>{const D=pe("Setting"),k=pe("el-icon"),F=pe("el-button"),te=pe("ModelSelect"),V=pe("el-form-item"),z=pe("AppIcon"),J=pe("el-tooltip"),K=pe("el-switch"),B=pe("el-form"),H=pe("el-card");return _t(),an(sa,{"node-model":N.nodeModel},{default:G(()=>[we("h5",cV,qe(N.$t("views.applicationWorkflow.nodeSetting")),1),$(H,{shadow:"never",class:"card-never"},{default:G(()=>[$(B,{onSubmit:M[4]||(M[4]=Mn(()=>{},["prevent"])),model:E.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:G(()=>[$(V,{label:N.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label"),prop:"tts_model_id",rules:{required:!0,message:N.$t("views.application.applicationForm.form.voicePlay.placeholder"),trigger:"change"}},{label:G(()=>[we("div",fV,[we("div",null,[we("span",null,[jt(qe(N.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label")),1),M[5]||(M[5]=we("span",{class:"danger"},"*",-1))])]),$(F,{type:"primary",link:"",onClick:T,disabled:!E.value.tts_model_id,class:"mr-4"},{default:G(()=>[$(k,null,{default:G(()=>[$(D)]),_:1})]),_:1},8,["disabled"])])]),default:G(()=>[$(te,{onWheel:g,teleported:!1,modelValue:E.value.tts_model_id,"onUpdate:modelValue":M[0]||(M[0]=ne=>E.value.tts_model_id=ne),placeholder:N.$t("views.application.applicationForm.form.voicePlay.placeholder"),options:l.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),$(V,{prop:"content_list",label:N.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),rules:{message:N.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),trigger:"blur",required:!0}},{label:G(()=>[we("div",dV,[we("div",null,[we("span",null,[jt(qe(N.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label")),1),M[6]||(M[6]=we("span",{class:"danger"},"*",-1))])])])]),default:G(()=>[$(aa,{ref_key:"nodeCascaderRef",ref:y,nodeModel:N.nodeModel,class:"w-full",placeholder:N.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),modelValue:E.value.content_list,"onUpdate:modelValue":M[1]||(M[1]=ne=>E.value.content_list=ne)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),$(V,{label:N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:M[3]||(M[3]=Mn(()=>{},["prevent"]))},{label:G(()=>[we("div",pV,[we("div",hV,[we("span",null,[jt(qe(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),M[7]||(M[7]=we("span",{class:"danger"},"*",-1))])]),$(J,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:G(()=>[jt(qe(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:G(()=>[$(z,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:G(()=>[$(K,{size:"small",modelValue:E.value.is_result,"onUpdate:modelValue":M[2]||(M[2]=ne=>E.value.is_result=ne)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),$(tT,{ref_key:"TTSModeParamSettingDialogRef",ref:t,onRefresh:j},null,512)]),_:1},8,["node-model"])}}});class yV extends la{constructor(t){super(t,vV)}}const mV={type:"text-to-speech-node",model:ca,view:yV},gV=Object.freeze(Object.defineProperty({__proto__:null,default:mV},Symbol.toStringTag,{value:"Module"})),hS=Vr({__name:"CustomLine",props:{model:{}},setup(e){const t=e,n=()=>{t.model.graphModel.deleteEdgeById(t.model.id)};return(a,r)=>Uu((_t(),er("div",{class:"custom-edge cursor",onMouseup:r[0]||(r[0]=Mn(()=>{},["stop"])),onClick:r[1]||(r[1]=Mn(()=>{},["stop"]))},[(_t(),er("svg",{onClick:n,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r[2]||(r[2]=[we("path",{d:"M12 23.0001C5.925 23.0001 1 18.0751 1 12.0001C1 5.92512 5.925 1.00012 12 1.00012C18.075 1.00012 23 5.92512 23 12.0001C23 18.0751 18.075 23.0001 12 23.0001Z",fill:"#3370FF"},null,-1),we("path",{d:"M9.02524 7.61124L12.0002 10.5862L14.9752 7.61124C15.069 7.5175 15.1962 7.46484 15.3287 7.46484C15.4613 7.46484 15.5885 7.5175 15.6822 7.61124L16.3892 8.31824C16.483 8.412 16.5356 8.53915 16.5356 8.67174C16.5356 8.80432 16.483 8.93147 16.3892 9.02524L13.4142 12.0002L16.3892 14.9752C16.483 15.069 16.5356 15.1962 16.5356 15.3287C16.5356 15.4613 16.483 15.5885 16.3892 15.6822L15.6822 16.3892C15.5885 16.483 15.4613 16.5356 15.3287 16.5356C15.1962 16.5356 15.069 16.483 14.9752 16.3892L12.0002 13.4142L9.02524 16.3892C8.93147 16.483 8.80432 16.5356 8.67174 16.5356C8.53916 16.5356 8.412 16.483 8.31824 16.3892L7.61124 15.6822C7.5175 15.5885 7.46484 15.4613 7.46484 15.3287C7.46484 15.1962 7.5175 15.069 7.61124 14.9752L10.5862 12.0002L7.61124 9.02524C7.5175 8.93147 7.46484 8.80432 7.46484 8.67174C7.46484 8.53915 7.5175 8.412 7.61124 8.31824L8.31824 7.61124C8.412 7.5175 8.53916 7.46484 8.67174 7.46484C8.80432 7.46484 8.93147 7.5175 9.02524 7.61124Z",fill:"white"},null,-1)])))],544)),[[Ch,t.model.isHovered]])}});function _V(e,t){const n=e.getBoundingClientRect();return t.clientX>=n.left&&t.clientX<=n.right&&t.clientY>=n.top&&t.clientY<=n.bottom}const bV=32,wV=32;class EV extends cn.BezierEdge{constructor(){super();xa(this,"isMounted");xa(this,"customLineApp");xa(this,"root");this.isMounted=!1,this.handleMouseUp=n=>{this.props.graphModel.clearSelectElements(),this.props.model.isSelected=!0;const a=n.target.parentNode.parentNode.querySelector(".lf-custom-edge-wrapper");_V(a,n)&&this.props.model.graphModel.deleteEdgeById(this.props.model.id)}}renderVueComponent(n){var r;this.unmountVueComponent(),this.root=n;const{graphModel:a}=this.props;n&&(Lm()?_2(this.targetId(),hS,n,this.props.model,a,(l,c)=>({model:l,graph:c})):(this.customLineApp=JA({render:()=>Dh(hS,{model:this.props.model})}),(r=this.customLineApp)==null||r.mount(n)))}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),Lm()&&(console.log("unmount"),b2(this.targetId())),this.unmountVueComponent()}unmountVueComponent(){return this.customLineApp&&(this.customLineApp.unmount(),this.customLineApp=null),this.root&&(this.root.innerHTML=""),this.root}getEdge(){const{model:n}=this.props,a=n.id,{customWidth:r=bV,customHeight:l=wV}=n.getProperties(),{startPoint:c,endPoint:y,path:h,isAnimation:g,arrowConfig:b}=n,E=n.getEdgeAnimationStyle(),{strokeDasharray:x,stroke:T,strokeDashoffset:j,animationName:N,animationDuration:M,animationIterationCount:D,animationTimingFunction:k,animationDirection:F}=E,te={x:(c.x+y.x-r)/2,y:(c.y+y.y-l)/2,width:r,height:l},V=n.getEdgeStyle(),z={width:r,height:l};return setTimeout(()=>{const J=document.getElementById(a);J&&!this.isMounted&&(this.isMounted=!0,this.renderVueComponent(J))},0),delete V.stroke,cn.h("g",{},[cn.h("style",{type:"text/css"},".lf-edge{stroke:#afafaf}.lf-edge:hover{stroke: #3370FF;}"),cn.h("path",{d:h,...V,...b,...g?{strokeDasharray:x,stroke:T,style:{strokeDashoffset:j,animationName:N,animationDuration:M,animationIterationCount:D,animationTimingFunction:k,animationDirection:F}}:{}}),cn.h("foreignObject",{...te,y:te.y+5,x:te.x+5,style:{}},[cn.h("div",{id:a,style:{...z},className:"lf-custom-edge-wrapper"})])])}}class OV extends cn.BezierEdgeModel{getArrowStyle(){const t=super.getArrowStyle();return t.offset=1,t.verticalLength=0,t}getEdgeStyle(){const t=super.getEdgeStyle();return t.strokeWidth=2,t.stroke="#BBBFC4",t.offset=0,t}getData(){const t=super.getData();return t&&(t.sourceAnchorId=this.sourceAnchorId,t.targetAnchorId=this.targetAnchorId),t}updatePathByAnchor(){const n=this.graphModel.getNodeModelById(this.sourceNodeId).getDefaultAnchor().find(l=>l.id===this.sourceAnchorId),r=this.graphModel.getNodeModelById(this.targetNodeId).getDefaultAnchor().find(l=>l.id===this.targetAnchorId);if(n&&r){const l={x:n.x,y:n.y};this.updateStartPoint(l);const c={x:r.x,y:r.y};this.updateEndPoint(c)}this.pointsList=[],this.initPoints()}setAttributes(){super.setAttributes(),this.isHitable=!0,this.zIndex=0}}const xV={type:"app-edge",view:EV,model:OV},SV=Vr({__name:"NodeControl",props:{lf:Object||String||null},setup(e){const t=e;function n(){var h;(h=t.lf)==null||h.zoom(!0,[0,0])}function a(){var h;(h=t.lf)==null||h.zoom(!1,[0,0])}function r(){var h,g,b;(h=t.lf)==null||h.resetZoom(),(g=t.lf)==null||g.resetTranslate(),(b=t.lf)==null||b.fitView()}const l=()=>{var h;(h=t.lf)==null||h.extension.dagre.layout()},c=()=>{var h;(h=t.lf)==null||h.graphModel.nodes.forEach(g=>{g.properties.showNode=!1})},y=()=>{var h;(h=t.lf)==null||h.graphModel.nodes.forEach(g=>{g.properties.showNode=!0})};return(h,g)=>{const b=pe("ZoomOut"),E=pe("el-icon"),x=pe("el-tooltip"),T=pe("el-button"),j=pe("ZoomIn"),N=pe("AppIcon"),M=pe("el-divider"),D=pe("el-card");return _t(),an(D,{shadow:"always",style:{"--el-card-padding":"8px 12px","--el-card-border-radius":"8px"}},{default:G(()=>[$(T,{link:"",onClick:a},{default:G(()=>[$(x,{class:"box-item",effect:"dark",content:h.$t("views.applicationWorkflow.control.zoomOut"),placement:"top"},{default:G(()=>[$(E,{size:16,title:h.$t("views.applicationWorkflow.control.zoomOut")},{default:G(()=>[$(b)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),$(T,{link:"",onClick:n},{default:G(()=>[$(x,{class:"box-item",effect:"dark",content:h.$t("views.applicationWorkflow.control.zoomIn"),placement:"top"},{default:G(()=>[$(E,{size:16,title:h.$t("views.applicationWorkflow.control.zoomIn")},{default:G(()=>[$(j)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),$(T,{link:"",onClick:r},{default:G(()=>[$(x,{class:"box-item",effect:"dark",content:h.$t("views.applicationWorkflow.control.fitView"),placement:"top"},{default:G(()=>[$(N,{iconName:"app-fitview",title:h.$t("views.applicationWorkflow.control.fitView")},null,8,["title"])]),_:1},8,["content"])]),_:1}),$(M,{direction:"vertical"}),$(T,{link:"",onClick:c},{default:G(()=>[$(x,{class:"box-item",effect:"dark",content:h.$t("views.applicationWorkflow.control.retract"),placement:"top"},{default:G(()=>[$(N,{style:{"font-size":"16px"},iconName:"app-retract",title:h.$t("views.applicationWorkflow.control.retract")},null,8,["title"])]),_:1},8,["content"])]),_:1}),$(T,{link:"",onClick:y},{default:G(()=>[$(x,{class:"box-item",effect:"dark",content:h.$t("views.applicationWorkflow.control.extend"),placement:"top"},{default:G(()=>[$(N,{style:{"font-size":"16px"},iconName:"app-extend",title:h.$t("views.applicationWorkflow.control.extend")},null,8,["title"])]),_:1},8,["content"])]),_:1}),$(T,{link:"",onClick:l},{default:G(()=>[$(x,{class:"box-item",effect:"dark",content:h.$t("views.applicationWorkflow.control.beautify"),placement:"top"},{default:G(()=>[$(N,{style:{"font-size":"16px"},iconName:"app-beautify",title:h.$t("views.applicationWorkflow.control.beautify")},null,8,["title"])]),_:1},8,["content"])]),_:1})]),_:1})}}});let Fl=null;function vS(e,t){return e.x+=t,e.y+=t,e.text&&(e.text.x+=t,e.text.y+=t),e}function yS(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(n=>{n.x+=t,n.y+=t}),e.text&&(e.text.x+=t,e.text.y+=t),e}const hh=40;let lm=40;function AV(e,t){const{keyboard:n}=e,{options:{keyboard:a}}=n,r=()=>{var E,x;if(lm=hh,!(a!=null&&a.enabled)||t.textEditElement)return!0;const{guards:y}=e.options,h=t.getSelectElements(!1);if(!(y&&y.beforeClone?y.beforeClone(h):!0)||h.nodes.length===0&&h.edges.length===0)return Fl=null,!0;const b=h.nodes.filter(T=>T.type===Wn.Start||T.type===Wn.Base);if(b.length>0){za(((x=(E=b[0])==null?void 0:E.properties)==null?void 0:x.stepName)+it("views.applicationWorkflow.tip.cannotCopy"));return}return Fl=h,Fl.nodes.forEach(T=>vS(T,hh)),Fl.edges.forEach(T=>yS(T,hh)),Ih(it("views.applicationWorkflow.tip.copyError")),!1},l=()=>{if(!(a!=null&&a.enabled)||t.textEditElement)return!0;if(Fl&&(Fl.nodes||Fl.edges)){e.clearSelectElements();const y=e.addElements(Fl,lm);if(!y)return!0;y.nodes.forEach(h=>e.selectElementById(h.id,!0)),y.edges.forEach(h=>e.selectElementById(h.id,!0)),Fl.nodes.forEach(h=>vS(h,hh)),Fl.edges.forEach(h=>yS(h,hh)),lm=lm+hh}return!1},c=()=>{var g;const y=t.getSelectElements(!0);if(e.clearSelectElements(),y.nodes.length==0&&y.edges.length==0)return;if(y.edges.length>0&&y.nodes.length==0){y.edges.forEach(b=>e.deleteEdge(b.id));return}const h=y.nodes.filter(b=>["start-node","base-node"].includes(b.type));if(h.length>0){za(`${(g=h[0].properties)==null?void 0:g.stepName}${it("views.applicationWorkflow.delete.deleteMessage")}`);return}return qA(it("common.tip"),it("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:it("common.delete"),confirmButtonClass:"danger"}).then(()=>{if(!(a!=null&&a.enabled)||t.textEditElement)return!0;y.edges.forEach(b=>e.deleteEdge(b.id)),y.nodes.forEach(b=>e.deleteNode(b.id))}),!1};t.eventCenter.on("copy_node",r),n.on(["cmd + c","ctrl + c"],r),n.on(["cmd + v","ctrl + v"],l),n.on(["cmd + z","ctrl + z"],()=>{}),n.on(["cmd + y","ctrl + y"],()=>!(a!=null&&a.enabled)||t.textEditElement?!0:(e.redo(),!1)),n.on(["backspace"],c)}class TV{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const MV=e=>typeof e=="string",mS=Array.isArray,Fm=e=>typeof e=="number",E2=e=>e!==null&&typeof e=="object",$m=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach(n=>{t.push(n)}),t.map(n=>$m(n))}if(typeof e=="object"&&Object.keys(e).length){const t=Object.assign({},e);return Object.keys(t).forEach(n=>{t[n]=$m(t[n])}),t}return e},vh=(e,t)=>{const n=e[t];return E2(n)?n.cell:n},gS=(e,t,n)=>{let a;return n?a=n:Fm(e)?a=()=>e:a=()=>t,a},NV=(e,t)=>{if(e!=="next"&&e!=="prev")return t},_S=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};let PV=class{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,n=t.prev;if(n&&n!==t)return _S(n),n}enqueue(t){const n=this.shortcut;t.prev&&t.next&&_S(t),t.next=n.next,n.next.prev=t,n.next=t,t.prev=n}toString(){const t=[],n=this.shortcut;let a=n.prev;for(;a!==n;)t.push(JSON.stringify(a,NV)),a=a==null?void 0:a.prev;return`[${t.join(", ")}]`}};var Mh;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(Mh||(Mh={}));function bS(e,t){var n=e.get(t)||0;e.set(t,n+1)}function wS(e,t){var n=e.get(t);n!==void 0&&(n=n-1,n>0?e.set(t,n):e.delete(t))}function O2(e,t,n,a){var r=String(t),l=String(n);if(!e&&r>l){var c=r;r=l,l=c}return r+Mh.EDGE_KEY_DELIM+l+Mh.EDGE_KEY_DELIM+(a===void 0?Mh.DEFAULT_EDGE_NAME:a)}function ES(e,t,n,a){var r=String(t),l=String(n),c={v:t,w:n};if(!e&&r>l){var y=c.v;c.v=c.w,c.w=y}return a!==void 0&&(c.name=a),c}function p0(e,t){return O2(e,t.v,t.w,t.name)}function OS(e){return typeof e=="function"}var kV=function(t){return t.nodes().map(function(n){var a=t.node(n),r=t.parent(n),l={id:n,value:a,parent:r};return l.value===void 0&&delete l.value,l.parent===void 0&&delete l.parent,l})},RV=function(t){return t.edges().map(function(n){var a=t.edge(n),r={v:n.v,w:n.w,value:a,name:n.name};return r.name===void 0&&delete r.name,r.value===void 0&&delete r.value,r})},jV=function(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:kV(t),edges:RV(t),value:t.graph()};return n.value===void 0&&delete n.value,n},CV=function(t){var n=new Zh(t.options);return t.value!==void 0&&n.setGraph(t.value),t.nodes.forEach(function(a){n.setNode(a.id,a.value),a.parent&&n.setParent(a.id,a.parent)}),t.edges.forEach(function(a){n.setEdge(a.v,a.w,a.value,a.name)}),n};function xS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,a)}return n}function SS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xS(Object(n),!0).forEach(function(a){DV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function DV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AS(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function LV(e,t,n){return t&&AS(e.prototype,t),n&&AS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var FV={compound:!1,multigraph:!1,directed:!0},Zh=function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};IV(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=Mh.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return t.directed},this.isMultigraph=function(){return t.multigraph},this.isCompound=function(){return t.compound},this.setGraph=function(r){return t.label=r,t},this.graph=function(){return t.label},this.setDefaultNodeLabel=function(r){return OS(r)?t.defaultNodeLabelFn=r:t.defaultNodeLabelFn=function(){return r},t},this.nodeCount=function(){return t.nodeCountNum},this.node=function(r){return t.nodesLabelMap.get(r)},this.nodes=function(){return Array.from(t.nodesLabelMap.keys())},this.sources=function(){return t.nodes().filter(function(r){var l;return!(!((l=t.inEdgesMap.get(r))===null||l===void 0)&&l.size)})},this.sinks=function(){return t.nodes().filter(function(r){var l;return!(!((l=t.outEdgesMap.get(r))===null||l===void 0)&&l.size)})},this.setNodes=function(r,l){return r.map(function(c){return t.setNode(c,l)}),t},this.hasNode=function(r){return t.nodesLabelMap.has(r)},this.checkCompound=function(){if(!t.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(r){if(t.isCompound()){var l,c=(l=t.parentMap)===null||l===void 0?void 0:l.get(r);if(c!==t.GRAPH_NODE)return c}},this.removeFromParentsChildList=function(r){var l=t.parentMap.get(r);t.childrenMap.get(l).delete(r)},this.setParent=function(r,l){var c,y;t.checkCompound();for(var h=l===void 0?t.GRAPH_NODE:l,g=t.parent(h);g;){if(r===g)throw new Error("Setting "+l+" as parent of "+r+" would create a cycle");g=t.parent(g)}l&&t.setNode(l),t.setNode(r),t.removeFromParentsChildList(r),(c=t.parentMap)===null||c===void 0||c.set(r,h);var b=t.childrenMap.get(h);return b.set(r,!0),(y=t.childrenMap)===null||y===void 0||y.set(h,b),t},this.children=function(r){var l=r===void 0?t.GRAPH_NODE:r;if(t.isCompound()){var c,y=(c=t.childrenMap)===null||c===void 0?void 0:c.get(l);return y?Array.from(y.keys()):void 0}if(l===t.GRAPH_NODE)return t.nodes();if(r&&t.hasNode(r))return[]},this.predecessors=function(r){var l=t.predecessorsMap.get(r);return l?Array.from(l.keys()):void 0},this.successors=function(r){var l=t.successorsMap.get(r);return l?Array.from(l.keys()):void 0},this.neighbors=function(r){var l;if(t.hasNode(r))return Array.from(new Set((l=t.predecessors(r))===null||l===void 0?void 0:l.concat(t.successors(r))))},this.isLeaf=function(r){var l;if(t.isDirected()){var c;return!(!((c=t.successors(r))===null||c===void 0)&&c.length)}return!(!((l=t.neighbors(r))===null||l===void 0)&&l.length)},this.filterNodes=function(r){var l=t.directed,c=t.multigraph,y=t.compound,h=new e({directed:l,multigraph:c,compound:y});if(h.setGraph(t.graph()),t.nodes().forEach(function(b){r(b)&&h.setNode(b,t.node(b))}),t.edges().forEach(function(b){h.hasNode(b.v)&&h.hasNode(b.w)&&h.setEdgeObj(b,t.edge(b))}),y){var g=function(E){for(var x=t.parent(E);x!==void 0&&!h.hasNode(x);)x=t.parent(x);return x};h.nodes().forEach(function(b){h.setParent(b,g(b))})}return h},this.setDefaultEdgeLabel=function(r){return OS(r)?t.defaultEdgeLabelFn=r:t.defaultEdgeLabelFn=function(){return r},t},this.edgeCount=function(){return t.edgeCountNum},this.setEdgeObj=function(r,l){return t.setEdge(r.v,r.w,l,r.name)},this.setPath=function(r,l){return r.reduce(function(c,y){return t.setEdge(c,y,l),y}),t},this.edgeFromArgs=function(r,l,c){return t.edge({v:r,w:l,name:c})},this.edge=function(r){return t.edgesLabelsMap.get(p0(t.isDirected(),r))},this.hasEdge=function(r,l,c){return t.edgesLabelsMap.has(p0(t.isDirected(),{v:r,w:l,name:c}))},this.removeEdgeObj=function(r){var l=r.v,c=r.w,y=r.name;return t.removeEdge(l,c,y)},this.edges=function(){return Array.from(t.edgesMap.values())},this.inEdges=function(r,l){var c=t.inEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(y){return!l||y.v===l})},this.outEdges=function(r,l){var c=t.outEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(y){return!l||y.w===l})},this.nodeEdges=function(r,l){var c;if(t.hasNode(r))return(c=t.inEdges(r,l))===null||c===void 0?void 0:c.concat(t.outEdges(r,l))},this.toJSON=function(){return jV(t)},this.nodeInDegree=function(r){var l=t.inEdgesMap.get(r);return l?l.size:0},this.nodeOutDegree=function(r){var l=t.outEdgesMap.get(r);return l?l.size:0},this.nodeDegree=function(r){return t.nodeInDegree(r)+t.nodeOutDegree(r)},this.source=function(r){return r.v},this.target=function(r){return r.w};var a=SS(SS({},FV),n);this.compound=a.compound,this.directed=a.directed,this.multigraph=a.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return LV(e,[{key:"setNode",value:function(n,a){var r=this.nodesLabelMap,l=this.defaultNodeLabelFn,c=this.isCompound,y=this.parentMap,h=this.childrenMap,g=this.inEdgesMap,b=this.outEdgesMap,E=this.predecessorsMap,x=this.successorsMap;if(r.has(n))return a!==void 0&&r.set(n,a),this;if(r.set(n,a||l(n)),c()){var T;y==null||y.set(n,this.GRAPH_NODE),h==null||h.set(n,new Map),h!=null&&h.has(this.GRAPH_NODE)||h==null||h.set(this.GRAPH_NODE,new Map),h==null||(T=h.get(this.GRAPH_NODE))===null||T===void 0||T.set(n,!0)}return[g,b,E,x].forEach(function(j){return j.set(n,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(n){var a=this;if(this.hasNode(n)){var r=function(M){a.removeEdge(M.v,M.w,M.name)},l=this.inEdgesMap,c=this.outEdgesMap,y=this.predecessorsMap,h=this.successorsMap,g=this.nodesLabelMap;if(this.isCompound()){var b,E,x;this.removeFromParentsChildList(n),(b=this.parentMap)===null||b===void 0||b.delete(n),(E=this.children(n))===null||E===void 0||E.forEach(function(N){return a.setParent(N)}),(x=this.childrenMap)===null||x===void 0||x.delete(n)}var T=l.get(n),j=c.get(n);Array.from(T.values()).forEach(function(N){return r(N)}),Array.from(j.values()).forEach(function(N){return r(N)}),g.delete(n),l.delete(n),c.delete(n),y.delete(n),h.delete(n),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(n,a,r,l){var c,y,h=ES(this.isDirected(),n,a,l),g=p0(this.isDirected(),h),b=h.v,E=h.w;if(this.edgesLabelsMap.has(g))return this.edgesLabelsMap.set(g,r),this;if(l!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(b),this.setNode(E),this.edgesLabelsMap.set(g,r||this.defaultEdgeLabelFn(b,E,l)),Object.freeze(h),this.edgesMap.set(g,h);var x=this.predecessorsMap.get(E),T=this.successorsMap.get(b);return bS(x,b),bS(T,E),(c=this.inEdgesMap.get(E))===null||c===void 0||c.set(g,h),(y=this.outEdgesMap.get(b))===null||y===void 0||y.set(g,h),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(n,a,r){var l=O2(this.isDirected(),n,a,r),c=this.edgesMap.get(l);if(c){var y=ES(this.isDirected(),n,a,r),h=y.v,g=y.w;this.edgesLabelsMap.delete(l),this.edgesMap.delete(l);var b=this.predecessorsMap.get(g),E=this.successorsMap.get(h);wS(b,h),wS(E,g),this.inEdgesMap.get(g).delete(l),this.outEdgesMap.get(h).delete(l),this.edgeCountNum-=1}return this}}]),e}();Zh.fromJSON=CV;function TS(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function $V(e,t,n){return t&&TS(e.prototype,t),n&&TS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function BV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var x2=$V(function e(){var t=this;BV(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return t.arr.length},this.keys=function(){return t.arr.map(function(n){return n.key})},this.has=function(n){return t.keyIndice.has(n)},this.priority=function(n){var a=t.keyIndice.get(n);if(a!==void 0)return t.arr[a].priority},this.swap=function(n,a){var r=t.arr,l=t.keyIndice,c=[r[n],r[a]],y=c[0],h=c[1];r[n]=h,r[a]=y,l.set(y.key,a),l.set(h.key,n)},this.innerDecrease=function(n){for(var a=t.arr,r=a[n].priority,l,c=n;c!==0;){var y;if(l=c>>1,((y=a[l])===null||y===void 0?void 0:y.priority)<r)break;t.swap(c,l),c=l}},this.heapify=function(n){var a=t.arr,r=n<<1,l=r+1,c=n;r<a.length&&(c=a[r].priority<a[c].priority?r:c,l<a.length&&(c=a[l].priority<a[c].priority?l:c),c!==n&&(t.swap(n,c),t.heapify(c)))},this.min=function(){if(t.size()===0)throw new Error("Queue underflow");return t.arr[0].key},this.add=function(n,a){var r=t.keyIndice,l=t.arr;if(!r.has(n)){var c=l.length;return r.set(n,c),l.push({key:n,priority:a}),t.innerDecrease(c),!0}return!1},this.removeMin=function(){t.swap(0,t.arr.length-1);var n=t.arr.pop();return t.keyIndice.delete(n.key),t.heapify(0),n.key},this.decrease=function(n,a){if(!t.has(n))throw new Error("There's no key named ".concat(n));var r=t.keyIndice.get(n);if(a>t.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(n," Old: + ").concat(t.arr[r].priority," New: ").concat(a));t.arr[r].priority=a,t.innerDecrease(r)}}),UV=function(t,n){var a=new Zh,r=new Map,l=new x2,c;function y(b){var E=b.v===c?b.w:b.v,x=l.priority(E);if(x!==void 0){var T=n(b);T<x&&(r.set(E,c),l.decrease(E,T))}}if(t.nodeCount()===0)return a;t.nodes().forEach(function(b){l.add(b,Number.POSITIVE_INFINITY),a.setNode(b)}),l.decrease(t.nodes()[0],0);for(var h=!1;l.size()>0;){var g;if(c=l.removeMin(),r.has(c))a.setEdge(c,r.get(c));else{if(h)throw new Error("Input graph is not connected: "+t.graph());h=!0}(g=t.nodeEdges(c))===null||g===void 0||g.forEach(y)}return a},GV=function(t){var n=new Set,a=[],r=t.nodes();return r.forEach(function(l){for(var c=[],y=[l];y.length>0;){var h=y.pop();if(!n.has(h)){var g,b;n.add(h),c.push(h),(g=t.successors(h))===null||g===void 0||g.forEach(function(E){return y.push(E)}),(b=t.predecessors(h))===null||b===void 0||b.forEach(function(E){return y.push(E)})}}c.length&&a.push(c)}),a},WV=function e(t,n,a,r,l,c){r.includes(n)||(r.push(n),a||c.push(n),l(n).forEach(function(y){return e(t,y,a,r,l,c)}),a&&c.push(n))},X1=function(t,n,a){var r=Array.isArray(n)?n:[n],l=function(g){return t.isDirected()?t.successors(g):t.neighbors(g)},c=[],y=[];return r.forEach(function(h){if(t.hasNode(h))WV(t,h,a==="post",y,l,c);else throw new Error("Graph does not have node: "+h)}),c};function zV(e,t){return YV(e)||XV(e,t)||HV(e,t)||VV()}function VV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HV(e,t){if(e){if(typeof e=="string")return MS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MS(e,t)}}function MS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function XV(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a=[],r=!0,l=!1,c,y;try{for(n=n.call(e);!(r=(c=n.next()).done)&&(a.push(c.value),!(t&&a.length===t));r=!0);}catch(h){l=!0,y=h}finally{try{!r&&n.return!=null&&n.return()}finally{if(l)throw y}}return a}}function YV(e){if(Array.isArray(e))return e}var qV=function(){return 1},S2=function(t,n,a,r){return KV(t,n,a||qV,r||function(l){return t.outEdges(l)})},KV=function(t,n,a,r){var l=new Map,c=new x2,y,h,g=function(x){var T=x.v!==y?x.v:x.w,j=l.get(T),N=a(x),M=h.distance+N;if(N<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+N);M<j.distance&&(j.distance=M,j.predecessor=y,c.decrease(T,M))};for(t.nodes().forEach(function(E){var x=E===n?0:Number.POSITIVE_INFINITY;l.set(E,{distance:x}),c.add(E,x)});c.size()>0&&(y=c.removeMin(),h=l.get(y),!(h&&h.distance===Number.POSITIVE_INFINITY));)r(y).forEach(g);var b={};return Array.from(l.entries()).forEach(function(E){var x=zV(E,2),T=x[0],j=x[1];return b[String(T)]=j,b}),b},ZV=function(t,n,a){var r={};return t.nodes().forEach(function(l){return r[String(l)]=S2(t,l,n,a),r}),r},A2=function(t){var n=0,a=[],r=new Map,l=[];function c(y){var h,g={onStack:!0,lowlink:n,index:n};if(r.set(y,g),n+=1,a.push(y),(h=t.successors(y))===null||h===void 0||h.forEach(function(T){var j;if(r.has(T)){if(!((j=r.get(T))===null||j===void 0)&&j.onStack){var M=r.get(T);g.lowlink=Math.min(g.lowlink,M.index)}}else{c(T);var N=r.get(T);g.lowlink=Math.min(g.lowlink,N.lowlink)}}),g.lowlink===g.index){var b=[],E;do{E=a.pop();var x=r.get(E);x.onStack=!1,b.push(E)}while(y!==E);l.push(b)}}return t.nodes().forEach(function(y){r.has(y)||c(y)}),l},JV=function(t){return A2(t).filter(function(n){return n.length>1||n.length===1&&t.hasEdge(n[0],n[0])})};function K0(e){"@babel/helpers - typeof";return K0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K0(e)}function NS(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function QV(e,t,n){return t&&NS(e.prototype,t),n&&NS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function eH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bv(e,t)}function nH(e){var t=T2();return function(){var a=Uv(e),r;if(t){var l=Uv(this).constructor;r=Reflect.construct(a,arguments,l)}else r=a.apply(this,arguments);return rH(this,r)}}function rH(e,t){if(t&&(K0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oH(e)}function oH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z0(e){var t=typeof Map=="function"?new Map:void 0;return Z0=function(a){if(a===null||!iH(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(a))return t.get(a);t.set(a,r)}function r(){return gm(a,arguments,Uv(this).constructor)}return r.prototype=Object.create(a.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Bv(r,a)},Z0(e)}function gm(e,t,n){return T2()?gm=Reflect.construct:gm=function(r,l,c){var y=[null];y.push.apply(y,l);var h=Function.bind.apply(r,y),g=new h;return c&&Bv(g,c.prototype),g},gm.apply(null,arguments)}function T2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function iH(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Bv(e,t){return Bv=Object.setPrototypeOf||function(a,r){return a.__proto__=r,a},Bv(e,t)}function Uv(e){return Uv=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Uv(e)}var J0=function(e){tH(n,e);var t=nH(n);function n(){return eH(this,n),t.apply(this,arguments)}return QV(n)}(Z0(Error));function M2(e){var t=new Set,n=new Set,a=[];function r(l){if(n.has(l))throw new J0;if(!t.has(l)){var c;n.add(l),t.add(l),(c=e.predecessors(l))===null||c===void 0||c.forEach(r),n.delete(l),a.push(l)}}if(e.sinks().forEach(r),t.size!==e.nodeCount())throw new J0;return a}var aH=function(t){try{M2(t)}catch(n){if(n instanceof J0)return!1;throw n}return!0},uH=function(t,n){return X1(t,n,"post")},sH=function(t,n){return X1(t,n,"pre")},lH=function(){return 1};function cH(e,t,n){return fH(e,t||lH,n||function(a){return e.outEdges(a)})}function fH(e,t,n){var a={},r=e.nodes();return r.forEach(function(l){var c=String(l);a[c]={},a[c][c]={distance:0},r.forEach(function(y){l!==y&&(a[c][String(y)]={distance:Number.POSITIVE_INFINITY})}),n(l).forEach(function(y){var h=y.v===l?y.w:y.v,g=t(y);a[c][String(h)]={distance:g,predecessor:l}})}),r.forEach(function(l){var c=String(l),y=a[c];r.forEach(function(h){var g=String(h),b=a[g];r.forEach(function(E){var x=String(E),T=b[c],j=y[x],N=b[x],M=T.distance+j.distance;M<N.distance&&(N.distance=M,N.predecessor=j.predecessor)})})}),a}const dH=Object.freeze(Object.defineProperty({__proto__:null,components:GV,dfs:X1,dijkstra:S2,dijkstraAll:ZV,findCycles:JV,floydWarshall:cH,isAcyclic:aH,postorder:uH,preorder:sH,prim:UV,tarjan:A2,topsort:M2},Symbol.toStringTag,{value:"Module"}));class pH extends PV{}class hH extends Zh{}const vH=()=>1,yH=(e,t)=>{var n;if(e.nodeCount()<=1)return[];const a=gH(e,t||vH);return(n=mH(a.graph,a.buckets,a.zeroIdx).map(l=>e.outEdges(l.v,l.w)))===null||n===void 0?void 0:n.flat()},mH=(e,t,n)=>{let a=[];const r=t[t.length-1],l=t[0];let c;for(;e.nodeCount();){for(;c=l.dequeue();)h0(e,t,n,c);for(;c=r.dequeue();)h0(e,t,n,c);if(e.nodeCount()){for(let y=t.length-2;y>0;--y)if(c=t[y].dequeue(),c){a=a.concat(h0(e,t,n,c,!0));break}}}return a},h0=(e,t,n,a,r)=>{var l,c;const y=[];return(l=e.inEdges(a.v))===null||l===void 0||l.forEach(h=>{const g=e.edge(h),b=e.node(h.v);r&&y.push({v:h.v,w:h.w,in:0,out:0}),b.out===void 0&&(b.out=0),b.out-=g,Q0(t,n,b)}),(c=e.outEdges(a.v))===null||c===void 0||c.forEach(h=>{const g=e.edge(h),b=h.w,E=e.node(b);E.in===void 0&&(E.in=0),E.in-=g,Q0(t,n,E)}),e.removeNode(a.v),r?y:void 0},gH=(e,t)=>{const n=new hH;let a=0,r=0;e.nodes().forEach(h=>{n.setNode(h,{v:h,in:0,out:0})}),e.edges().forEach(h=>{const g=n.edge(h)||0,b=(t==null?void 0:t(h))||1,E=g+b;n.setEdge(h.v,h.w,E),r=Math.max(r,n.node(h.v).out+=b),a=Math.max(a,n.node(h.w).in+=b)});const l=[],c=r+a+3;for(let h=0;h<c;h++)l.push(new pH);const y=a+1;return n.nodes().forEach(h=>{Q0(l,y,n.node(h))}),{buckets:l,zeroIdx:y,graph:n}},Q0=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)},_H=e=>{const t=a=>r=>{var l;return((l=a.edge(r))===null||l===void 0?void 0:l.weight)||1},n=e.graph().acyclicer==="greedy"?yH(e,t(e)):bH(e);n==null||n.forEach(a=>{const r=e.edge(a);e.removeEdgeObj(a),r.forwardName=a.name,r.reversed=!0,e.setEdge(a.w,a.v,r,`rev-${Math.random()}`)})},bH=e=>{const t=[],n={},a={},r=l=>{var c;a[l]||(a[l]=!0,n[l]=!0,(c=e.outEdges(l))===null||c===void 0||c.forEach(y=>{n[y.w]?t.push(y):r(y.w)}),delete n[l])};return e.nodes().forEach(r),t},wH=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);const a=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,a)}})},PS={run:_H,undo:wH};class ef extends Zh{}const EH=(e,t)=>Number(e)-Number(t),Jh=(e,t,n,a)=>{let r;do r=`${a}${Math.random()}`;while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r},OH=e=>{const t=new ef().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{const a=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:a.weight+r.weight,minlen:Math.max(a.minlen,r.minlen)})}),t},N2=e=>{const t=new ef({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{var a;!((a=e.children(n))===null||a===void 0)&&a.length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdgeObj(n,e.edge(n))}),t},xH=(e,t)=>e==null?void 0:e.reduce((n,a,r)=>(n[a]=t[r],n),{}),kS=(e,t)=>{const n=Number(e.x),a=Number(e.y),r=Number(t.x)-n,l=Number(t.y)-a;let c=Number(e.width)/2,y=Number(e.height)/2;if(!r&&!l)return{x:0,y:0};let h,g;return Math.abs(l)*c>Math.abs(r)*y?(l<0&&(y=-y),h=y*r/l,g=y):(r<0&&(c=-c),h=c,g=c*l/r),{x:n+h,y:a+g}},Gv=e=>{const t=[],n=P2(e)+1;for(let a=0;a<n;a++)t.push([]);e.nodes().forEach(a=>{const r=e.node(a);if(!r)return;const l=r.rank;l!==void 0&&t[l]&&t[l].push(a)});for(let a=0;a<n;a++)t[a]=t[a].sort((r,l)=>{var c,y;return EH((c=e.node(r))===null||c===void 0?void 0:c.order,(y=e.node(l))===null||y===void 0?void 0:y.order)});return t},SH=e=>{const t=e.nodes().filter(a=>{var r;return((r=e.node(a))===null||r===void 0?void 0:r.rank)!==void 0}).map(a=>e.node(a).rank),n=Math.min(...t);e.nodes().forEach(a=>{const r=e.node(a);r.hasOwnProperty("rank")&&n!==1/0&&(r.rank-=n)})},AH=e=>{const t=e.nodes(),n=t.filter(y=>{var h;return((h=e.node(y))===null||h===void 0?void 0:h.rank)!==void 0}).map(y=>e.node(y).rank),a=Math.min(...n),r=[];t.forEach(y=>{var h;const g=(((h=e.node(y))===null||h===void 0?void 0:h.rank)||0)-a;r[g]||(r[g]=[]),r[g].push(y)});let l=0;const c=e.graph().nodeRankFactor||0;for(let y=0;y<r.length;y++){const h=r[y];h===void 0?y%c!==0&&(l-=1):l&&(h==null||h.forEach(g=>{const b=e.node(g);b&&(b.rank=b.rank||0,b.rank+=l)}))}},RS=(e,t,n,a)=>{const r={width:0,height:0};return Fm(n)&&Fm(a)&&(r.rank=n,r.order=a),Jh(e,"border",r,t)},P2=e=>{let t;return e.nodes().forEach(n=>{var a;const r=(a=e.node(n))===null||a===void 0?void 0:a.rank;r!==void 0&&(t===void 0||r>t)&&(t=r)}),t||(t=0),t},TH=(e,t)=>{const n={lhs:[],rhs:[]};return e==null||e.forEach(a=>{t(a)?n.lhs.push(a):n.rhs.push(a)}),n},k2=(e,t)=>{const n=Date.now();try{return t()}finally{console.log(`${e} time: ${Date.now()-n}ms`)}},R2=(e,t)=>t(),Y1=(e,t)=>e.reduce((n,a)=>{const r=t(n),l=t(a);return r>l?a:n}),MH=e=>{e.graph().dummyChains=[],e.edges().forEach(t=>NH(e,t))},NH=(e,t)=>{let n=t.v,a=e.node(n).rank;const r=t.w,l=e.node(r).rank,c=t.name,y=e.edge(t),h=y.labelRank;if(l===a+1)return;e.removeEdgeObj(t);const g=e.graph();let b,E,x;for(x=0,++a;a<l;++x,++a)y.points=[],E={edgeLabel:y,width:0,height:0,edgeObj:t,rank:a},b=Jh(e,"edge",E,"_d"),a===h&&(E.width=y.width,E.height=y.height,E.dummy="edge-label",E.labelpos=y.labelpos),e.setEdge(n,b,{weight:y.weight},c),x===0&&(g.dummyChains||(g.dummyChains=[]),g.dummyChains.push(b)),n=b;e.setEdge(n,r,{weight:y.weight},c)},PH=e=>{var t;(t=e.graph().dummyChains)===null||t===void 0||t.forEach(n=>{let a=e.node(n);const r=a.edgeLabel;let l;a.edgeObj&&e.setEdgeObj(a.edgeObj,r);let c=n;for(;a.dummy;)l=e.successors(c)[0],e.removeNode(c),r.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(r.x=a.x,r.y=a.y,r.width=a.width,r.height=a.height),c=l,a=e.node(c)})},jS={run:MH,undo:PH},j2=e=>{var t;const n={},a=r=>{var l;const c=e.node(r);if(!c)return 0;if(n[r])return c.rank;n[r]=!0;let y;return(l=e.outEdges(r))===null||l===void 0||l.forEach(h=>{const g=a(h.w),b=e.edge(h).minlen,E=g-b;E&&(y===void 0||E<y)&&(y=E)}),y||(y=0),c.rank=y,y};(t=e.sources())===null||t===void 0||t.forEach(r=>a(r))},kH=e=>{var t;const n={};let a;const r=y=>{var h;const g=e.node(y);if(!g)return 0;if(n[y])return g.rank;n[y]=!0;let b;return(h=e.outEdges(y))===null||h===void 0||h.forEach(E=>{const x=r(E.w),T=e.edge(E).minlen,j=x-T;j&&(b===void 0||j<b)&&(b=j)}),b||(b=0),(a===void 0||b<a)&&(a=b),g.rank=b,b};(t=e.sources())===null||t===void 0||t.forEach(y=>{e.node(y)&&r(y)}),a===void 0&&(a=0);const l={},c=(y,h)=>{var g;const b=e.node(y),E=isNaN(b.layer)?h:b.layer;(b.rank===void 0||b.rank<E)&&(b.rank=E),!l[y]&&(l[y]=!0,(g=e.outEdges(y))===null||g===void 0||g.map(x=>{c(x.w,E+e.edge(x).minlen)}))};e.nodes().forEach(y=>{const h=e.node(y);h&&(isNaN(h.layer)?h.rank-=a:c(y,h.layer))})},id=(e,t)=>e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen,RH=e=>{const t=new ef({directed:!1}),n=e.nodes()[0],a=e.nodeCount();t.setNode(n,{});let r,l;for(;jH(t,e)<a;)r=C2(t,e),l=t.hasNode(r.v)?id(e,r):-id(e,r),D2(t,e,l);return t},jH=(e,t)=>{const n=a=>{t.nodeEdges(a).forEach(r=>{const l=r.v,c=a===l?r.w:l;!e.hasNode(c)&&!id(t,r)&&(e.setNode(c,{}),e.setEdge(a,c,{}),n(c))})};return e.nodes().forEach(n),e.nodeCount()},CH=e=>{const t=new ef({directed:!1}),n=e.nodes()[0],a=e.nodes().filter(c=>!!e.node(c)).length;t.setNode(n,{});let r,l;for(;DH(t,e)<a;)r=C2(t,e),l=t.hasNode(r.v)?id(e,r):-id(e,r),D2(t,e,l);return t},DH=(e,t)=>{const n=a=>{var r;(r=t.nodeEdges(a))===null||r===void 0||r.forEach(l=>{const c=l.v,y=a===c?l.w:c;!e.hasNode(y)&&(t.node(y).layer!==void 0||!id(t,l))&&(e.setNode(y,{}),e.setEdge(a,y,{}),n(y))})};return e.nodes().forEach(n),e.nodeCount()},C2=(e,t)=>Y1(t.edges(),n=>e.hasNode(n.v)!==e.hasNode(n.w)?id(t,n):1/0),D2=(e,t,n)=>{e.nodes().forEach(a=>{t.node(a).rank||(t.node(a).rank=0),t.node(a).rank+=n})},{preorder:IH,postorder:LH}=dH,FH=e=>{const t=OH(e);j2(t);const n=RH(t);L2(n),I2(n,t);let a,r;for(;a=UH(n);)r=GH(n,t,a),WH(n,t,a,r)},I2=(e,t)=>{let n=LH(e,e.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(a=>{$H(e,t,a)})},$H=(e,t,n)=>{const r=e.node(n).parent;e.edgeFromArgs(n,r).cutvalue=BH(e,t,n)},BH=(e,t,n)=>{var a;const l=e.node(n).parent;let c=!0,y=t.edgeFromArgs(n,l),h=0;return y||(c=!1,y=t.edgeFromArgs(l,n)),h=y.weight,(a=t.nodeEdges(n))===null||a===void 0||a.forEach(g=>{const b=g.v===n,E=b?g.w:g.v;if(E!==l){const x=b===c,T=t.edge(g).weight;if(h+=x?T:-T,VH(e,n,E)){const j=e.edgeFromArgs(n,E).cutvalue;h+=x?-j:j}}}),h},L2=(e,t=e.nodes()[0])=>{F2(e,{},1,t)},F2=(e,t,n,a,r)=>{var l;const c=n;let y=n;const h=e.node(a);return t[a]=!0,(l=e.neighbors(a))===null||l===void 0||l.forEach(g=>{t[g]||(y=F2(e,t,y,g,a))}),h.low=c,h.lim=y++,r?h.parent=r:delete h.parent,y},UH=e=>e.edges().find(t=>e.edge(t).cutvalue<0),GH=(e,t,n)=>{let a=n.v,r=n.w;t.hasEdge(a,r)||(a=n.w,r=n.v);const l=e.node(a),c=e.node(r);let y=l,h=!1;l.lim>c.lim&&(y=c,h=!0);const g=t.edges().filter(b=>h===CS(e,e.node(b.v),y)&&h!==CS(e,e.node(b.w),y));return Y1(g,b=>id(t,b))},WH=(e,t,n,a)=>{const r=n.v,l=n.w;e.removeEdge(r,l),e.setEdge(a.v,a.w,{}),L2(e),I2(e,t),zH(e,t)},zH=(e,t)=>{const n=e.nodes().find(r=>{var l;return!(!((l=t.node(r))===null||l===void 0)&&l.parent)});let a=IH(e,n);a=a==null?void 0:a.slice(1),a==null||a.forEach(r=>{const l=e.node(r).parent;let c=t.edgeFromArgs(r,l),y=!1;c||(c=t.edgeFromArgs(l,r),y=!0),t.node(r).rank=t.node(l).rank+(y?c.minlen:-c.minlen)})},VH=(e,t,n)=>e.hasEdge(t,n),CS=(e,t,n)=>n.low<=t.lim&&t.lim<=n.lim,HH=e=>{switch(e.graph().ranker){case"network-simplex":YH(e);break;case"tight-tree":DS(e);break;case"longest-path":XH(e);break;default:DS(e)}},XH=j2,DS=e=>{kH(e),CH(e)},YH=e=>{FH(e)},qH=e=>{var t;const n={};let a=0;const r=l=>{var c;const y=a;(c=e.children(l))===null||c===void 0||c.forEach(r),n[l]={low:y,lim:a++}};return(t=e.children())===null||t===void 0||t.forEach(r),n},KH=(e,t,n,a)=>{const r=[],l=[],c=Math.min(t[n].low,t[a].low),y=Math.max(t[n].lim,t[a].lim);let h,g;h=n;do h=e.parent(h),r.push(h);while(h&&(t[h].low>c||y>t[h].lim));for(g=h,h=a;h&&h!==g;)l.push(h),h=e.parent(h);return{lca:g,path:r.concat(l.reverse())}},ZH=e=>{var t;const n=qH(e);(t=e.graph().dummyChains)===null||t===void 0||t.forEach(a=>{var r,l;let c=a,y=e.node(c);const h=y.edgeObj;if(!h)return;const g=KH(e,n,h.v,h.w),b=g.path,E=g.lca;let x=0,T=b[x],j=!0;for(;c!==h.w;){if(y=e.node(c),j){for(;T!==E&&((r=e.node(T))===null||r===void 0?void 0:r.maxRank)<y.rank;)x++,T=b[x];T===E&&(j=!1)}if(!j){for(;x<b.length-1&&((l=e.node(b[x+1]))===null||l===void 0?void 0:l.minRank)<=y.rank;)x++;T=b[x]}e.setParent(c,T),c=e.successors(c)[0]}})},JH=e=>{var t;const n=Jh(e,"root",{},"_root"),a=QH(e);let r=Math.max(...Object.values(a));Math.abs(r)===1/0&&(r=1);const l=r-1,c=2*l+1;e.graph().nestingRoot=n,e.edges().forEach(h=>{e.edge(h).minlen*=c});const y=eX(e)+1;(t=e.children())===null||t===void 0||t.forEach(h=>{$2(e,n,c,y,l,a,h)}),e.graph().nodeRankFactor=c},$2=(e,t,n,a,r,l,c)=>{const y=e.children(c);if(!(y!=null&&y.length)){c!==t&&e.setEdge(t,c,{weight:0,minlen:n});return}const h=RS(e,"_bt"),g=RS(e,"_bb"),b=e.node(c);e.setParent(h,c),b.borderTop=h,e.setParent(g,c),b.borderBottom=g,y==null||y.forEach(E=>{$2(e,t,n,a,r,l,E);const x=e.node(E),T=x.borderTop?x.borderTop:E,j=x.borderBottom?x.borderBottom:E,N=x.borderTop?a:2*a,M=T!==j?1:r-l[c]+1;e.setEdge(h,T,{minlen:M,weight:N,nestingEdge:!0}),e.setEdge(j,g,{minlen:M,weight:N,nestingEdge:!0})}),e.parent(c)||e.setEdge(t,h,{weight:0,minlen:r+l[c]})},QH=e=>{var t;const n={},a=(r,l)=>{const c=e.children(r);c==null||c.forEach(y=>a(y,l+1)),n[r]=l};return(t=e.children())===null||t===void 0||t.forEach(r=>a(r,1)),n},eX=e=>{let t=0;return e.edges().forEach(n=>{t+=e.edge(n).weight}),t},tX=e=>{const t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdgeObj(n)})},IS={run:JH,cleanup:tX},nX=e=>{var t;const n=a=>{const r=e.children(a),l=e.node(a);if(r!=null&&r.length&&r.forEach(c=>n(c)),l.hasOwnProperty("minRank")){l.borderLeft=[],l.borderRight=[];for(let c=l.minRank,y=l.maxRank+1;c<y;c+=1)LS(e,"borderLeft","_bl",a,l,c),LS(e,"borderRight","_br",a,l,c)}};(t=e.children())===null||t===void 0||t.forEach(a=>n(a))},LS=(e,t,n,a,r,l)=>{const c={rank:l,borderType:t,width:0,height:0},y=r[t][l-1],h=Jh(e,"border",c,n);r[t][l]=h,e.setParent(h,a),y&&e.setEdge(y,h,{weight:1})},rX=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&B2(e)},oX=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&iX(e),(n==="lr"||n==="rl")&&(aX(e),B2(e))},B2=e=>{e.nodes().forEach(t=>{FS(e.node(t))}),e.edges().forEach(t=>{FS(e.edge(t))})},FS=e=>{const t=e.width;e.width=e.height,e.height=t},iX=e=>{e.nodes().forEach(t=>{v0(e.node(t))}),e.edges().forEach(t=>{var n;const a=e.edge(t);(n=a.points)===null||n===void 0||n.forEach(r=>v0(r)),a.hasOwnProperty("y")&&v0(a)})},v0=e=>{e!=null&&e.y&&(e.y=-e.y)},aX=e=>{e.nodes().forEach(t=>{y0(e.node(t))}),e.edges().forEach(t=>{var n;const a=e.edge(t);(n=a.points)===null||n===void 0||n.forEach(r=>y0(r)),a.hasOwnProperty("x")&&y0(a)})},y0=e=>{const t=e.x;e.x=e.y,e.y=t},$S={adjust:rX,undo:oX};function uX(e){return Array.isArray(e)}function e1(e){if(!Array.isArray(e))return-1/0;var t=e.length;if(!t)return-1/0;for(var n=e[0],a=1;a<t;a++)n=Math.max(n,e[a]);return n}const BS=function(e){if(uX(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},US=e=>{const t={},n=e.nodes().filter(b=>{var E;return!(!((E=e.children(b))===null||E===void 0)&&E.length)}),a=n.map(b=>e.node(b).rank),r=e1(a),l=[];for(let b=0;b<r+1;b++)l.push([]);const c=b=>{var E;if(t.hasOwnProperty(b))return;t[b]=!0;const x=e.node(b);isNaN(x.rank)||l[x.rank].push(b),(E=e.successors(b))===null||E===void 0||E.forEach(T=>c(T))},y=n.sort((b,E)=>e.node(b).rank-e.node(E).rank),g=y.filter(b=>e.node(b).fixorder!==void 0).sort((b,E)=>e.node(b).fixorder-e.node(E).fixorder);return g==null||g.forEach(b=>{isNaN(e.node(b).rank)||l[e.node(b).rank].push(b),t[b]=!0}),y==null||y.forEach(c),l},sX=(e,t,n)=>{const a=xH(n,n.map((b,E)=>E)),l=t.map(b=>{var E;const x=(E=e.outEdges(b))===null||E===void 0?void 0:E.map(T=>({pos:a[T.w]||0,weight:e.edge(T).weight}));return x==null?void 0:x.sort((T,j)=>T.pos-j.pos)}).flat().filter(b=>b!==void 0);let c=1;for(;c<n.length;)c<<=1;const y=2*c-1;c-=1;const h=Array(y).fill(0,0,y);let g=0;return l==null||l.forEach(b=>{if(b){let E=b.pos+c;h[E]+=b.weight;let x=0;for(;E>0;)E%2&&(x+=h[E+1]),E=E-1>>1,h[E]+=b.weight;g+=b.weight*x}}),g},GS=(e,t)=>{let n=0;for(let a=1;a<(t==null?void 0:t.length);a+=1)n+=sX(e,t[a-1],t[a]);return n},lX=(e,t,n)=>{const a=cX(e),r=new ef({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(l=>e.node(l));return e.nodes().forEach(l=>{var c;const y=e.node(l),h=e.parent(l);(y.rank===t||y.minRank<=t&&t<=y.maxRank)&&(r.setNode(l),r.setParent(l,h||a),(c=e[n](l))===null||c===void 0||c.forEach(g=>{const b=g.v===l?g.w:g.v,E=r.edgeFromArgs(b,l),x=E!==void 0?E.weight:0;r.setEdge(b,l,{weight:e.edge(g).weight+x})}),y.hasOwnProperty("minRank")&&r.setNode(l,{borderLeft:y.borderLeft[t],borderRight:y.borderRight[t]}))}),r},cX=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t},fX=(e,t,n)=>{const a={};let r;n==null||n.forEach(l=>{let c=e.parent(l),y,h;for(;c;){if(y=e.parent(c),y?(h=a[y],a[y]=c):(h=r,r=c),h&&h!==c){t.setEdge(h,c);return}c=y}})},dX=(e,t)=>t.map(n=>{const a=e.inEdges(n);if(!(a!=null&&a.length))return{v:n};{const r={sum:0,weight:0};return a==null||a.forEach(l=>{const c=e.edge(l),y=e.node(l.v);r.sum+=c.weight*y.order,r.weight+=c.weight}),{v:n,barycenter:r.sum/r.weight,weight:r.weight}}}),pX=(e,t)=>{var n,a,r;const l={};e==null||e.forEach((y,h)=>{l[y.v]={i:h,indegree:0,in:[],out:[],vs:[y.v]};const g=l[y.v];y.barycenter!==void 0&&(g.barycenter=y.barycenter,g.weight=y.weight)}),(n=t.edges())===null||n===void 0||n.forEach(y=>{const h=l[y.v],g=l[y.w];h!==void 0&&g!==void 0&&(g.indegree++,h.out.push(l[y.w]))});const c=(r=(a=Object.values(l)).filter)===null||r===void 0?void 0:r.call(a,y=>!y.indegree);return hX(c)},hX=e=>{var t,n;const a=[],r=h=>g=>{g.merged||(g.barycenter===void 0||h.barycenter===void 0||g.barycenter>=h.barycenter)&&vX(h,g)},l=h=>g=>{g.in.push(h),--g.indegree===0&&e.push(g)};for(;e!=null&&e.length;){const h=e.pop();a.push(h),(t=h.in.reverse())===null||t===void 0||t.forEach(g=>r(h)(g)),(n=h.out)===null||n===void 0||n.forEach(g=>l(h)(g))}const c=a.filter(h=>!h.merged),y=["vs","i","barycenter","weight"];return c.map(h=>{const g={};return y==null||y.forEach(b=>{h[b]!==void 0&&(g[b]=h[b])}),g})},vX=(e,t)=>{var n;let a=0,r=0;e.weight&&(a+=e.barycenter*e.weight,r+=e.weight),t.weight&&(a+=t.barycenter*t.weight,r+=t.weight),e.vs=(n=t.vs)===null||n===void 0?void 0:n.concat(e.vs),e.barycenter=a/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0},yX=(e,t,n,a)=>{const r=TH(e,x=>{const T=x.hasOwnProperty("fixorder")&&!isNaN(x.fixorder);return a?!T&&x.hasOwnProperty("barycenter"):T||x.hasOwnProperty("barycenter")}),l=r.lhs,c=r.rhs.sort((x,T)=>-x.i- -T.i),y=[];let h=0,g=0,b=0;l==null||l.sort(mX(!!t,!!n)),b=WS(y,c,b),l==null||l.forEach(x=>{var T;b+=(T=x.vs)===null||T===void 0?void 0:T.length,y.push(x.vs),h+=x.barycenter*x.weight,g+=x.weight,b=WS(y,c,b)});const E={vs:y.flat()};return g&&(E.barycenter=h/g,E.weight=g),E},WS=(e,t,n)=>{let a=n,r;for(;t.length&&(r=t[t.length-1]).i<=a;)t.pop(),e==null||e.push(r.vs),a++;return a},mX=(e,t)=>(n,a)=>{if(n.fixorder!==void 0&&a.fixorder!==void 0)return n.fixorder-a.fixorder;if(n.barycenter<a.barycenter)return-1;if(n.barycenter>a.barycenter)return 1;if(t&&n.order!==void 0&&a.order!==void 0){if(n.order<a.order)return-1;if(n.order>a.order)return 1}return e?a.i-n.i:n.i-a.i},U2=(e,t,n,a,r,l)=>{var c,y,h,g;let b=e.children(t);const E=e.node(t),x=E?E.borderLeft:void 0,T=E?E.borderRight:void 0,j={};x&&(b=b==null?void 0:b.filter(k=>k!==x&&k!==T));const N=dX(e,b||[]);N==null||N.forEach(k=>{var F;if(!((F=e.children(k.v))===null||F===void 0)&&F.length){const te=U2(e,k.v,n,a,l);j[k.v]=te,te.hasOwnProperty("barycenter")&&_X(k,te)}});const M=pX(N,n);gX(M,j),(c=M.filter(k=>k.vs.length>0))===null||c===void 0||c.forEach(k=>{const F=e.node(k.vs[0]);F&&(k.fixorder=F.fixorder,k.order=F.order)});const D=yX(M,a,r,l);if(x&&(D.vs=[x,D.vs,T].flat(),!((y=e.predecessors(x))===null||y===void 0)&&y.length)){const k=e.node(((h=e.predecessors(x))===null||h===void 0?void 0:h[0])||""),F=e.node(((g=e.predecessors(T))===null||g===void 0?void 0:g[0])||"");D.hasOwnProperty("barycenter")||(D.barycenter=0,D.weight=0),D.barycenter=(D.barycenter*D.weight+k.order+F.order)/(D.weight+2),D.weight+=2}return D},gX=(e,t)=>{e==null||e.forEach(n=>{var a;const r=(a=n.vs)===null||a===void 0?void 0:a.map(l=>t[l]?t[l].vs:l);n.vs=r.flat()})},_X=(e,t)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)},bX=(e,t)=>{const n=P2(e),a=[],r=[];for(let b=1;b<n+1;b++)a.push(b);for(let b=n-1;b>-1;b--)r.push(b);const l=zS(e,a,"inEdges"),c=zS(e,r,"outEdges");let y=US(e);m0(e,y);let h=Number.POSITIVE_INFINITY,g;for(let b=0,E=0;E<4;++b,++E){VS(b%2?l:c,b%4>=2,!1,t),y=Gv(e);const x=GS(e,y);x<h&&(E=0,g=$m(y),h=x)}y=US(e),m0(e,y);for(let b=0,E=0;E<4;++b,++E){VS(b%2?l:c,b%4>=2,!0,t),y=Gv(e);const x=GS(e,y);x<h&&(E=0,g=$m(y),h=x)}m0(e,g)},zS=(e,t,n)=>t.map(a=>lX(e,a,n)),VS=(e,t,n,a)=>{const r=new ef;e==null||e.forEach(l=>{var c;const y=l.graph().root,h=U2(l,y,r,t,n,a);for(let g=0;g<((c=h.vs)===null||c===void 0?void 0:c.length);g++){const b=l.node(h.vs[g]);b&&(b.order=g)}fX(l,r,h.vs)})},m0=(e,t)=>{t==null||t.forEach(n=>{n==null||n.forEach((a,r)=>{e.node(a).order=r})})};class wX extends Zh{}const EX=(e,t)=>{const n={},a=(r,l)=>{let c=0,y=0;const h=r.length,g=l==null?void 0:l[(l==null?void 0:l.length)-1];return l==null||l.forEach((b,E)=>{var x;const T=xX(e,b),j=T?e.node(T).order:h;(T||b===g)&&((x=l.slice(y,E+1))===null||x===void 0||x.forEach(N=>{var M;(M=e.predecessors(N))===null||M===void 0||M.forEach(D=>{var k;const F=e.node(D),te=F.order;(te<c||j<te)&&!(F.dummy&&(!((k=e.node(N))===null||k===void 0)&&k.dummy))&&G2(n,D,N)})}),y=E+1,c=j)}),l};return t!=null&&t.length&&t.reduce(a),n},OX=(e,t)=>{const n={};function a(y,h,g,b,E){var x,T;let j;for(let N=h;N<g;N++)j=y[N],!((x=e.node(j))===null||x===void 0)&&x.dummy&&((T=e.predecessors(j))===null||T===void 0||T.forEach(M=>{const D=e.node(M);D.dummy&&(D.order<b||D.order>E)&&G2(n,M,j)}))}function r(y){return JSON.stringify(y.slice(1))}function l(y,h){const g=r(y);h.get(g)||(a(...y),h.set(g,!0))}const c=(y,h)=>{let g=-1,b,E=0;const x=new Map;return h==null||h.forEach((T,j)=>{var N;if(((N=e.node(T))===null||N===void 0?void 0:N.dummy)==="border"){const M=e.predecessors(T)||[];M.length&&(b=e.node(M[0]).order,l([h,E,j,g,b],x),E=j,g=b)}l([h,E,h.length,b,y.length],x)}),h};return t!=null&&t.length&&t.reduce(c),n},xX=(e,t)=>{var n,a;if(!((n=e.node(t))===null||n===void 0)&&n.dummy)return(a=e.predecessors(t))===null||a===void 0?void 0:a.find(r=>e.node(r).dummy)},G2=(e,t,n)=>{let a=t,r=n;if(a>r){const c=a;a=r,r=c}let l=e[a];l||(e[a]=l={}),l[r]=!0},SX=(e,t,n)=>{let a=t,r=n;if(a>r){const l=t;a=r,r=l}return!!e[a]},AX=(e,t,n,a)=>{const r={},l={},c={};return t==null||t.forEach(y=>{y==null||y.forEach((h,g)=>{r[h]=h,l[h]=h,c[h]=g})}),t==null||t.forEach(y=>{let h=-1;y==null||y.forEach(g=>{let b=a(g);if(b.length){b=b.sort((x,T)=>c[x]-c[T]);const E=(b.length-1)/2;for(let x=Math.floor(E),T=Math.ceil(E);x<=T;++x){const j=b[x];l[g]===g&&h<c[j]&&!SX(n,g,j)&&(l[j]=g,l[g]=r[g]=r[j],h=c[j])}}})}),{root:r,align:l}},TX=(e,t,n,a,r)=>{var l;const c={},y=MX(e,t,n,r),h=r?"borderLeft":"borderRight",g=(x,T)=>{let j=y.nodes(),N=j.pop();const M={};for(;N;)M[N]?x(N):(M[N]=!0,j.push(N),j=j.concat(T(N))),N=j.pop()},b=x=>{c[x]=(y.inEdges(x)||[]).reduce((T,j)=>Math.max(T,(c[j.v]||0)+y.edge(j)),0)},E=x=>{const T=(y.outEdges(x)||[]).reduce((N,M)=>Math.min(N,(c[M.w]||0)-y.edge(M)),Number.POSITIVE_INFINITY),j=e.node(x);T!==Number.POSITIVE_INFINITY&&j.borderType!==h&&(c[x]=Math.max(c[x],T))};return g(b,y.predecessors.bind(y)),g(E,y.successors.bind(y)),(l=Object.values(a))===null||l===void 0||l.forEach(x=>{c[x]=c[n[x]]}),c},MX=(e,t,n,a)=>{const r=new wX,l=e.graph(),c=RX(l.nodesep,l.edgesep,a);return t==null||t.forEach(y=>{let h;y==null||y.forEach(g=>{const b=n[g];if(r.setNode(b),h){const E=n[h],x=r.edgeFromArgs(E,b);r.setEdge(E,b,Math.max(c(e,g,h),x||0))}h=g})}),r},NX=(e,t)=>Y1(Object.values(t),n=>{var a;let r=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY;return(a=Object.keys(n))===null||a===void 0||a.forEach(c=>{const y=n[c],h=jX(e,c)/2;r=Math.max(y+h,r),l=Math.min(y-h,l)}),r-l});function PX(e,t){const n=Object.values(t),a=BS(n),r=e1(n);["u","d"].forEach(l=>{["l","r"].forEach(c=>{const y=l+c,h=e[y];let g;if(h===t)return;const b=Object.values(h);g=c==="l"?a-BS(b):r-e1(b),g&&(e[y]={},Object.keys(h).forEach(E=>{e[y][E]=h[E]+g}))})})}const kX=(e,t)=>{const n={};return Object.keys(e.ul).forEach(a=>{if(t)n[a]=e[t.toLowerCase()][a];else{const r=Object.values(e).map(l=>l[a]);n[a]=(r[0]+r[1])/2}}),n},RX=(e,t,n)=>(a,r,l)=>{const c=a.node(r),y=a.node(l);let h=0,g;if(h+=c.width/2,c.hasOwnProperty("labelpos"))switch((c.labelpos||"").toLowerCase()){case"l":g=-c.width/2;break;case"r":g=c.width/2;break}if(g&&(h+=n?g:-g),g=0,h+=(c.dummy?t:e)/2,h+=(y.dummy?t:e)/2,h+=y.width/2,y.labelpos)switch((y.labelpos||"").toLowerCase()){case"l":g=y.width/2;break;case"r":g=-y.width/2;break}return g&&(h+=n?g:-g),g=0,h},jX=(e,t)=>e.node(t).width||0,CX=e=>{const t=Gv(e),n=e.graph().ranksep;let a=0;t==null||t.forEach(r=>{const l=r.map(y=>e.node(y).height),c=Math.max(...l,0);r==null||r.forEach(y=>{e.node(y).y=a+c/2}),a+=c+n})},DX=e=>{const t=Gv(e),n=Object.assign(EX(e,t),OX(e,t)),a={};let r=[];["u","d"].forEach(c=>{r=c==="u"?t:Object.values(t).reverse(),["l","r"].forEach(y=>{y==="r"&&(r=r.map(E=>Object.values(E).reverse()));const h=(c==="u"?e.predecessors:e.successors).bind(e),g=AX(e,r,n,h),b=TX(e,r,g.root,g.align,y==="r");y==="r"&&Object.keys(b).forEach(E=>b[E]=-b[E]),a[c+y]=b})});const l=NX(e,a);return l&&PX(a,l),kX(a,e.graph().align)},IX=e=>{var t;const n=N2(e);CX(n);const a=DX(n);(t=Object.keys(a))===null||t===void 0||t.forEach(r=>{n.node(r).x=a[r]})},LX=(e,t)=>{const a=e.nodes().filter(c=>{var y;return!(!((y=e.children(c))===null||y===void 0)&&y.length)}).map(c=>e.node(c).rank),r=Math.max(...a),l=[];for(let c=0;c<r+1;c++)l[c]=[];t==null||t.forEach(c=>{const y=e.node(c);!y||y!=null&&y.dummy||isNaN(y.rank)||(y.fixorder=l[y.rank].length,l[y.rank].push(c))})},FX=(e,t)=>{const n=t&&t.debugTiming?k2:R2;n("layout",()=>{t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",()=>{BX(e,t.prevGraph)});const a=n("  buildLayoutGraph",()=>YX(e));t&&t.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",()=>{qX(a)});try{n("  runLayout",()=>{$X(a,n,t)})}catch(r){if(r.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,r);return}throw r}n("  updateInputGraph",()=>{UX(e,a)})})},$X=(e,t,n)=>{t("    removeSelfEdges",()=>{oY(e)}),t("    acyclic",()=>{PS.run(e)}),t("    nestingGraph.run",()=>{IS.run(e)}),t("    rank",()=>{HH(N2(e))}),t("    injectEdgeLabelProxies",()=>{KX(e)}),t("    removeEmptyRanks",()=>{AH(e)}),t("    nestingGraph.cleanup",()=>{IS.cleanup(e)}),t("    normalizeRanks",()=>{SH(e)}),t("    assignRankMinMax",()=>{ZX(e)}),t("    removeEdgeLabelProxies",()=>{JX(e)}),t("    normalize.run",()=>{jS.run(e)}),t("    parentDummyChains",()=>{ZH(e)}),t("    addBorderSegments",()=>{nX(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",()=>{LX(e,n.nodeOrder)}),t("    order",()=>{bX(e,n==null?void 0:n.keepNodeOrder)}),t("    insertSelfEdges",()=>{iY(e)}),t("    adjustCoordinateSystem",()=>{$S.adjust(e)}),t("    position",()=>{IX(e)}),t("    positionSelfEdges",()=>{aY(e)}),t("    removeBorderNodes",()=>{rY(e)}),t("    normalize.undo",()=>{jS.undo(e)}),t("    fixupEdgeLabelCoords",()=>{tY(e)}),t("    undoCoordinateSystem",()=>{$S.undo(e)}),t("    translateGraph",()=>{QX(e)}),t("    assignNodeIntersects",()=>{eY(e)}),t("    reversePoints",()=>{nY(e)}),t("    acyclic.undo",()=>{PS.undo(e)})},BX=(e,t)=>{e.nodes().forEach(n=>{const a=e.node(n),r=t.node(n);r!==void 0?(a.fixorder=r._order,delete r._order):delete a.fixorder})},UX=(e,t)=>{e.nodes().forEach(n=>{var a;const r=e.node(n);if(r){const l=t.node(n);r.x=l.x,r.y=l.y,r._order=l.order,r._rank=l.rank,!((a=t.children(n))===null||a===void 0)&&a.length&&(r.width=l.width,r.height=l.height)}}),e.edges().forEach(n=>{const a=e.edge(n),r=t.edge(n);a.points=r?r.points:[],r&&r.hasOwnProperty("x")&&(a.x=r.x,a.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},GX=["nodesep","edgesep","ranksep","marginx","marginy"],WX={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},g0=["acyclicer","ranker","rankdir","align"],zX=["width","height","layer","fixorder"],VX={width:0,height:0},HX=["minlen","weight","width","height","labeloffset"],XX={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},_0=["labelpos"],YX=e=>{const t=new ef({multigraph:!0,compound:!0}),n=w0(e.graph()),a={};return g0==null||g0.forEach(r=>{n[r]!==void 0&&(a[r]=n[r])}),t.setGraph(Object.assign({},WX,b0(n,GX),a)),e.nodes().forEach(r=>{const l=w0(e.node(r)),c=Object.assign(Object.assign({},VX),l),y=b0(c,zX);t.setNode(r,y),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{const l=w0(e.edge(r)),c={};_0==null||_0.forEach(y=>{l[y]!==void 0&&(c[y]=l[y])}),t.setEdgeObj(r,Object.assign({},XX,b0(l,HX),c))}),t},qX=e=>{const t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(n=>{const a=e.node(n);isNaN(a.layer)||a.layer||(a.layer=0)}),e.edges().forEach(n=>{var a;const r=e.edge(n);r.minlen*=2,((a=r.labelpos)===null||a===void 0?void 0:a.toLowerCase())!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})},KX=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.width&&n.height){const a=e.node(t.v),r=e.node(t.w),l={e:t,rank:(r.rank-a.rank)/2+a.rank};Jh(e,"edge-proxy",l,"_ep")}})},ZX=e=>{let t=0;e.nodes().forEach(n=>{var a,r;const l=e.node(n);l.borderTop&&(l.minRank=(a=e.node(l.borderTop))===null||a===void 0?void 0:a.rank,l.maxRank=(r=e.node(l.borderBottom))===null||r===void 0?void 0:r.rank,t=Math.max(t,l.maxRank||-1/0))}),e.graph().maxRank=t},JX=e=>{e.nodes().forEach(t=>{const n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})},QX=e=>{let t,n=0,a,r=0;const l=e.graph(),c=l.marginx||0,y=l.marginy||0,h=g=>{if(!g)return;const b=g.x,E=g.y,x=g.width,T=g.height;!isNaN(b)&&!isNaN(x)&&(t===void 0&&(t=b-x/2),t=Math.min(t,b-x/2),n=Math.max(n,b+x/2)),!isNaN(E)&&!isNaN(T)&&(a===void 0&&(a=E-T/2),a=Math.min(a,E-T/2),r=Math.max(r,E+T/2))};e.nodes().forEach(g=>{h(e.node(g))}),e.edges().forEach(g=>{const b=e.edge(g);b!=null&&b.hasOwnProperty("x")&&h(b)}),t-=c,a-=y,e.nodes().forEach(g=>{const b=e.node(g);b&&(b.x-=t,b.y-=a)}),e.edges().forEach(g=>{var b;const E=e.edge(g);(b=E.points)===null||b===void 0||b.forEach(x=>{x.x-=t,x.y-=a}),E.hasOwnProperty("x")&&(E.x-=t),E.hasOwnProperty("y")&&(E.y-=a)}),l.width=n-t+c,l.height=r-a+y},eY=e=>{e.edges().forEach(t=>{const n=e.edge(t),a=e.node(t.v),r=e.node(t.w);let l,c;n.points?(l=n.points[0],c=n.points[n.points.length-1]):(n.points=[],l=r,c=a),n.points.unshift(kS(a,l)),n.points.push(kS(r,c))})},tY=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n!=null&&n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},nY=e=>{e.edges().forEach(t=>{var n;const a=e.edge(t);a.reversed&&((n=a.points)===null||n===void 0||n.reverse())})},rY=e=>{e.nodes().forEach(t=>{var n,a,r;if(!((n=e.children(t))===null||n===void 0)&&n.length){const l=e.node(t),c=e.node(l.borderTop),y=e.node(l.borderBottom),h=e.node(l.borderLeft[((a=l.borderLeft)===null||a===void 0?void 0:a.length)-1]),g=e.node(l.borderRight[((r=l.borderRight)===null||r===void 0?void 0:r.length)-1]);l.width=Math.abs((g==null?void 0:g.x)-(h==null?void 0:h.x))||10,l.height=Math.abs((y==null?void 0:y.y)-(c==null?void 0:c.y))||10,l.x=((h==null?void 0:h.x)||0)+l.width/2,l.y=((c==null?void 0:c.y)||0)+l.height/2}}),e.nodes().forEach(t=>{var n;((n=e.node(t))===null||n===void 0?void 0:n.dummy)==="border"&&e.removeNode(t)})},oY=e=>{e.edges().forEach(t=>{if(t.v===t.w){const n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},iY=e=>{const t=Gv(e);t==null||t.forEach(n=>{let a=0;n==null||n.forEach((r,l)=>{var c;const y=e.node(r);y.order=l+a,(c=y.selfEdges)===null||c===void 0||c.forEach(h=>{Jh(e,"selfedge",{width:h.label.width,height:h.label.height,rank:y.rank,order:l+ ++a,e:h.e,label:h.label},"_se")}),delete y.selfEdges})})},aY=e=>{e.nodes().forEach(t=>{const n=e.node(t);if(n.dummy==="selfedge"){const a=e.node(n.e.v),r=a.x+a.width/2,l=a.y,c=n.x-r,y=a.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*c/3,y:l-y},{x:r+5*c/6,y:l-y},{y:l,x:r+c},{x:r+5*c/6,y:l+y},{x:r+2*c/3,y:l+y}],n.label.x=n.x,n.label.y=n.y}})},b0=(e,t)=>{const n={};return t==null||t.forEach(a=>{e[a]!==void 0&&(n[a]=+e[a])}),n},w0=(e={})=>{const t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t},uY={layout:FX,util:{time:k2,notime:R2}};class sY extends TV{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=n=>{const a=this,{nodes:r}=a,l=r.find(c=>c.id===n);return l?l.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var t,n,a,r;const l=this,{nodes:c,nodeSize:y,rankdir:h,combos:g,begin:b,radial:E,comboEdges:x=[],vedges:T=[]}=l;if(!c)return;const j=l.edges||[],N=new ef({multigraph:!0,compound:!0});l.nodeMap={};const M={};c.forEach(X=>{l.nodeMap[X.id]=X,X.comboId&&(M[X.comboId]=M[X.comboId]||[],M[X.comboId].push(X.id))});let D=[];const k={};!((t=l.nodeOrder)===null||t===void 0)&&t.length?(l.nodeOrder.forEach(X=>{k[X]=!0,D.push(l.nodeMap[X])}),c.forEach(X=>{k[X.id]||D.push(X)})):D=c;let F;y?mS(y)?F=()=>y:F=()=>[y,y]:F=X=>X.size?mS(X.size)?X.size:E2(X.size)?[X.size.width||40,X.size.height||40]:[X.size,X.size]:[40,40];const te=gS(l.ranksep,50,l.ranksepFunc),V=gS(l.nodesep,50,l.nodesepFunc);let z=V,J=te;(h==="LR"||h==="RL")&&(z=te,J=V),N.setDefaultEdgeLabel(()=>({})),N.setGraph(l);const K={};this.sortByCombo&&g&&g.forEach(X=>{if(K[X.id]=X,X.collapsed){const ge=F(X),Fe=J(X),Me=z(X),Xe=ge[0]+2*Me,De=ge[1]+2*Fe;N.setNode(X.id,{width:Xe,height:De})}X.parentId&&(K[X.parentId]||N.setNode(X.parentId,{}),N.setParent(X.id,X.parentId))}),D.filter(X=>X.layout!==!1).forEach(X=>{const ge=F(X),Fe=J(X),Me=z(X),Xe=ge[0]+2*Me,De=ge[1]+2*Fe,Re=X.layer;Fm(Re)?N.setNode(X.id,{width:Xe,height:De,layer:Re}):N.setNode(X.id,{width:Xe,height:De}),this.sortByCombo&&X.comboId&&(K[X.comboId]||(K[X.comboId]={id:X.comboId},N.setNode(X.comboId,{})),N.setParent(X.id,X.comboId))}),j.forEach(X=>{const ge=vh(X,"source"),Fe=vh(X,"target");this.layoutNode(ge)&&this.layoutNode(Fe)&&N.setEdge(ge,Fe,{weight:X.weight||1})}),(n=x==null?void 0:x.concat(T||[]))===null||n===void 0||n.forEach(X=>{var ge,Fe;const{source:Me,target:Xe}=X,De=!((ge=K[Me])===null||ge===void 0)&&ge.collapsed?[Me]:M[Me]||[Me],Re=!((Fe=K[Xe])===null||Fe===void 0)&&Fe.collapsed?[Xe]:M[Xe]||[Xe];De.forEach(ce=>{Re.forEach(he=>{N.setEdge(ce,he,{weight:X.weight||1})})})});let B;!((a=l.preset)===null||a===void 0)&&a.nodes&&(B=new ef({multigraph:!0,compound:!0}),l.preset.nodes.forEach(X=>{B==null||B.setNode(X.id,X)})),uY.layout(N,{prevGraph:B,edgeLabelSpace:l.edgeLabelSpace,keepNodeOrder:!!l.nodeOrder,nodeOrder:l.nodeOrder});const H=[0,0];if(b){let X=1/0,ge=1/0;N.nodes().forEach(Fe=>{const Me=N.node(Fe);X>Me.x&&(X=Me.x),ge>Me.y&&(ge=Me.y)}),N.edges().forEach(Fe=>{var Me;(Me=N.edge(Fe).points)===null||Me===void 0||Me.forEach(De=>{X>De.x&&(X=De.x),ge>De.y&&(ge=De.y)})}),H[0]=b[0]-X,H[1]=b[1]-ge}const ne=h==="LR"||h==="RL";if(E){const{focusNode:X,ranksep:ge,getRadialPos:Fe}=this,Me=MV(X)?X:X==null?void 0:X.id,Xe=Me?(r=N.node(Me))===null||r===void 0?void 0:r._rank:0,De=[],Re=ne?"y":"x",ce=ne?"height":"width";let he=1/0,Oe=-1/0;N.nodes().forEach(ye=>{const Pe=N.node(ye);if(!l.nodeMap[ye])return;const bt=V(l.nodeMap[ye]);if(Xe===0)De[Pe._rank]||(De[Pe._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),De[Pe._rank].nodes.push(ye),De[Pe._rank].totalWidth+=bt*2+Pe[ce],De[Pe._rank].maxSize<Math.max(Pe.width,Pe.height)&&(De[Pe._rank].maxSize=Math.max(Pe.width,Pe.height));else{const nn=Pe._rank-Xe;if(nn===0)De[nn]||(De[nn]={nodes:[],totalWidth:0,maxSize:-1/0}),De[nn].nodes.push(ye),De[nn].totalWidth+=bt*2+Pe[ce],De[nn].maxSize<Math.max(Pe.width,Pe.height)&&(De[nn].maxSize=Math.max(Pe.width,Pe.height));else{const yn=Math.abs(nn);De[yn]||(De[yn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),De[yn].totalWidth+=bt*2+Pe[ce],De[yn].maxSize<Math.max(Pe.width,Pe.height)&&(De[yn].maxSize=Math.max(Pe.width,Pe.height)),nn<0?De[yn].left.push(ye):De[yn].right.push(ye)}}const Vt=Pe[Re]-Pe[ce]/2-bt,xt=Pe[Re]+Pe[ce]/2+bt;Vt<he&&(he=Vt),xt>Oe&&(Oe=xt)});let Ae=ge||50;const Ve={},dt=(Oe-he)/.9,mt=[(he+Oe-dt)*.5,(he+Oe+dt)*.5],pt=(ye,Pe,bt=-1/0,Vt=[0,1])=>{let xt=bt;return ye.forEach(nn=>{const yn=N.node(nn);Ve[nn]=Pe;const{x:xn,y:pn}=Fe(yn[Re],mt,dt,Pe,Vt);if(!l.nodeMap[nn])return;l.nodeMap[nn].x=xn+H[0],l.nodeMap[nn].y=pn+H[1],l.nodeMap[nn]._order=yn._order;const lt=te(l.nodeMap[nn]);xt<lt&&(xt=lt)}),xt};let Jt=!0;const Ce=0;De.forEach(ye=>{var Pe,bt,Vt,xt,nn,yn,xn;if(!(!((Pe=ye==null?void 0:ye.nodes)===null||Pe===void 0)&&Pe.length)&&!(!((bt=ye==null?void 0:ye.left)===null||bt===void 0)&&bt.length)&&!(!((Vt=ye==null?void 0:ye.right)===null||Vt===void 0)&&Vt.length))return;if(Jt&&ye.nodes.length===1){const lt=ye.nodes[0];if(!l.nodeMap[lt])return;l.nodeMap[lt].x=H[0],l.nodeMap[lt].y=H[1],Ve[ye.nodes[0]]=0,Ae=te(l.nodeMap[lt]),Jt=!1;return}Ae=Math.max(Ae,ye.totalWidth/(2*Math.PI));let pn=-1/0;if(Xe===0||!((xt=ye.nodes)===null||xt===void 0)&&xt.length)pn=pt(ye.nodes,Ae,pn,[0,1]);else{const lt=((nn=ye.left)===null||nn===void 0?void 0:nn.length)/(((yn=ye.left)===null||yn===void 0?void 0:yn.length)+((xn=ye.right)===null||xn===void 0?void 0:xn.length));pn=pt(ye.left,Ae,pn,[0,lt]),pn=pt(ye.right,Ae,pn,[lt+.05,1])}Ae+=pn,Jt=!1,Ce-ye.maxSize}),N.edges().forEach(ye=>{var Pe,bt,Vt;const xt=N.edge(ye),nn=j.findIndex(yn=>{const xn=vh(yn,"source"),pn=vh(yn,"target");return xn===ye.v&&pn===ye.w});if(!(nn<=-1)&&l.edgeLabelSpace&&l.controlPoints&&j[nn].type!=="loop"){const yn=Re==="x"?"y":"x",xn=(Pe=xt==null?void 0:xt.points)===null||Pe===void 0?void 0:Pe.slice(1,xt.points.length-1),pn=[],lt=(bt=N.node(ye.v))===null||bt===void 0?void 0:bt[yn],gn=lt-((Vt=N.node(ye.w))===null||Vt===void 0?void 0:Vt[yn]),$e=Ve[ye.v],vn=$e-Ve[ye.w];xn==null||xn.forEach(Yn=>{const Q=(Yn[yn]-lt)/gn*vn+$e,qn=Fe(Yn[Re],mt,dt,Q);pn.push({x:qn.x+H[0],y:qn.y+H[1]})}),j[nn].controlPoints=pn}})}else{const X=new Set,Fe=h==="BT"||h==="RL"?(Re,ce)=>ce-Re:(Re,ce)=>Re-ce;N.nodes().forEach(Re=>{const ce=N.node(Re);if(!ce)return;let he=this.nodeMap[Re];he||(he=g==null?void 0:g.find(Oe=>Oe.id===Re)),he&&(he.x=ce.x+H[0],he.y=ce.y+H[1],he._order=ce._order,X.add(ne?he.x:he.y))});const Me=Array.from(X).sort(Fe),Xe=ne?(Re,ce)=>Re.x!==ce.x:(Re,ce)=>Re.y!==ce.y,De=ne?(Re,ce,he)=>{const Oe=Math.max(ce.y,he.y),Ae=Math.min(ce.y,he.y);return Re.filter(Ve=>Ve.y<=Oe&&Ve.y>=Ae)}:(Re,ce,he)=>{const Oe=Math.max(ce.x,he.x),Ae=Math.min(ce.x,he.x);return Re.filter(Ve=>Ve.x<=Oe&&Ve.x>=Ae)};N.edges().forEach(Re=>{var ce;const he=N.edge(Re),Oe=j.findIndex(Ae=>{const Ve=vh(Ae,"source"),dt=vh(Ae,"target");return Ve===Re.v&&dt===Re.w});if(!(Oe<=-1)&&l.edgeLabelSpace&&l.controlPoints&&j[Oe].type!=="loop"){(ce=he==null?void 0:he.points)===null||ce===void 0||ce.forEach(dt=>{dt.x+=H[0],dt.y+=H[1]});const Ae=l.nodeMap[Re.v],Ve=l.nodeMap[Re.w];j[Oe].controlPoints=lY(he==null?void 0:he.points,Ae,Ve,Me,ne,Xe,De)}})}return l.onLayoutEnd&&l.onLayoutEnd(),{nodes:c,edges:j}}getRadialPos(t,n,a,r,l=[0,1]){let c=(t-n[0])/a;c=c*(l[1]-l[0])+l[0];const y=c*2*Math.PI;return{x:Math.cos(y)*r,y:Math.sin(y)*r}}getType(){return"dagre"}}const lY=(e,t,n,a,r,l,c)=>{let y=(e==null?void 0:e.slice(1,e.length-1))||[];if(t&&n){let{x:h,y:g}=t,{x:b,y:E}=n;if(r&&(h=t.y,g=t.x,b=n.y,E=n.x),E!==g&&h!==b){const x=a.indexOf(g),T=a[x+1];if(T){const M=y[0],D=r?{x:(g+T)/2,y:(M==null?void 0:M.y)||b}:{x:(M==null?void 0:M.x)||b,y:(g+T)/2};(!M||l(M,D))&&y.unshift(D)}const j=a.indexOf(E),N=Math.abs(j-x);if(N===1)y=c(y,t,n),y.length||y.push(r?{x:(g+E)/2,y:h}:{x:h,y:(g+E)/2});else if(N>1){const M=a[j-1];if(M){const D=y[y.length-1],k=r?{x:(E+M)/2,y:(D==null?void 0:D.y)||b}:{x:(D==null?void 0:D.x)||h,y:(E+M)/2};(!D||l(D,k))&&y.push(k)}}}}return y};var HS,XS,YS,qS;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(HS||(HS={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(XS||(XS={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(YS||(YS={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(qS||(qS={}));var cm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function q1(e,t){return e(t={exports:{}},t.exports),t.exports}var cY=function(){this.__data__=[],this.size=0},Qh=function(e,t){return e===t||e!=e&&t!=t},fg=function(e,t){for(var n=e.length;n--;)if(Qh(e[n][0],t))return n;return-1},fY=Array.prototype.splice,dY=function(e){var t=this.__data__,n=fg(t,e);return!(n<0)&&(n==t.length-1?t.pop():fY.call(t,n,1),--this.size,!0)},pY=function(e){var t=this.__data__,n=fg(t,e);return n<0?void 0:t[n][1]},hY=function(e){return fg(this.__data__,e)>-1},vY=function(e,t){var n=this.__data__,a=fg(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this};function mh(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}mh.prototype.clear=cY,mh.prototype.delete=dY,mh.prototype.get=pY,mh.prototype.has=hY,mh.prototype.set=vY;var dg=mh,yY=function(){this.__data__=new dg,this.size=0},mY=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},gY=function(e){return this.__data__.get(e)},_Y=function(e){return this.__data__.has(e)},W2=typeof cm=="object"&&cm&&cm.Object===Object&&cm,bY=typeof self=="object"&&self&&self.Object===Object&&self,el=W2||bY||Function("return this")(),ws=el.Symbol,z2=Object.prototype,wY=z2.hasOwnProperty,EY=z2.toString,Sv=ws?ws.toStringTag:void 0,OY=function(e){var t=wY.call(e,Sv),n=e[Sv];try{e[Sv]=void 0;var a=!0}catch{}var r=EY.call(e);return a&&(t?e[Sv]=n:delete e[Sv]),r},xY=Object.prototype.toString,SY=function(e){return xY.call(e)},KS=ws?ws.toStringTag:void 0,cd=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":KS&&KS in Object(e)?OY(e):SY(e)},hu=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},ZS,ay=function(e){if(!hu(e))return!1;var t=cd(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},E0=el["__core-js_shared__"],JS=(ZS=/[^.]+$/.exec(E0&&E0.keys&&E0.keys.IE_PROTO||""))?"Symbol(src)_1."+ZS:"",AY=function(e){return!!JS&&JS in e},TY=Function.prototype.toString,mp=function(e){if(e!=null){try{return TY.call(e)}catch{}try{return e+""}catch{}}return""},MY=/^\[object .+?Constructor\]$/,NY=Function.prototype,PY=Object.prototype,kY=NY.toString,RY=PY.hasOwnProperty,jY=RegExp("^"+kY.call(RY).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),CY=function(e){return!(!hu(e)||AY(e))&&(ay(e)?jY:MY).test(mp(e))},DY=function(e,t){return e==null?void 0:e[t]},gp=function(e,t){var n=DY(e,t);return CY(n)?n:void 0},Wv=gp(el,"Map"),zv=gp(Object,"create"),IY=function(){this.__data__=zv?zv(null):{},this.size=0},LY=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},FY=Object.prototype.hasOwnProperty,$Y=function(e){var t=this.__data__;if(zv){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return FY.call(t,e)?t[e]:void 0},BY=Object.prototype.hasOwnProperty,UY=function(e){var t=this.__data__;return zv?t[e]!==void 0:BY.call(t,e)},GY=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=zv&&t===void 0?"__lodash_hash_undefined__":t,this};function gh(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}gh.prototype.clear=IY,gh.prototype.delete=LY,gh.prototype.get=$Y,gh.prototype.has=UY,gh.prototype.set=GY;var QS=gh,WY=function(){this.size=0,this.__data__={hash:new QS,map:new(Wv||dg),string:new QS}},zY=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},pg=function(e,t){var n=e.__data__;return zY(t)?n[typeof t=="string"?"string":"hash"]:n.map},VY=function(e){var t=pg(this,e).delete(e);return this.size-=t?1:0,t},HY=function(e){return pg(this,e).get(e)},XY=function(e){return pg(this,e).has(e)},YY=function(e,t){var n=pg(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this};function _h(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}_h.prototype.clear=WY,_h.prototype.delete=VY,_h.prototype.get=HY,_h.prototype.has=XY,_h.prototype.set=YY;var hg=_h,qY=function(e,t){var n=this.__data__;if(n instanceof dg){var a=n.__data__;if(!Wv||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new hg(a)}return n.set(e,t),this.size=n.size,this};function bh(e){var t=this.__data__=new dg(e);this.size=t.size}bh.prototype.clear=yY,bh.prototype.delete=mY,bh.prototype.get=gY,bh.prototype.has=_Y,bh.prototype.set=qY;var Nh=bh,K1=function(e,t){for(var n=-1,a=e==null?0:e.length;++n<a&&t(e[n],n,e)!==!1;);return e},Bm=function(){try{var e=gp(Object,"defineProperty");return e({},"",{}),e}catch{}}(),vg=function(e,t,n){t=="__proto__"&&Bm?Bm(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},KY=Object.prototype.hasOwnProperty,yg=function(e,t,n){var a=e[t];KY.call(e,t)&&Qh(a,n)&&(n!==void 0||t in e)||vg(e,t,n)},uy=function(e,t,n,a){var r=!n;n||(n={});for(var l=-1,c=t.length;++l<c;){var y=t[l],h=a?a(n[y],e[y],y,n,e):void 0;h===void 0&&(h=e[y]),r?vg(n,y,h):yg(n,y,h)}return n},ZY=function(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a},Js=function(e){return e!=null&&typeof e=="object"},eA=function(e){return Js(e)&&cd(e)=="[object Arguments]"},V2=Object.prototype,JY=V2.hasOwnProperty,QY=V2.propertyIsEnumerable,Fh=eA(function(){return arguments}())?eA:function(e){return Js(e)&&JY.call(e,"callee")&&!QY.call(e,"callee")},hi=Array.isArray,eq=function(){return!1},sp=q1(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n?el.Buffer:void 0,l=(r?r.isBuffer:void 0)||eq;e.exports=l}),tq=/^(?:0|[1-9]\d*)$/,mg=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&tq.test(e))&&e>-1&&e%1==0&&e<t},Z1=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},Yo={};Yo["[object Float32Array]"]=Yo["[object Float64Array]"]=Yo["[object Int8Array]"]=Yo["[object Int16Array]"]=Yo["[object Int32Array]"]=Yo["[object Uint8Array]"]=Yo["[object Uint8ClampedArray]"]=Yo["[object Uint16Array]"]=Yo["[object Uint32Array]"]=!0,Yo["[object Arguments]"]=Yo["[object Array]"]=Yo["[object ArrayBuffer]"]=Yo["[object Boolean]"]=Yo["[object DataView]"]=Yo["[object Date]"]=Yo["[object Error]"]=Yo["[object Function]"]=Yo["[object Map]"]=Yo["[object Number]"]=Yo["[object Object]"]=Yo["[object RegExp]"]=Yo["[object Set]"]=Yo["[object String]"]=Yo["[object WeakMap]"]=!1;var nq=function(e){return Js(e)&&Z1(e.length)&&!!Yo[cd(e)]},gg=function(e){return function(t){return e(t)}},$h=q1(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n&&W2.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||r&&r.binding&&r.binding("util")}catch{}}();e.exports=l}),tA=$h&&$h.isTypedArray,sy=tA?gg(tA):nq,rq=Object.prototype.hasOwnProperty,H2=function(e,t){var n=hi(e),a=!n&&Fh(e),r=!n&&!a&&sp(e),l=!n&&!a&&!r&&sy(e),c=n||a||r||l,y=c?ZY(e.length,String):[],h=y.length;for(var g in e)!t&&!rq.call(e,g)||c&&(g=="length"||r&&(g=="offset"||g=="parent")||l&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||mg(g,h))||y.push(g);return y},oq=Object.prototype,_g=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||oq)},X2=function(e,t){return function(n){return e(t(n))}},iq=X2(Object.keys,Object),aq=Object.prototype.hasOwnProperty,J1=function(e){if(!_g(e))return iq(e);var t=[];for(var n in Object(e))aq.call(e,n)&&n!="constructor"&&t.push(n);return t},rf=function(e){return e!=null&&Z1(e.length)&&!ay(e)},fd=function(e){return rf(e)?H2(e):J1(e)},uq=function(e,t){return e&&uy(t,fd(t),e)},sq=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},lq=Object.prototype.hasOwnProperty,cq=function(e){if(!hu(e))return sq(e);var t=_g(e),n=[];for(var a in e)(a!="constructor"||!t&&lq.call(e,a))&&n.push(a);return n},_p=function(e){return rf(e)?H2(e,!0):cq(e)},fq=function(e,t){return e&&uy(t,_p(t),e)},Y2=q1(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n?el.Buffer:void 0,l=r?r.allocUnsafe:void 0;e.exports=function(c,y){if(y)return c.slice();var h=c.length,g=l?l(h):new c.constructor(h);return c.copy(g),g}}),q2=function(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t},K2=function(e,t){for(var n=-1,a=e==null?0:e.length,r=0,l=[];++n<a;){var c=e[n];t(c,n,e)&&(l[r++]=c)}return l},Z2=function(){return[]},dq=Object.prototype.propertyIsEnumerable,nA=Object.getOwnPropertySymbols,Q1=nA?function(e){return e==null?[]:(e=Object(e),K2(nA(e),function(t){return dq.call(e,t)}))}:Z2,pq=function(e,t){return uy(e,Q1(e),t)},ew=function(e,t){for(var n=-1,a=t.length,r=e.length;++n<a;)e[r+n]=t[n];return e},bg=X2(Object.getPrototypeOf,Object),J2=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)ew(t,Q1(e)),e=bg(e);return t}:Z2,hq=function(e,t){return uy(e,J2(e),t)},Q2=function(e,t,n){var a=t(e);return hi(e)?a:ew(a,n(e))},t1=function(e){return Q2(e,fd,Q1)},vq=function(e){return Q2(e,_p,J2)},n1=gp(el,"DataView"),r1=gp(el,"Promise"),Ph=gp(el,"Set"),o1=gp(el,"WeakMap"),yq=mp(n1),mq=mp(Wv),gq=mp(r1),_q=mp(Ph),bq=mp(o1),op=cd;(n1&&op(new n1(new ArrayBuffer(1)))!="[object DataView]"||Wv&&op(new Wv)!="[object Map]"||r1&&op(r1.resolve())!="[object Promise]"||Ph&&op(new Ph)!="[object Set]"||o1&&op(new o1)!="[object WeakMap]")&&(op=function(e){var t=cd(e),n=t=="[object Object]"?e.constructor:void 0,a=n?mp(n):"";if(a)switch(a){case yq:return"[object DataView]";case mq:return"[object Map]";case gq:return"[object Promise]";case _q:return"[object Set]";case bq:return"[object WeakMap]"}return t});var lp=op,wq=Object.prototype.hasOwnProperty,Eq=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&wq.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Um=el.Uint8Array,tw=function(e){var t=new e.constructor(e.byteLength);return new Um(t).set(new Um(e)),t},Oq=function(e,t){var n=t?tw(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},xq=/\w*$/,Sq=function(e){var t=new e.constructor(e.source,xq.exec(e));return t.lastIndex=e.lastIndex,t},rA=ws?ws.prototype:void 0,oA=rA?rA.valueOf:void 0,Aq=function(e){return oA?Object(oA.call(e)):{}},eN=function(e,t){var n=t?tw(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},Tq=function(e,t,n){var a=e.constructor;switch(t){case"[object ArrayBuffer]":return tw(e);case"[object Boolean]":case"[object Date]":return new a(+e);case"[object DataView]":return Oq(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return eN(e,n);case"[object Map]":return new a;case"[object Number]":case"[object String]":return new a(e);case"[object RegExp]":return Sq(e);case"[object Set]":return new a;case"[object Symbol]":return Aq(e)}},iA=Object.create,tN=function(){function e(){}return function(t){if(!hu(t))return{};if(iA)return iA(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),nN=function(e){return typeof e.constructor!="function"||_g(e)?{}:tN(bg(e))},Mq=function(e){return Js(e)&&lp(e)=="[object Map]"},aA=$h&&$h.isMap,Nq=aA?gg(aA):Mq,Pq=function(e){return Js(e)&&lp(e)=="[object Set]"},uA=$h&&$h.isSet,kq=uA?gg(uA):Pq,$o={};$o["[object Arguments]"]=$o["[object Array]"]=$o["[object ArrayBuffer]"]=$o["[object DataView]"]=$o["[object Boolean]"]=$o["[object Date]"]=$o["[object Float32Array]"]=$o["[object Float64Array]"]=$o["[object Int8Array]"]=$o["[object Int16Array]"]=$o["[object Int32Array]"]=$o["[object Map]"]=$o["[object Number]"]=$o["[object Object]"]=$o["[object RegExp]"]=$o["[object Set]"]=$o["[object String]"]=$o["[object Symbol]"]=$o["[object Uint8Array]"]=$o["[object Uint8ClampedArray]"]=$o["[object Uint16Array]"]=$o["[object Uint32Array]"]=!0,$o["[object Error]"]=$o["[object Function]"]=$o["[object WeakMap]"]=!1;var rN=function e(t,n,a,r,l,c){var y,h=1&n,g=2&n,b=4&n;if(a&&(y=l?a(t,r,l,c):a(t)),y!==void 0)return y;if(!hu(t))return t;var E=hi(t);if(E){if(y=Eq(t),!h)return q2(t,y)}else{var x=lp(t),T=x=="[object Function]"||x=="[object GeneratorFunction]";if(sp(t))return Y2(t,h);if(x=="[object Object]"||x=="[object Arguments]"||T&&!l){if(y=g||T?{}:nN(t),!h)return g?hq(t,fq(y,t)):pq(t,uq(y,t))}else{if(!$o[x])return l?t:{};y=Tq(t,x,h)}}c||(c=new Nh);var j=c.get(t);if(j)return j;c.set(t,y),kq(t)?t.forEach(function(M){y.add(e(M,n,a,M,t,c))}):Nq(t)&&t.forEach(function(M,D){y.set(D,e(M,n,a,D,t,c))});var N=E?void 0:(b?g?vq:t1:g?_p:fd)(t);return K1(N||t,function(M,D){N&&(M=t[D=M]),yg(y,D,e(M,n,a,D,t,c))}),y},Rq=function(e){return rN(e,4)},nw=function(e){return function(){return e}},rw=function(e){return function(t,n,a){for(var r=-1,l=Object(t),c=a(t),y=c.length;y--;){var h=c[e?y:++r];if(n(l[h],h,l)===!1)break}return t}}(),ow=function(e,t){return e&&rw(e,t,fd)},wg=function(e,t){return function(n,a){if(n==null)return n;if(!rf(n))return e(n,a);for(var r=n.length,l=t?r:-1,c=Object(n);(t?l--:++l<r)&&a(c[l],l,c)!==!1;);return n}}(ow),bp=function(e){return e},oN=function(e){return typeof e=="function"?e:bp},iN=function(e,t){return(hi(e)?K1:wg)(e,oN(t))},aN=iN,jq=function(e,t){var n=[];return wg(e,function(a,r,l){t(a,r,l)&&n.push(a)}),n},Cq=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Dq=function(e){return this.__data__.has(e)};function _m(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new hg;++t<n;)this.add(e[t])}_m.prototype.add=_m.prototype.push=Cq,_m.prototype.has=Dq;var uN=_m,Iq=function(e,t){for(var n=-1,a=e==null?0:e.length;++n<a;)if(t(e[n],n,e))return!0;return!1},sN=function(e,t){return e.has(t)},lN=function(e,t,n,a,r,l){var c=1&n,y=e.length,h=t.length;if(y!=h&&!(c&&h>y))return!1;var g=l.get(e),b=l.get(t);if(g&&b)return g==t&&b==e;var E=-1,x=!0,T=2&n?new uN:void 0;for(l.set(e,t),l.set(t,e);++E<y;){var j=e[E],N=t[E];if(a)var M=c?a(N,j,E,t,e,l):a(j,N,E,e,t,l);if(M!==void 0){if(M)continue;x=!1;break}if(T){if(!Iq(t,function(D,k){if(!sN(T,k)&&(j===D||r(j,D,n,a,l)))return T.push(k)})){x=!1;break}}else if(j!==N&&!r(j,N,n,a,l)){x=!1;break}}return l.delete(e),l.delete(t),x},Lq=function(e){var t=-1,n=Array(e.size);return e.forEach(function(a,r){n[++t]=[r,a]}),n},iw=function(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=a}),n},sA=ws?ws.prototype:void 0,O0=sA?sA.valueOf:void 0,Fq=function(e,t,n,a,r,l,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!l(new Um(e),new Um(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Qh(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var y=Lq;case"[object Set]":var h=1&a;if(y||(y=iw),e.size!=t.size&&!h)return!1;var g=c.get(e);if(g)return g==t;a|=2,c.set(e,t);var b=lN(y(e),y(t),a,r,l,c);return c.delete(e),b;case"[object Symbol]":if(O0)return O0.call(e)==O0.call(t)}return!1},$q=Object.prototype.hasOwnProperty,Bq=function(e,t,n,a,r,l){var c=1&n,y=t1(e),h=y.length;if(h!=t1(t).length&&!c)return!1;for(var g=h;g--;){var b=y[g];if(!(c?b in t:$q.call(t,b)))return!1}var E=l.get(e),x=l.get(t);if(E&&x)return E==t&&x==e;var T=!0;l.set(e,t),l.set(t,e);for(var j=c;++g<h;){var N=e[b=y[g]],M=t[b];if(a)var D=c?a(M,N,b,t,e,l):a(N,M,b,e,t,l);if(!(D===void 0?N===M||r(N,M,n,a,l):D)){T=!1;break}j||(j=b=="constructor")}if(T&&!j){var k=e.constructor,F=t.constructor;k==F||!("constructor"in e)||!("constructor"in t)||typeof k=="function"&&k instanceof k&&typeof F=="function"&&F instanceof F||(T=!1)}return l.delete(e),l.delete(t),T},lA=Object.prototype.hasOwnProperty,Uq=function(e,t,n,a,r,l){var c=hi(e),y=hi(t),h=c?"[object Array]":lp(e),g=y?"[object Array]":lp(t),b=(h=h=="[object Arguments]"?"[object Object]":h)=="[object Object]",E=(g=g=="[object Arguments]"?"[object Object]":g)=="[object Object]",x=h==g;if(x&&sp(e)){if(!sp(t))return!1;c=!0,b=!1}if(x&&!b)return l||(l=new Nh),c||sy(e)?lN(e,t,n,a,r,l):Fq(e,t,h,n,a,r,l);if(!(1&n)){var T=b&&lA.call(e,"__wrapped__"),j=E&&lA.call(t,"__wrapped__");if(T||j){var N=T?e.value():e,M=j?t.value():t;return l||(l=new Nh),r(N,M,n,a,l)}}return!!x&&(l||(l=new Nh),Bq(e,t,n,a,r,l))},cN=function e(t,n,a,r,l){return t===n||(t==null||n==null||!Js(t)&&!Js(n)?t!=t&&n!=n:Uq(t,n,a,r,e,l))},Gq=function(e,t,n,a){var r=n.length,l=r,c=!a;if(e==null)return!l;for(e=Object(e);r--;){var y=n[r];if(c&&y[2]?y[1]!==e[y[0]]:!(y[0]in e))return!1}for(;++r<l;){var h=(y=n[r])[0],g=e[h],b=y[1];if(c&&y[2]){if(g===void 0&&!(h in e))return!1}else{var E=new Nh;if(a)var x=a(g,b,h,e,t,E);if(!(x===void 0?cN(b,g,3,a,E):x))return!1}}return!0},fN=function(e){return e==e&&!hu(e)},Wq=function(e){for(var t=fd(e),n=t.length;n--;){var a=t[n],r=e[a];t[n]=[a,r,fN(r)]}return t},dN=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},zq=function(e){var t=Wq(e);return t.length==1&&t[0][2]?dN(t[0][0],t[0][1]):function(n){return n===e||Gq(n,e,t)}},cp=function(e){return typeof e=="symbol"||Js(e)&&cd(e)=="[object Symbol]"},Vq=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hq=/^\w*$/,aw=function(e,t){if(hi(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!cp(e))||Hq.test(e)||!Vq.test(e)||t!=null&&e in Object(t)};function uw(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var a=arguments,r=t?t.apply(this,a):a[0],l=n.cache;if(l.has(r))return l.get(r);var c=e.apply(this,a);return n.cache=l.set(r,c)||l,c};return n.cache=new(uw.Cache||hg),n}uw.Cache=hg;var Xq=uw,Yq=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qq=/\\(\\)?/g,Kq=function(e){var t=Xq(e,function(a){return n.size===500&&n.clear(),a}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Yq,function(n,a,r,l){t.push(r?l.replace(qq,"$1"):a||n)}),t}),kh=function(e,t){for(var n=-1,a=e==null?0:e.length,r=Array(a);++n<a;)r[n]=t(e[n],n,e);return r},cA=ws?ws.prototype:void 0,fA=cA?cA.toString:void 0,Zq=function e(t){if(typeof t=="string")return t;if(hi(t))return kh(t,e)+"";if(cp(t))return fA?fA.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},pN=function(e){return e==null?"":Zq(e)},Eg=function(e,t){return hi(e)?e:aw(e,t)?[e]:Kq(pN(e))},ly=function(e){if(typeof e=="string"||cp(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},Og=function(e,t){for(var n=0,a=(t=Eg(t,e)).length;e!=null&&n<a;)e=e[ly(t[n++])];return n&&n==a?e:void 0},Jq=function(e,t,n){var a=e==null?void 0:Og(e,t);return a===void 0?n:a},Qq=function(e,t){return e!=null&&t in Object(e)},hN=function(e,t,n){for(var a=-1,r=(t=Eg(t,e)).length,l=!1;++a<r;){var c=ly(t[a]);if(!(l=e!=null&&n(e,c)))break;e=e[c]}return l||++a!=r?l:!!(r=e==null?0:e.length)&&Z1(r)&&mg(c,r)&&(hi(e)||Fh(e))},vN=function(e,t){return e!=null&&hN(e,t,Qq)},eK=function(e,t){return aw(e)&&fN(t)?dN(ly(e),t):function(n){var a=Jq(n,e);return a===void 0&&a===t?vN(n,e):cN(t,a,3)}},yN=function(e){return function(t){return t==null?void 0:t[e]}},tK=function(e){return function(t){return Og(t,e)}},nK=function(e){return aw(e)?yN(ly(e)):tK(e)},of=function(e){return typeof e=="function"?e:e==null?bp:typeof e=="object"?hi(e)?eK(e[0],e[1]):zq(e):nK(e)},mN=function(e,t){return(hi(e)?K2:jq)(e,of(t))},rK=Object.prototype.hasOwnProperty,oK=function(e,t){return e!=null&&rK.call(e,t)},gN=function(e,t){return e!=null&&hN(e,t,oK)},iK=Object.prototype.hasOwnProperty,aK=function(e){if(e==null)return!0;if(rf(e)&&(hi(e)||typeof e=="string"||typeof e.splice=="function"||sp(e)||sy(e)||Fh(e)))return!e.length;var t=lp(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(_g(e))return!J1(e).length;for(var n in e)if(iK.call(e,n))return!1;return!0},_N=function(e){return e===void 0},bN=function(e,t){var n=-1,a=rf(e)?Array(e.length):[];return wg(e,function(r,l,c){a[++n]=t(r,l,c)}),a},wN=function(e,t){return(hi(e)?kh:bN)(e,of(t))},uK=function(e,t,n,a){var r=-1,l=e==null?0:e.length;for(a&&l&&(n=e[++r]);++r<l;)n=t(n,e[r],r,e);return n},sK=function(e,t,n,a,r){return r(e,function(l,c,y){n=a?(a=!1,l):t(n,l,c,y)}),n},EN=function(e,t,n){var a=hi(e)?uK:sK,r=arguments.length<3;return a(e,of(t),n,r,wg)},lK=function(e){return typeof e=="string"||!hi(e)&&Js(e)&&cd(e)=="[object String]"},cK=yN("length"),fK=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),dK=function(e){return fK.test(e)},pK="[\\ud800-\\udfff]",i1="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a1="\\ud83c[\\udffb-\\udfff]",ON="[^\\ud800-\\udfff]",xN="(?:\\ud83c[\\udde6-\\uddff]){2}",SN="[\\ud800-\\udbff][\\udc00-\\udfff]",dA="(?:"+i1+"|"+a1+")?",hK="[\\ufe0e\\ufe0f]?"+dA+("(?:\\u200d(?:"+[ON,xN,SN].join("|")+")[\\ufe0e\\ufe0f]?"+dA+")*"),vK="(?:"+[ON+i1+"?",i1,xN,SN,pK].join("|")+")",pA=RegExp(a1+"(?="+a1+")|"+vK+hK,"g"),yK=function(e){for(var t=pA.lastIndex=0;pA.test(e);)++t;return t},mK=function(e){return dK(e)?yK(e):cK(e)},gK=function(e){if(e==null)return 0;if(rf(e))return lK(e)?mK(e):e.length;var t=lp(e);return t=="[object Map]"||t=="[object Set]"?e.size:J1(e).length},_K=function(e,t,n){var a=hi(e),r=a||sp(e)||sy(e);if(t=of(t),n==null){var l=e&&e.constructor;n=r?a?new l:[]:hu(e)&&ay(l)?tN(bg(e)):{}}return(r?K1:ow)(e,function(c,y,h){return t(n,c,y,h)}),n},hA=ws?ws.isConcatSpreadable:void 0,bK=function(e){return hi(e)||Fh(e)||!!(hA&&e&&e[hA])},sw=function e(t,n,a,r,l){var c=-1,y=t.length;for(a||(a=bK),l||(l=[]);++c<y;){var h=t[c];n>0&&a(h)?n>1?e(h,n-1,a,r,l):ew(l,h):r||(l[l.length]=h)}return l},wK=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},vA=Math.max,AN=function(e,t,n){return t=vA(t===void 0?e.length-1:t,0),function(){for(var a=arguments,r=-1,l=vA(a.length-t,0),c=Array(l);++r<l;)c[r]=a[t+r];r=-1;for(var y=Array(t+1);++r<t;)y[r]=a[r];return y[t]=n(c),wK(e,this,y)}},EK=Bm?function(e,t){return Bm(e,"toString",{configurable:!0,enumerable:!1,value:nw(t),writable:!0})}:bp,OK=Date.now,TN=function(e){var t=0,n=0;return function(){var a=OK(),r=16-(a-n);if(n=a,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(EK),xg=function(e,t){return TN(AN(e,t,bp),e+"")},MN=function(e,t,n,a){for(var r=e.length,l=n+(a?1:-1);a?l--:++l<r;)if(t(e[l],l,e))return l;return-1},xK=function(e){return e!=e},SK=function(e,t,n){for(var a=n-1,r=e.length;++a<r;)if(e[a]===t)return a;return-1},AK=function(e,t,n){return t==t?SK(e,t,n):MN(e,xK,n)},TK=function(e,t){return!!(e!=null&&e.length)&&AK(e,t,0)>-1},MK=function(e,t,n){for(var a=-1,r=e==null?0:e.length;++a<r;)if(n(t,e[a]))return!0;return!1},NK=function(){},PK=Ph&&1/iw(new Ph([,-0]))[1]==1/0?function(e){return new Ph(e)}:NK,kK=function(e,t,n){var a=-1,r=TK,l=e.length,c=!0,y=[],h=y;if(n)c=!1,r=MK;else if(l>=200){var g=t?null:PK(e);if(g)return iw(g);c=!1,r=sN,h=new uN}else h=t?[]:y;e:for(;++a<l;){var b=e[a],E=t?t(b):b;if(b=n||b!==0?b:0,c&&E==E){for(var x=h.length;x--;)if(h[x]===E)continue e;t&&h.push(E),y.push(b)}else r(h,E,n)||(h!==y&&h.push(E),y.push(b))}return y},NN=function(e){return Js(e)&&rf(e)},RK=xg(function(e){return kK(sw(e,1,NN,!0))}),jK=function(e,t){return kh(t,function(n){return e[n]})},Gm,PN=function(e){return e==null?[]:jK(e,fd(e))};try{Gm={clone:Rq,constant:nw,each:aN,filter:mN,has:gN,isArray:hi,isEmpty:aK,isFunction:ay,isUndefined:_N,keys:fd,map:wN,reduce:EN,size:gK,transform:_K,union:RK,values:PN}}catch{}Gm||(Gm=window._);var wn=Gm,lw=Ir;function Ir(e){this._isDirected=!wn.has(e,"directed")||e.directed,this._isMultigraph=!!wn.has(e,"multigraph")&&e.multigraph,this._isCompound=!!wn.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=wn.constant(void 0),this._defaultEdgeLabelFn=wn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function yA(e,t){e[t]?e[t]++:e[t]=1}function mA(e,t){--e[t]||delete e[t]}function kv(e,t,n,a){var r=""+t,l=""+n;if(!e&&r>l){var c=r;r=l,l=c}return r+""+l+""+(wn.isUndefined(a)?"\0":a)}function CK(e,t,n,a){var r=""+t,l=""+n;if(!e&&r>l){var c=r;r=l,l=c}var y={v:r,w:l};return a&&(y.name=a),y}function x0(e,t){return kv(e,t.v,t.w,t.name)}Ir.prototype._nodeCount=0,Ir.prototype._edgeCount=0,Ir.prototype.isDirected=function(){return this._isDirected},Ir.prototype.isMultigraph=function(){return this._isMultigraph},Ir.prototype.isCompound=function(){return this._isCompound},Ir.prototype.setGraph=function(e){return this._label=e,this},Ir.prototype.graph=function(){return this._label},Ir.prototype.setDefaultNodeLabel=function(e){return wn.isFunction(e)||(e=wn.constant(e)),this._defaultNodeLabelFn=e,this},Ir.prototype.nodeCount=function(){return this._nodeCount},Ir.prototype.nodes=function(){return wn.keys(this._nodes)},Ir.prototype.sources=function(){var e=this;return wn.filter(this.nodes(),function(t){return wn.isEmpty(e._in[t])})},Ir.prototype.sinks=function(){var e=this;return wn.filter(this.nodes(),function(t){return wn.isEmpty(e._out[t])})},Ir.prototype.setNodes=function(e,t){var n=arguments,a=this;return wn.each(e,function(r){n.length>1?a.setNode(r,t):a.setNode(r)}),this},Ir.prototype.setNode=function(e,t){return wn.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Ir.prototype.node=function(e){return this._nodes[e]},Ir.prototype.hasNode=function(e){return wn.has(this._nodes,e)},Ir.prototype.removeNode=function(e){var t=this;if(wn.has(this._nodes,e)){var n=function(a){t.removeEdge(t._edgeObjs[a])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],wn.each(this.children(e),function(a){t.setParent(a)}),delete this._children[e]),wn.each(wn.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],wn.each(wn.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Ir.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(wn.isUndefined(t))t="\0";else{for(var n=t+="";!wn.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},Ir.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Ir.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!=="\0")return t}},Ir.prototype.children=function(e){if(wn.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return wn.keys(t)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Ir.prototype.predecessors=function(e){var t=this._preds[e];if(t)return wn.keys(t)},Ir.prototype.successors=function(e){var t=this._sucs[e];if(t)return wn.keys(t)},Ir.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return wn.union(t,this.successors(e))},Ir.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Ir.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;wn.each(this._nodes,function(l,c){e(c)&&t.setNode(c,l)}),wn.each(this._edgeObjs,function(l){t.hasNode(l.v)&&t.hasNode(l.w)&&t.setEdge(l,n.edge(l))});var a={};function r(l){var c=n.parent(l);return c===void 0||t.hasNode(c)?(a[l]=c,c):c in a?a[c]:r(c)}return this._isCompound&&wn.each(t.nodes(),function(l){t.setParent(l,r(l))}),t},Ir.prototype.setDefaultEdgeLabel=function(e){return wn.isFunction(e)||(e=wn.constant(e)),this._defaultEdgeLabelFn=e,this},Ir.prototype.edgeCount=function(){return this._edgeCount},Ir.prototype.edges=function(){return wn.values(this._edgeObjs)},Ir.prototype.setPath=function(e,t){var n=this,a=arguments;return wn.reduce(e,function(r,l){return a.length>1?n.setEdge(r,l,t):n.setEdge(r,l),l}),this},Ir.prototype.setEdge=function(){var e,t,n,a,r=!1,l=arguments[0];typeof l=="object"&&l!==null&&"v"in l?(e=l.v,t=l.w,n=l.name,arguments.length===2&&(a=arguments[1],r=!0)):(e=l,t=arguments[1],n=arguments[3],arguments.length>2&&(a=arguments[2],r=!0)),e=""+e,t=""+t,wn.isUndefined(n)||(n=""+n);var c=kv(this._isDirected,e,t,n);if(wn.has(this._edgeLabels,c))return r&&(this._edgeLabels[c]=a),this;if(!wn.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[c]=r?a:this._defaultEdgeLabelFn(e,t,n);var y=CK(this._isDirected,e,t,n);return e=y.v,t=y.w,Object.freeze(y),this._edgeObjs[c]=y,yA(this._preds[t],e),yA(this._sucs[e],t),this._in[t][c]=y,this._out[e][c]=y,this._edgeCount++,this},Ir.prototype.edge=function(e,t,n){var a=arguments.length===1?x0(this._isDirected,arguments[0]):kv(this._isDirected,e,t,n);return this._edgeLabels[a]},Ir.prototype.hasEdge=function(e,t,n){var a=arguments.length===1?x0(this._isDirected,arguments[0]):kv(this._isDirected,e,t,n);return wn.has(this._edgeLabels,a)},Ir.prototype.removeEdge=function(e,t,n){var a=arguments.length===1?x0(this._isDirected,arguments[0]):kv(this._isDirected,e,t,n),r=this._edgeObjs[a];return r&&(e=r.v,t=r.w,delete this._edgeLabels[a],delete this._edgeObjs[a],mA(this._preds[t],e),mA(this._sucs[e],t),delete this._in[t][a],delete this._out[e][a],this._edgeCount--),this},Ir.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var a=wn.values(n);return t?wn.filter(a,function(r){return r.v===t}):a}},Ir.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var a=wn.values(n);return t?wn.filter(a,function(r){return r.w===t}):a}},Ir.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var gA={Graph:lw,version:"2.1.8"},DK={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:IK(e),edges:LK(e)};return wn.isUndefined(e.graph())||(t.value=wn.clone(e.graph())),t},read:function(e){var t=new lw(e.options).setGraph(e.value);return wn.each(e.nodes,function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),wn.each(e.edges,function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}};function IK(e){return wn.map(e.nodes(),function(t){var n=e.node(t),a=e.parent(t),r={v:t};return wn.isUndefined(n)||(r.value=n),wn.isUndefined(a)||(r.parent=a),r})}function LK(e){return wn.map(e.edges(),function(t){var n=e.edge(t),a={v:t.v,w:t.w};return wn.isUndefined(t.name)||(a.name=t.name),wn.isUndefined(n)||(a.value=n),a})}var FK=function(e){var t,n={},a=[];function r(l){wn.has(n,l)||(n[l]=!0,t.push(l),wn.each(e.successors(l),r),wn.each(e.predecessors(l),r))}return wn.each(e.nodes(),function(l){t=[],r(l),t.length&&a.push(t)}),a},kN=vs;function vs(){this._arr=[],this._keyIndices={}}vs.prototype.size=function(){return this._arr.length},vs.prototype.keys=function(){return this._arr.map(function(e){return e.key})},vs.prototype.has=function(e){return wn.has(this._keyIndices,e)},vs.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},vs.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},vs.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!wn.has(n,e)){var a=this._arr,r=a.length;return n[e]=r,a.push({key:e,priority:t}),this._decrease(r),!0}return!1},vs.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},vs.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},vs.prototype._heapify=function(e){var t=this._arr,n=2*e,a=n+1,r=e;n<t.length&&(r=t[n].priority<t[r].priority?n:r,a<t.length&&(r=t[a].priority<t[r].priority?a:r),r!==e&&(this._swap(e,r),this._heapify(r)))},vs.prototype._decrease=function(e){for(var t,n=this._arr,a=n[e].priority;e!==0&&!(n[t=e>>1].priority<a);)this._swap(e,t),e=t},vs.prototype._swap=function(e,t){var n=this._arr,a=this._keyIndices,r=n[e],l=n[t];n[e]=l,n[t]=r,a[l.key]=e,a[r.key]=t};var RN=function(e,t,n,a){return function(r,l,c,y){var h,g,b={},E=new kN,x=function(T){var j=T.v!==h?T.v:T.w,N=b[j],M=c(T),D=g.distance+M;if(M<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+T+" Weight: "+M);D<N.distance&&(N.distance=D,N.predecessor=h,E.decrease(j,D))};for(r.nodes().forEach(function(T){var j=T===l?0:Number.POSITIVE_INFINITY;b[T]={distance:j},E.add(T,j)});E.size()>0&&(h=E.removeMin(),(g=b[h]).distance!==Number.POSITIVE_INFINITY);)y(h).forEach(x);return b}(e,String(t),n||$K,a||function(r){return e.outEdges(r)})},$K=wn.constant(1),BK=function(e,t,n){return wn.transform(e.nodes(),function(a,r){a[r]=RN(e,r,t,n)},{})},jN=function(e){var t=0,n=[],a={},r=[];function l(c){var y=a[c]={onStack:!0,lowlink:t,index:t++};if(n.push(c),e.successors(c).forEach(function(b){wn.has(a,b)?a[b].onStack&&(y.lowlink=Math.min(y.lowlink,a[b].index)):(l(b),y.lowlink=Math.min(y.lowlink,a[b].lowlink))}),y.lowlink===y.index){var h,g=[];do h=n.pop(),a[h].onStack=!1,g.push(h);while(c!==h);r.push(g)}}return e.nodes().forEach(function(c){wn.has(a,c)||l(c)}),r},UK=function(e){return wn.filter(jN(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})},GK=function(e,t,n){return function(a,r,l){var c={},y=a.nodes();return y.forEach(function(h){c[h]={},c[h][h]={distance:0},y.forEach(function(g){h!==g&&(c[h][g]={distance:Number.POSITIVE_INFINITY})}),l(h).forEach(function(g){var b=g.v===h?g.w:g.v,E=r(g);c[h][b]={distance:E,predecessor:h}})}),y.forEach(function(h){var g=c[h];y.forEach(function(b){var E=c[b];y.forEach(function(x){var T=E[h],j=g[x],N=E[x],M=T.distance+j.distance;M<N.distance&&(N.distance=M,N.predecessor=j.predecessor)})})}),c}(e,t||WK,n||function(a){return e.outEdges(a)})},WK=wn.constant(1),S0=CN;function CN(e){var t={},n={},a=[];if(wn.each(e.sinks(),function r(l){if(wn.has(n,l))throw new Wm;wn.has(t,l)||(n[l]=!0,t[l]=!0,wn.each(e.predecessors(l),r),delete n[l],a.push(l))}),wn.size(t)!==e.nodeCount())throw new Wm;return a}function Wm(){}CN.CycleException=Wm,Wm.prototype=new Error;var _A=function(e,t,n){wn.isArray(t)||(t=[t]);var a=(e.isDirected()?e.successors:e.neighbors).bind(e),r=[],l={};return wn.each(t,function(c){if(!e.hasNode(c))throw new Error("Graph does not have node: "+c);DN(e,c,n==="post",l,a,r)}),r};function DN(e,t,n,a,r,l){wn.has(a,t)||(a[t]=!0,n||l.push(t),wn.each(r(t),function(c){DN(e,c,n,a,r,l)}),n&&l.push(t))}var zm,zK={Graph:gA.Graph,json:DK,alg:{components:FK,dijkstra:RN,dijkstraAll:BK,findCycles:UK,floydWarshall:GK,isAcyclic:function(e){try{S0(e)}catch(t){if(t instanceof S0.CycleException)return!1;throw t}return!0},postorder:function(e,t){return _A(e,t,"post")},preorder:function(e,t){return _A(e,t,"pre")},prim:function(e,t){var n,a=new lw,r={},l=new kN;function c(h){var g=h.v===n?h.w:h.v,b=l.priority(g);if(b!==void 0){var E=t(h);E<b&&(r[g]=n,l.decrease(g,E))}}if(e.nodeCount()===0)return a;wn.each(e.nodes(),function(h){l.add(h,Number.POSITIVE_INFINITY),a.setNode(h)}),l.decrease(e.nodes()[0],0);for(var y=!1;l.size()>0;){if(n=l.removeMin(),wn.has(r,n))a.setEdge(n,r[n]);else{if(y)throw new Error("Input graph is not connected: "+e);y=!0}e.nodeEdges(n).forEach(c)}return a},tarjan:jN,topsort:S0},version:gA.version};try{zm=zK}catch{}zm||(zm=window.graphlib);var Hl=zm,VK=function(e){return rN(e,5)},Vv=function(e,t,n){if(!hu(n))return!1;var a=typeof t;return!!(a=="number"?rf(n)&&mg(t,n.length):a=="string"&&t in n)&&Qh(n[t],e)},IN=Object.prototype,HK=IN.hasOwnProperty,XK=xg(function(e,t){e=Object(e);var n=-1,a=t.length,r=a>2?t[2]:void 0;for(r&&Vv(t[0],t[1],r)&&(a=1);++n<a;)for(var l=t[n],c=_p(l),y=-1,h=c.length;++y<h;){var g=c[y],b=e[g];(b===void 0||Qh(b,IN[g])&&!HK.call(e,g))&&(e[g]=l[g])}return e}),YK=function(e){return function(t,n,a){var r=Object(t);if(!rf(t)){var l=of(n);t=fd(t),n=function(y){return l(r[y],y,r)}}var c=e(t,n,a);return c>-1?r[l?t[c]:c]:void 0}},qK=/^\s+|\s+$/g,KK=/^[-+]0x[0-9a-f]+$/i,ZK=/^0b[01]+$/i,JK=/^0o[0-7]+$/i,QK=parseInt,eZ=function(e){if(typeof e=="number")return e;if(cp(e))return NaN;if(hu(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=hu(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(qK,"");var n=ZK.test(e);return n||JK.test(e)?QK(e.slice(2),n?2:8):KK.test(e)?NaN:+e},bm=function(e){return e?(e=eZ(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},tZ=function(e){var t=bm(e),n=t%1;return t==t?n?t-n:t:0},nZ=Math.max,rZ=YK(function(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=n==null?0:tZ(n);return r<0&&(r=nZ(a+r,0)),MN(e,of(t),r)}),LN=function(e){return e!=null&&e.length?sw(e,1):[]},oZ=function(e,t){return e==null?e:rw(e,oN(t),_p)},iZ=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},aZ=function(e,t){var n={};return t=of(t),ow(e,function(a,r,l){vg(n,r,t(a,r,l))}),n},cw=function(e,t,n){for(var a=-1,r=e.length;++a<r;){var l=e[a],c=t(l);if(c!=null&&(y===void 0?c==c&&!cp(c):n(c,y)))var y=c,h=l}return h},uZ=function(e,t){return e>t},sZ=function(e){return e&&e.length?cw(e,bp,uZ):void 0},u1=function(e,t,n){(n!==void 0&&!Qh(e[t],n)||n===void 0&&!(t in e))&&vg(e,t,n)},lZ=Function.prototype,cZ=Object.prototype,FN=lZ.toString,fZ=cZ.hasOwnProperty,dZ=FN.call(Object),pZ=function(e){if(!Js(e)||cd(e)!="[object Object]")return!1;var t=bg(e);if(t===null)return!0;var n=fZ.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&FN.call(n)==dZ},s1=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},hZ=function(e){return uy(e,_p(e))},vZ=function(e,t,n,a,r,l,c){var y=s1(e,n),h=s1(t,n),g=c.get(h);if(g)u1(e,n,g);else{var b=l?l(y,h,n+"",e,t,c):void 0,E=b===void 0;if(E){var x=hi(h),T=!x&&sp(h),j=!x&&!T&&sy(h);b=h,x||T||j?hi(y)?b=y:NN(y)?b=q2(y):T?(E=!1,b=Y2(h,!0)):j?(E=!1,b=eN(h,!0)):b=[]:pZ(h)||Fh(h)?(b=y,Fh(y)?b=hZ(y):hu(y)&&!ay(y)||(b=nN(h))):E=!1}E&&(c.set(h,b),r(b,h,a,l,c),c.delete(h)),u1(e,n,b)}},yZ=function e(t,n,a,r,l){t!==n&&rw(n,function(c,y){if(l||(l=new Nh),hu(c))vZ(t,n,y,a,e,r,l);else{var h=r?r(s1(t,y),c,y+"",t,n,l):void 0;h===void 0&&(h=c),u1(t,y,h)}},_p)},mZ=function(e){return xg(function(t,n){var a=-1,r=n.length,l=r>1?n[r-1]:void 0,c=r>2?n[2]:void 0;for(l=e.length>3&&typeof l=="function"?(r--,l):void 0,c&&Vv(n[0],n[1],c)&&(l=r<3?void 0:l,r=1),t=Object(t);++a<r;){var y=n[a];y&&e(t,y,a,l)}return t})}(function(e,t,n){yZ(e,t,n)}),$N=function(e,t){return e<t},gZ=function(e){return e&&e.length?cw(e,bp,$N):void 0},_Z=function(e,t){return e&&e.length?cw(e,of(t),$N):void 0},bZ=function(){return el.Date.now()},wZ=function(e,t,n,a){if(!hu(e))return e;for(var r=-1,l=(t=Eg(t,e)).length,c=l-1,y=e;y!=null&&++r<l;){var h=ly(t[r]),g=n;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(r!=c){var b=y[h];(g=a?a(b,h,y):void 0)===void 0&&(g=hu(b)?b:mg(t[r+1])?[]:{})}yg(y,h,g),y=y[h]}return e},EZ=function(e,t,n){for(var a=-1,r=t.length,l={};++a<r;){var c=t[a],y=Og(e,c);n(y,c)&&wZ(l,Eg(c,e),y)}return l},OZ=function(e,t){return EZ(e,t,function(n,a){return vN(e,a)})},xZ=function(e){return TN(AN(e,void 0,LN),e+"")}(function(e,t){return e==null?{}:OZ(e,t)}),SZ=Math.ceil,AZ=Math.max,TZ=function(e,t,n,a){for(var r=-1,l=AZ(SZ((t-e)/(n||1)),0),c=Array(l);l--;)c[a?l:++r]=e,e+=n;return c},MZ=function(e){return function(t,n,a){return a&&typeof a!="number"&&Vv(t,n,a)&&(n=a=void 0),t=bm(t),n===void 0?(n=t,t=0):n=bm(n),a=a===void 0?t<n?1:-1:bm(a),TZ(t,n,a,e)}}(),NZ=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},PZ=function(e,t){if(e!==t){var n=e!==void 0,a=e===null,r=e==e,l=cp(e),c=t!==void 0,y=t===null,h=t==t,g=cp(t);if(!y&&!g&&!l&&e>t||l&&c&&h&&!y&&!g||a&&c&&h||!n&&h||!r)return 1;if(!a&&!l&&!g&&e<t||g&&n&&r&&!a&&!l||y&&n&&r||!c&&r||!h)return-1}return 0},kZ=function(e,t,n){for(var a=-1,r=e.criteria,l=t.criteria,c=r.length,y=n.length;++a<c;){var h=PZ(r[a],l[a]);if(h)return a>=y?h:h*(n[a]=="desc"?-1:1)}return e.index-t.index},RZ=function(e,t,n){t=t.length?kh(t,function(l){return hi(l)?function(c){return Og(c,l.length===1?l[0]:l)}:l}):[bp];var a=-1;t=kh(t,gg(of));var r=bN(e,function(l,c,y){return{criteria:kh(t,function(h){return h(l)}),index:++a,value:l}});return NZ(r,function(l,c){return kZ(l,c,n)})},jZ=xg(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Vv(e,t[0],t[1])?t=[]:n>2&&Vv(t[0],t[1],t[2])&&(t=[t[0]]),RZ(e,sw(t,1),[])}),CZ=0,DZ=function(e){var t=++CZ;return pN(e)+t},IZ=function(e,t,n){for(var a=-1,r=e.length,l=t.length,c={};++a<r;){var y=a<l?t[a]:void 0;n(c,e[a],y)}return c},Vm,LZ=function(e,t){return IZ(e||[],t||[],yg)};try{Vm={cloneDeep:VK,constant:nw,defaults:XK,each:aN,filter:mN,find:rZ,flatten:LN,forEach:iN,forIn:oZ,has:gN,isUndefined:_N,last:iZ,map:wN,mapValues:aZ,max:sZ,merge:mZ,min:gZ,minBy:_Z,now:bZ,pick:xZ,range:MZ,reduce:EN,sortBy:jZ,uniqueId:DZ,values:PN,zipObject:LZ}}catch{}Vm||(Vm=window._);var FZ=Vm;Hl.Graph;FZ.constant(1);Hl.Graph;Hl.Graph;Hl.alg.preorder;Hl.alg.postorder;Hl.Graph;Hl.Graph;Hl.Graph;Hl.Graph;Hl.Graph;function Hv(e){"@babel/helpers - typeof";return Hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hv(e)}function $Z(e,t){if(Hv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Hv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BZ(e){var t=$Z(e,"string");return Hv(t)=="symbol"?t:t+""}function on(e,t,n){return(t=BZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var UZ=typeof Nv=="object"&&Nv&&Nv.Object===Object&&Nv,BN=UZ,GZ=BN,WZ=typeof self=="object"&&self&&self.Object===Object&&self,zZ=GZ||WZ||Function("return this")(),VZ=zZ,HZ=VZ,XZ=HZ.Symbol,UN=XZ,bA=UN;bA&&bA.toStringTag;var wA=UN;wA&&wA.toStringTag;var Hm={exports:{}};Hm.exports;(function(e,t){var n=BN,a=t&&!t.nodeType&&t,r=a&&!0&&e&&!e.nodeType&&e,l=r&&r.exports===a,c=l&&n.process,y=function(){try{var h=r&&r.require&&r.require("util").types;return h||c&&c.binding&&c.binding("util")}catch{}}();e.exports=y})(Hm,Hm.exports);var YZ=Hm.exports,EA=YZ;EA&&EA.isTypedArray;var GN={exports:{}},WN={exports:{}};(function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(WN);var qZ=WN.exports;(function(e){var t=qZ.default;function n(){e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var a,r={},l=Object.prototype,c=l.hasOwnProperty,y=Object.defineProperty||function(ce,he,Oe){ce[he]=Oe.value},h=typeof Symbol=="function"?Symbol:{},g=h.iterator||"@@iterator",b=h.asyncIterator||"@@asyncIterator",E=h.toStringTag||"@@toStringTag";function x(ce,he,Oe){return Object.defineProperty(ce,he,{value:Oe,enumerable:!0,configurable:!0,writable:!0}),ce[he]}try{x({},"")}catch{x=function(Oe,Ae,Ve){return Oe[Ae]=Ve}}function T(ce,he,Oe,Ae){var Ve=he&&he.prototype instanceof te?he:te,dt=Object.create(Ve.prototype),mt=new De(Ae||[]);return y(dt,"_invoke",{value:ge(ce,Oe,mt)}),dt}function j(ce,he,Oe){try{return{type:"normal",arg:ce.call(he,Oe)}}catch(Ae){return{type:"throw",arg:Ae}}}r.wrap=T;var N="suspendedStart",M="suspendedYield",D="executing",k="completed",F={};function te(){}function V(){}function z(){}var J={};x(J,g,function(){return this});var K=Object.getPrototypeOf,B=K&&K(K(Re([])));B&&B!==l&&c.call(B,g)&&(J=B);var H=z.prototype=te.prototype=Object.create(J);function ne(ce){["next","throw","return"].forEach(function(he){x(ce,he,function(Oe){return this._invoke(he,Oe)})})}function X(ce,he){function Oe(Ve,dt,mt,pt){var Jt=j(ce[Ve],ce,dt);if(Jt.type!=="throw"){var Ce=Jt.arg,ye=Ce.value;return ye&&t(ye)=="object"&&c.call(ye,"__await")?he.resolve(ye.__await).then(function(Pe){Oe("next",Pe,mt,pt)},function(Pe){Oe("throw",Pe,mt,pt)}):he.resolve(ye).then(function(Pe){Ce.value=Pe,mt(Ce)},function(Pe){return Oe("throw",Pe,mt,pt)})}pt(Jt.arg)}var Ae;y(this,"_invoke",{value:function(dt,mt){function pt(){return new he(function(Jt,Ce){Oe(dt,mt,Jt,Ce)})}return Ae=Ae?Ae.then(pt,pt):pt()}})}function ge(ce,he,Oe){var Ae=N;return function(Ve,dt){if(Ae===D)throw Error("Generator is already running");if(Ae===k){if(Ve==="throw")throw dt;return{value:a,done:!0}}for(Oe.method=Ve,Oe.arg=dt;;){var mt=Oe.delegate;if(mt){var pt=Fe(mt,Oe);if(pt){if(pt===F)continue;return pt}}if(Oe.method==="next")Oe.sent=Oe._sent=Oe.arg;else if(Oe.method==="throw"){if(Ae===N)throw Ae=k,Oe.arg;Oe.dispatchException(Oe.arg)}else Oe.method==="return"&&Oe.abrupt("return",Oe.arg);Ae=D;var Jt=j(ce,he,Oe);if(Jt.type==="normal"){if(Ae=Oe.done?k:M,Jt.arg===F)continue;return{value:Jt.arg,done:Oe.done}}Jt.type==="throw"&&(Ae=k,Oe.method="throw",Oe.arg=Jt.arg)}}}function Fe(ce,he){var Oe=he.method,Ae=ce.iterator[Oe];if(Ae===a)return he.delegate=null,Oe==="throw"&&ce.iterator.return&&(he.method="return",he.arg=a,Fe(ce,he),he.method==="throw")||Oe!=="return"&&(he.method="throw",he.arg=new TypeError("The iterator does not provide a '"+Oe+"' method")),F;var Ve=j(Ae,ce.iterator,he.arg);if(Ve.type==="throw")return he.method="throw",he.arg=Ve.arg,he.delegate=null,F;var dt=Ve.arg;return dt?dt.done?(he[ce.resultName]=dt.value,he.next=ce.nextLoc,he.method!=="return"&&(he.method="next",he.arg=a),he.delegate=null,F):dt:(he.method="throw",he.arg=new TypeError("iterator result is not an object"),he.delegate=null,F)}function Me(ce){var he={tryLoc:ce[0]};1 in ce&&(he.catchLoc=ce[1]),2 in ce&&(he.finallyLoc=ce[2],he.afterLoc=ce[3]),this.tryEntries.push(he)}function Xe(ce){var he=ce.completion||{};he.type="normal",delete he.arg,ce.completion=he}function De(ce){this.tryEntries=[{tryLoc:"root"}],ce.forEach(Me,this),this.reset(!0)}function Re(ce){if(ce||ce===""){var he=ce[g];if(he)return he.call(ce);if(typeof ce.next=="function")return ce;if(!isNaN(ce.length)){var Oe=-1,Ae=function Ve(){for(;++Oe<ce.length;)if(c.call(ce,Oe))return Ve.value=ce[Oe],Ve.done=!1,Ve;return Ve.value=a,Ve.done=!0,Ve};return Ae.next=Ae}}throw new TypeError(t(ce)+" is not iterable")}return V.prototype=z,y(H,"constructor",{value:z,configurable:!0}),y(z,"constructor",{value:V,configurable:!0}),V.displayName=x(z,E,"GeneratorFunction"),r.isGeneratorFunction=function(ce){var he=typeof ce=="function"&&ce.constructor;return!!he&&(he===V||(he.displayName||he.name)==="GeneratorFunction")},r.mark=function(ce){return Object.setPrototypeOf?Object.setPrototypeOf(ce,z):(ce.__proto__=z,x(ce,E,"GeneratorFunction")),ce.prototype=Object.create(H),ce},r.awrap=function(ce){return{__await:ce}},ne(X.prototype),x(X.prototype,b,function(){return this}),r.AsyncIterator=X,r.async=function(ce,he,Oe,Ae,Ve){Ve===void 0&&(Ve=Promise);var dt=new X(T(ce,he,Oe,Ae),Ve);return r.isGeneratorFunction(he)?dt:dt.next().then(function(mt){return mt.done?mt.value:dt.next()})},ne(H),x(H,E,"Generator"),x(H,g,function(){return this}),x(H,"toString",function(){return"[object Generator]"}),r.keys=function(ce){var he=Object(ce),Oe=[];for(var Ae in he)Oe.push(Ae);return Oe.reverse(),function Ve(){for(;Oe.length;){var dt=Oe.pop();if(dt in he)return Ve.value=dt,Ve.done=!1,Ve}return Ve.done=!0,Ve}},r.values=Re,De.prototype={constructor:De,reset:function(he){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(Xe),!he)for(var Oe in this)Oe.charAt(0)==="t"&&c.call(this,Oe)&&!isNaN(+Oe.slice(1))&&(this[Oe]=a)},stop:function(){this.done=!0;var he=this.tryEntries[0].completion;if(he.type==="throw")throw he.arg;return this.rval},dispatchException:function(he){if(this.done)throw he;var Oe=this;function Ae(Ce,ye){return mt.type="throw",mt.arg=he,Oe.next=Ce,ye&&(Oe.method="next",Oe.arg=a),!!ye}for(var Ve=this.tryEntries.length-1;Ve>=0;--Ve){var dt=this.tryEntries[Ve],mt=dt.completion;if(dt.tryLoc==="root")return Ae("end");if(dt.tryLoc<=this.prev){var pt=c.call(dt,"catchLoc"),Jt=c.call(dt,"finallyLoc");if(pt&&Jt){if(this.prev<dt.catchLoc)return Ae(dt.catchLoc,!0);if(this.prev<dt.finallyLoc)return Ae(dt.finallyLoc)}else if(pt){if(this.prev<dt.catchLoc)return Ae(dt.catchLoc,!0)}else{if(!Jt)throw Error("try statement without catch or finally");if(this.prev<dt.finallyLoc)return Ae(dt.finallyLoc)}}}},abrupt:function(he,Oe){for(var Ae=this.tryEntries.length-1;Ae>=0;--Ae){var Ve=this.tryEntries[Ae];if(Ve.tryLoc<=this.prev&&c.call(Ve,"finallyLoc")&&this.prev<Ve.finallyLoc){var dt=Ve;break}}dt&&(he==="break"||he==="continue")&&dt.tryLoc<=Oe&&Oe<=dt.finallyLoc&&(dt=null);var mt=dt?dt.completion:{};return mt.type=he,mt.arg=Oe,dt?(this.method="next",this.next=dt.finallyLoc,F):this.complete(mt)},complete:function(he,Oe){if(he.type==="throw")throw he.arg;return he.type==="break"||he.type==="continue"?this.next=he.arg:he.type==="return"?(this.rval=this.arg=he.arg,this.method="return",this.next="end"):he.type==="normal"&&Oe&&(this.next=Oe),F},finish:function(he){for(var Oe=this.tryEntries.length-1;Oe>=0;--Oe){var Ae=this.tryEntries[Oe];if(Ae.finallyLoc===he)return this.complete(Ae.completion,Ae.afterLoc),Xe(Ae),F}},catch:function(he){for(var Oe=this.tryEntries.length-1;Oe>=0;--Oe){var Ae=this.tryEntries[Oe];if(Ae.tryLoc===he){var Ve=Ae.completion;if(Ve.type==="throw"){var dt=Ve.arg;Xe(Ae)}return dt}}throw Error("illegal catch attempt")},delegateYield:function(he,Oe,Ae){return this.delegate={iterator:Re(he),resultName:Oe,nextLoc:Ae},this.method==="next"&&(this.arg=a),F}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(GN);var KZ=GN.exports,A0=KZ();try{regeneratorRuntime=A0}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=A0:Function("r","regeneratorRuntime = r")(A0)}var rn;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(rn||(rn={}));var OA;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(OA||(OA={}));var xA;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(xA||(xA={}));var SA;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(SA||(SA={}));var AA;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(AA||(AA={}));var ZZ={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(Nv,function(){var n=function(I){return I instanceof Uint8Array||I instanceof Uint16Array||I instanceof Uint32Array||I instanceof Int8Array||I instanceof Int16Array||I instanceof Int32Array||I instanceof Float32Array||I instanceof Float64Array||I instanceof Uint8ClampedArray},a=function(I,oe){for(var me=Object.keys(oe),et=0;et<me.length;++et)I[me[et]]=oe[me[et]];return I},r=`
`;function l(I){return typeof atob<"u"?atob(I):"base64:"+I}function c(I){var oe=new Error("(regl) "+I);throw console.error(oe),oe}function y(I,oe){I||c(oe)}function h(I){return I?": "+I:""}function g(I,oe,me){I in oe||c("unknown parameter ("+I+")"+h(me)+". possible values: "+Object.keys(oe).join())}function b(I,oe){n(I)||c("invalid parameter type"+h(oe)+". must be a typed array")}function E(I,oe){switch(oe){case"number":return typeof I=="number";case"object":return typeof I=="object";case"string":return typeof I=="string";case"boolean":return typeof I=="boolean";case"function":return typeof I=="function";case"undefined":return typeof I>"u";case"symbol":return typeof I=="symbol"}}function x(I,oe,me){E(I,oe)||c("invalid parameter type"+h(me)+". expected "+oe+", got "+typeof I)}function T(I,oe){I>=0&&(I|0)===I||c("invalid parameter type, ("+I+")"+h(oe)+". must be a nonnegative integer")}function j(I,oe,me){oe.indexOf(I)<0&&c("invalid value"+h(me)+". must be one of: "+oe)}var N=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function M(I){Object.keys(I).forEach(function(oe){N.indexOf(oe)<0&&c('invalid regl constructor argument "'+oe+'". must be one of '+N)})}function D(I,oe){for(I=I+"";I.length<oe;)I=" "+I;return I}function k(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function F(I,oe){this.number=I,this.line=oe,this.errors=[]}function te(I,oe,me){this.file=I,this.line=oe,this.message=me}function V(){var I=new Error,oe=(I.stack||I).toString(),me=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(oe);if(me)return me[1];var et=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(oe);return et?et[1]:"unknown"}function z(){var I=new Error,oe=(I.stack||I).toString(),me=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(oe);if(me)return me[1];var et=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(oe);return et?et[1]:"unknown"}function J(I,oe){var me=I.split(`
`),et=1,ct=0,Ze={unknown:new k,0:new k};Ze.unknown.name=Ze[0].name=oe||V(),Ze.unknown.lines.push(new F(0,""));for(var ut=0;ut<me.length;++ut){var Nt=me[ut],Dt=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Nt);if(Dt)switch(Dt[1]){case"line":var Rt=/(\d+)(\s+\d+)?/.exec(Dt[2]);Rt&&(et=Rt[1]|0,Rt[2]&&(ct=Rt[2]|0,ct in Ze||(Ze[ct]=new k)));break;case"define":var st=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Dt[2]);st&&(Ze[ct].name=st[1]?l(st[2]):st[2]);break}Ze[ct].lines.push(new F(et++,Nt))}return Object.keys(Ze).forEach(function(Wt){var Ut=Ze[Wt];Ut.lines.forEach(function(Pt){Ut.index[Pt.number]=Pt})}),Ze}function K(I){var oe=[];return I.split(`
`).forEach(function(me){if(!(me.length<5)){var et=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(me);et?oe.push(new te(et[1]|0,et[2]|0,et[3].trim())):me.length>0&&oe.push(new te("unknown",0,me))}}),oe}function B(I,oe){oe.forEach(function(me){var et=I[me.file];if(et){var ct=et.index[me.line];if(ct){ct.errors.push(me),et.hasErrors=!0;return}}I.unknown.hasErrors=!0,I.unknown.lines[0].errors.push(me)})}function H(I,oe,me,et,ct){if(!I.getShaderParameter(oe,I.COMPILE_STATUS)){var Ze=I.getShaderInfoLog(oe),ut=et===I.FRAGMENT_SHADER?"fragment":"vertex";De(me,"string",ut+" shader source must be a string",ct);var Nt=J(me,ct),Dt=K(Ze);B(Nt,Dt),Object.keys(Nt).forEach(function(Rt){var st=Nt[Rt];if(!st.hasErrors)return;var Wt=[""],Ut=[""];function Pt(wt,We){Wt.push(wt),Ut.push(We||"")}Pt("file number "+Rt+": "+st.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),st.lines.forEach(function(wt){if(wt.errors.length>0){Pt(D(wt.number,4)+"|  ","background-color:yellow; font-weight:bold"),Pt(wt.line+r,"color:red; background-color:yellow; font-weight:bold");var We=0;wt.errors.forEach(function(ot){var Lt=ot.message,qt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Lt);if(qt){var St=qt[1];switch(Lt=qt[2],St){case"assign":St="=";break}We=Math.max(wt.line.indexOf(St,We),0)}else We=0;Pt(D("| ",6)),Pt(D("^^^",We+3)+r,"font-weight:bold"),Pt(D("| ",6)),Pt(Lt+r,"font-weight:bold")}),Pt(D("| ",6)+r)}else Pt(D(wt.number,4)+"|  "),Pt(wt.line+r,"color:red")}),typeof document<"u"&&!window.chrome?(Ut[0]=Wt.join("%c"),console.log.apply(console,Ut)):console.log(Wt.join(""))}),y.raise("Error compiling "+ut+" shader, "+Nt[0].name)}}function ne(I,oe,me,et,ct){if(!I.getProgramParameter(oe,I.LINK_STATUS)){var Ze=I.getProgramInfoLog(oe),ut=J(me,ct),Nt=J(et,ct),Dt='Error linking program with vertex shader, "'+Nt[0].name+'", and fragment shader "'+ut[0].name+'"';typeof document<"u"?console.log("%c"+Dt+r+"%c"+Ze,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Dt+r+Ze),y.raise(Dt)}}function X(I){I._commandRef=V()}function ge(I,oe,me,et){X(I);function ct(Dt){return Dt?et.id(Dt):0}I._fragId=ct(I.static.frag),I._vertId=ct(I.static.vert);function Ze(Dt,Rt){Object.keys(Rt).forEach(function(st){Dt[et.id(st)]=!0})}var ut=I._uniformSet={};Ze(ut,oe.static),Ze(ut,oe.dynamic);var Nt=I._attributeSet={};Ze(Nt,me.static),Ze(Nt,me.dynamic),I._hasCount="count"in I.static||"count"in I.dynamic||"elements"in I.static||"elements"in I.dynamic}function Fe(I,oe){var me=z();c(I+" in command "+(oe||V())+(me==="unknown"?"":" called from "+me))}function Me(I,oe,me){I||Fe(oe,me||V())}function Xe(I,oe,me,et){I in oe||Fe("unknown parameter ("+I+")"+h(me)+". possible values: "+Object.keys(oe).join(),et||V())}function De(I,oe,me,et){E(I,oe)||Fe("invalid parameter type"+h(me)+". expected "+oe+", got "+typeof I,et||V())}function Re(I){I()}function ce(I,oe,me){I.texture?j(I.texture._texture.internalformat,oe,"unsupported texture format for attachment"):j(I.renderbuffer._renderbuffer.format,me,"unsupported renderbuffer format for attachment")}var he=33071,Oe=9728,Ae=9984,Ve=9985,dt=9986,mt=9987,pt=5120,Jt=5121,Ce=5122,ye=5123,Pe=5124,bt=5125,Vt=5126,xt=32819,nn=32820,yn=33635,xn=34042,pn=36193,lt={};lt[pt]=lt[Jt]=1,lt[Ce]=lt[ye]=lt[pn]=lt[yn]=lt[xt]=lt[nn]=2,lt[Pe]=lt[bt]=lt[Vt]=lt[xn]=4;function gn(I,oe){return I===nn||I===xt||I===yn?2:I===xn?4:lt[I]*oe}function $e(I){return!(I&I-1)&&!!I}function vn(I,oe,me){var et,ct=oe.width,Ze=oe.height,ut=oe.channels;y(ct>0&&ct<=me.maxTextureSize&&Ze>0&&Ze<=me.maxTextureSize,"invalid texture shape"),(I.wrapS!==he||I.wrapT!==he)&&y($e(ct)&&$e(Ze),"incompatible wrap mode for texture, both width and height must be power of 2"),oe.mipmask===1?ct!==1&&Ze!==1&&y(I.minFilter!==Ae&&I.minFilter!==dt&&I.minFilter!==Ve&&I.minFilter!==mt,"min filter requires mipmap"):(y($e(ct)&&$e(Ze),"texture must be a square power of 2 to support mipmapping"),y(oe.mipmask===(ct<<1)-1,"missing or incomplete mipmap data")),oe.type===Vt&&(me.extensions.indexOf("oes_texture_float_linear")<0&&y(I.minFilter===Oe&&I.magFilter===Oe,"filter not supported, must enable oes_texture_float_linear"),y(!I.genMipmaps,"mipmap generation not supported with float textures"));var Nt=oe.images;for(et=0;et<16;++et)if(Nt[et]){var Dt=ct>>et,Rt=Ze>>et;y(oe.mipmask&1<<et,"missing mipmap data");var st=Nt[et];if(y(st.width===Dt&&st.height===Rt,"invalid shape for mip images"),y(st.format===oe.format&&st.internalformat===oe.internalformat&&st.type===oe.type,"incompatible type for mip image"),!st.compressed)if(st.data){var Wt=Math.ceil(gn(st.type,ut)*Dt/st.unpackAlignment)*st.unpackAlignment;y(st.data.byteLength===Wt*Rt,"invalid data for image, buffer size is inconsistent with image format")}else st.element||st.copy}else I.genMipmaps||y((oe.mipmask&1<<et)===0,"extra mipmap data");oe.compressed&&y(!I.genMipmaps,"mipmap generation for compressed images not supported")}function Yn(I,oe,me,et){var ct=I.width,Ze=I.height,ut=I.channels;y(ct>0&&ct<=et.maxTextureSize&&Ze>0&&Ze<=et.maxTextureSize,"invalid texture shape"),y(ct===Ze,"cube map must be square"),y(oe.wrapS===he&&oe.wrapT===he,"wrap mode not supported by cube map");for(var Nt=0;Nt<me.length;++Nt){var Dt=me[Nt];y(Dt.width===ct&&Dt.height===Ze,"inconsistent cube map face shape"),oe.genMipmaps&&(y(!Dt.compressed,"can not generate mipmap for compressed textures"),y(Dt.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Rt=Dt.images,st=0;st<16;++st){var Wt=Rt[st];if(Wt){var Ut=ct>>st,Pt=Ze>>st;y(Dt.mipmask&1<<st,"missing mipmap data"),y(Wt.width===Ut&&Wt.height===Pt,"invalid shape for mip images"),y(Wt.format===I.format&&Wt.internalformat===I.internalformat&&Wt.type===I.type,"incompatible type for mip image"),Wt.compressed||(Wt.data?y(Wt.data.byteLength===Ut*Pt*Math.max(gn(Wt.type,ut),Wt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Wt.element||Wt.copy)}}}}var Q=a(y,{optional:Re,raise:c,commandRaise:Fe,command:Me,parameter:g,commandParameter:Xe,constructor:M,type:x,commandType:De,isTypedArray:b,nni:T,oneOf:j,shaderError:H,linkError:ne,callSite:z,saveCommandRef:X,saveDrawInfo:ge,framebufferFormat:ce,guessCommand:V,texture2D:vn,textureCube:Yn}),qn=0,wr=0,Lr=5,Hr=6;function zn(I,oe){this.id=qn++,this.type=I,this.data=oe}function Ao(I){return I.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ee(I){if(I.length===0)return[];var oe=I.charAt(0),me=I.charAt(I.length-1);if(I.length>1&&oe===me&&(oe==='"'||oe==="'"))return['"'+Ao(I.substr(1,I.length-2))+'"'];var et=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(I);if(et)return Ee(I.substr(0,et.index)).concat(Ee(et[1])).concat(Ee(I.substr(et.index+et[0].length)));var ct=I.split(".");if(ct.length===1)return['"'+Ao(I)+'"'];for(var Ze=[],ut=0;ut<ct.length;++ut)Ze=Ze.concat(Ee(ct[ut]));return Ze}function He(I){return"["+Ee(I).join("][")+"]"}function je(I,oe){return new zn(I,He(oe+""))}function rt(I){return typeof I=="function"&&!I._reglType||I instanceof zn}function Qt(I,oe){if(typeof I=="function")return new zn(wr,I);if(typeof I=="number"||typeof I=="boolean")return new zn(Lr,I);if(Array.isArray(I))return new zn(Hr,I.map((me,et)=>Qt(me,oe+"["+et+"]")));if(I instanceof zn)return I;Q(!1,"invalid option type in uniform "+oe)}var Yt={DynamicVariable:zn,define:je,isDynamic:rt,unbox:Qt,accessor:He},Nn={next:typeof requestAnimationFrame=="function"?function(I){return requestAnimationFrame(I)}:function(I){return setTimeout(I,16)},cancel:typeof cancelAnimationFrame=="function"?function(I){return cancelAnimationFrame(I)}:clearTimeout},mr=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function qo(){var I={"":0},oe=[""];return{id:function(me){var et=I[me];return et||(et=I[me]=oe.length,oe.push(me),et)},str:function(me){return oe[me]}}}function ui(I,oe,me){var et=document.createElement("canvas");a(et.style,{border:0,margin:0,padding:0,top:0,left:0}),I.appendChild(et),I===document.body&&(et.style.position="absolute",a(I.style,{margin:0,padding:0}));function ct(){var Nt=window.innerWidth,Dt=window.innerHeight;if(I!==document.body){var Rt=I.getBoundingClientRect();Nt=Rt.right-Rt.left,Dt=Rt.bottom-Rt.top}et.width=me*Nt,et.height=me*Dt,a(et.style,{width:Nt+"px",height:Dt+"px"})}var Ze;I!==document.body&&typeof ResizeObserver=="function"?(Ze=new ResizeObserver(function(){setTimeout(ct)}),Ze.observe(I)):window.addEventListener("resize",ct,!1);function ut(){Ze?Ze.disconnect():window.removeEventListener("resize",ct),I.removeChild(et)}return ct(),{canvas:et,onDestroy:ut}}function Do(I,oe){function me(et){try{return I.getContext(et,oe)}catch{return null}}return me("webgl")||me("experimental-webgl")||me("webgl-experimental")}function Bo(I){return typeof I.nodeName=="string"&&typeof I.appendChild=="function"&&typeof I.getBoundingClientRect=="function"}function On(I){return typeof I.drawArrays=="function"||typeof I.drawElements=="function"}function In(I){return typeof I=="string"?I.split():(Q(Array.isArray(I),"invalid extension array"),I)}function Vn(I){return typeof I=="string"?(Q(typeof document<"u","not supported outside of DOM"),document.querySelector(I)):I}function or(I){var oe=I||{},me,et,ct,Ze,ut={},Nt=[],Dt=[],Rt=typeof window>"u"?1:window.devicePixelRatio,st=!1,Wt=function(wt){wt&&Q.raise(wt)},Ut=function(){};if(typeof oe=="string"?(Q(typeof document<"u","selector queries only supported in DOM enviroments"),me=document.querySelector(oe),Q(me,"invalid query string for element")):typeof oe=="object"?Bo(oe)?me=oe:On(oe)?(Ze=oe,ct=Ze.canvas):(Q.constructor(oe),"gl"in oe?Ze=oe.gl:"canvas"in oe?ct=Vn(oe.canvas):"container"in oe&&(et=Vn(oe.container)),"attributes"in oe&&(ut=oe.attributes,Q.type(ut,"object","invalid context attributes")),"extensions"in oe&&(Nt=In(oe.extensions)),"optionalExtensions"in oe&&(Dt=In(oe.optionalExtensions)),"onDone"in oe&&(Q.type(oe.onDone,"function","invalid or missing onDone callback"),Wt=oe.onDone),"profile"in oe&&(st=!!oe.profile),"pixelRatio"in oe&&(Rt=+oe.pixelRatio,Q(Rt>0,"invalid pixel ratio"))):Q.raise("invalid arguments to regl"),me&&(me.nodeName.toLowerCase()==="canvas"?ct=me:et=me),!Ze){if(!ct){Q(typeof document<"u","must manually specify webgl context outside of DOM environments");var Pt=ui(et||document.body,Wt,Rt);if(!Pt)return null;ct=Pt.canvas,Ut=Pt.onDestroy}ut.premultipliedAlpha===void 0&&(ut.premultipliedAlpha=!0),Ze=Do(ct,ut)}return Ze?{gl:Ze,canvas:ct,container:et,extensions:Nt,optionalExtensions:Dt,pixelRatio:Rt,profile:st,onDone:Wt,onDestroy:Ut}:(Ut(),Wt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Xr(I,oe){var me={};function et(ut){Q.type(ut,"string","extension name must be string");var Nt=ut.toLowerCase(),Dt;try{Dt=me[Nt]=I.getExtension(Nt)}catch{}return!!Dt}for(var ct=0;ct<oe.extensions.length;++ct){var Ze=oe.extensions[ct];if(!et(Ze))return oe.onDestroy(),oe.onDone('"'+Ze+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return oe.optionalExtensions.forEach(et),{extensions:me,restore:function(){Object.keys(me).forEach(function(ut){if(me[ut]&&!et(ut))throw new Error("(regl): error restoring extension "+ut)})}}}function Mr(I,oe){for(var me=Array(I),et=0;et<I;++et)me[et]=oe(et);return me}var qa=5120,Aa=5121,Ka=5122,Gu=5123,dd=5124,Xl=5125,qi=5126;function Ss(I){for(var oe=16;oe<=1<<28;oe*=16)if(I<=oe)return oe;return 0}function Tn(I){var oe,me;return oe=(I>65535)<<4,I>>>=oe,me=(I>255)<<3,I>>>=me,oe|=me,me=(I>15)<<2,I>>>=me,oe|=me,me=(I>3)<<1,I>>>=me,oe|=me,oe|I>>1}function af(){var I=Mr(8,function(){return[]});function oe(Ze){var ut=Ss(Ze),Nt=I[Tn(ut)>>2];return Nt.length>0?Nt.pop():new ArrayBuffer(ut)}function me(Ze){I[Tn(Ze.byteLength)>>2].push(Ze)}function et(Ze,ut){var Nt=null;switch(Ze){case qa:Nt=new Int8Array(oe(ut),0,ut);break;case Aa:Nt=new Uint8Array(oe(ut),0,ut);break;case Ka:Nt=new Int16Array(oe(2*ut),0,ut);break;case Gu:Nt=new Uint16Array(oe(2*ut),0,ut);break;case dd:Nt=new Int32Array(oe(4*ut),0,ut);break;case Xl:Nt=new Uint32Array(oe(4*ut),0,ut);break;case qi:Nt=new Float32Array(oe(4*ut),0,ut);break;default:return null}return Nt.length!==ut?Nt.subarray(0,ut):Nt}function ct(Ze){me(Ze.buffer)}return{alloc:oe,free:me,allocType:et,freeType:ct}}var so=af();so.zero=af();var Yl=3408,Ri=3410,$i=3411,tl=3412,fa=3413,Ki=3414,da=3415,ql=33901,Kl=33902,uf=3379,As=3386,sf=34921,Zl=36347,pd=36348,yu=35661,lf=35660,Za=34930,Jl=36349,nl=34076,Ql=34024,ec=7936,hd=7937,cf=7938,Br=35724,Fr=34047,ff=36063,Wu=34852,Zi=3553,rl=34067,df=34069,To=33984,mu=6408,gu=5126,ol=5121,zu=36160,si=36053,tc=36064,pf=16384,nc=function(I,oe){var me=1;oe.ext_texture_filter_anisotropic&&(me=I.getParameter(Fr));var et=1,ct=1;oe.webgl_draw_buffers&&(et=I.getParameter(Wu),ct=I.getParameter(ff));var Ze=!!oe.oes_texture_float;if(Ze){var ut=I.createTexture();I.bindTexture(Zi,ut),I.texImage2D(Zi,0,mu,1,1,0,mu,gu,null);var Nt=I.createFramebuffer();if(I.bindFramebuffer(zu,Nt),I.framebufferTexture2D(zu,tc,Zi,ut,0),I.bindTexture(Zi,null),I.checkFramebufferStatus(zu)!==si)Ze=!1;else{I.viewport(0,0,1,1),I.clearColor(1,0,0,1),I.clear(pf);var Dt=so.allocType(gu,4);I.readPixels(0,0,1,1,mu,gu,Dt),I.getError()?Ze=!1:(I.deleteFramebuffer(Nt),I.deleteTexture(ut),Ze=Dt[0]===1),so.freeType(Dt)}}var Rt=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),st=!0;if(!Rt){var Wt=I.createTexture(),Ut=so.allocType(ol,36);I.activeTexture(To),I.bindTexture(rl,Wt),I.texImage2D(df,0,mu,3,3,0,mu,ol,Ut),so.freeType(Ut),I.bindTexture(rl,null),I.deleteTexture(Wt),st=!I.getError()}return{colorBits:[I.getParameter(Ri),I.getParameter($i),I.getParameter(tl),I.getParameter(fa)],depthBits:I.getParameter(Ki),stencilBits:I.getParameter(da),subpixelBits:I.getParameter(Yl),extensions:Object.keys(oe).filter(function(Pt){return!!oe[Pt]}),maxAnisotropic:me,maxDrawbuffers:et,maxColorAttachments:ct,pointSizeDims:I.getParameter(ql),lineWidthDims:I.getParameter(Kl),maxViewportDims:I.getParameter(As),maxCombinedTextureUnits:I.getParameter(yu),maxCubeMapSize:I.getParameter(nl),maxRenderbufferSize:I.getParameter(Ql),maxTextureUnits:I.getParameter(Za),maxTextureSize:I.getParameter(uf),maxAttributes:I.getParameter(sf),maxVertexUniforms:I.getParameter(Zl),maxVertexTextureUnits:I.getParameter(lf),maxVaryingVectors:I.getParameter(pd),maxFragmentUniforms:I.getParameter(Jl),glsl:I.getParameter(Br),renderer:I.getParameter(hd),vendor:I.getParameter(ec),version:I.getParameter(cf),readFloat:Ze,npotTextureCube:st}};function bi(I){return!!I&&typeof I=="object"&&Array.isArray(I.shape)&&Array.isArray(I.stride)&&typeof I.offset=="number"&&I.shape.length===I.stride.length&&(Array.isArray(I.data)||n(I.data))}var Ko=function(I){return Object.keys(I).map(function(oe){return I[oe]})},Bi={shape:Ei,flatten:vf};function Jr(I,oe,me){for(var et=0;et<oe;++et)me[et]=I[et]}function hf(I,oe,me,et){for(var ct=0,Ze=0;Ze<oe;++Ze)for(var ut=I[Ze],Nt=0;Nt<me;++Nt)et[ct++]=ut[Nt]}function wi(I,oe,me,et,ct,Ze){for(var ut=Ze,Nt=0;Nt<oe;++Nt)for(var Dt=I[Nt],Rt=0;Rt<me;++Rt)for(var st=Dt[Rt],Wt=0;Wt<et;++Wt)ct[ut++]=st[Wt]}function rc(I,oe,me,et,ct){for(var Ze=1,ut=me+1;ut<oe.length;++ut)Ze*=oe[ut];var Nt=oe[me];if(oe.length-me===4){var Dt=oe[me+1],Rt=oe[me+2],st=oe[me+3];for(ut=0;ut<Nt;++ut)wi(I[ut],Dt,Rt,st,et,ct),ct+=Ze}else for(ut=0;ut<Nt;++ut)rc(I[ut],oe,me+1,et,ct),ct+=Ze}function vf(I,oe,me,et){var ct=1;if(oe.length)for(var Ze=0;Ze<oe.length;++Ze)ct*=oe[Ze];else ct=0;var ut=et||so.allocType(me,ct);switch(oe.length){case 0:break;case 1:Jr(I,oe[0],ut);break;case 2:hf(I,oe[0],oe[1],ut);break;case 3:wi(I,oe[0],oe[1],oe[2],ut,0);break;default:rc(I,oe,0,ut,0)}return ut}function Ei(I){for(var oe=[],me=I;me.length;me=me[0])oe.push(me.length);return oe}var yi={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},oc=5120,jr=5122,Zo=5124,il=5121,yf=5123,ic=5125,al=5126,Ta=5126,Oi={int8:oc,int16:jr,int32:Zo,uint8:il,uint16:yf,uint32:ic,float:al,float32:Ta},Vu=35048,ji=35040,Ji={dynamic:Vu,stream:ji,static:35044},Or=Bi.flatten,xi=Bi.shape,pa=35044,ri=35040,Hu=5121,_u=5126,ha=[];ha[5120]=1,ha[5122]=2,ha[5124]=4,ha[5121]=1,ha[5123]=2,ha[5125]=4,ha[5126]=4;function oo(I){return yi[Object.prototype.toString.call(I)]|0}function Ts(I,oe){for(var me=0;me<oe.length;++me)I[me]=oe[me]}function Ma(I,oe,me,et,ct,Ze,ut){for(var Nt=0,Dt=0;Dt<me;++Dt)for(var Rt=0;Rt<et;++Rt)I[Nt++]=oe[ct*Dt+Ze*Rt+ut]}function Qi(I,oe,me,et){var ct=0,Ze={};function ut(We){this.id=ct++,this.buffer=I.createBuffer(),this.type=We,this.usage=pa,this.byteLength=0,this.dimension=1,this.dtype=Hu,this.persistentData=null,me.profile&&(this.stats={size:0})}ut.prototype.bind=function(){I.bindBuffer(this.type,this.buffer)},ut.prototype.destroy=function(){Ut(this)};var Nt=[];function Dt(We,ot){var Lt=Nt.pop();return Lt||(Lt=new ut(We)),Lt.bind(),Wt(Lt,ot,ri,0,1,!1),Lt}function Rt(We){Nt.push(We)}function st(We,ot,Lt){We.byteLength=ot.byteLength,I.bufferData(We.type,ot,Lt)}function Wt(We,ot,Lt,qt,St,Kt){var At;if(We.usage=Lt,Array.isArray(ot)){if(We.dtype=qt||_u,ot.length>0){var zt;if(Array.isArray(ot[0])){At=xi(ot);for(var Et=1,Xt=1;Xt<At.length;++Xt)Et*=At[Xt];We.dimension=Et,zt=Or(ot,At,We.dtype),st(We,zt,Lt),Kt?We.persistentData=zt:so.freeType(zt)}else if(typeof ot[0]=="number"){We.dimension=St;var An=so.allocType(We.dtype,ot.length);Ts(An,ot),st(We,An,Lt),Kt?We.persistentData=An:so.freeType(An)}else n(ot[0])?(We.dimension=ot[0].length,We.dtype=qt||oo(ot[0])||_u,zt=Or(ot,[ot.length,ot[0].length],We.dtype),st(We,zt,Lt),Kt?We.persistentData=zt:so.freeType(zt)):Q.raise("invalid buffer data")}}else if(n(ot))We.dtype=qt||oo(ot),We.dimension=St,st(We,ot,Lt),Kt&&(We.persistentData=new Uint8Array(new Uint8Array(ot.buffer)));else if(bi(ot)){At=ot.shape;var Bn=ot.stride,It=ot.offset,Tt=0,Ot=0,Rn=0,tr=0;At.length===1?(Tt=At[0],Ot=1,Rn=Bn[0],tr=0):At.length===2?(Tt=At[0],Ot=At[1],Rn=Bn[0],tr=Bn[1]):Q.raise("invalid shape"),We.dtype=qt||oo(ot.data)||_u,We.dimension=Ot;var sn=so.allocType(We.dtype,Tt*Ot);Ma(sn,ot.data,Tt,Ot,Rn,tr,It),st(We,sn,Lt),Kt?We.persistentData=sn:so.freeType(sn)}else ot instanceof ArrayBuffer?(We.dtype=Hu,We.dimension=St,st(We,ot,Lt),Kt&&(We.persistentData=new Uint8Array(new Uint8Array(ot)))):Q.raise("invalid buffer data")}function Ut(We){oe.bufferCount--,et(We);var ot=We.buffer;Q(ot,"buffer must not be deleted already"),I.deleteBuffer(ot),We.buffer=null,delete Ze[We.id]}function Pt(We,ot,Lt,qt){oe.bufferCount++;var St=new ut(ot);Ze[St.id]=St;function Kt(Et){var Xt=pa,An=null,Bn=0,It=0,Tt=1;return Array.isArray(Et)||n(Et)||bi(Et)||Et instanceof ArrayBuffer?An=Et:typeof Et=="number"?Bn=Et|0:Et&&(Q.type(Et,"object","buffer arguments must be an object, a number or an array"),"data"in Et&&(Q(An===null||Array.isArray(An)||n(An)||bi(An),"invalid data for buffer"),An=Et.data),"usage"in Et&&(Q.parameter(Et.usage,Ji,"invalid buffer usage"),Xt=Ji[Et.usage]),"type"in Et&&(Q.parameter(Et.type,Oi,"invalid buffer type"),It=Oi[Et.type]),"dimension"in Et&&(Q.type(Et.dimension,"number","invalid dimension"),Tt=Et.dimension|0),"length"in Et&&(Q.nni(Bn,"buffer length must be a nonnegative integer"),Bn=Et.length|0)),St.bind(),An?Wt(St,An,Xt,It,Tt,qt):(Bn&&I.bufferData(St.type,Bn,Xt),St.dtype=It||Hu,St.usage=Xt,St.dimension=Tt,St.byteLength=Bn),me.profile&&(St.stats.size=St.byteLength*ha[St.dtype]),Kt}function At(Et,Xt){Q(Xt+Et.byteLength<=St.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Et.byteLength+" starting from offset "+Xt+" to a buffer of size "+St.byteLength),I.bufferSubData(St.type,Xt,Et)}function zt(Et,Xt){var An=(Xt||0)|0,Bn;if(St.bind(),n(Et)||Et instanceof ArrayBuffer)At(Et,An);else if(Array.isArray(Et)){if(Et.length>0)if(typeof Et[0]=="number"){var It=so.allocType(St.dtype,Et.length);Ts(It,Et),At(It,An),so.freeType(It)}else if(Array.isArray(Et[0])||n(Et[0])){Bn=xi(Et);var Tt=Or(Et,Bn,St.dtype);At(Tt,An),so.freeType(Tt)}else Q.raise("invalid buffer data")}else if(bi(Et)){Bn=Et.shape;var Ot=Et.stride,Rn=0,tr=0,sn=0,Jn=0;Bn.length===1?(Rn=Bn[0],tr=1,sn=Ot[0],Jn=0):Bn.length===2?(Rn=Bn[0],tr=Bn[1],sn=Ot[0],Jn=Ot[1]):Q.raise("invalid shape");var $n=Array.isArray(Et.data)?St.dtype:oo(Et.data),nr=so.allocType($n,Rn*tr);Ma(nr,Et.data,Rn,tr,sn,Jn,Et.offset),At(nr,An),so.freeType(nr)}else Q.raise("invalid data for buffer subdata");return Kt}return Lt||Kt(We),Kt._reglType="buffer",Kt._buffer=St,Kt.subdata=zt,me.profile&&(Kt.stats=St.stats),Kt.destroy=function(){Ut(St)},Kt}function wt(){Ko(Ze).forEach(function(We){We.buffer=I.createBuffer(),I.bindBuffer(We.type,We.buffer),I.bufferData(We.type,We.persistentData||We.byteLength,We.usage)})}return me.profile&&(oe.getTotalBufferSize=function(){var We=0;return Object.keys(Ze).forEach(function(ot){We+=Ze[ot].stats.size}),We}),{create:Pt,createStream:Dt,destroyStream:Rt,clear:function(){Ko(Ze).forEach(Ut),Nt.forEach(Ut)},getBuffer:function(We){return We&&We._buffer instanceof ut?We._buffer:null},restore:wt,_initBuffer:Wt}}var ac=0,vd=0,uc=1,Io=1,bu=4,Na=4,Uo={points:ac,point:vd,lines:uc,line:Io,triangles:bu,triangle:Na,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},sc=0,Ui=1,ea=4,ul=5120,Si=5121,Ci=5122,Jo=5123,Gi=5124,mi=5125,at=34963,Ct=35040,Ft=35044;function fn(I,oe,me,et){var ct={},Ze=0,ut={uint8:Si,uint16:Jo};oe.oes_element_index_uint&&(ut.uint32=mi);function Nt(wt){this.id=Ze++,ct[this.id]=this,this.buffer=wt,this.primType=ea,this.vertCount=0,this.type=0}Nt.prototype.bind=function(){this.buffer.bind()};var Dt=[];function Rt(wt){var We=Dt.pop();return We||(We=new Nt(me.create(null,at,!0,!1)._buffer)),Wt(We,wt,Ct,-1,-1,0,0),We}function st(wt){Dt.push(wt)}function Wt(wt,We,ot,Lt,qt,St,Kt){wt.buffer.bind();var At;if(We){var zt=Kt;!Kt&&(!n(We)||bi(We)&&!n(We.data))&&(zt=oe.oes_element_index_uint?mi:Jo),me._initBuffer(wt.buffer,We,ot,zt,3)}else I.bufferData(at,St,ot),wt.buffer.dtype=At||Si,wt.buffer.usage=ot,wt.buffer.dimension=3,wt.buffer.byteLength=St;if(At=Kt,!Kt){switch(wt.buffer.dtype){case Si:case ul:At=Si;break;case Jo:case Ci:At=Jo;break;case mi:case Gi:At=mi;break;default:Q.raise("unsupported type for element array")}wt.buffer.dtype=At}wt.type=At,Q(At!==mi||!!oe.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Et=qt;Et<0&&(Et=wt.buffer.byteLength,At===Jo?Et>>=1:At===mi&&(Et>>=2)),wt.vertCount=Et;var Xt=Lt;if(Lt<0){Xt=ea;var An=wt.buffer.dimension;An===1&&(Xt=sc),An===2&&(Xt=Ui),An===3&&(Xt=ea)}wt.primType=Xt}function Ut(wt){et.elementsCount--,Q(wt.buffer!==null,"must not double destroy elements"),delete ct[wt.id],wt.buffer.destroy(),wt.buffer=null}function Pt(wt,We){var ot=me.create(null,at,!0),Lt=new Nt(ot._buffer);et.elementsCount++;function qt(St){if(!St)ot(),Lt.primType=ea,Lt.vertCount=0,Lt.type=Si;else if(typeof St=="number")ot(St),Lt.primType=ea,Lt.vertCount=St|0,Lt.type=Si;else{var Kt=null,At=Ft,zt=-1,Et=-1,Xt=0,An=0;Array.isArray(St)||n(St)||bi(St)?Kt=St:(Q.type(St,"object","invalid arguments for elements"),"data"in St&&(Kt=St.data,Q(Array.isArray(Kt)||n(Kt)||bi(Kt),"invalid data for element buffer")),"usage"in St&&(Q.parameter(St.usage,Ji,"invalid element buffer usage"),At=Ji[St.usage]),"primitive"in St&&(Q.parameter(St.primitive,Uo,"invalid element buffer primitive"),zt=Uo[St.primitive]),"count"in St&&(Q(typeof St.count=="number"&&St.count>=0,"invalid vertex count for elements"),Et=St.count|0),"type"in St&&(Q.parameter(St.type,ut,"invalid buffer type"),An=ut[St.type]),"length"in St?Xt=St.length|0:(Xt=Et,An===Jo||An===Ci?Xt*=2:(An===mi||An===Gi)&&(Xt*=4))),Wt(Lt,Kt,At,zt,Et,Xt,An)}return qt}return qt(wt),qt._reglType="elements",qt._elements=Lt,qt.subdata=function(St,Kt){return ot.subdata(St,Kt),qt},qt.destroy=function(){Ut(Lt)},qt}return{create:Pt,createStream:Rt,destroyStream:st,getElements:function(wt){return typeof wt=="function"&&wt._elements instanceof Nt?wt._elements:null},clear:function(){Ko(ct).forEach(Ut)}}}var ur=new Float32Array(1),xr=new Uint32Array(ur.buffer),io=5123;function S(I){for(var oe=so.allocType(io,I.length),me=0;me<I.length;++me)if(isNaN(I[me]))oe[me]=65535;else if(I[me]===1/0)oe[me]=31744;else if(I[me]===-1/0)oe[me]=64512;else{ur[0]=I[me];var et=xr[0],ct=et>>>31<<15,Ze=(et<<1>>>24)-127,ut=et>>13&1024-1;if(Ze<-24)oe[me]=ct;else if(Ze<-14){var Nt=-14-Ze;oe[me]=ct+(ut+1024>>Nt)}else Ze>15?oe[me]=ct+31744:oe[me]=ct+(Ze+15<<10)+ut}return oe}function A(I){return Array.isArray(I)||n(I)}var L=function(I){return!(I&I-1)&&!!I},ee=34467,ve=3553,Ge=34067,ht=34069,Ht=6408,_n=6406,hr=6407,un=6409,$r=6410,dr=32854,Pr=32855,Wi=36194,po=32819,Di=32820,Ja=33635,Qa=34042,wu=6402,Xu=34041,Pa=35904,Yu=35906,Go=36193,Eu=33776,eu=33777,ka=33778,Ra=33779,Ms=35986,wp=35987,Ep=34798,yd=35840,lc=35841,Ns=35842,mf=35843,Op=36196,Ps=5121,cc=5123,gf=5125,Mo=5126,Ai=10242,_f=10243,bf=10497,sl=33071,ev=33648,ll=10240,tu=10241,fc=9728,ks=9729,qu=9984,cl=9985,dc=9986,Ku=9987,tv=33170,pc=4352,nv=4353,rv=4354,xp=34046,wf=3317,gi=37440,Sp=37441,re=37443,Rs=37444,Ou=33984,va=[qu,dc,cl,Ku],Sr=[0,un,$r,hr,Ht],li={};li[un]=li[_n]=li[wu]=1,li[Xu]=li[$r]=2,li[hr]=li[Pa]=3,li[Ht]=li[Yu]=4;function Cr(I){return"[object "+I+"]"}var ja=Cr("HTMLCanvasElement"),xu=Cr("OffscreenCanvas"),ta=Cr("CanvasRenderingContext2D"),Ef=Cr("ImageBitmap"),Of=Cr("HTMLImageElement"),md=Cr("HTMLVideoElement"),Ap=Object.keys(yi).concat([ja,xu,ta,Ef,Of,md]),Su=[];Su[Ps]=1,Su[Mo]=4,Su[Go]=2,Su[cc]=2,Su[gf]=4;var No=[];No[dr]=2,No[Pr]=2,No[Wi]=2,No[Xu]=4,No[Eu]=.5,No[eu]=.5,No[ka]=1,No[Ra]=1,No[Ms]=.5,No[wp]=1,No[Ep]=1,No[yd]=.5,No[lc]=.25,No[Ns]=.5,No[mf]=.25,No[Op]=.5;function fl(I){return Array.isArray(I)&&(I.length===0||typeof I[0]=="number")}function gd(I){if(!Array.isArray(I))return!1;var oe=I.length;return!(oe===0||!A(I[0]))}function Au(I){return Object.prototype.toString.call(I)}function Ca(I){return Au(I)===ja}function hc(I){return Au(I)===xu}function Zu(I){return Au(I)===ta}function na(I){return Au(I)===Ef}function _d(I){return Au(I)===Of}function bd(I){return Au(I)===md}function Da(I){if(!I)return!1;var oe=Au(I);return Ap.indexOf(oe)>=0?!0:fl(I)||gd(I)||bi(I)}function lo(I){return yi[Object.prototype.toString.call(I)]|0}function Tp(I,oe){var me=oe.length;switch(I.type){case Ps:case cc:case gf:case Mo:var et=so.allocType(I.type,me);et.set(oe),I.data=et;break;case Go:I.data=S(oe);break;default:Q.raise("unsupported texture type, must specify a typed array")}}function wd(I,oe){return so.allocType(I.type===Go?Mo:I.type,oe)}function Po(I,oe){I.type===Go?(I.data=S(oe),so.freeType(oe)):I.data=oe}function Ur(I,oe,me,et,ct,Ze){for(var ut=I.width,Nt=I.height,Dt=I.channels,Rt=ut*Nt*Dt,st=wd(I,Rt),Wt=0,Ut=0;Ut<Nt;++Ut)for(var Pt=0;Pt<ut;++Pt)for(var wt=0;wt<Dt;++wt)st[Wt++]=oe[me*Pt+et*Ut+ct*wt+Ze];Po(I,st)}function Wo(I,oe,me,et,ct,Ze){var ut;if(typeof No[I]<"u"?ut=No[I]:ut=li[I]*Su[oe],Ze&&(ut*=6),ct){for(var Nt=0,Dt=me;Dt>=1;)Nt+=ut*Dt*Dt,Dt/=2;return Nt}else return ut*me*et}function _r(I,oe,me,et,ct,Ze,ut){var Nt={"don't care":pc,"dont care":pc,nice:rv,fast:nv},Dt={repeat:bf,clamp:sl,mirror:ev},Rt={nearest:fc,linear:ks},st=a({mipmap:Ku,"nearest mipmap nearest":qu,"linear mipmap nearest":cl,"nearest mipmap linear":dc,"linear mipmap linear":Ku},Rt),Wt={none:0,browser:Rs},Ut={uint8:Ps,rgba4:po,rgb565:Ja,"rgb5 a1":Di},Pt={alpha:_n,luminance:un,"luminance alpha":$r,rgb:hr,rgba:Ht,rgba4:dr,"rgb5 a1":Pr,rgb565:Wi},wt={};oe.ext_srgb&&(Pt.srgb=Pa,Pt.srgba=Yu),oe.oes_texture_float&&(Ut.float32=Ut.float=Mo),oe.oes_texture_half_float&&(Ut.float16=Ut["half float"]=Go),oe.webgl_depth_texture&&(a(Pt,{depth:wu,"depth stencil":Xu}),a(Ut,{uint16:cc,uint32:gf,"depth stencil":Qa})),oe.webgl_compressed_texture_s3tc&&a(wt,{"rgb s3tc dxt1":Eu,"rgba s3tc dxt1":eu,"rgba s3tc dxt3":ka,"rgba s3tc dxt5":Ra}),oe.webgl_compressed_texture_atc&&a(wt,{"rgb atc":Ms,"rgba atc explicit alpha":wp,"rgba atc interpolated alpha":Ep}),oe.webgl_compressed_texture_pvrtc&&a(wt,{"rgb pvrtc 4bppv1":yd,"rgb pvrtc 2bppv1":lc,"rgba pvrtc 4bppv1":Ns,"rgba pvrtc 2bppv1":mf}),oe.webgl_compressed_texture_etc1&&(wt["rgb etc1"]=Op);var We=Array.prototype.slice.call(I.getParameter(ee));Object.keys(wt).forEach(function(de){var tt=wt[de];We.indexOf(tt)>=0&&(Pt[de]=tt)});var ot=Object.keys(Pt);me.textureFormats=ot;var Lt=[];Object.keys(Pt).forEach(function(de){var tt=Pt[de];Lt[tt]=de});var qt=[];Object.keys(Ut).forEach(function(de){var tt=Ut[de];qt[tt]=de});var St=[];Object.keys(Rt).forEach(function(de){var tt=Rt[de];St[tt]=de});var Kt=[];Object.keys(st).forEach(function(de){var tt=st[de];Kt[tt]=de});var At=[];Object.keys(Dt).forEach(function(de){var tt=Dt[de];At[tt]=de});var zt=ot.reduce(function(de,tt){var Ke=Pt[tt];return Ke===un||Ke===_n||Ke===un||Ke===$r||Ke===wu||Ke===Xu||oe.ext_srgb&&(Ke===Pa||Ke===Yu)?de[Ke]=Ke:Ke===Pr||tt.indexOf("rgba")>=0?de[Ke]=Ht:de[Ke]=hr,de},{});function Et(){this.internalformat=Ht,this.format=Ht,this.type=Ps,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Rs,this.width=0,this.height=0,this.channels=0}function Xt(de,tt){de.internalformat=tt.internalformat,de.format=tt.format,de.type=tt.type,de.compressed=tt.compressed,de.premultiplyAlpha=tt.premultiplyAlpha,de.flipY=tt.flipY,de.unpackAlignment=tt.unpackAlignment,de.colorSpace=tt.colorSpace,de.width=tt.width,de.height=tt.height,de.channels=tt.channels}function An(de,tt){if(!(typeof tt!="object"||!tt)){if("premultiplyAlpha"in tt&&(Q.type(tt.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),de.premultiplyAlpha=tt.premultiplyAlpha),"flipY"in tt&&(Q.type(tt.flipY,"boolean","invalid texture flip"),de.flipY=tt.flipY),"alignment"in tt&&(Q.oneOf(tt.alignment,[1,2,4,8],"invalid texture unpack alignment"),de.unpackAlignment=tt.alignment),"colorSpace"in tt&&(Q.parameter(tt.colorSpace,Wt,"invalid colorSpace"),de.colorSpace=Wt[tt.colorSpace]),"type"in tt){var Ke=tt.type;Q(oe.oes_texture_float||!(Ke==="float"||Ke==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Q(oe.oes_texture_half_float||!(Ke==="half float"||Ke==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Q(oe.webgl_depth_texture||!(Ke==="uint16"||Ke==="uint32"||Ke==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Q.parameter(Ke,Ut,"invalid texture type"),de.type=Ut[Ke]}var en=de.width,pr=de.height,ae=de.channels,Z=!1;"shape"in tt?(Q(Array.isArray(tt.shape)&&tt.shape.length>=2,"shape must be an array"),en=tt.shape[0],pr=tt.shape[1],tt.shape.length===3&&(ae=tt.shape[2],Q(ae>0&&ae<=4,"invalid number of channels"),Z=!0),Q(en>=0&&en<=me.maxTextureSize,"invalid width"),Q(pr>=0&&pr<=me.maxTextureSize,"invalid height")):("radius"in tt&&(en=pr=tt.radius,Q(en>=0&&en<=me.maxTextureSize,"invalid radius")),"width"in tt&&(en=tt.width,Q(en>=0&&en<=me.maxTextureSize,"invalid width")),"height"in tt&&(pr=tt.height,Q(pr>=0&&pr<=me.maxTextureSize,"invalid height")),"channels"in tt&&(ae=tt.channels,Q(ae>0&&ae<=4,"invalid number of channels"),Z=!0)),de.width=en|0,de.height=pr|0,de.channels=ae|0;var Se=!1;if("format"in tt){var Ue=tt.format;Q(oe.webgl_depth_texture||!(Ue==="depth"||Ue==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Q.parameter(Ue,Pt,"invalid texture format");var ze=de.internalformat=Pt[Ue];de.format=zt[ze],Ue in Ut&&("type"in tt||(de.type=Ut[Ue])),Ue in wt&&(de.compressed=!0),Se=!0}!Z&&Se?de.channels=li[de.format]:Z&&!Se?de.channels!==Sr[de.format]&&(de.format=de.internalformat=Sr[de.channels]):Se&&Z&&Q(de.channels===li[de.format],"number of channels inconsistent with specified format")}}function Bn(de){I.pixelStorei(gi,de.flipY),I.pixelStorei(Sp,de.premultiplyAlpha),I.pixelStorei(re,de.colorSpace),I.pixelStorei(wf,de.unpackAlignment)}function It(){Et.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Tt(de,tt){var Ke=null;if(Da(tt)?Ke=tt:tt&&(Q.type(tt,"object","invalid pixel data type"),An(de,tt),"x"in tt&&(de.xOffset=tt.x|0),"y"in tt&&(de.yOffset=tt.y|0),Da(tt.data)&&(Ke=tt.data)),Q(!de.compressed||Ke instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),tt.copy){Q(!Ke,"can not specify copy and data field for the same texture");var en=ct.viewportWidth,pr=ct.viewportHeight;de.width=de.width||en-de.xOffset,de.height=de.height||pr-de.yOffset,de.needsCopy=!0,Q(de.xOffset>=0&&de.xOffset<en&&de.yOffset>=0&&de.yOffset<pr&&de.width>0&&de.width<=en&&de.height>0&&de.height<=pr,"copy texture read out of bounds")}else if(!Ke)de.width=de.width||1,de.height=de.height||1,de.channels=de.channels||4;else if(n(Ke))de.channels=de.channels||4,de.data=Ke,!("type"in tt)&&de.type===Ps&&(de.type=lo(Ke));else if(fl(Ke))de.channels=de.channels||4,Tp(de,Ke),de.alignment=1,de.needsFree=!0;else if(bi(Ke)){var ae=Ke.data;!Array.isArray(ae)&&de.type===Ps&&(de.type=lo(ae));var Z=Ke.shape,Se=Ke.stride,Ue,ze,Ne,Te,Ie,se;Z.length===3?(Ne=Z[2],se=Se[2]):(Q(Z.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Ne=1,se=1),Ue=Z[0],ze=Z[1],Te=Se[0],Ie=Se[1],de.alignment=1,de.width=Ue,de.height=ze,de.channels=Ne,de.format=de.internalformat=Sr[Ne],de.needsFree=!0,Ur(de,ae,Te,Ie,se,Ke.offset)}else if(Ca(Ke)||hc(Ke)||Zu(Ke))Ca(Ke)||hc(Ke)?de.element=Ke:de.element=Ke.canvas,de.width=de.element.width,de.height=de.element.height,de.channels=4;else if(na(Ke))de.element=Ke,de.width=Ke.width,de.height=Ke.height,de.channels=4;else if(_d(Ke))de.element=Ke,de.width=Ke.naturalWidth,de.height=Ke.naturalHeight,de.channels=4;else if(bd(Ke))de.element=Ke,de.width=Ke.videoWidth,de.height=Ke.videoHeight,de.channels=4;else if(gd(Ke)){var be=de.width||Ke[0].length,ue=de.height||Ke.length,Be=de.channels;A(Ke[0][0])?Be=Be||Ke[0][0].length:Be=Be||1;for(var Ye=Bi.shape(Ke),d=1,m=0;m<Ye.length;++m)d*=Ye[m];var w=wd(de,d);Bi.flatten(Ke,Ye,"",w),Po(de,w),de.alignment=1,de.width=be,de.height=ue,de.channels=Be,de.format=de.internalformat=Sr[Be],de.needsFree=!0}de.type===Mo?Q(me.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):de.type===Go&&Q(me.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Ot(de,tt,Ke){var en=de.element,pr=de.data,ae=de.internalformat,Z=de.format,Se=de.type,Ue=de.width,ze=de.height;Bn(de),en?I.texImage2D(tt,Ke,Z,Z,Se,en):de.compressed?I.compressedTexImage2D(tt,Ke,ae,Ue,ze,0,pr):de.needsCopy?(et(),I.copyTexImage2D(tt,Ke,Z,de.xOffset,de.yOffset,Ue,ze,0)):I.texImage2D(tt,Ke,Z,Ue,ze,0,Z,Se,pr||null)}function Rn(de,tt,Ke,en,pr){var ae=de.element,Z=de.data,Se=de.internalformat,Ue=de.format,ze=de.type,Ne=de.width,Te=de.height;Bn(de),ae?I.texSubImage2D(tt,pr,Ke,en,Ue,ze,ae):de.compressed?I.compressedTexSubImage2D(tt,pr,Ke,en,Se,Ne,Te,Z):de.needsCopy?(et(),I.copyTexSubImage2D(tt,pr,Ke,en,de.xOffset,de.yOffset,Ne,Te)):I.texSubImage2D(tt,pr,Ke,en,Ne,Te,Ue,ze,Z)}var tr=[];function sn(){return tr.pop()||new It}function Jn(de){de.needsFree&&so.freeType(de.data),It.call(de),tr.push(de)}function $n(){Et.call(this),this.genMipmaps=!1,this.mipmapHint=pc,this.mipmask=0,this.images=Array(16)}function nr(de,tt,Ke){var en=de.images[0]=sn();de.mipmask=1,en.width=de.width=tt,en.height=de.height=Ke,en.channels=de.channels=4}function yr(de,tt){var Ke=null;if(Da(tt))Ke=de.images[0]=sn(),Xt(Ke,de),Tt(Ke,tt),de.mipmask=1;else if(An(de,tt),Array.isArray(tt.mipmap))for(var en=tt.mipmap,pr=0;pr<en.length;++pr)Ke=de.images[pr]=sn(),Xt(Ke,de),Ke.width>>=pr,Ke.height>>=pr,Tt(Ke,en[pr]),de.mipmask|=1<<pr;else Ke=de.images[0]=sn(),Xt(Ke,de),Tt(Ke,tt),de.mipmask=1;Xt(de,de.images[0]),de.compressed&&(de.internalformat===Eu||de.internalformat===eu||de.internalformat===ka||de.internalformat===Ra)&&Q(de.width%4===0&&de.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Eo(de,tt){for(var Ke=de.images,en=0;en<Ke.length;++en){if(!Ke[en])return;Ot(Ke[en],tt,en)}}var Ro=[];function lr(){var de=Ro.pop()||new $n;Et.call(de),de.mipmask=0;for(var tt=0;tt<16;++tt)de.images[tt]=null;return de}function Lo(de){for(var tt=de.images,Ke=0;Ke<tt.length;++Ke)tt[Ke]&&Jn(tt[Ke]),tt[Ke]=null;Ro.push(de)}function Zr(){this.minFilter=fc,this.magFilter=fc,this.wrapS=sl,this.wrapT=sl,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=pc}function Oo(de,tt){if("min"in tt){var Ke=tt.min;Q.parameter(Ke,st),de.minFilter=st[Ke],va.indexOf(de.minFilter)>=0&&!("faces"in tt)&&(de.genMipmaps=!0)}if("mag"in tt){var en=tt.mag;Q.parameter(en,Rt),de.magFilter=Rt[en]}var pr=de.wrapS,ae=de.wrapT;if("wrap"in tt){var Z=tt.wrap;typeof Z=="string"?(Q.parameter(Z,Dt),pr=ae=Dt[Z]):Array.isArray(Z)&&(Q.parameter(Z[0],Dt),Q.parameter(Z[1],Dt),pr=Dt[Z[0]],ae=Dt[Z[1]])}else{if("wrapS"in tt){var Se=tt.wrapS;Q.parameter(Se,Dt),pr=Dt[Se]}if("wrapT"in tt){var Ue=tt.wrapT;Q.parameter(Ue,Dt),ae=Dt[Ue]}}if(de.wrapS=pr,de.wrapT=ae,"anisotropic"in tt){var ze=tt.anisotropic;Q(typeof ze=="number"&&ze>=1&&ze<=me.maxAnisotropic,"aniso samples must be between 1 and "),de.anisotropic=tt.anisotropic}if("mipmap"in tt){var Ne=!1;switch(typeof tt.mipmap){case"string":Q.parameter(tt.mipmap,Nt,"invalid mipmap hint"),de.mipmapHint=Nt[tt.mipmap],de.genMipmaps=!0,Ne=!0;break;case"boolean":Ne=de.genMipmaps=tt.mipmap;break;case"object":Q(Array.isArray(tt.mipmap),"invalid mipmap type"),de.genMipmaps=!1,Ne=!0;break;default:Q.raise("invalid mipmap type")}Ne&&!("min"in tt)&&(de.minFilter=qu)}}function jo(de,tt){I.texParameteri(tt,tu,de.minFilter),I.texParameteri(tt,ll,de.magFilter),I.texParameteri(tt,Ai,de.wrapS),I.texParameteri(tt,_f,de.wrapT),oe.ext_texture_filter_anisotropic&&I.texParameteri(tt,xp,de.anisotropic),de.genMipmaps&&(I.hint(tv,de.mipmapHint),I.generateMipmap(tt))}var yo=0,co={},Xo=me.maxTextureUnits,mo=Array(Xo).map(function(){return null});function Kn(de){Et.call(this),this.mipmask=0,this.internalformat=Ht,this.id=yo++,this.refCount=1,this.target=de,this.texture=I.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Zr,ut.profile&&(this.stats={size:0})}function Qo(de){I.activeTexture(Ou),I.bindTexture(de.target,de.texture)}function Tr(){var de=mo[0];de?I.bindTexture(de.target,de.texture):I.bindTexture(ve,null)}function kn(de){var tt=de.texture;Q(tt,"must not double destroy texture");var Ke=de.unit,en=de.target;Ke>=0&&(I.activeTexture(Ou+Ke),I.bindTexture(en,null),mo[Ke]=null),I.deleteTexture(tt),de.texture=null,de.params=null,de.pixels=null,de.refCount=0,delete co[de.id],Ze.textureCount--}a(Kn.prototype,{bind:function(){var de=this;de.bindCount+=1;var tt=de.unit;if(tt<0){for(var Ke=0;Ke<Xo;++Ke){var en=mo[Ke];if(en){if(en.bindCount>0)continue;en.unit=-1}mo[Ke]=de,tt=Ke;break}tt>=Xo&&Q.raise("insufficient number of texture units"),ut.profile&&Ze.maxTextureUnits<tt+1&&(Ze.maxTextureUnits=tt+1),de.unit=tt,I.activeTexture(Ou+tt),I.bindTexture(de.target,de.texture)}return tt},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&kn(this)}});function cr(de,tt){var Ke=new Kn(ve);co[Ke.id]=Ke,Ze.textureCount++;function en(Z,Se){var Ue=Ke.texInfo;Zr.call(Ue);var ze=lr();return typeof Z=="number"?typeof Se=="number"?nr(ze,Z|0,Se|0):nr(ze,Z|0,Z|0):Z?(Q.type(Z,"object","invalid arguments to regl.texture"),Oo(Ue,Z),yr(ze,Z)):nr(ze,1,1),Ue.genMipmaps&&(ze.mipmask=(ze.width<<1)-1),Ke.mipmask=ze.mipmask,Xt(Ke,ze),Q.texture2D(Ue,ze,me),Ke.internalformat=ze.internalformat,en.width=ze.width,en.height=ze.height,Qo(Ke),Eo(ze,ve),jo(Ue,ve),Tr(),Lo(ze),ut.profile&&(Ke.stats.size=Wo(Ke.internalformat,Ke.type,ze.width,ze.height,Ue.genMipmaps,!1)),en.format=Lt[Ke.internalformat],en.type=qt[Ke.type],en.mag=St[Ue.magFilter],en.min=Kt[Ue.minFilter],en.wrapS=At[Ue.wrapS],en.wrapT=At[Ue.wrapT],en}function pr(Z,Se,Ue,ze){Q(!!Z,"must specify image data");var Ne=Se|0,Te=Ue|0,Ie=ze|0,se=sn();return Xt(se,Ke),se.width=0,se.height=0,Tt(se,Z),se.width=se.width||(Ke.width>>Ie)-Ne,se.height=se.height||(Ke.height>>Ie)-Te,Q(Ke.type===se.type&&Ke.format===se.format&&Ke.internalformat===se.internalformat,"incompatible format for texture.subimage"),Q(Ne>=0&&Te>=0&&Ne+se.width<=Ke.width&&Te+se.height<=Ke.height,"texture.subimage write out of bounds"),Q(Ke.mipmask&1<<Ie,"missing mipmap data"),Q(se.data||se.element||se.needsCopy,"missing image data"),Qo(Ke),Rn(se,ve,Ne,Te,Ie),Tr(),Jn(se),en}function ae(Z,Se){var Ue=Z|0,ze=Se|0||Ue;if(Ue===Ke.width&&ze===Ke.height)return en;en.width=Ke.width=Ue,en.height=Ke.height=ze,Qo(Ke);for(var Ne=0;Ke.mipmask>>Ne;++Ne){var Te=Ue>>Ne,Ie=ze>>Ne;if(!Te||!Ie)break;I.texImage2D(ve,Ne,Ke.format,Te,Ie,0,Ke.format,Ke.type,null)}return Tr(),ut.profile&&(Ke.stats.size=Wo(Ke.internalformat,Ke.type,Ue,ze,!1,!1)),en}return en(de,tt),en.subimage=pr,en.resize=ae,en._reglType="texture2d",en._texture=Ke,ut.profile&&(en.stats=Ke.stats),en.destroy=function(){Ke.decRef()},en}function Un(de,tt,Ke,en,pr,ae){var Z=new Kn(Ge);co[Z.id]=Z,Ze.cubeCount++;var Se=new Array(6);function Ue(Te,Ie,se,be,ue,Be){var Ye,d=Z.texInfo;for(Zr.call(d),Ye=0;Ye<6;++Ye)Se[Ye]=lr();if(typeof Te=="number"||!Te){var m=Te|0||1;for(Ye=0;Ye<6;++Ye)nr(Se[Ye],m,m)}else if(typeof Te=="object")if(Ie)yr(Se[0],Te),yr(Se[1],Ie),yr(Se[2],se),yr(Se[3],be),yr(Se[4],ue),yr(Se[5],Be);else if(Oo(d,Te),An(Z,Te),"faces"in Te){var w=Te.faces;for(Q(Array.isArray(w)&&w.length===6,"cube faces must be a length 6 array"),Ye=0;Ye<6;++Ye)Q(typeof w[Ye]=="object"&&!!w[Ye],"invalid input for cube map face"),Xt(Se[Ye],Z),yr(Se[Ye],w[Ye])}else for(Ye=0;Ye<6;++Ye)yr(Se[Ye],Te);else Q.raise("invalid arguments to cube map");for(Xt(Z,Se[0]),me.npotTextureCube||Q(L(Z.width)&&L(Z.height),"your browser does not support non power or two texture dimensions"),d.genMipmaps?Z.mipmask=(Se[0].width<<1)-1:Z.mipmask=Se[0].mipmask,Q.textureCube(Z,d,Se,me),Z.internalformat=Se[0].internalformat,Ue.width=Se[0].width,Ue.height=Se[0].height,Qo(Z),Ye=0;Ye<6;++Ye)Eo(Se[Ye],ht+Ye);for(jo(d,Ge),Tr(),ut.profile&&(Z.stats.size=Wo(Z.internalformat,Z.type,Ue.width,Ue.height,d.genMipmaps,!0)),Ue.format=Lt[Z.internalformat],Ue.type=qt[Z.type],Ue.mag=St[d.magFilter],Ue.min=Kt[d.minFilter],Ue.wrapS=At[d.wrapS],Ue.wrapT=At[d.wrapT],Ye=0;Ye<6;++Ye)Lo(Se[Ye]);return Ue}function ze(Te,Ie,se,be,ue){Q(!!Ie,"must specify image data"),Q(typeof Te=="number"&&Te===(Te|0)&&Te>=0&&Te<6,"invalid face");var Be=se|0,Ye=be|0,d=ue|0,m=sn();return Xt(m,Z),m.width=0,m.height=0,Tt(m,Ie),m.width=m.width||(Z.width>>d)-Be,m.height=m.height||(Z.height>>d)-Ye,Q(Z.type===m.type&&Z.format===m.format&&Z.internalformat===m.internalformat,"incompatible format for texture.subimage"),Q(Be>=0&&Ye>=0&&Be+m.width<=Z.width&&Ye+m.height<=Z.height,"texture.subimage write out of bounds"),Q(Z.mipmask&1<<d,"missing mipmap data"),Q(m.data||m.element||m.needsCopy,"missing image data"),Qo(Z),Rn(m,ht+Te,Be,Ye,d),Tr(),Jn(m),Ue}function Ne(Te){var Ie=Te|0;if(Ie!==Z.width){Ue.width=Z.width=Ie,Ue.height=Z.height=Ie,Qo(Z);for(var se=0;se<6;++se)for(var be=0;Z.mipmask>>be;++be)I.texImage2D(ht+se,be,Z.format,Ie>>be,Ie>>be,0,Z.format,Z.type,null);return Tr(),ut.profile&&(Z.stats.size=Wo(Z.internalformat,Z.type,Ue.width,Ue.height,!1,!0)),Ue}}return Ue(de,tt,Ke,en,pr,ae),Ue.subimage=ze,Ue.resize=Ne,Ue._reglType="textureCube",Ue._texture=Z,ut.profile&&(Ue.stats=Z.stats),Ue.destroy=function(){Z.decRef()},Ue}function ro(){for(var de=0;de<Xo;++de)I.activeTexture(Ou+de),I.bindTexture(ve,null),mo[de]=null;Ko(co).forEach(kn),Ze.cubeCount=0,Ze.textureCount=0}ut.profile&&(Ze.getTotalTextureSize=function(){var de=0;return Object.keys(co).forEach(function(tt){de+=co[tt].stats.size}),de});function Ea(){for(var de=0;de<Xo;++de){var tt=mo[de];tt&&(tt.bindCount=0,tt.unit=-1,mo[de]=null)}Ko(co).forEach(function(Ke){Ke.texture=I.createTexture(),I.bindTexture(Ke.target,Ke.texture);for(var en=0;en<32;++en)if(Ke.mipmask&1<<en)if(Ke.target===ve)I.texImage2D(ve,en,Ke.internalformat,Ke.width>>en,Ke.height>>en,0,Ke.internalformat,Ke.type,null);else for(var pr=0;pr<6;++pr)I.texImage2D(ht+pr,en,Ke.internalformat,Ke.width>>en,Ke.height>>en,0,Ke.internalformat,Ke.type,null);jo(Ke.texInfo,Ke.target)})}function Du(){for(var de=0;de<Xo;++de){var tt=mo[de];tt&&(tt.bindCount=0,tt.unit=-1,mo[de]=null),I.activeTexture(Ou+de),I.bindTexture(ve,null),I.bindTexture(Ge,null)}}return{create2D:cr,createCube:Un,clear:ro,getTexture:function(de){return null},restore:Ea,refresh:Du}}var to=36161,Pn=32854,no=32855,vc=36194,nu=33189,xf=36168,ho=34041,go=35907,Ed=34836,Od=34842,yc=34843,Ti=[];Ti[Pn]=2,Ti[no]=2,Ti[vc]=2,Ti[nu]=2,Ti[xf]=1,Ti[ho]=4,Ti[go]=4,Ti[Ed]=16,Ti[Od]=8,Ti[yc]=6;function Sf(I,oe,me){return Ti[I]*oe*me}var dl=function(I,oe,me,et,ct){var Ze={rgba4:Pn,rgb565:vc,"rgb5 a1":no,depth:nu,stencil:xf,"depth stencil":ho};oe.ext_srgb&&(Ze.srgba=go),oe.ext_color_buffer_half_float&&(Ze.rgba16f=Od,Ze.rgb16f=yc),oe.webgl_color_buffer_float&&(Ze.rgba32f=Ed);var ut=[];Object.keys(Ze).forEach(function(Pt){var wt=Ze[Pt];ut[wt]=Pt});var Nt=0,Dt={};function Rt(Pt){this.id=Nt++,this.refCount=1,this.renderbuffer=Pt,this.format=Pn,this.width=0,this.height=0,ct.profile&&(this.stats={size:0})}Rt.prototype.decRef=function(){--this.refCount<=0&&st(this)};function st(Pt){var wt=Pt.renderbuffer;Q(wt,"must not double destroy renderbuffer"),I.bindRenderbuffer(to,null),I.deleteRenderbuffer(wt),Pt.renderbuffer=null,Pt.refCount=0,delete Dt[Pt.id],et.renderbufferCount--}function Wt(Pt,wt){var We=new Rt(I.createRenderbuffer());Dt[We.id]=We,et.renderbufferCount++;function ot(qt,St){var Kt=0,At=0,zt=Pn;if(typeof qt=="object"&&qt){var Et=qt;if("shape"in Et){var Xt=Et.shape;Q(Array.isArray(Xt)&&Xt.length>=2,"invalid renderbuffer shape"),Kt=Xt[0]|0,At=Xt[1]|0}else"radius"in Et&&(Kt=At=Et.radius|0),"width"in Et&&(Kt=Et.width|0),"height"in Et&&(At=Et.height|0);"format"in Et&&(Q.parameter(Et.format,Ze,"invalid renderbuffer format"),zt=Ze[Et.format])}else typeof qt=="number"?(Kt=qt|0,typeof St=="number"?At=St|0:At=Kt):qt?Q.raise("invalid arguments to renderbuffer constructor"):Kt=At=1;if(Q(Kt>0&&At>0&&Kt<=me.maxRenderbufferSize&&At<=me.maxRenderbufferSize,"invalid renderbuffer size"),!(Kt===We.width&&At===We.height&&zt===We.format))return ot.width=We.width=Kt,ot.height=We.height=At,We.format=zt,I.bindRenderbuffer(to,We.renderbuffer),I.renderbufferStorage(to,zt,Kt,At),Q(I.getError()===0,"invalid render buffer format"),ct.profile&&(We.stats.size=Sf(We.format,We.width,We.height)),ot.format=ut[We.format],ot}function Lt(qt,St){var Kt=qt|0,At=St|0||Kt;return Kt===We.width&&At===We.height||(Q(Kt>0&&At>0&&Kt<=me.maxRenderbufferSize&&At<=me.maxRenderbufferSize,"invalid renderbuffer size"),ot.width=We.width=Kt,ot.height=We.height=At,I.bindRenderbuffer(to,We.renderbuffer),I.renderbufferStorage(to,We.format,Kt,At),Q(I.getError()===0,"invalid render buffer format"),ct.profile&&(We.stats.size=Sf(We.format,We.width,We.height))),ot}return ot(Pt,wt),ot.resize=Lt,ot._reglType="renderbuffer",ot._renderbuffer=We,ct.profile&&(ot.stats=We.stats),ot.destroy=function(){We.decRef()},ot}ct.profile&&(et.getTotalRenderbufferSize=function(){var Pt=0;return Object.keys(Dt).forEach(function(wt){Pt+=Dt[wt].stats.size}),Pt});function Ut(){Ko(Dt).forEach(function(Pt){Pt.renderbuffer=I.createRenderbuffer(),I.bindRenderbuffer(to,Pt.renderbuffer),I.renderbufferStorage(to,Pt.format,Pt.width,Pt.height)}),I.bindRenderbuffer(to,null)}return{create:Wt,clear:function(){Ko(Dt).forEach(st)},restore:Ut}},ya=36160,Ju=36161,Tu=3553,ma=34069,Mp=36064,ru=36096,ra=36128,xd=33306,Sd=36053,Af=36054,Np=36055,Pp=36057,kp=36061,Ad=36193,pl=5121,Td=5126,mc=6407,br=6408,ov=6402,Md=[mc,br],Qu=[];Qu[br]=4,Qu[mc]=3;var gc=[];gc[pl]=1,gc[Td]=4,gc[Ad]=2;var iv=32854,av=32855,ga=36194,Nd=33189,Tf=36168,Mf=34041,Rp=35907,Pd=34836,zi=34842,es=34843,Nf=[iv,av,ga,Rp,zi,es,Pd],js={};js[Sd]="complete",js[Af]="incomplete attachment",js[Pp]="incomplete dimensions",js[Np]="incomplete, missing attachment",js[kp]="unsupported";function _c(I,oe,me,et,ct,Ze){var ut={cur:null,next:null,dirty:!1,setFBO:null},Nt=["rgba"],Dt=["rgba4","rgb565","rgb5 a1"];oe.ext_srgb&&Dt.push("srgba"),oe.ext_color_buffer_half_float&&Dt.push("rgba16f","rgb16f"),oe.webgl_color_buffer_float&&Dt.push("rgba32f");var Rt=["uint8"];oe.oes_texture_half_float&&Rt.push("half float","float16"),oe.oes_texture_float&&Rt.push("float","float32");function st(It,Tt,Ot){this.target=It,this.texture=Tt,this.renderbuffer=Ot;var Rn=0,tr=0;Tt?(Rn=Tt.width,tr=Tt.height):Ot&&(Rn=Ot.width,tr=Ot.height),this.width=Rn,this.height=tr}function Wt(It){It&&(It.texture&&It.texture._texture.decRef(),It.renderbuffer&&It.renderbuffer._renderbuffer.decRef())}function Ut(It,Tt,Ot){if(It)if(It.texture){var Rn=It.texture._texture,tr=Math.max(1,Rn.width),sn=Math.max(1,Rn.height);Q(tr===Tt&&sn===Ot,"inconsistent width/height for supplied texture"),Rn.refCount+=1}else{var Jn=It.renderbuffer._renderbuffer;Q(Jn.width===Tt&&Jn.height===Ot,"inconsistent width/height for renderbuffer"),Jn.refCount+=1}}function Pt(It,Tt){Tt&&(Tt.texture?I.framebufferTexture2D(ya,It,Tt.target,Tt.texture._texture.texture,0):I.framebufferRenderbuffer(ya,It,Ju,Tt.renderbuffer._renderbuffer.renderbuffer))}function wt(It){var Tt=Tu,Ot=null,Rn=null,tr=It;typeof It=="object"&&(tr=It.data,"target"in It&&(Tt=It.target|0)),Q.type(tr,"function","invalid attachment data");var sn=tr._reglType;return sn==="texture2d"?(Ot=tr,Q(Tt===Tu)):sn==="textureCube"?(Ot=tr,Q(Tt>=ma&&Tt<ma+6,"invalid cube map target")):sn==="renderbuffer"?(Rn=tr,Tt=Ju):Q.raise("invalid regl object for attachment"),new st(Tt,Ot,Rn)}function We(It,Tt,Ot,Rn,tr){if(Ot){var sn=et.create2D({width:It,height:Tt,format:Rn,type:tr});return sn._texture.refCount=0,new st(Tu,sn,null)}else{var Jn=ct.create({width:It,height:Tt,format:Rn});return Jn._renderbuffer.refCount=0,new st(Ju,null,Jn)}}function ot(It){return It&&(It.texture||It.renderbuffer)}function Lt(It,Tt,Ot){It&&(It.texture?It.texture.resize(Tt,Ot):It.renderbuffer&&It.renderbuffer.resize(Tt,Ot),It.width=Tt,It.height=Ot)}var qt=0,St={};function Kt(){this.id=qt++,St[this.id]=this,this.framebuffer=I.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function At(It){It.colorAttachments.forEach(Wt),Wt(It.depthAttachment),Wt(It.stencilAttachment),Wt(It.depthStencilAttachment)}function zt(It){var Tt=It.framebuffer;Q(Tt,"must not double destroy framebuffer"),I.deleteFramebuffer(Tt),It.framebuffer=null,Ze.framebufferCount--,delete St[It.id]}function Et(It){var Tt;I.bindFramebuffer(ya,It.framebuffer);var Ot=It.colorAttachments;for(Tt=0;Tt<Ot.length;++Tt)Pt(Mp+Tt,Ot[Tt]);for(Tt=Ot.length;Tt<me.maxColorAttachments;++Tt)I.framebufferTexture2D(ya,Mp+Tt,Tu,null,0);I.framebufferTexture2D(ya,xd,Tu,null,0),I.framebufferTexture2D(ya,ru,Tu,null,0),I.framebufferTexture2D(ya,ra,Tu,null,0),Pt(ru,It.depthAttachment),Pt(ra,It.stencilAttachment),Pt(xd,It.depthStencilAttachment);var Rn=I.checkFramebufferStatus(ya);!I.isContextLost()&&Rn!==Sd&&Q.raise("framebuffer configuration not supported, status = "+js[Rn]),I.bindFramebuffer(ya,ut.next?ut.next.framebuffer:null),ut.cur=ut.next,I.getError()}function Xt(It,Tt){var Ot=new Kt;Ze.framebufferCount++;function Rn(sn,Jn){var $n;Q(ut.next!==Ot,"can not update framebuffer which is currently in use");var nr=0,yr=0,Eo=!0,Ro=!0,lr=null,Lo=!0,Zr="rgba",Oo="uint8",jo=1,yo=null,co=null,Xo=null,mo=!1;if(typeof sn=="number")nr=sn|0,yr=Jn|0||nr;else if(!sn)nr=yr=1;else{Q.type(sn,"object","invalid arguments for framebuffer");var Kn=sn;if("shape"in Kn){var Qo=Kn.shape;Q(Array.isArray(Qo)&&Qo.length>=2,"invalid shape for framebuffer"),nr=Qo[0],yr=Qo[1]}else"radius"in Kn&&(nr=yr=Kn.radius),"width"in Kn&&(nr=Kn.width),"height"in Kn&&(yr=Kn.height);("color"in Kn||"colors"in Kn)&&(lr=Kn.color||Kn.colors,Array.isArray(lr)&&Q(lr.length===1||oe.webgl_draw_buffers,"multiple render targets not supported")),lr||("colorCount"in Kn&&(jo=Kn.colorCount|0,Q(jo>0,"invalid color buffer count")),"colorTexture"in Kn&&(Lo=!!Kn.colorTexture,Zr="rgba4"),"colorType"in Kn&&(Oo=Kn.colorType,Lo?(Q(oe.oes_texture_float||!(Oo==="float"||Oo==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Q(oe.oes_texture_half_float||!(Oo==="half float"||Oo==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Oo==="half float"||Oo==="float16"?(Q(oe.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Zr="rgba16f"):(Oo==="float"||Oo==="float32")&&(Q(oe.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Zr="rgba32f"),Q.oneOf(Oo,Rt,"invalid color type")),"colorFormat"in Kn&&(Zr=Kn.colorFormat,Nt.indexOf(Zr)>=0?Lo=!0:Dt.indexOf(Zr)>=0?Lo=!1:Lo?Q.oneOf(Kn.colorFormat,Nt,"invalid color format for texture"):Q.oneOf(Kn.colorFormat,Dt,"invalid color format for renderbuffer"))),("depthTexture"in Kn||"depthStencilTexture"in Kn)&&(mo=!!(Kn.depthTexture||Kn.depthStencilTexture),Q(!mo||oe.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Kn&&(typeof Kn.depth=="boolean"?Eo=Kn.depth:(yo=Kn.depth,Ro=!1)),"stencil"in Kn&&(typeof Kn.stencil=="boolean"?Ro=Kn.stencil:(co=Kn.stencil,Eo=!1)),"depthStencil"in Kn&&(typeof Kn.depthStencil=="boolean"?Eo=Ro=Kn.depthStencil:(Xo=Kn.depthStencil,Eo=!1,Ro=!1))}var Tr=null,kn=null,cr=null,Un=null;if(Array.isArray(lr))Tr=lr.map(wt);else if(lr)Tr=[wt(lr)];else for(Tr=new Array(jo),$n=0;$n<jo;++$n)Tr[$n]=We(nr,yr,Lo,Zr,Oo);Q(oe.webgl_draw_buffers||Tr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Q(Tr.length<=me.maxColorAttachments,"too many color attachments, not supported"),nr=nr||Tr[0].width,yr=yr||Tr[0].height,yo?kn=wt(yo):Eo&&!Ro&&(kn=We(nr,yr,mo,"depth","uint32")),co?cr=wt(co):Ro&&!Eo&&(cr=We(nr,yr,!1,"stencil","uint8")),Xo?Un=wt(Xo):!yo&&!co&&Ro&&Eo&&(Un=We(nr,yr,mo,"depth stencil","depth stencil")),Q(!!yo+!!co+!!Xo<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var ro=null;for($n=0;$n<Tr.length;++$n)if(Ut(Tr[$n],nr,yr),Q(!Tr[$n]||Tr[$n].texture&&Md.indexOf(Tr[$n].texture._texture.format)>=0||Tr[$n].renderbuffer&&Nf.indexOf(Tr[$n].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+$n+" is invalid"),Tr[$n]&&Tr[$n].texture){var Ea=Qu[Tr[$n].texture._texture.format]*gc[Tr[$n].texture._texture.type];ro===null?ro=Ea:Q(ro===Ea,"all color attachments much have the same number of bits per pixel.")}return Ut(kn,nr,yr),Q(!kn||kn.texture&&kn.texture._texture.format===ov||kn.renderbuffer&&kn.renderbuffer._renderbuffer.format===Nd,"invalid depth attachment for framebuffer object"),Ut(cr,nr,yr),Q(!cr||cr.renderbuffer&&cr.renderbuffer._renderbuffer.format===Tf,"invalid stencil attachment for framebuffer object"),Ut(Un,nr,yr),Q(!Un||Un.texture&&Un.texture._texture.format===Mf||Un.renderbuffer&&Un.renderbuffer._renderbuffer.format===Mf,"invalid depth-stencil attachment for framebuffer object"),At(Ot),Ot.width=nr,Ot.height=yr,Ot.colorAttachments=Tr,Ot.depthAttachment=kn,Ot.stencilAttachment=cr,Ot.depthStencilAttachment=Un,Rn.color=Tr.map(ot),Rn.depth=ot(kn),Rn.stencil=ot(cr),Rn.depthStencil=ot(Un),Rn.width=Ot.width,Rn.height=Ot.height,Et(Ot),Rn}function tr(sn,Jn){Q(ut.next!==Ot,"can not resize a framebuffer which is currently in use");var $n=Math.max(sn|0,1),nr=Math.max(Jn|0||$n,1);if($n===Ot.width&&nr===Ot.height)return Rn;for(var yr=Ot.colorAttachments,Eo=0;Eo<yr.length;++Eo)Lt(yr[Eo],$n,nr);return Lt(Ot.depthAttachment,$n,nr),Lt(Ot.stencilAttachment,$n,nr),Lt(Ot.depthStencilAttachment,$n,nr),Ot.width=Rn.width=$n,Ot.height=Rn.height=nr,Et(Ot),Rn}return Rn(It,Tt),a(Rn,{resize:tr,_reglType:"framebuffer",_framebuffer:Ot,destroy:function(){zt(Ot),At(Ot)},use:function(sn){ut.setFBO({framebuffer:Rn},sn)}})}function An(It){var Tt=Array(6);function Ot(tr){var sn;Q(Tt.indexOf(ut.next)<0,"can not update framebuffer which is currently in use");var Jn={color:null},$n=0,nr=null,yr="rgba",Eo="uint8",Ro=1;if(typeof tr=="number")$n=tr|0;else if(!tr)$n=1;else{Q.type(tr,"object","invalid arguments for framebuffer");var lr=tr;if("shape"in lr){var Lo=lr.shape;Q(Array.isArray(Lo)&&Lo.length>=2,"invalid shape for framebuffer"),Q(Lo[0]===Lo[1],"cube framebuffer must be square"),$n=Lo[0]}else"radius"in lr&&($n=lr.radius|0),"width"in lr?($n=lr.width|0,"height"in lr&&Q(lr.height===$n,"must be square")):"height"in lr&&($n=lr.height|0);("color"in lr||"colors"in lr)&&(nr=lr.color||lr.colors,Array.isArray(nr)&&Q(nr.length===1||oe.webgl_draw_buffers,"multiple render targets not supported")),nr||("colorCount"in lr&&(Ro=lr.colorCount|0,Q(Ro>0,"invalid color buffer count")),"colorType"in lr&&(Q.oneOf(lr.colorType,Rt,"invalid color type"),Eo=lr.colorType),"colorFormat"in lr&&(yr=lr.colorFormat,Q.oneOf(lr.colorFormat,Nt,"invalid color format for texture"))),"depth"in lr&&(Jn.depth=lr.depth),"stencil"in lr&&(Jn.stencil=lr.stencil),"depthStencil"in lr&&(Jn.depthStencil=lr.depthStencil)}var Zr;if(nr)if(Array.isArray(nr))for(Zr=[],sn=0;sn<nr.length;++sn)Zr[sn]=nr[sn];else Zr=[nr];else{Zr=Array(Ro);var Oo={radius:$n,format:yr,type:Eo};for(sn=0;sn<Ro;++sn)Zr[sn]=et.createCube(Oo)}for(Jn.color=Array(Zr.length),sn=0;sn<Zr.length;++sn){var jo=Zr[sn];Q(typeof jo=="function"&&jo._reglType==="textureCube","invalid cube map"),$n=$n||jo.width,Q(jo.width===$n&&jo.height===$n,"invalid cube map shape"),Jn.color[sn]={target:ma,data:Zr[sn]}}for(sn=0;sn<6;++sn){for(var yo=0;yo<Zr.length;++yo)Jn.color[yo].target=ma+sn;sn>0&&(Jn.depth=Tt[0].depth,Jn.stencil=Tt[0].stencil,Jn.depthStencil=Tt[0].depthStencil),Tt[sn]?Tt[sn](Jn):Tt[sn]=Xt(Jn)}return a(Ot,{width:$n,height:$n,color:Zr})}function Rn(tr){var sn,Jn=tr|0;if(Q(Jn>0&&Jn<=me.maxCubeMapSize,"invalid radius for cube fbo"),Jn===Ot.width)return Ot;var $n=Ot.color;for(sn=0;sn<$n.length;++sn)$n[sn].resize(Jn);for(sn=0;sn<6;++sn)Tt[sn].resize(Jn);return Ot.width=Ot.height=Jn,Ot}return Ot(It),a(Ot,{faces:Tt,resize:Rn,_reglType:"framebufferCube",destroy:function(){Tt.forEach(function(tr){tr.destroy()})}})}function Bn(){ut.cur=null,ut.next=null,ut.dirty=!0,Ko(St).forEach(function(It){It.framebuffer=I.createFramebuffer(),Et(It)})}return a(ut,{getFramebuffer:function(It){if(typeof It=="function"&&It._reglType==="framebuffer"){var Tt=It._framebuffer;if(Tt instanceof Kt)return Tt}return null},create:Xt,createCube:An,clear:function(){Ko(St).forEach(zt)},restore:Bn})}var jp=5126,bc=34962;function Pf(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=jp,this.offset=0,this.stride=0,this.divisor=0}function kf(I,oe,me,et,ct){for(var Ze=me.maxAttributes,ut=new Array(Ze),Nt=0;Nt<Ze;++Nt)ut[Nt]=new Pf;var Dt=0,Rt={},st={Record:Pf,scope:{},state:ut,currentVAO:null,targetVAO:null,restore:Ut()?St:function(){},createVAO:Kt,getVAO:wt,destroyBuffer:Wt,setVAO:Ut()?We:ot,clear:Ut()?Lt:function(){}};function Wt(At){for(var zt=0;zt<ut.length;++zt){var Et=ut[zt];Et.buffer===At&&(I.disableVertexAttribArray(zt),Et.buffer=null)}}function Ut(){return oe.oes_vertex_array_object}function Pt(){return oe.angle_instanced_arrays}function wt(At){return typeof At=="function"&&At._vao?At._vao:null}function We(At){if(At!==st.currentVAO){var zt=Ut();At?zt.bindVertexArrayOES(At.vao):zt.bindVertexArrayOES(null),st.currentVAO=At}}function ot(At){if(At!==st.currentVAO){if(At)At.bindAttrs();else for(var zt=Pt(),Et=0;Et<ut.length;++Et){var Xt=ut[Et];Xt.buffer?(I.enableVertexAttribArray(Et),I.vertexAttribPointer(Et,Xt.size,Xt.type,Xt.normalized,Xt.stride,Xt.offfset),zt&&Xt.divisor&&zt.vertexAttribDivisorANGLE(Et,Xt.divisor)):(I.disableVertexAttribArray(Et),I.vertexAttrib4f(Et,Xt.x,Xt.y,Xt.z,Xt.w))}st.currentVAO=At}}function Lt(){Ko(Rt).forEach(function(At){At.destroy()})}function qt(){this.id=++Dt,this.attributes=[];var At=Ut();At?this.vao=At.createVertexArrayOES():this.vao=null,Rt[this.id]=this,this.buffers=[]}qt.prototype.bindAttrs=function(){for(var At=Pt(),zt=this.attributes,Et=0;Et<zt.length;++Et){var Xt=zt[Et];Xt.buffer?(I.enableVertexAttribArray(Et),I.bindBuffer(bc,Xt.buffer.buffer),I.vertexAttribPointer(Et,Xt.size,Xt.type,Xt.normalized,Xt.stride,Xt.offset),At&&Xt.divisor&&At.vertexAttribDivisorANGLE(Et,Xt.divisor)):(I.disableVertexAttribArray(Et),I.vertexAttrib4f(Et,Xt.x,Xt.y,Xt.z,Xt.w))}for(var An=zt.length;An<Ze;++An)I.disableVertexAttribArray(An)},qt.prototype.refresh=function(){var At=Ut();At&&(At.bindVertexArrayOES(this.vao),this.bindAttrs(),st.currentVAO=this)},qt.prototype.destroy=function(){if(this.vao){var At=Ut();this===st.currentVAO&&(st.currentVAO=null,At.bindVertexArrayOES(null)),At.deleteVertexArrayOES(this.vao),this.vao=null}Rt[this.id]&&(delete Rt[this.id],et.vaoCount-=1)};function St(){var At=Ut();At&&Ko(Rt).forEach(function(zt){zt.refresh()})}function Kt(At){var zt=new qt;et.vaoCount+=1;function Et(Xt){Q(Array.isArray(Xt),"arguments to vertex array constructor must be an array"),Q(Xt.length<Ze,"too many attributes"),Q(Xt.length>0,"must specify at least one attribute");var An={},Bn=zt.attributes;Bn.length=Xt.length;for(var It=0;It<Xt.length;++It){var Tt=Xt[It],Ot=Bn[It]=new Pf,Rn=Tt.data||Tt;if(Array.isArray(Rn)||n(Rn)||bi(Rn)){var tr;zt.buffers[It]&&(tr=zt.buffers[It],n(Rn)&&tr._buffer.byteLength>=Rn.byteLength?tr.subdata(Rn):(tr.destroy(),zt.buffers[It]=null)),zt.buffers[It]||(tr=zt.buffers[It]=ct.create(Tt,bc,!1,!0)),Ot.buffer=ct.getBuffer(tr),Ot.size=Ot.buffer.dimension|0,Ot.normalized=!1,Ot.type=Ot.buffer.dtype,Ot.offset=0,Ot.stride=0,Ot.divisor=0,Ot.state=1,An[It]=1}else ct.getBuffer(Tt)?(Ot.buffer=ct.getBuffer(Tt),Ot.size=Ot.buffer.dimension|0,Ot.normalized=!1,Ot.type=Ot.buffer.dtype,Ot.offset=0,Ot.stride=0,Ot.divisor=0,Ot.state=1):ct.getBuffer(Tt.buffer)?(Ot.buffer=ct.getBuffer(Tt.buffer),Ot.size=(+Tt.size||Ot.buffer.dimension)|0,Ot.normalized=!!Tt.normalized||!1,"type"in Tt?(Q.parameter(Tt.type,Oi,"invalid buffer type"),Ot.type=Oi[Tt.type]):Ot.type=Ot.buffer.dtype,Ot.offset=(Tt.offset||0)|0,Ot.stride=(Tt.stride||0)|0,Ot.divisor=(Tt.divisor||0)|0,Ot.state=1,Q(Ot.size>=1&&Ot.size<=4,"size must be between 1 and 4"),Q(Ot.offset>=0,"invalid offset"),Q(Ot.stride>=0&&Ot.stride<=255,"stride must be between 0 and 255"),Q(Ot.divisor>=0,"divisor must be positive"),Q(!Ot.divisor||!!oe.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Tt?(Q(It>0,"first attribute must not be a constant"),Ot.x=+Tt.x||0,Ot.y=+Tt.y||0,Ot.z=+Tt.z||0,Ot.w=+Tt.w||0,Ot.state=2):Q(!1,"invalid attribute spec for location "+It)}for(var sn=0;sn<zt.buffers.length;++sn)!An[sn]&&zt.buffers[sn]&&(zt.buffers[sn].destroy(),zt.buffers[sn]=null);return zt.refresh(),Et}return Et.destroy=function(){for(var Xt=0;Xt<zt.buffers.length;++Xt)zt.buffers[Xt]&&zt.buffers[Xt].destroy();zt.buffers.length=0,zt.destroy()},Et._vao=zt,Et._reglType="vao",Et(At)}return st}var Rf=35632,ts=35633,Cp=35718,ns=35721;function kd(I,oe,me,et){var ct={},Ze={};function ut(We,ot,Lt,qt){this.name=We,this.id=ot,this.location=Lt,this.info=qt}function Nt(We,ot){for(var Lt=0;Lt<We.length;++Lt)if(We[Lt].id===ot.id){We[Lt].location=ot.location;return}We.push(ot)}function Dt(We,ot,Lt){var qt=We===Rf?ct:Ze,St=qt[ot];if(!St){var Kt=oe.str(ot);St=I.createShader(We),I.shaderSource(St,Kt),I.compileShader(St),Q.shaderError(I,St,Kt,We,Lt),qt[ot]=St}return St}var Rt={},st=[],Wt=0;function Ut(We,ot){this.id=Wt++,this.fragId=We,this.vertId=ot,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,et.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Pt(We,ot,Lt){var qt,St,Kt=Dt(Rf,We.fragId),At=Dt(ts,We.vertId),zt=We.program=I.createProgram();if(I.attachShader(zt,Kt),I.attachShader(zt,At),Lt)for(qt=0;qt<Lt.length;++qt){var Et=Lt[qt];I.bindAttribLocation(zt,Et[0],Et[1])}I.linkProgram(zt),Q.linkError(I,zt,oe.str(We.fragId),oe.str(We.vertId),ot);var Xt=I.getProgramParameter(zt,Cp);et.profile&&(We.stats.uniformsCount=Xt);var An=We.uniforms;for(qt=0;qt<Xt;++qt)if(St=I.getActiveUniform(zt,qt),St)if(St.size>1)for(var Bn=0;Bn<St.size;++Bn){var It=St.name.replace("[0]","["+Bn+"]");Nt(An,new ut(It,oe.id(It),I.getUniformLocation(zt,It),St))}else Nt(An,new ut(St.name,oe.id(St.name),I.getUniformLocation(zt,St.name),St));var Tt=I.getProgramParameter(zt,ns);et.profile&&(We.stats.attributesCount=Tt);var Ot=We.attributes;for(qt=0;qt<Tt;++qt)St=I.getActiveAttrib(zt,qt),St&&Nt(Ot,new ut(St.name,oe.id(St.name),I.getAttribLocation(zt,St.name),St))}et.profile&&(me.getMaxUniformsCount=function(){var We=0;return st.forEach(function(ot){ot.stats.uniformsCount>We&&(We=ot.stats.uniformsCount)}),We},me.getMaxAttributesCount=function(){var We=0;return st.forEach(function(ot){ot.stats.attributesCount>We&&(We=ot.stats.attributesCount)}),We});function wt(){ct={},Ze={};for(var We=0;We<st.length;++We)Pt(st[We],null,st[We].attributes.map(function(ot){return[ot.location,ot.name]}))}return{clear:function(){var We=I.deleteShader.bind(I);Ko(ct).forEach(We),ct={},Ko(Ze).forEach(We),Ze={},st.forEach(function(ot){I.deleteProgram(ot.program)}),st.length=0,Rt={},me.shaderCount=0},program:function(We,ot,Lt,qt){Q.command(We>=0,"missing vertex shader",Lt),Q.command(ot>=0,"missing fragment shader",Lt);var St=Rt[ot];St||(St=Rt[ot]={});var Kt=St[We];if(Kt&&(Kt.refCount++,!qt))return Kt;var At=new Ut(ot,We);return me.shaderCount++,Pt(At,Lt,qt),Kt||(St[We]=At),st.push(At),a(At,{destroy:function(){if(At.refCount--,At.refCount<=0){I.deleteProgram(At.program);var zt=st.indexOf(At);st.splice(zt,1),me.shaderCount--}St[At.vertId].refCount<=0&&(I.deleteShader(Ze[At.vertId]),delete Ze[At.vertId],delete Rt[At.fragId][At.vertId]),Object.keys(Rt[At.fragId]).length||(I.deleteShader(ct[At.fragId]),delete ct[At.fragId],delete Rt[At.fragId])}})},restore:wt,shader:Dt,frag:-1,vert:-1}}var Rd=6408,Cs=5121,ao=3333,wc=5126;function vo(I,oe,me,et,ct,Ze,ut){function Nt(st){var Wt;oe.next===null?(Q(ct.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Wt=Cs):(Q(oe.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Wt=oe.next.colorAttachments[0].texture._texture.type,Ze.oes_texture_float?(Q(Wt===Cs||Wt===wc,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Wt===wc&&Q(ut.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Q(Wt===Cs,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Ut=0,Pt=0,wt=et.framebufferWidth,We=et.framebufferHeight,ot=null;n(st)?ot=st:st&&(Q.type(st,"object","invalid arguments to regl.read()"),Ut=st.x|0,Pt=st.y|0,Q(Ut>=0&&Ut<et.framebufferWidth,"invalid x offset for regl.read"),Q(Pt>=0&&Pt<et.framebufferHeight,"invalid y offset for regl.read"),wt=(st.width||et.framebufferWidth-Ut)|0,We=(st.height||et.framebufferHeight-Pt)|0,ot=st.data||null),ot&&(Wt===Cs?Q(ot instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Wt===wc&&Q(ot instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Q(wt>0&&wt+Ut<=et.framebufferWidth,"invalid width for read pixels"),Q(We>0&&We+Pt<=et.framebufferHeight,"invalid height for read pixels"),me();var Lt=wt*We*4;return ot||(Wt===Cs?ot=new Uint8Array(Lt):Wt===wc&&(ot=ot||new Float32Array(Lt))),Q.isTypedArray(ot,"data buffer for regl.read() must be a typedarray"),Q(ot.byteLength>=Lt,"data buffer for regl.read() too small"),I.pixelStorei(ao,4),I.readPixels(Ut,Pt,wt,We,Rd,Wt,ot),ot}function Dt(st){var Wt;return oe.setFBO({framebuffer:st.framebuffer},function(){Wt=Nt(st)}),Wt}function Rt(st){return!st||!("framebuffer"in st)?Nt(st):Dt(st)}return Rt}function Mu(I){return Array.prototype.slice.call(I)}function oi(I){return Mu(I).join("")}function ou(){var I=0,oe=[],me=[];function et(Wt){for(var Ut=0;Ut<me.length;++Ut)if(me[Ut]===Wt)return oe[Ut];var Pt="g"+I++;return oe.push(Pt),me.push(Wt),Pt}function ct(){var Wt=[];function Ut(){Wt.push.apply(Wt,Mu(arguments))}var Pt=[];function wt(){var We="v"+I++;return Pt.push(We),arguments.length>0&&(Wt.push(We,"="),Wt.push.apply(Wt,Mu(arguments)),Wt.push(";")),We}return a(Ut,{def:wt,toString:function(){return oi([Pt.length>0?"var "+Pt.join(",")+";":"",oi(Wt)])}})}function Ze(){var Wt=ct(),Ut=ct(),Pt=Wt.toString,wt=Ut.toString;function We(ot,Lt){Ut(ot,Lt,"=",Wt.def(ot,Lt),";")}return a(function(){Wt.apply(Wt,Mu(arguments))},{def:Wt.def,entry:Wt,exit:Ut,save:We,set:function(ot,Lt,qt){We(ot,Lt),Wt(ot,Lt,"=",qt,";")},toString:function(){return Pt()+wt()}})}function ut(){var Wt=oi(arguments),Ut=Ze(),Pt=Ze(),wt=Ut.toString,We=Pt.toString;return a(Ut,{then:function(){return Ut.apply(Ut,Mu(arguments)),this},else:function(){return Pt.apply(Pt,Mu(arguments)),this},toString:function(){var ot=We();return ot&&(ot="else{"+ot+"}"),oi(["if(",Wt,"){",wt(),"}",ot])}})}var Nt=ct(),Dt={};function Rt(Wt,Ut){var Pt=[];function wt(){var St="a"+Pt.length;return Pt.push(St),St}Ut=Ut||0;for(var We=0;We<Ut;++We)wt();var ot=Ze(),Lt=ot.toString,qt=Dt[Wt]=a(ot,{arg:wt,toString:function(){return oi(["function(",Pt.join(),"){",Lt(),"}"])}});return qt}function st(){var Wt=['"use strict";',Nt,"return {"];Object.keys(Dt).forEach(function(wt){Wt.push('"',wt,'":',Dt[wt].toString(),",")}),Wt.push("}");var Ut=oi(Wt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Pt=Function.apply(null,oe.concat(Ut));return Pt.apply(null,me)}return{global:Nt,link:et,block:ct,proc:Rt,scope:Ze,cond:ut,compile:st}}var Nu="xyzw".split(""),rs=5121,Ds=1,jf=2,Cf=0,iu=1,Is=2,Df=3,Ec=4,os=5,jd=6,hl="dither",If="blend.enable",Oc="blend.color",au="blend.equation",vl="blend.func",xc="depth.enable",Sc="depth.func",Lf="depth.range",Ff="depth.mask",Ia="colorMask",Cd="cull.enable",Dd="cull.face",Id="frontFace",$f="lineWidth",uu="polygonOffset.enable",Ac="polygonOffset.offset",Bf="sample.alpha",Uf="sample.enable",yl="sample.coverage",Pu="stencil.enable",Zn="stencil.mask",ml="stencil.func",Tc="stencil.opFront",La="stencil.opBack",gl="scissor.enable",_l="scissor.box",_o="viewport",bl="profile",is="framebuffer",Mc="vert",Qr="frag",ko="elements",ku="primitive",Fa="count",$a="offset",as="instances",su="vao",wl="Width",Nc="Height",us=is+wl,El=is+Nc,kt=_o+wl,Ld=_o+Nc,Ls="drawingBuffer",Pc=Ls+wl,Gf=Ls+Nc,Fd=[vl,au,ml,Tc,La,yl,_o,_l,Ac],lu=34962,$d=34963,Ba=35632,ss=35633,Wf=3553,Dp=34067,Ip=2884,Lp=3042,Bd=3024,Ud=2960,Gd=2929,Wd=3089,Fp=32823,$p=32926,Bp=32928,Mi=5126,Fs=35664,kc=35665,Vi=35666,_a=5124,zf=35667,Ni=35668,Rc=35669,$s=35670,Ol=35671,jc=35672,Cc=35673,xl=35674,Sl=35675,Bs=35676,Ru=35678,zo=35680,Dc=4,Ic=1028,ju=1029,zd=2304,Pi=2305,Vo=32775,Up=32776,ba=519,Dn=7680,Vf=0,Us=1,Hf=32774,Gp=513,Al=36160,Wp=36064,Ua={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Tl=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Gs={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ga={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},zp={frag:Ba,vert:ss},Vd={cw:zd,ccw:Pi};function ls(I){return Array.isArray(I)||n(I)||bi(I)}function cu(I){return I.sort(function(oe,me){return oe===_o?-1:me===_o?1:oe<me?-1:1})}function ki(I,oe,me,et){this.thisDep=I,this.contextDep=oe,this.propDep=me,this.append=et}function Fn(I){return I&&!(I.thisDep||I.contextDep||I.propDep)}function bo(I){return new ki(!1,!1,!1,I)}function _i(I,oe){var me=I.type;if(me===Cf){var et=I.data.length;return new ki(!0,et>=1,et>=2,oe)}else if(me===Ec){var ct=I.data;return new ki(ct.thisDep,ct.contextDep,ct.propDep,oe)}else{if(me===os)return new ki(!1,!1,!1,oe);if(me===jd){for(var Ze=!1,ut=!1,Nt=!1,Dt=0;Dt<I.data.length;++Dt){var Rt=I.data[Dt];if(Rt.type===iu)Nt=!0;else if(Rt.type===Is)ut=!0;else if(Rt.type===Df)Ze=!0;else if(Rt.type===Cf){Ze=!0;var st=Rt.data;st>=1&&(ut=!0),st>=2&&(Nt=!0)}else Rt.type===Ec&&(Ze=Ze||Rt.data.thisDep,ut=ut||Rt.data.contextDep,Nt=Nt||Rt.data.propDep)}return new ki(Ze,ut,Nt,oe)}else return new ki(me===Df,me===Is,me===iu,oe)}}var Hi=new ki(!1,!1,!1,function(){});function uv(I,oe,me,et,ct,Ze,ut,Nt,Dt,Rt,st,Wt,Ut,Pt,wt){var We=Rt.Record,ot={add:32774,subtract:32778,"reverse subtract":32779};me.ext_blend_minmax&&(ot.min=Vo,ot.max=Up);var Lt=me.angle_instanced_arrays,qt=me.webgl_draw_buffers,St={dirty:!0,profile:wt.profile},Kt={},At=[],zt={},Et={};function Xt(ae){return ae.replace(".","_")}function An(ae,Z,Se){var Ue=Xt(ae);At.push(ae),Kt[Ue]=St[Ue]=!!Se,zt[Ue]=Z}function Bn(ae,Z,Se){var Ue=Xt(ae);At.push(ae),Array.isArray(Se)?(St[Ue]=Se.slice(),Kt[Ue]=Se.slice()):St[Ue]=Kt[Ue]=Se,Et[Ue]=Z}An(hl,Bd),An(If,Lp),Bn(Oc,"blendColor",[0,0,0,0]),Bn(au,"blendEquationSeparate",[Hf,Hf]),Bn(vl,"blendFuncSeparate",[Us,Vf,Us,Vf]),An(xc,Gd,!0),Bn(Sc,"depthFunc",Gp),Bn(Lf,"depthRange",[0,1]),Bn(Ff,"depthMask",!0),Bn(Ia,Ia,[!0,!0,!0,!0]),An(Cd,Ip),Bn(Dd,"cullFace",ju),Bn(Id,Id,Pi),Bn($f,$f,1),An(uu,Fp),Bn(Ac,"polygonOffset",[0,0]),An(Bf,$p),An(Uf,Bp),Bn(yl,"sampleCoverage",[1,!1]),An(Pu,Ud),Bn(Zn,"stencilMask",-1),Bn(ml,"stencilFunc",[ba,0,-1]),Bn(Tc,"stencilOpSeparate",[Ic,Dn,Dn,Dn]),Bn(La,"stencilOpSeparate",[ju,Dn,Dn,Dn]),An(gl,Wd),Bn(_l,"scissor",[0,0,I.drawingBufferWidth,I.drawingBufferHeight]),Bn(_o,_o,[0,0,I.drawingBufferWidth,I.drawingBufferHeight]);var It={gl:I,context:Ut,strings:oe,next:Kt,current:St,draw:Wt,elements:Ze,buffer:ct,shader:st,attributes:Rt.state,vao:Rt,uniforms:Dt,framebuffer:Nt,extensions:me,timer:Pt,isBufferArgs:ls},Tt={primTypes:Uo,compareFuncs:Gs,blendFuncs:Ua,blendEquations:ot,stencilOps:Ga,glTypes:Oi,orientationType:Vd};Q.optional(function(){It.isArrayLike=A}),qt&&(Tt.backBuffer=[ju],Tt.drawBuffer=Mr(et.maxDrawbuffers,function(ae){return ae===0?[0]:Mr(ae,function(Z){return Wp+Z})}));var Ot=0;function Rn(){var ae=ou(),Z=ae.link,Se=ae.global;ae.id=Ot++,ae.batchId="0";var Ue=Z(It),ze=ae.shared={props:"a0"};Object.keys(It).forEach(function(be){ze[be]=Se.def(Ue,".",be)}),Q.optional(function(){ae.CHECK=Z(Q),ae.commandStr=Q.guessCommand(),ae.command=Z(ae.commandStr),ae.assert=function(be,ue,Be){be("if(!(",ue,"))",this.CHECK,".commandRaise(",Z(Be),",",this.command,");")},Tt.invalidBlendCombinations=Tl});var Ne=ae.next={},Te=ae.current={};Object.keys(Et).forEach(function(be){Array.isArray(St[be])&&(Ne[be]=Se.def(ze.next,".",be),Te[be]=Se.def(ze.current,".",be))});var Ie=ae.constants={};Object.keys(Tt).forEach(function(be){Ie[be]=Se.def(JSON.stringify(Tt[be]))}),ae.invoke=function(be,ue){switch(ue.type){case Cf:var Be=["this",ze.context,ze.props,ae.batchId];return be.def(Z(ue.data),".call(",Be.slice(0,Math.max(ue.data.length+1,4)),")");case iu:return be.def(ze.props,ue.data);case Is:return be.def(ze.context,ue.data);case Df:return be.def("this",ue.data);case Ec:return ue.data.append(ae,be),ue.data.ref;case os:return ue.data.toString();case jd:return ue.data.map(function(Ye){return ae.invoke(be,Ye)})}},ae.attribCache={};var se={};return ae.scopeAttrib=function(be){var ue=oe.id(be);if(ue in se)return se[ue];var Be=Rt.scope[ue];Be||(Be=Rt.scope[ue]=new We);var Ye=se[ue]=Z(Be);return Ye},ae}function tr(ae){var Z=ae.static,Se=ae.dynamic,Ue;if(bl in Z){var ze=!!Z[bl];Ue=bo(function(Te,Ie){return ze}),Ue.enable=ze}else if(bl in Se){var Ne=Se[bl];Ue=_i(Ne,function(Te,Ie){return Te.invoke(Ie,Ne)})}return Ue}function sn(ae,Z){var Se=ae.static,Ue=ae.dynamic;if(is in Se){var ze=Se[is];return ze?(ze=Nt.getFramebuffer(ze),Q.command(ze,"invalid framebuffer object"),bo(function(Te,Ie){var se=Te.link(ze),be=Te.shared;Ie.set(be.framebuffer,".next",se);var ue=be.context;return Ie.set(ue,"."+us,se+".width"),Ie.set(ue,"."+El,se+".height"),se})):bo(function(Te,Ie){var se=Te.shared;Ie.set(se.framebuffer,".next","null");var be=se.context;return Ie.set(be,"."+us,be+"."+Pc),Ie.set(be,"."+El,be+"."+Gf),"null"})}else if(is in Ue){var Ne=Ue[is];return _i(Ne,function(Te,Ie){var se=Te.invoke(Ie,Ne),be=Te.shared,ue=be.framebuffer,Be=Ie.def(ue,".getFramebuffer(",se,")");Q.optional(function(){Te.assert(Ie,"!"+se+"||"+Be,"invalid framebuffer object")}),Ie.set(ue,".next",Be);var Ye=be.context;return Ie.set(Ye,"."+us,Be+"?"+Be+".width:"+Ye+"."+Pc),Ie.set(Ye,"."+El,Be+"?"+Be+".height:"+Ye+"."+Gf),Be})}else return null}function Jn(ae,Z,Se){var Ue=ae.static,ze=ae.dynamic;function Ne(se){if(se in Ue){var be=Ue[se];Q.commandType(be,"object","invalid "+se,Se.commandStr);var ue=!0,Be=be.x|0,Ye=be.y|0,d,m;return"width"in be?(d=be.width|0,Q.command(d>=0,"invalid "+se,Se.commandStr)):ue=!1,"height"in be?(m=be.height|0,Q.command(m>=0,"invalid "+se,Se.commandStr)):ue=!1,new ki(!ue&&Z&&Z.thisDep,!ue&&Z&&Z.contextDep,!ue&&Z&&Z.propDep,function(U,q){var le=U.shared.context,_e=d;"width"in be||(_e=q.def(le,".",us,"-",Be));var Le=m;return"height"in be||(Le=q.def(le,".",El,"-",Ye)),[Be,Ye,_e,Le]})}else if(se in ze){var w=ze[se],R=_i(w,function(U,q){var le=U.invoke(q,w);Q.optional(function(){U.assert(q,le+"&&typeof "+le+'==="object"',"invalid "+se)});var _e=U.shared.context,Le=q.def(le,".x|0"),ft=q.def(le,".y|0"),gt=q.def('"width" in ',le,"?",le,".width|0:","(",_e,".",us,"-",Le,")"),Gt=q.def('"height" in ',le,"?",le,".height|0:","(",_e,".",El,"-",ft,")");return Q.optional(function(){U.assert(q,gt+">=0&&"+Gt+">=0","invalid "+se)}),[Le,ft,gt,Gt]});return Z&&(R.thisDep=R.thisDep||Z.thisDep,R.contextDep=R.contextDep||Z.contextDep,R.propDep=R.propDep||Z.propDep),R}else return Z?new ki(Z.thisDep,Z.contextDep,Z.propDep,function(U,q){var le=U.shared.context;return[0,0,q.def(le,".",us),q.def(le,".",El)]}):null}var Te=Ne(_o);if(Te){var Ie=Te;Te=new ki(Te.thisDep,Te.contextDep,Te.propDep,function(se,be){var ue=Ie.append(se,be),Be=se.shared.context;return be.set(Be,"."+kt,ue[2]),be.set(Be,"."+Ld,ue[3]),ue})}return{viewport:Te,scissor_box:Ne(_l)}}function $n(ae,Z){var Se=ae.static,Ue=typeof Se[Qr]=="string"&&typeof Se[Mc]=="string";if(Ue){if(Object.keys(Z.dynamic).length>0)return null;var ze=Z.static,Ne=Object.keys(ze);if(Ne.length>0&&typeof ze[Ne[0]]=="number"){for(var Te=[],Ie=0;Ie<Ne.length;++Ie)Q(typeof ze[Ne[Ie]]=="number","must specify all vertex attribute locations when using vaos"),Te.push([ze[Ne[Ie]]|0,Ne[Ie]]);return Te}}return null}function nr(ae,Z,Se){var Ue=ae.static,ze=ae.dynamic;function Ne(ue){if(ue in Ue){var Be=oe.id(Ue[ue]);Q.optional(function(){st.shader(zp[ue],Be,Q.guessCommand())});var Ye=bo(function(){return Be});return Ye.id=Be,Ye}else if(ue in ze){var d=ze[ue];return _i(d,function(m,w){var R=m.invoke(w,d),U=w.def(m.shared.strings,".id(",R,")");return Q.optional(function(){w(m.shared.shader,".shader(",zp[ue],",",U,",",m.command,");")}),U})}return null}var Te=Ne(Qr),Ie=Ne(Mc),se=null,be;return Fn(Te)&&Fn(Ie)?(se=st.program(Ie.id,Te.id,null,Se),be=bo(function(ue,Be){return ue.link(se)})):be=new ki(Te&&Te.thisDep||Ie&&Ie.thisDep,Te&&Te.contextDep||Ie&&Ie.contextDep,Te&&Te.propDep||Ie&&Ie.propDep,function(ue,Be){var Ye=ue.shared.shader,d;Te?d=Te.append(ue,Be):d=Be.def(Ye,".",Qr);var m;Ie?m=Ie.append(ue,Be):m=Be.def(Ye,".",Mc);var w=Ye+".program("+m+","+d;return Q.optional(function(){w+=","+ue.command}),Be.def(w+")")}),{frag:Te,vert:Ie,progVar:be,program:se}}function yr(ae,Z){var Se=ae.static,Ue=ae.dynamic;function ze(){if(ko in Se){var ue=Se[ko];ls(ue)?ue=Ze.getElements(Ze.create(ue,!0)):ue&&(ue=Ze.getElements(ue),Q.command(ue,"invalid elements",Z.commandStr));var Be=bo(function(d,m){if(ue){var w=d.link(ue);return d.ELEMENTS=w,w}return d.ELEMENTS=null,null});return Be.value=ue,Be}else if(ko in Ue){var Ye=Ue[ko];return _i(Ye,function(d,m){var w=d.shared,R=w.isBufferArgs,U=w.elements,q=d.invoke(m,Ye),le=m.def("null"),_e=m.def(R,"(",q,")"),Le=d.cond(_e).then(le,"=",U,".createStream(",q,");").else(le,"=",U,".getElements(",q,");");return Q.optional(function(){d.assert(Le.else,"!"+q+"||"+le,"invalid elements")}),m.entry(Le),m.exit(d.cond(_e).then(U,".destroyStream(",le,");")),d.ELEMENTS=le,le})}return null}var Ne=ze();function Te(){if(ku in Se){var ue=Se[ku];return Q.commandParameter(ue,Uo,"invalid primitve",Z.commandStr),bo(function(Ye,d){return Uo[ue]})}else if(ku in Ue){var Be=Ue[ku];return _i(Be,function(Ye,d){var m=Ye.constants.primTypes,w=Ye.invoke(d,Be);return Q.optional(function(){Ye.assert(d,w+" in "+m,"invalid primitive, must be one of "+Object.keys(Uo))}),d.def(m,"[",w,"]")})}else if(Ne)return Fn(Ne)?Ne.value?bo(function(Ye,d){return d.def(Ye.ELEMENTS,".primType")}):bo(function(){return Dc}):new ki(Ne.thisDep,Ne.contextDep,Ne.propDep,function(Ye,d){var m=Ye.ELEMENTS;return d.def(m,"?",m,".primType:",Dc)});return null}function Ie(ue,Be){if(ue in Se){var Ye=Se[ue]|0;return Q.command(!Be||Ye>=0,"invalid "+ue,Z.commandStr),bo(function(m,w){return Be&&(m.OFFSET=Ye),Ye})}else if(ue in Ue){var d=Ue[ue];return _i(d,function(m,w){var R=m.invoke(w,d);return Be&&(m.OFFSET=R,Q.optional(function(){m.assert(w,R+">=0","invalid "+ue)})),R})}else if(Be&&Ne)return bo(function(m,w){return m.OFFSET="0",0});return null}var se=Ie($a,!0);function be(){if(Fa in Se){var ue=Se[Fa]|0;return Q.command(typeof ue=="number"&&ue>=0,"invalid vertex count",Z.commandStr),bo(function(){return ue})}else if(Fa in Ue){var Be=Ue[Fa];return _i(Be,function(m,w){var R=m.invoke(w,Be);return Q.optional(function(){m.assert(w,"typeof "+R+'==="number"&&'+R+">=0&&"+R+"===("+R+"|0)","invalid vertex count")}),R})}else if(Ne)if(Fn(Ne)){if(Ne)return se?new ki(se.thisDep,se.contextDep,se.propDep,function(m,w){var R=w.def(m.ELEMENTS,".vertCount-",m.OFFSET);return Q.optional(function(){m.assert(w,R+">=0","invalid vertex offset/element buffer too small")}),R}):bo(function(m,w){return w.def(m.ELEMENTS,".vertCount")});var Ye=bo(function(){return-1});return Q.optional(function(){Ye.MISSING=!0}),Ye}else{var d=new ki(Ne.thisDep||se.thisDep,Ne.contextDep||se.contextDep,Ne.propDep||se.propDep,function(m,w){var R=m.ELEMENTS;return m.OFFSET?w.def(R,"?",R,".vertCount-",m.OFFSET,":-1"):w.def(R,"?",R,".vertCount:-1")});return Q.optional(function(){d.DYNAMIC=!0}),d}return null}return{elements:Ne,primitive:Te(),count:be(),instances:Ie(as,!1),offset:se}}function Eo(ae,Z){var Se=ae.static,Ue=ae.dynamic,ze={};return At.forEach(function(Ne){var Te=Xt(Ne);function Ie(se,be){if(Ne in Se){var ue=se(Se[Ne]);ze[Te]=bo(function(){return ue})}else if(Ne in Ue){var Be=Ue[Ne];ze[Te]=_i(Be,function(Ye,d){return be(Ye,d,Ye.invoke(d,Be))})}}switch(Ne){case Cd:case If:case hl:case Pu:case xc:case gl:case uu:case Bf:case Uf:case Ff:return Ie(function(se){return Q.commandType(se,"boolean",Ne,Z.commandStr),se},function(se,be,ue){return Q.optional(function(){se.assert(be,"typeof "+ue+'==="boolean"',"invalid flag "+Ne,se.commandStr)}),ue});case Sc:return Ie(function(se){return Q.commandParameter(se,Gs,"invalid "+Ne,Z.commandStr),Gs[se]},function(se,be,ue){var Be=se.constants.compareFuncs;return Q.optional(function(){se.assert(be,ue+" in "+Be,"invalid "+Ne+", must be one of "+Object.keys(Gs))}),be.def(Be,"[",ue,"]")});case Lf:return Ie(function(se){return Q.command(A(se)&&se.length===2&&typeof se[0]=="number"&&typeof se[1]=="number"&&se[0]<=se[1],"depth range is 2d array",Z.commandStr),se},function(se,be,ue){Q.optional(function(){se.assert(be,se.shared.isArrayLike+"("+ue+")&&"+ue+".length===2&&typeof "+ue+'[0]==="number"&&typeof '+ue+'[1]==="number"&&'+ue+"[0]<="+ue+"[1]","depth range must be a 2d array")});var Be=be.def("+",ue,"[0]"),Ye=be.def("+",ue,"[1]");return[Be,Ye]});case vl:return Ie(function(se){Q.commandType(se,"object","blend.func",Z.commandStr);var be="srcRGB"in se?se.srcRGB:se.src,ue="srcAlpha"in se?se.srcAlpha:se.src,Be="dstRGB"in se?se.dstRGB:se.dst,Ye="dstAlpha"in se?se.dstAlpha:se.dst;return Q.commandParameter(be,Ua,Te+".srcRGB",Z.commandStr),Q.commandParameter(ue,Ua,Te+".srcAlpha",Z.commandStr),Q.commandParameter(Be,Ua,Te+".dstRGB",Z.commandStr),Q.commandParameter(Ye,Ua,Te+".dstAlpha",Z.commandStr),Q.command(Tl.indexOf(be+", "+Be)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+be+", "+Be+")",Z.commandStr),[Ua[be],Ua[Be],Ua[ue],Ua[Ye]]},function(se,be,ue){var Be=se.constants.blendFuncs;Q.optional(function(){se.assert(be,ue+"&&typeof "+ue+'==="object"',"invalid blend func, must be an object")});function Ye(le,_e){var Le=be.def('"',le,_e,'" in ',ue,"?",ue,".",le,_e,":",ue,".",le);return Q.optional(function(){se.assert(be,Le+" in "+Be,"invalid "+Ne+"."+le+_e+", must be one of "+Object.keys(Ua))}),Le}var d=Ye("src","RGB"),m=Ye("dst","RGB");Q.optional(function(){var le=se.constants.invalidBlendCombinations;se.assert(be,le+".indexOf("+d+'+", "+'+m+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var w=be.def(Be,"[",d,"]"),R=be.def(Be,"[",Ye("src","Alpha"),"]"),U=be.def(Be,"[",m,"]"),q=be.def(Be,"[",Ye("dst","Alpha"),"]");return[w,U,R,q]});case au:return Ie(function(se){if(typeof se=="string")return Q.commandParameter(se,ot,"invalid "+Ne,Z.commandStr),[ot[se],ot[se]];if(typeof se=="object")return Q.commandParameter(se.rgb,ot,Ne+".rgb",Z.commandStr),Q.commandParameter(se.alpha,ot,Ne+".alpha",Z.commandStr),[ot[se.rgb],ot[se.alpha]];Q.commandRaise("invalid blend.equation",Z.commandStr)},function(se,be,ue){var Be=se.constants.blendEquations,Ye=be.def(),d=be.def(),m=se.cond("typeof ",ue,'==="string"');return Q.optional(function(){function w(R,U,q){se.assert(R,q+" in "+Be,"invalid "+U+", must be one of "+Object.keys(ot))}w(m.then,Ne,ue),se.assert(m.else,ue+"&&typeof "+ue+'==="object"',"invalid "+Ne),w(m.else,Ne+".rgb",ue+".rgb"),w(m.else,Ne+".alpha",ue+".alpha")}),m.then(Ye,"=",d,"=",Be,"[",ue,"];"),m.else(Ye,"=",Be,"[",ue,".rgb];",d,"=",Be,"[",ue,".alpha];"),be(m),[Ye,d]});case Oc:return Ie(function(se){return Q.command(A(se)&&se.length===4,"blend.color must be a 4d array",Z.commandStr),Mr(4,function(be){return+se[be]})},function(se,be,ue){return Q.optional(function(){se.assert(be,se.shared.isArrayLike+"("+ue+")&&"+ue+".length===4","blend.color must be a 4d array")}),Mr(4,function(Be){return be.def("+",ue,"[",Be,"]")})});case Zn:return Ie(function(se){return Q.commandType(se,"number",Te,Z.commandStr),se|0},function(se,be,ue){return Q.optional(function(){se.assert(be,"typeof "+ue+'==="number"',"invalid stencil.mask")}),be.def(ue,"|0")});case ml:return Ie(function(se){Q.commandType(se,"object",Te,Z.commandStr);var be=se.cmp||"keep",ue=se.ref||0,Be="mask"in se?se.mask:-1;return Q.commandParameter(be,Gs,Ne+".cmp",Z.commandStr),Q.commandType(ue,"number",Ne+".ref",Z.commandStr),Q.commandType(Be,"number",Ne+".mask",Z.commandStr),[Gs[be],ue,Be]},function(se,be,ue){var Be=se.constants.compareFuncs;Q.optional(function(){function w(){se.assert(be,Array.prototype.join.call(arguments,""),"invalid stencil.func")}w(ue+"&&typeof ",ue,'==="object"'),w('!("cmp" in ',ue,")||(",ue,".cmp in ",Be,")")});var Ye=be.def('"cmp" in ',ue,"?",Be,"[",ue,".cmp]",":",Dn),d=be.def(ue,".ref|0"),m=be.def('"mask" in ',ue,"?",ue,".mask|0:-1");return[Ye,d,m]});case Tc:case La:return Ie(function(se){Q.commandType(se,"object",Te,Z.commandStr);var be=se.fail||"keep",ue=se.zfail||"keep",Be=se.zpass||"keep";return Q.commandParameter(be,Ga,Ne+".fail",Z.commandStr),Q.commandParameter(ue,Ga,Ne+".zfail",Z.commandStr),Q.commandParameter(Be,Ga,Ne+".zpass",Z.commandStr),[Ne===La?ju:Ic,Ga[be],Ga[ue],Ga[Be]]},function(se,be,ue){var Be=se.constants.stencilOps;Q.optional(function(){se.assert(be,ue+"&&typeof "+ue+'==="object"',"invalid "+Ne)});function Ye(d){return Q.optional(function(){se.assert(be,'!("'+d+'" in '+ue+")||("+ue+"."+d+" in "+Be+")","invalid "+Ne+"."+d+", must be one of "+Object.keys(Ga))}),be.def('"',d,'" in ',ue,"?",Be,"[",ue,".",d,"]:",Dn)}return[Ne===La?ju:Ic,Ye("fail"),Ye("zfail"),Ye("zpass")]});case Ac:return Ie(function(se){Q.commandType(se,"object",Te,Z.commandStr);var be=se.factor|0,ue=se.units|0;return Q.commandType(be,"number",Te+".factor",Z.commandStr),Q.commandType(ue,"number",Te+".units",Z.commandStr),[be,ue]},function(se,be,ue){Q.optional(function(){se.assert(be,ue+"&&typeof "+ue+'==="object"',"invalid "+Ne)});var Be=be.def(ue,".factor|0"),Ye=be.def(ue,".units|0");return[Be,Ye]});case Dd:return Ie(function(se){var be=0;return se==="front"?be=Ic:se==="back"&&(be=ju),Q.command(!!be,Te,Z.commandStr),be},function(se,be,ue){return Q.optional(function(){se.assert(be,ue+'==="front"||'+ue+'==="back"',"invalid cull.face")}),be.def(ue,'==="front"?',Ic,":",ju)});case $f:return Ie(function(se){return Q.command(typeof se=="number"&&se>=et.lineWidthDims[0]&&se<=et.lineWidthDims[1],"invalid line width, must be a positive number between "+et.lineWidthDims[0]+" and "+et.lineWidthDims[1],Z.commandStr),se},function(se,be,ue){return Q.optional(function(){se.assert(be,"typeof "+ue+'==="number"&&'+ue+">="+et.lineWidthDims[0]+"&&"+ue+"<="+et.lineWidthDims[1],"invalid line width")}),ue});case Id:return Ie(function(se){return Q.commandParameter(se,Vd,Te,Z.commandStr),Vd[se]},function(se,be,ue){return Q.optional(function(){se.assert(be,ue+'==="cw"||'+ue+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),be.def(ue+'==="cw"?'+zd+":"+Pi)});case Ia:return Ie(function(se){return Q.command(A(se)&&se.length===4,"color.mask must be length 4 array",Z.commandStr),se.map(function(be){return!!be})},function(se,be,ue){return Q.optional(function(){se.assert(be,se.shared.isArrayLike+"("+ue+")&&"+ue+".length===4","invalid color.mask")}),Mr(4,function(Be){return"!!"+ue+"["+Be+"]"})});case yl:return Ie(function(se){Q.command(typeof se=="object"&&se,Te,Z.commandStr);var be="value"in se?se.value:1,ue=!!se.invert;return Q.command(typeof be=="number"&&be>=0&&be<=1,"sample.coverage.value must be a number between 0 and 1",Z.commandStr),[be,ue]},function(se,be,ue){Q.optional(function(){se.assert(be,ue+"&&typeof "+ue+'==="object"',"invalid sample.coverage")});var Be=be.def('"value" in ',ue,"?+",ue,".value:1"),Ye=be.def("!!",ue,".invert");return[Be,Ye]})}}),ze}function Ro(ae,Z){var Se=ae.static,Ue=ae.dynamic,ze={};return Object.keys(Se).forEach(function(Ne){var Te=Se[Ne],Ie;if(typeof Te=="number"||typeof Te=="boolean")Ie=bo(function(){return Te});else if(typeof Te=="function"){var se=Te._reglType;se==="texture2d"||se==="textureCube"?Ie=bo(function(be){return be.link(Te)}):se==="framebuffer"||se==="framebufferCube"?(Q.command(Te.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Ne+'"',Z.commandStr),Ie=bo(function(be){return be.link(Te.color[0])})):Q.commandRaise('invalid data for uniform "'+Ne+'"',Z.commandStr)}else A(Te)?Ie=bo(function(be){var ue=be.global.def("[",Mr(Te.length,function(Be){return Q.command(typeof Te[Be]=="number"||typeof Te[Be]=="boolean","invalid uniform "+Ne,be.commandStr),Te[Be]}),"]");return ue}):Q.commandRaise('invalid or missing data for uniform "'+Ne+'"',Z.commandStr);Ie.value=Te,ze[Ne]=Ie}),Object.keys(Ue).forEach(function(Ne){var Te=Ue[Ne];ze[Ne]=_i(Te,function(Ie,se){return Ie.invoke(se,Te)})}),ze}function lr(ae,Z){var Se=ae.static,Ue=ae.dynamic,ze={};return Object.keys(Se).forEach(function(Ne){var Te=Se[Ne],Ie=oe.id(Ne),se=new We;if(ls(Te))se.state=Ds,se.buffer=ct.getBuffer(ct.create(Te,lu,!1,!0)),se.type=0;else{var be=ct.getBuffer(Te);if(be)se.state=Ds,se.buffer=be,se.type=0;else if(Q.command(typeof Te=="object"&&Te,"invalid data for attribute "+Ne,Z.commandStr),"constant"in Te){var ue=Te.constant;se.buffer="null",se.state=jf,typeof ue=="number"?se.x=ue:(Q.command(A(ue)&&ue.length>0&&ue.length<=4,"invalid constant for attribute "+Ne,Z.commandStr),Nu.forEach(function(U,q){q<ue.length&&(se[U]=ue[q])}))}else{ls(Te.buffer)?be=ct.getBuffer(ct.create(Te.buffer,lu,!1,!0)):be=ct.getBuffer(Te.buffer),Q.command(!!be,'missing buffer for attribute "'+Ne+'"',Z.commandStr);var Be=Te.offset|0;Q.command(Be>=0,'invalid offset for attribute "'+Ne+'"',Z.commandStr);var Ye=Te.stride|0;Q.command(Ye>=0&&Ye<256,'invalid stride for attribute "'+Ne+'", must be integer betweeen [0, 255]',Z.commandStr);var d=Te.size|0;Q.command(!("size"in Te)||d>0&&d<=4,'invalid size for attribute "'+Ne+'", must be 1,2,3,4',Z.commandStr);var m=!!Te.normalized,w=0;"type"in Te&&(Q.commandParameter(Te.type,Oi,"invalid type for attribute "+Ne,Z.commandStr),w=Oi[Te.type]);var R=Te.divisor|0;"divisor"in Te&&(Q.command(R===0||Lt,'cannot specify divisor for attribute "'+Ne+'", instancing not supported',Z.commandStr),Q.command(R>=0,'invalid divisor for attribute "'+Ne+'"',Z.commandStr)),Q.optional(function(){var U=Z.commandStr,q=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Te).forEach(function(le){Q.command(q.indexOf(le)>=0,'unknown parameter "'+le+'" for attribute pointer "'+Ne+'" (valid parameters are '+q+")",U)})}),se.buffer=be,se.state=Ds,se.size=d,se.normalized=m,se.type=w||be.dtype,se.offset=Be,se.stride=Ye,se.divisor=R}}ze[Ne]=bo(function(U,q){var le=U.attribCache;if(Ie in le)return le[Ie];var _e={isStream:!1};return Object.keys(se).forEach(function(Le){_e[Le]=se[Le]}),se.buffer&&(_e.buffer=U.link(se.buffer),_e.type=_e.type||_e.buffer+".dtype"),le[Ie]=_e,_e})}),Object.keys(Ue).forEach(function(Ne){var Te=Ue[Ne];function Ie(se,be){var ue=se.invoke(be,Te),Be=se.shared,Ye=se.constants,d=Be.isBufferArgs,m=Be.buffer;Q.optional(function(){se.assert(be,ue+"&&(typeof "+ue+'==="object"||typeof '+ue+'==="function")&&('+d+"("+ue+")||"+m+".getBuffer("+ue+")||"+m+".getBuffer("+ue+".buffer)||"+d+"("+ue+'.buffer)||("constant" in '+ue+"&&(typeof "+ue+'.constant==="number"||'+Be.isArrayLike+"("+ue+".constant))))",'invalid dynamic attribute "'+Ne+'"')});var w={isStream:be.def(!1)},R=new We;R.state=Ds,Object.keys(R).forEach(function(_e){w[_e]=be.def(""+R[_e])});var U=w.buffer,q=w.type;be("if(",d,"(",ue,")){",w.isStream,"=true;",U,"=",m,".createStream(",lu,",",ue,");",q,"=",U,".dtype;","}else{",U,"=",m,".getBuffer(",ue,");","if(",U,"){",q,"=",U,".dtype;",'}else if("constant" in ',ue,"){",w.state,"=",jf,";","if(typeof "+ue+'.constant === "number"){',w[Nu[0]],"=",ue,".constant;",Nu.slice(1).map(function(_e){return w[_e]}).join("="),"=0;","}else{",Nu.map(function(_e,Le){return w[_e]+"="+ue+".constant.length>"+Le+"?"+ue+".constant["+Le+"]:0;"}).join(""),"}}else{","if(",d,"(",ue,".buffer)){",U,"=",m,".createStream(",lu,",",ue,".buffer);","}else{",U,"=",m,".getBuffer(",ue,".buffer);","}",q,'="type" in ',ue,"?",Ye.glTypes,"[",ue,".type]:",U,".dtype;",w.normalized,"=!!",ue,".normalized;");function le(_e){be(w[_e],"=",ue,".",_e,"|0;")}return le("size"),le("offset"),le("stride"),le("divisor"),be("}}"),be.exit("if(",w.isStream,"){",m,".destroyStream(",U,");","}"),w}ze[Ne]=_i(Te,Ie)}),ze}function Lo(ae,Z){var Se=ae.static,Ue=ae.dynamic;if(su in Se){var ze=Se[su];return ze!==null&&Rt.getVAO(ze)===null&&(ze=Rt.createVAO(ze)),bo(function(Te){return Te.link(Rt.getVAO(ze))})}else if(su in Ue){var Ne=Ue[su];return _i(Ne,function(Te,Ie){var se=Te.invoke(Ie,Ne);return Ie.def(Te.shared.vao+".getVAO("+se+")")})}return null}function Zr(ae){var Z=ae.static,Se=ae.dynamic,Ue={};return Object.keys(Z).forEach(function(ze){var Ne=Z[ze];Ue[ze]=bo(function(Te,Ie){return typeof Ne=="number"||typeof Ne=="boolean"?""+Ne:Te.link(Ne)})}),Object.keys(Se).forEach(function(ze){var Ne=Se[ze];Ue[ze]=_i(Ne,function(Te,Ie){return Te.invoke(Ie,Ne)})}),Ue}function Oo(ae,Z,Se,Ue,ze){var Ne=ae.static,Te=ae.dynamic;Q.optional(function(){var le=[is,Mc,Qr,ko,ku,$a,Fa,as,bl,su].concat(At);function _e(Le){Object.keys(Le).forEach(function(ft){Q.command(le.indexOf(ft)>=0,'unknown parameter "'+ft+'"',ze.commandStr)})}_e(Ne),_e(Te)});var Ie=$n(ae,Z),se=sn(ae),be=Jn(ae,se,ze),ue=yr(ae,ze),Be=Eo(ae,ze),Ye=nr(ae,ze,Ie);function d(le){var _e=be[le];_e&&(Be[le]=_e)}d(_o),d(Xt(_l));var m=Object.keys(Be).length>0,w={framebuffer:se,draw:ue,shader:Ye,state:Be,dirty:m,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(w.profile=tr(ae),w.uniforms=Ro(Se,ze),w.drawVAO=w.scopeVAO=Lo(ae),!w.drawVAO&&Ye.program&&!Ie&&me.angle_instanced_arrays){var R=!0,U=Ye.program.attributes.map(function(le){var _e=Z.static[le];return R=R&&!!_e,_e});if(R&&U.length>0){var q=Rt.getVAO(Rt.createVAO(U));w.drawVAO=new ki(null,null,null,function(le,_e){return le.link(q)}),w.useVAO=!0}}return Ie?w.useVAO=!0:w.attributes=lr(Z,ze),w.context=Zr(Ue),w}function jo(ae,Z,Se){var Ue=ae.shared,ze=Ue.context,Ne=ae.scope();Object.keys(Se).forEach(function(Te){Z.save(ze,"."+Te);var Ie=Se[Te],se=Ie.append(ae,Z);Array.isArray(se)?Ne(ze,".",Te,"=[",se.join(),"];"):Ne(ze,".",Te,"=",se,";")}),Z(Ne)}function yo(ae,Z,Se,Ue){var ze=ae.shared,Ne=ze.gl,Te=ze.framebuffer,Ie;qt&&(Ie=Z.def(ze.extensions,".webgl_draw_buffers"));var se=ae.constants,be=se.drawBuffer,ue=se.backBuffer,Be;Se?Be=Se.append(ae,Z):Be=Z.def(Te,".next"),Ue||Z("if(",Be,"!==",Te,".cur){"),Z("if(",Be,"){",Ne,".bindFramebuffer(",Al,",",Be,".framebuffer);"),qt&&Z(Ie,".drawBuffersWEBGL(",be,"[",Be,".colorAttachments.length]);"),Z("}else{",Ne,".bindFramebuffer(",Al,",null);"),qt&&Z(Ie,".drawBuffersWEBGL(",ue,");"),Z("}",Te,".cur=",Be,";"),Ue||Z("}")}function co(ae,Z,Se){var Ue=ae.shared,ze=Ue.gl,Ne=ae.current,Te=ae.next,Ie=Ue.current,se=Ue.next,be=ae.cond(Ie,".dirty");At.forEach(function(ue){var Be=Xt(ue);if(!(Be in Se.state)){var Ye,d;if(Be in Te){Ye=Te[Be],d=Ne[Be];var m=Mr(St[Be].length,function(R){return be.def(Ye,"[",R,"]")});be(ae.cond(m.map(function(R,U){return R+"!=="+d+"["+U+"]"}).join("||")).then(ze,".",Et[Be],"(",m,");",m.map(function(R,U){return d+"["+U+"]="+R}).join(";"),";"))}else{Ye=be.def(se,".",Be);var w=ae.cond(Ye,"!==",Ie,".",Be);be(w),Be in zt?w(ae.cond(Ye).then(ze,".enable(",zt[Be],");").else(ze,".disable(",zt[Be],");"),Ie,".",Be,"=",Ye,";"):w(ze,".",Et[Be],"(",Ye,");",Ie,".",Be,"=",Ye,";")}}}),Object.keys(Se.state).length===0&&be(Ie,".dirty=false;"),Z(be)}function Xo(ae,Z,Se,Ue){var ze=ae.shared,Ne=ae.current,Te=ze.current,Ie=ze.gl;cu(Object.keys(Se)).forEach(function(se){var be=Se[se];if(!(Ue&&!Ue(be))){var ue=be.append(ae,Z);if(zt[se]){var Be=zt[se];Fn(be)?ue?Z(Ie,".enable(",Be,");"):Z(Ie,".disable(",Be,");"):Z(ae.cond(ue).then(Ie,".enable(",Be,");").else(Ie,".disable(",Be,");")),Z(Te,".",se,"=",ue,";")}else if(A(ue)){var Ye=Ne[se];Z(Ie,".",Et[se],"(",ue,");",ue.map(function(d,m){return Ye+"["+m+"]="+d}).join(";"),";")}else Z(Ie,".",Et[se],"(",ue,");",Te,".",se,"=",ue,";")}})}function mo(ae,Z){Lt&&(ae.instancing=Z.def(ae.shared.extensions,".angle_instanced_arrays"))}function Kn(ae,Z,Se,Ue,ze){var Ne=ae.shared,Te=ae.stats,Ie=Ne.current,se=Ne.timer,be=Se.profile;function ue(){return typeof performance>"u"?"Date.now()":"performance.now()"}var Be,Ye;function d(le){Be=Z.def(),le(Be,"=",ue(),";"),typeof ze=="string"?le(Te,".count+=",ze,";"):le(Te,".count++;"),Pt&&(Ue?(Ye=Z.def(),le(Ye,"=",se,".getNumPendingQueries();")):le(se,".beginQuery(",Te,");"))}function m(le){le(Te,".cpuTime+=",ue(),"-",Be,";"),Pt&&(Ue?le(se,".pushScopeStats(",Ye,",",se,".getNumPendingQueries(),",Te,");"):le(se,".endQuery();"))}function w(le){var _e=Z.def(Ie,".profile");Z(Ie,".profile=",le,";"),Z.exit(Ie,".profile=",_e,";")}var R;if(be){if(Fn(be)){be.enable?(d(Z),m(Z.exit),w("true")):w("false");return}R=be.append(ae,Z),w(R)}else R=Z.def(Ie,".profile");var U=ae.block();d(U),Z("if(",R,"){",U,"}");var q=ae.block();m(q),Z.exit("if(",R,"){",q,"}")}function Qo(ae,Z,Se,Ue,ze){var Ne=ae.shared;function Te(se){switch(se){case Fs:case zf:case Ol:return 2;case kc:case Ni:case jc:return 3;case Vi:case Rc:case Cc:return 4;default:return 1}}function Ie(se,be,ue){var Be=Ne.gl,Ye=Z.def(se,".location"),d=Z.def(Ne.attributes,"[",Ye,"]"),m=ue.state,w=ue.buffer,R=[ue.x,ue.y,ue.z,ue.w],U=["buffer","normalized","offset","stride"];function q(){Z("if(!",d,".buffer){",Be,".enableVertexAttribArray(",Ye,");}");var _e=ue.type,Le;if(ue.size?Le=Z.def(ue.size,"||",be):Le=be,Z("if(",d,".type!==",_e,"||",d,".size!==",Le,"||",U.map(function(gt){return d+"."+gt+"!=="+ue[gt]}).join("||"),"){",Be,".bindBuffer(",lu,",",w,".buffer);",Be,".vertexAttribPointer(",[Ye,Le,_e,ue.normalized,ue.stride,ue.offset],");",d,".type=",_e,";",d,".size=",Le,";",U.map(function(gt){return d+"."+gt+"="+ue[gt]+";"}).join(""),"}"),Lt){var ft=ue.divisor;Z("if(",d,".divisor!==",ft,"){",ae.instancing,".vertexAttribDivisorANGLE(",[Ye,ft],");",d,".divisor=",ft,";}")}}function le(){Z("if(",d,".buffer){",Be,".disableVertexAttribArray(",Ye,");",d,".buffer=null;","}if(",Nu.map(function(_e,Le){return d+"."+_e+"!=="+R[Le]}).join("||"),"){",Be,".vertexAttrib4f(",Ye,",",R,");",Nu.map(function(_e,Le){return d+"."+_e+"="+R[Le]+";"}).join(""),"}")}m===Ds?q():m===jf?le():(Z("if(",m,"===",Ds,"){"),q(),Z("}else{"),le(),Z("}"))}Ue.forEach(function(se){var be=se.name,ue=Se.attributes[be],Be;if(ue){if(!ze(ue))return;Be=ue.append(ae,Z)}else{if(!ze(Hi))return;var Ye=ae.scopeAttrib(be);Q.optional(function(){ae.assert(Z,Ye+".state","missing attribute "+be)}),Be={},Object.keys(new We).forEach(function(d){Be[d]=Z.def(Ye,".",d)})}Ie(ae.link(se),Te(se.info.type),Be)})}function Tr(ae,Z,Se,Ue,ze){for(var Ne=ae.shared,Te=Ne.gl,Ie,se=0;se<Ue.length;++se){var be=Ue[se],ue=be.name,Be=be.info.type,Ye=Se.uniforms[ue],d=ae.link(be),m=d+".location",w;if(Ye){if(!ze(Ye))continue;if(Fn(Ye)){var R=Ye.value;if(Q.command(R!==null&&typeof R<"u",'missing uniform "'+ue+'"',ae.commandStr),Be===Ru||Be===zo){Q.command(typeof R=="function"&&(Be===Ru&&(R._reglType==="texture2d"||R._reglType==="framebuffer")||Be===zo&&(R._reglType==="textureCube"||R._reglType==="framebufferCube")),"invalid texture for uniform "+ue,ae.commandStr);var U=ae.link(R._texture||R.color[0]._texture);Z(Te,".uniform1i(",m,",",U+".bind());"),Z.exit(U,".unbind();")}else if(Be===xl||Be===Sl||Be===Bs){Q.optional(function(){Q.command(A(R),"invalid matrix for uniform "+ue,ae.commandStr),Q.command(Be===xl&&R.length===4||Be===Sl&&R.length===9||Be===Bs&&R.length===16,"invalid length for matrix uniform "+ue,ae.commandStr)});var q=ae.global.def("new Float32Array(["+Array.prototype.slice.call(R)+"])"),le=2;Be===Sl?le=3:Be===Bs&&(le=4),Z(Te,".uniformMatrix",le,"fv(",m,",false,",q,");")}else{switch(Be){case Mi:Q.commandType(R,"number","uniform "+ue,ae.commandStr),Ie="1f";break;case Fs:Q.command(A(R)&&R.length===2,"uniform "+ue,ae.commandStr),Ie="2f";break;case kc:Q.command(A(R)&&R.length===3,"uniform "+ue,ae.commandStr),Ie="3f";break;case Vi:Q.command(A(R)&&R.length===4,"uniform "+ue,ae.commandStr),Ie="4f";break;case $s:Q.commandType(R,"boolean","uniform "+ue,ae.commandStr),Ie="1i";break;case _a:Q.commandType(R,"number","uniform "+ue,ae.commandStr),Ie="1i";break;case Ol:Q.command(A(R)&&R.length===2,"uniform "+ue,ae.commandStr),Ie="2i";break;case zf:Q.command(A(R)&&R.length===2,"uniform "+ue,ae.commandStr),Ie="2i";break;case jc:Q.command(A(R)&&R.length===3,"uniform "+ue,ae.commandStr),Ie="3i";break;case Ni:Q.command(A(R)&&R.length===3,"uniform "+ue,ae.commandStr),Ie="3i";break;case Cc:Q.command(A(R)&&R.length===4,"uniform "+ue,ae.commandStr),Ie="4i";break;case Rc:Q.command(A(R)&&R.length===4,"uniform "+ue,ae.commandStr),Ie="4i";break}Z(Te,".uniform",Ie,"(",m,",",A(R)?Array.prototype.slice.call(R):R,");")}continue}else w=Ye.append(ae,Z)}else{if(!ze(Hi))continue;w=Z.def(Ne.uniforms,"[",oe.id(ue),"]")}Be===Ru?(Q(!Array.isArray(w),"must specify a scalar prop for textures"),Z("if(",w,"&&",w,'._reglType==="framebuffer"){',w,"=",w,".color[0];","}")):Be===zo&&(Q(!Array.isArray(w),"must specify a scalar prop for cube maps"),Z("if(",w,"&&",w,'._reglType==="framebufferCube"){',w,"=",w,".color[0];","}")),Q.optional(function(){function Gt(Mt,Zt){ae.assert(Z,Mt,'bad data or missing for uniform "'+ue+'".  '+Zt)}function Sn(Mt){Q(!Array.isArray(w),"must not specify an array type for uniform"),Gt("typeof "+w+'==="'+Mt+'"',"invalid type, expected "+Mt)}function En(Mt,Zt){Array.isArray(w)?Q(w.length===Mt,"must have length "+Mt):Gt(Ne.isArrayLike+"("+w+")&&"+w+".length==="+Mt,"invalid vector, should have length "+Mt,ae.commandStr)}function Hn(Mt){Q(!Array.isArray(w),"must not specify a value type"),Gt("typeof "+w+'==="function"&&'+w+'._reglType==="texture'+(Mt===Wf?"2d":"Cube")+'"',"invalid texture type",ae.commandStr)}switch(Be){case _a:Sn("number");break;case zf:En(2);break;case Ni:En(3);break;case Rc:En(4);break;case Mi:Sn("number");break;case Fs:En(2);break;case kc:En(3);break;case Vi:En(4);break;case $s:Sn("boolean");break;case Ol:En(2);break;case jc:En(3);break;case Cc:En(4);break;case xl:En(4);break;case Sl:En(9);break;case Bs:En(16);break;case Ru:Hn(Wf);break;case zo:Hn(Dp);break}});var _e=1;switch(Be){case Ru:case zo:var Le=Z.def(w,"._texture");Z(Te,".uniform1i(",m,",",Le,".bind());"),Z.exit(Le,".unbind();");continue;case _a:case $s:Ie="1i";break;case zf:case Ol:Ie="2i",_e=2;break;case Ni:case jc:Ie="3i",_e=3;break;case Rc:case Cc:Ie="4i",_e=4;break;case Mi:Ie="1f";break;case Fs:Ie="2f",_e=2;break;case kc:Ie="3f",_e=3;break;case Vi:Ie="4f",_e=4;break;case xl:Ie="Matrix2fv";break;case Sl:Ie="Matrix3fv";break;case Bs:Ie="Matrix4fv";break}if(Z(Te,".uniform",Ie,"(",m,","),Ie.charAt(0)==="M"){var ft=Math.pow(Be-xl+2,2),gt=ae.global.def("new Float32Array(",ft,")");Array.isArray(w)?Z("false,(",Mr(ft,function(Gt){return gt+"["+Gt+"]="+w[Gt]}),",",gt,")"):Z("false,(Array.isArray(",w,")||",w," instanceof Float32Array)?",w,":(",Mr(ft,function(Gt){return gt+"["+Gt+"]="+w+"["+Gt+"]"}),",",gt,")")}else _e>1?Z(Mr(_e,function(Gt){return Array.isArray(w)?w[Gt]:w+"["+Gt+"]"})):(Q(!Array.isArray(w),"uniform value must not be an array"),Z(w));Z(");")}}function kn(ae,Z,Se,Ue){var ze=ae.shared,Ne=ze.gl,Te=ze.draw,Ie=Ue.draw;function se(){var Le=Ie.elements,ft,gt=Z;return Le?((Le.contextDep&&Ue.contextDynamic||Le.propDep)&&(gt=Se),ft=Le.append(ae,gt)):ft=gt.def(Te,".",ko),ft&&gt("if("+ft+")"+Ne+".bindBuffer("+$d+","+ft+".buffer.buffer);"),ft}function be(){var Le=Ie.count,ft,gt=Z;return Le?((Le.contextDep&&Ue.contextDynamic||Le.propDep)&&(gt=Se),ft=Le.append(ae,gt),Q.optional(function(){Le.MISSING&&ae.assert(Z,"false","missing vertex count"),Le.DYNAMIC&&ae.assert(gt,ft+">=0","missing vertex count")})):(ft=gt.def(Te,".",Fa),Q.optional(function(){ae.assert(gt,ft+">=0","missing vertex count")})),ft}var ue=se();function Be(Le){var ft=Ie[Le];return ft?ft.contextDep&&Ue.contextDynamic||ft.propDep?ft.append(ae,Se):ft.append(ae,Z):Z.def(Te,".",Le)}var Ye=Be(ku),d=Be($a),m=be();if(typeof m=="number"){if(m===0)return}else Se("if(",m,"){"),Se.exit("}");var w,R;Lt&&(w=Be(as),R=ae.instancing);var U=ue+".type",q=Ie.elements&&Fn(Ie.elements);function le(){function Le(){Se(R,".drawElementsInstancedANGLE(",[Ye,m,U,d+"<<(("+U+"-"+rs+")>>1)",w],");")}function ft(){Se(R,".drawArraysInstancedANGLE(",[Ye,d,m,w],");")}ue?q?Le():(Se("if(",ue,"){"),Le(),Se("}else{"),ft(),Se("}")):ft()}function _e(){function Le(){Se(Ne+".drawElements("+[Ye,m,U,d+"<<(("+U+"-"+rs+")>>1)"]+");")}function ft(){Se(Ne+".drawArrays("+[Ye,d,m]+");")}ue?q?Le():(Se("if(",ue,"){"),Le(),Se("}else{"),ft(),Se("}")):ft()}Lt&&(typeof w!="number"||w>=0)?typeof w=="string"?(Se("if(",w,">0){"),le(),Se("}else if(",w,"<0){"),_e(),Se("}")):le():_e()}function cr(ae,Z,Se,Ue,ze){var Ne=Rn(),Te=Ne.proc("body",ze);return Q.optional(function(){Ne.commandStr=Z.commandStr,Ne.command=Ne.link(Z.commandStr)}),Lt&&(Ne.instancing=Te.def(Ne.shared.extensions,".angle_instanced_arrays")),ae(Ne,Te,Se,Ue),Ne.compile().body}function Un(ae,Z,Se,Ue){mo(ae,Z),Se.useVAO?Se.drawVAO?Z(ae.shared.vao,".setVAO(",Se.drawVAO.append(ae,Z),");"):Z(ae.shared.vao,".setVAO(",ae.shared.vao,".targetVAO);"):(Z(ae.shared.vao,".setVAO(null);"),Qo(ae,Z,Se,Ue.attributes,function(){return!0})),Tr(ae,Z,Se,Ue.uniforms,function(){return!0}),kn(ae,Z,Z,Se)}function ro(ae,Z){var Se=ae.proc("draw",1);mo(ae,Se),jo(ae,Se,Z.context),yo(ae,Se,Z.framebuffer),co(ae,Se,Z),Xo(ae,Se,Z.state),Kn(ae,Se,Z,!1,!0);var Ue=Z.shader.progVar.append(ae,Se);if(Se(ae.shared.gl,".useProgram(",Ue,".program);"),Z.shader.program)Un(ae,Se,Z,Z.shader.program);else{Se(ae.shared.vao,".setVAO(null);");var ze=ae.global.def("{}"),Ne=Se.def(Ue,".id"),Te=Se.def(ze,"[",Ne,"]");Se(ae.cond(Te).then(Te,".call(this,a0);").else(Te,"=",ze,"[",Ne,"]=",ae.link(function(Ie){return cr(Un,ae,Z,Ie,1)}),"(",Ue,");",Te,".call(this,a0);"))}Object.keys(Z.state).length>0&&Se(ae.shared.current,".dirty=true;")}function Ea(ae,Z,Se,Ue){ae.batchId="a1",mo(ae,Z);function ze(){return!0}Qo(ae,Z,Se,Ue.attributes,ze),Tr(ae,Z,Se,Ue.uniforms,ze),kn(ae,Z,Z,Se)}function Du(ae,Z,Se,Ue){mo(ae,Z);var ze=Se.contextDep,Ne=Z.def(),Te="a0",Ie="a1",se=Z.def();ae.shared.props=se,ae.batchId=Ne;var be=ae.scope(),ue=ae.scope();Z(be.entry,"for(",Ne,"=0;",Ne,"<",Ie,";++",Ne,"){",se,"=",Te,"[",Ne,"];",ue,"}",be.exit);function Be(U){return U.contextDep&&ze||U.propDep}function Ye(U){return!Be(U)}if(Se.needsContext&&jo(ae,ue,Se.context),Se.needsFramebuffer&&yo(ae,ue,Se.framebuffer),Xo(ae,ue,Se.state,Be),Se.profile&&Be(Se.profile)&&Kn(ae,ue,Se,!1,!0),Ue)Se.useVAO?Se.drawVAO?Be(Se.drawVAO)?ue(ae.shared.vao,".setVAO(",Se.drawVAO.append(ae,ue),");"):be(ae.shared.vao,".setVAO(",Se.drawVAO.append(ae,be),");"):be(ae.shared.vao,".setVAO(",ae.shared.vao,".targetVAO);"):(be(ae.shared.vao,".setVAO(null);"),Qo(ae,be,Se,Ue.attributes,Ye),Qo(ae,ue,Se,Ue.attributes,Be)),Tr(ae,be,Se,Ue.uniforms,Ye),Tr(ae,ue,Se,Ue.uniforms,Be),kn(ae,be,ue,Se);else{var d=ae.global.def("{}"),m=Se.shader.progVar.append(ae,ue),w=ue.def(m,".id"),R=ue.def(d,"[",w,"]");ue(ae.shared.gl,".useProgram(",m,".program);","if(!",R,"){",R,"=",d,"[",w,"]=",ae.link(function(U){return cr(Ea,ae,Se,U,2)}),"(",m,");}",R,".call(this,a0[",Ne,"],",Ne,");")}}function de(ae,Z){var Se=ae.proc("batch",2);ae.batchId="0",mo(ae,Se);var Ue=!1,ze=!0;Object.keys(Z.context).forEach(function(d){Ue=Ue||Z.context[d].propDep}),Ue||(jo(ae,Se,Z.context),ze=!1);var Ne=Z.framebuffer,Te=!1;Ne?(Ne.propDep?Ue=Te=!0:Ne.contextDep&&Ue&&(Te=!0),Te||yo(ae,Se,Ne)):yo(ae,Se,null),Z.state.viewport&&Z.state.viewport.propDep&&(Ue=!0);function Ie(d){return d.contextDep&&Ue||d.propDep}co(ae,Se,Z),Xo(ae,Se,Z.state,function(d){return!Ie(d)}),(!Z.profile||!Ie(Z.profile))&&Kn(ae,Se,Z,!1,"a1"),Z.contextDep=Ue,Z.needsContext=ze,Z.needsFramebuffer=Te;var se=Z.shader.progVar;if(se.contextDep&&Ue||se.propDep)Du(ae,Se,Z,null);else{var be=se.append(ae,Se);if(Se(ae.shared.gl,".useProgram(",be,".program);"),Z.shader.program)Du(ae,Se,Z,Z.shader.program);else{Se(ae.shared.vao,".setVAO(null);");var ue=ae.global.def("{}"),Be=Se.def(be,".id"),Ye=Se.def(ue,"[",Be,"]");Se(ae.cond(Ye).then(Ye,".call(this,a0,a1);").else(Ye,"=",ue,"[",Be,"]=",ae.link(function(d){return cr(Du,ae,Z,d,2)}),"(",be,");",Ye,".call(this,a0,a1);"))}}Object.keys(Z.state).length>0&&Se(ae.shared.current,".dirty=true;")}function tt(ae,Z){var Se=ae.proc("scope",3);ae.batchId="a2";var Ue=ae.shared,ze=Ue.current;jo(ae,Se,Z.context),Z.framebuffer&&Z.framebuffer.append(ae,Se),cu(Object.keys(Z.state)).forEach(function(Te){var Ie=Z.state[Te],se=Ie.append(ae,Se);A(se)?se.forEach(function(be,ue){Se.set(ae.next[Te],"["+ue+"]",be)}):Se.set(Ue.next,"."+Te,se)}),Kn(ae,Se,Z,!0,!0),[ko,$a,Fa,as,ku].forEach(function(Te){var Ie=Z.draw[Te];Ie&&Se.set(Ue.draw,"."+Te,""+Ie.append(ae,Se))}),Object.keys(Z.uniforms).forEach(function(Te){var Ie=Z.uniforms[Te].append(ae,Se);Array.isArray(Ie)&&(Ie="["+Ie.join()+"]"),Se.set(Ue.uniforms,"["+oe.id(Te)+"]",Ie)}),Object.keys(Z.attributes).forEach(function(Te){var Ie=Z.attributes[Te].append(ae,Se),se=ae.scopeAttrib(Te);Object.keys(new We).forEach(function(be){Se.set(se,"."+be,Ie[be])})}),Z.scopeVAO&&Se.set(Ue.vao,".targetVAO",Z.scopeVAO.append(ae,Se));function Ne(Te){var Ie=Z.shader[Te];Ie&&Se.set(Ue.shader,"."+Te,Ie.append(ae,Se))}Ne(Mc),Ne(Qr),Object.keys(Z.state).length>0&&(Se(ze,".dirty=true;"),Se.exit(ze,".dirty=true;")),Se("a1(",ae.shared.context,",a0,",ae.batchId,");")}function Ke(ae){if(!(typeof ae!="object"||A(ae))){for(var Z=Object.keys(ae),Se=0;Se<Z.length;++Se)if(Yt.isDynamic(ae[Z[Se]]))return!0;return!1}}function en(ae,Z,Se){var Ue=Z.static[Se];if(!Ue||!Ke(Ue))return;var ze=ae.global,Ne=Object.keys(Ue),Te=!1,Ie=!1,se=!1,be=ae.global.def("{}");Ne.forEach(function(Be){var Ye=Ue[Be];if(Yt.isDynamic(Ye)){typeof Ye=="function"&&(Ye=Ue[Be]=Yt.unbox(Ye));var d=_i(Ye,null);Te=Te||d.thisDep,se=se||d.propDep,Ie=Ie||d.contextDep}else{switch(ze(be,".",Be,"="),typeof Ye){case"number":ze(Ye);break;case"string":ze('"',Ye,'"');break;case"object":Array.isArray(Ye)&&ze("[",Ye.join(),"]");break;default:ze(ae.link(Ye));break}ze(";")}});function ue(Be,Ye){Ne.forEach(function(d){var m=Ue[d];if(Yt.isDynamic(m)){var w=Be.invoke(Ye,m);Ye(be,".",d,"=",w,";")}})}Z.dynamic[Se]=new Yt.DynamicVariable(Ec,{thisDep:Te,contextDep:Ie,propDep:se,ref:be,append:ue}),delete Z.static[Se]}function pr(ae,Z,Se,Ue,ze){var Ne=Rn();Ne.stats=Ne.link(ze),Object.keys(Z.static).forEach(function(Ie){en(Ne,Z,Ie)}),Fd.forEach(function(Ie){en(Ne,ae,Ie)});var Te=Oo(ae,Z,Se,Ue,Ne);return ro(Ne,Te),tt(Ne,Te),de(Ne,Te),a(Ne.compile(),{destroy:function(){Te.shader.program.destroy()}})}return{next:Kt,current:St,procs:function(){var ae=Rn(),Z=ae.proc("poll"),Se=ae.proc("refresh"),Ue=ae.block();Z(Ue),Se(Ue);var ze=ae.shared,Ne=ze.gl,Te=ze.next,Ie=ze.current;Ue(Ie,".dirty=false;"),yo(ae,Z),yo(ae,Se,null,!0);var se;Lt&&(se=ae.link(Lt)),me.oes_vertex_array_object&&Se(ae.link(me.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var be=0;be<et.maxAttributes;++be){var ue=Se.def(ze.attributes,"[",be,"]"),Be=ae.cond(ue,".buffer");Be.then(Ne,".enableVertexAttribArray(",be,");",Ne,".bindBuffer(",lu,",",ue,".buffer.buffer);",Ne,".vertexAttribPointer(",be,",",ue,".size,",ue,".type,",ue,".normalized,",ue,".stride,",ue,".offset);").else(Ne,".disableVertexAttribArray(",be,");",Ne,".vertexAttrib4f(",be,",",ue,".x,",ue,".y,",ue,".z,",ue,".w);",ue,".buffer=null;"),Se(Be),Lt&&Se(se,".vertexAttribDivisorANGLE(",be,",",ue,".divisor);")}return Se(ae.shared.vao,".currentVAO=null;",ae.shared.vao,".setVAO(",ae.shared.vao,".targetVAO);"),Object.keys(zt).forEach(function(Ye){var d=zt[Ye],m=Ue.def(Te,".",Ye),w=ae.block();w("if(",m,"){",Ne,".enable(",d,")}else{",Ne,".disable(",d,")}",Ie,".",Ye,"=",m,";"),Se(w),Z("if(",m,"!==",Ie,".",Ye,"){",w,"}")}),Object.keys(Et).forEach(function(Ye){var d=Et[Ye],m=St[Ye],w,R,U=ae.block();if(U(Ne,".",d,"("),A(m)){var q=m.length;w=ae.global.def(Te,".",Ye),R=ae.global.def(Ie,".",Ye),U(Mr(q,function(le){return w+"["+le+"]"}),");",Mr(q,function(le){return R+"["+le+"]="+w+"["+le+"];"}).join("")),Z("if(",Mr(q,function(le){return w+"["+le+"]!=="+R+"["+le+"]"}).join("||"),"){",U,"}")}else w=Ue.def(Te,".",Ye),R=Ue.def(Ie,".",Ye),U(w,");",Ie,".",Ye,"=",w,";"),Z("if(",w,"!==",R,"){",U,"}");Se(U)}),ae.compile()}(),compile:pr}}function Vp(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var cs=34918,vr=34919,Hp=35007,Xi=function(I,oe){if(!oe.ext_disjoint_timer_query)return null;var me=[];function et(){return me.pop()||oe.ext_disjoint_timer_query.createQueryEXT()}function ct(Lt){me.push(Lt)}var Ze=[];function ut(Lt){var qt=et();oe.ext_disjoint_timer_query.beginQueryEXT(Hp,qt),Ze.push(qt),Pt(Ze.length-1,Ze.length,Lt)}function Nt(){oe.ext_disjoint_timer_query.endQueryEXT(Hp)}function Dt(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Rt=[];function st(){return Rt.pop()||new Dt}function Wt(Lt){Rt.push(Lt)}var Ut=[];function Pt(Lt,qt,St){var Kt=st();Kt.startQueryIndex=Lt,Kt.endQueryIndex=qt,Kt.sum=0,Kt.stats=St,Ut.push(Kt)}var wt=[],We=[];function ot(){var Lt,qt,St=Ze.length;if(St!==0){We.length=Math.max(We.length,St+1),wt.length=Math.max(wt.length,St+1),wt[0]=0,We[0]=0;var Kt=0;for(Lt=0,qt=0;qt<Ze.length;++qt){var At=Ze[qt];oe.ext_disjoint_timer_query.getQueryObjectEXT(At,vr)?(Kt+=oe.ext_disjoint_timer_query.getQueryObjectEXT(At,cs),ct(At)):Ze[Lt++]=At,wt[qt+1]=Kt,We[qt+1]=Lt}for(Ze.length=Lt,Lt=0,qt=0;qt<Ut.length;++qt){var zt=Ut[qt],Et=zt.startQueryIndex,Xt=zt.endQueryIndex;zt.sum+=wt[Xt]-wt[Et];var An=We[Et],Bn=We[Xt];Bn===An?(zt.stats.gpuTime+=zt.sum/1e6,Wt(zt)):(zt.startQueryIndex=An,zt.endQueryIndex=Bn,Ut[Lt++]=zt)}Ut.length=Lt}}return{beginQuery:ut,endQuery:Nt,pushScopeStats:Pt,update:ot,getNumPendingQueries:function(){return Ze.length},clear:function(){me.push.apply(me,Ze);for(var Lt=0;Lt<me.length;Lt++)oe.ext_disjoint_timer_query.deleteQueryEXT(me[Lt]);Ze.length=0,me.length=0},restore:function(){Ze.length=0,me.length=0}}},Ho=16384,wa=256,sv=1024,Lc=34962,fu="webglcontextlost",Hd="webglcontextrestored",Cu=1,Kr=2,wo=3;function ci(I,oe){for(var me=0;me<I.length;++me)if(I[me]===oe)return me;return-1}function Fc(I){var oe=or(I);if(!oe)return null;var me=oe.gl,et=me.getContextAttributes(),ct=me.isContextLost(),Ze=Xr(me,oe);if(!Ze)return null;var ut=qo(),Nt=Vp(),Dt=Ze.extensions,Rt=Xi(me,Dt),st=mr(),Wt=me.drawingBufferWidth,Ut=me.drawingBufferHeight,Pt={tick:0,time:0,viewportWidth:Wt,viewportHeight:Ut,framebufferWidth:Wt,framebufferHeight:Ut,drawingBufferWidth:Wt,drawingBufferHeight:Ut,pixelRatio:oe.pixelRatio},wt={},We={elements:null,primitive:4,count:-1,offset:0,instances:-1},ot=nc(me,Dt),Lt=Qi(me,Nt,oe,St),qt=kf(me,Dt,ot,Nt,Lt);function St(kn){return qt.destroyBuffer(kn)}var Kt=fn(me,Dt,Lt,Nt),At=kd(me,ut,Nt,oe),zt=_r(me,Dt,ot,function(){An.procs.poll()},Pt,Nt,oe),Et=dl(me,Dt,ot,Nt,oe),Xt=_c(me,Dt,ot,zt,Et,Nt),An=uv(me,ut,Dt,ot,Lt,Kt,zt,Xt,wt,qt,At,We,Pt,Rt,oe),Bn=vo(me,Xt,An.procs.poll,Pt,et,Dt,ot),It=An.next,Tt=me.canvas,Ot=[],Rn=[],tr=[],sn=[oe.onDestroy],Jn=null;function $n(){if(Ot.length===0){Rt&&Rt.update(),Jn=null;return}Jn=Nn.next($n),Xo();for(var kn=Ot.length-1;kn>=0;--kn){var cr=Ot[kn];cr&&cr(Pt,null,0)}me.flush(),Rt&&Rt.update()}function nr(){!Jn&&Ot.length>0&&(Jn=Nn.next($n))}function yr(){Jn&&(Nn.cancel($n),Jn=null)}function Eo(kn){kn.preventDefault(),ct=!0,yr(),Rn.forEach(function(cr){cr()})}function Ro(kn){me.getError(),ct=!1,Ze.restore(),At.restore(),Lt.restore(),zt.restore(),Et.restore(),Xt.restore(),qt.restore(),Rt&&Rt.restore(),An.procs.refresh(),nr(),tr.forEach(function(cr){cr()})}Tt&&(Tt.addEventListener(fu,Eo,!1),Tt.addEventListener(Hd,Ro,!1));function lr(){Ot.length=0,yr(),Tt&&(Tt.removeEventListener(fu,Eo),Tt.removeEventListener(Hd,Ro)),At.clear(),Xt.clear(),Et.clear(),zt.clear(),Kt.clear(),Lt.clear(),qt.clear(),Rt&&Rt.clear(),sn.forEach(function(kn){kn()})}function Lo(kn){Q(!!kn,"invalid args to regl({...})"),Q.type(kn,"object","invalid args to regl({...})");function cr(ze){var Ne=a({},ze);delete Ne.uniforms,delete Ne.attributes,delete Ne.context,delete Ne.vao,"stencil"in Ne&&Ne.stencil.op&&(Ne.stencil.opBack=Ne.stencil.opFront=Ne.stencil.op,delete Ne.stencil.op);function Te(Ie){if(Ie in Ne){var se=Ne[Ie];delete Ne[Ie],Object.keys(se).forEach(function(be){Ne[Ie+"."+be]=se[be]})}}return Te("blend"),Te("depth"),Te("cull"),Te("stencil"),Te("polygonOffset"),Te("scissor"),Te("sample"),"vao"in ze&&(Ne.vao=ze.vao),Ne}function Un(ze,Ne){var Te={},Ie={};return Object.keys(ze).forEach(function(se){var be=ze[se];if(Yt.isDynamic(be)){Ie[se]=Yt.unbox(be,se);return}else if(Ne&&Array.isArray(be)){for(var ue=0;ue<be.length;++ue)if(Yt.isDynamic(be[ue])){Ie[se]=Yt.unbox(be,se);return}}Te[se]=be}),{dynamic:Ie,static:Te}}var ro=Un(kn.context||{},!0),Ea=Un(kn.uniforms||{},!0),Du=Un(kn.attributes||{},!1),de=Un(cr(kn),!1),tt={gpuTime:0,cpuTime:0,count:0},Ke=An.compile(de,Du,Ea,ro,tt),en=Ke.draw,pr=Ke.batch,ae=Ke.scope,Z=[];function Se(ze){for(;Z.length<ze;)Z.push(null);return Z}function Ue(ze,Ne){var Te;if(ct&&Q.raise("context lost"),typeof ze=="function")return ae.call(this,null,ze,0);if(typeof Ne=="function")if(typeof ze=="number")for(Te=0;Te<ze;++Te)ae.call(this,null,Ne,Te);else if(Array.isArray(ze))for(Te=0;Te<ze.length;++Te)ae.call(this,ze[Te],Ne,Te);else return ae.call(this,ze,Ne,0);else if(typeof ze=="number"){if(ze>0)return pr.call(this,Se(ze|0),ze|0)}else if(Array.isArray(ze)){if(ze.length)return pr.call(this,ze,ze.length)}else return en.call(this,ze)}return a(Ue,{stats:tt,destroy:function(){Ke.destroy()}})}var Zr=Xt.setFBO=Lo({framebuffer:Yt.define.call(null,Cu,"framebuffer")});function Oo(kn,cr){var Un=0;An.procs.poll();var ro=cr.color;ro&&(me.clearColor(+ro[0]||0,+ro[1]||0,+ro[2]||0,+ro[3]||0),Un|=Ho),"depth"in cr&&(me.clearDepth(+cr.depth),Un|=wa),"stencil"in cr&&(me.clearStencil(cr.stencil|0),Un|=sv),Q(!!Un,"called regl.clear with no buffer specified"),me.clear(Un)}function jo(kn){if(Q(typeof kn=="object"&&kn,"regl.clear() takes an object as input"),"framebuffer"in kn)if(kn.framebuffer&&kn.framebuffer_reglType==="framebufferCube")for(var cr=0;cr<6;++cr)Zr(a({framebuffer:kn.framebuffer.faces[cr]},kn),Oo);else Zr(kn,Oo);else Oo(null,kn)}function yo(kn){Q.type(kn,"function","regl.frame() callback must be a function"),Ot.push(kn);function cr(){var Un=ci(Ot,kn);Q(Un>=0,"cannot cancel a frame twice");function ro(){var Ea=ci(Ot,ro);Ot[Ea]=Ot[Ot.length-1],Ot.length-=1,Ot.length<=0&&yr()}Ot[Un]=ro}return nr(),{cancel:cr}}function co(){var kn=It.viewport,cr=It.scissor_box;kn[0]=kn[1]=cr[0]=cr[1]=0,Pt.viewportWidth=Pt.framebufferWidth=Pt.drawingBufferWidth=kn[2]=cr[2]=me.drawingBufferWidth,Pt.viewportHeight=Pt.framebufferHeight=Pt.drawingBufferHeight=kn[3]=cr[3]=me.drawingBufferHeight}function Xo(){Pt.tick+=1,Pt.time=Kn(),co(),An.procs.poll()}function mo(){zt.refresh(),co(),An.procs.refresh(),Rt&&Rt.update()}function Kn(){return(mr()-st)/1e3}mo();function Qo(kn,cr){Q.type(cr,"function","listener callback must be a function");var Un;switch(kn){case"frame":return yo(cr);case"lost":Un=Rn;break;case"restore":Un=tr;break;case"destroy":Un=sn;break;default:Q.raise("invalid event, must be one of frame,lost,restore,destroy")}return Un.push(cr),{cancel:function(){for(var ro=0;ro<Un.length;++ro)if(Un[ro]===cr){Un[ro]=Un[Un.length-1],Un.pop();return}}}}var Tr=a(Lo,{clear:jo,prop:Yt.define.bind(null,Cu),context:Yt.define.bind(null,Kr),this:Yt.define.bind(null,wo),draw:Lo({}),buffer:function(kn){return Lt.create(kn,Lc,!1,!1)},elements:function(kn){return Kt.create(kn,!1)},texture:zt.create2D,cube:zt.createCube,renderbuffer:Et.create,framebuffer:Xt.create,framebufferCube:Xt.createCube,vao:qt.createVAO,attributes:et,frame:yo,on:Qo,limits:ot,hasExtension:function(kn){return ot.extensions.indexOf(kn.toLowerCase())>=0},read:Bn,destroy:lr,_gl:me,_refresh:mo,poll:function(){Xo(),Rt&&Rt.update()},now:Kn,stats:Nt});return oe.onDone(null,Tr),Tr}return Fc})})(ZZ);var qc,Av,Kc,hs,Tv,td,Mv,fm,$l,rp,ia,Bl,Ul,dm;qc={},on(qc,rn.POINTS,"points"),on(qc,rn.LINES,"lines"),on(qc,rn.LINE_LOOP,"line loop"),on(qc,rn.LINE_STRIP,"line strip"),on(qc,rn.TRIANGLES,"triangles"),on(qc,rn.TRIANGLE_FAN,"triangle fan"),on(qc,rn.TRIANGLE_STRIP,"triangle strip");Av={},on(Av,rn.STATIC_DRAW,"static"),on(Av,rn.DYNAMIC_DRAW,"dynamic"),on(Av,rn.STREAM_DRAW,"stream");Kc={},on(Kc,rn.BYTE,"int8"),on(Kc,rn.UNSIGNED_INT,"int16"),on(Kc,rn.INT,"int32"),on(Kc,rn.UNSIGNED_BYTE,"uint8"),on(Kc,rn.UNSIGNED_SHORT,"uint16"),on(Kc,rn.UNSIGNED_INT,"uint32"),on(Kc,rn.FLOAT,"float");hs={},on(hs,rn.ALPHA,"alpha"),on(hs,rn.LUMINANCE,"luminance"),on(hs,rn.LUMINANCE_ALPHA,"luminance alpha"),on(hs,rn.RGB,"rgb"),on(hs,rn.RGBA,"rgba"),on(hs,rn.RGBA4,"rgba4"),on(hs,rn.RGB5_A1,"rgb5 a1"),on(hs,rn.RGB565,"rgb565"),on(hs,rn.DEPTH_COMPONENT,"depth"),on(hs,rn.DEPTH_STENCIL,"depth stencil");Tv={},on(Tv,rn.DONT_CARE,"dont care"),on(Tv,rn.NICEST,"nice"),on(Tv,rn.FASTEST,"fast");td={},on(td,rn.NEAREST,"nearest"),on(td,rn.LINEAR,"linear"),on(td,rn.LINEAR_MIPMAP_LINEAR,"mipmap"),on(td,rn.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),on(td,rn.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),on(td,rn.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");Mv={},on(Mv,rn.REPEAT,"repeat"),on(Mv,rn.CLAMP_TO_EDGE,"clamp"),on(Mv,rn.MIRRORED_REPEAT,"mirror");fm={},on(fm,rn.NONE,"none"),on(fm,rn.BROWSER_DEFAULT_WEBGL,"browser");$l={},on($l,rn.NEVER,"never"),on($l,rn.ALWAYS,"always"),on($l,rn.LESS,"less"),on($l,rn.LEQUAL,"lequal"),on($l,rn.GREATER,"greater"),on($l,rn.GEQUAL,"gequal"),on($l,rn.EQUAL,"equal"),on($l,rn.NOTEQUAL,"notequal");rp={},on(rp,rn.FUNC_ADD,"add"),on(rp,rn.MIN_EXT,"min"),on(rp,rn.MAX_EXT,"max"),on(rp,rn.FUNC_SUBTRACT,"subtract"),on(rp,rn.FUNC_REVERSE_SUBTRACT,"reverse subtract");ia={},on(ia,rn.ZERO,"zero"),on(ia,rn.ONE,"one"),on(ia,rn.SRC_COLOR,"src color"),on(ia,rn.ONE_MINUS_SRC_COLOR,"one minus src color"),on(ia,rn.SRC_ALPHA,"src alpha"),on(ia,rn.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),on(ia,rn.DST_COLOR,"dst color"),on(ia,rn.ONE_MINUS_DST_COLOR,"one minus dst color"),on(ia,rn.DST_ALPHA,"dst alpha"),on(ia,rn.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),on(ia,rn.CONSTANT_COLOR,"constant color"),on(ia,rn.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),on(ia,rn.CONSTANT_ALPHA,"constant alpha"),on(ia,rn.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),on(ia,rn.SRC_ALPHA_SATURATE,"src alpha saturate");Bl={},on(Bl,rn.NEVER,"never"),on(Bl,rn.ALWAYS,"always"),on(Bl,rn.LESS,"less"),on(Bl,rn.LEQUAL,"lequal"),on(Bl,rn.GREATER,"greater"),on(Bl,rn.GEQUAL,"gequal"),on(Bl,rn.EQUAL,"equal"),on(Bl,rn.NOTEQUAL,"notequal");Ul={},on(Ul,rn.ZERO,"zero"),on(Ul,rn.KEEP,"keep"),on(Ul,rn.REPLACE,"replace"),on(Ul,rn.INVERT,"invert"),on(Ul,rn.INCR,"increment"),on(Ul,rn.DECR,"decrement"),on(Ul,rn.INCR_WRAP,"increment wrap"),on(Ul,rn.DECR_WRAP,"decrement wrap");dm={},on(dm,rn.FRONT,"front"),on(dm,rn.BACK,"back");var JZ=Function.prototype,QZ=JZ.toString;QZ.call(Object);globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;class zN{constructor(){xa(this,"lf");xa(this,"option")}render(t){this.lf=t}layout(t={}){var g;const{nodes:n,edges:a,gridSize:r}=this.lf.graphModel;let l=40,c=40;r>20&&(l=r*2,c=r*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:l,ranksep:c,begin:[120,120],...t},(g=new sY(this.option).layout({nodes:n.map(b=>({id:b.id,size:{width:b.width,height:b.height},model:b})),edges:a.map(b=>({source:b.sourceNodeId,target:b.targetNodeId,model:b}))}).nodes)==null||g.forEach(b=>{const{model:E}=b;E.set_position({x:b.x,y:b.y})}),this.lf.fitView()}}xa(zN,"pluginName","dagre");const eJ=Vr({name:"WorkFlow"}),tJ=Vr({...eJ,props:{data:Object||null},setup(e,{expose:t}){const n=Object.assign({"./nodes/ai-chat-node/index.ts":x7,"./nodes/application-node/index.ts":k7,"./nodes/base-node/index.ts":A9,"./nodes/condition-node/index.ts":D9,"./nodes/document-extract-node/index.ts":B9,"./nodes/form-node/index.ts":aW,"./nodes/function-lib-node/index.ts":_W,"./nodes/function-node/index.ts":LW,"./nodes/image-generate/index.ts":qW,"./nodes/image-understand/index.ts":az,"./nodes/question-node/index.ts":yz,"./nodes/reply-node/index.ts":Oz,"./nodes/reranker-node/index.ts":Fz,"./nodes/search-dataset-node/index.ts":qz,"./nodes/speech-to-text-node/index.ts":oV,"./nodes/start-node/index.ts":lV,"./nodes/text-to-speech-node/index.ts":gV}),a=w7(),r=Bt(""),l=e,c={nodes:[...bU]};Co({get:()=>l.data?l.data:c,set:N=>N});const y=Bt();ni(()=>{g()});const h=N=>{y.value.render(N)},g=N=>{const M=document.querySelector("#container");M&&(y.value=new sG({plugins:[zN],textEdit:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,background:{backgroundColor:"#f5f6f7"},grid:{size:10,type:"dot",config:{color:"#DEE0E3",thickness:1}},keyboard:{enabled:!0},isSilentMode:!1,container:M}),y.value.setTheme({bezier:{stroke:"#afafaf",strokeWidth:1}}),y.value.on("graph:rendered",()=>{r.value=y.value.graphModel.flowId}),AV(y.value,y.value.graphModel),y.value.batchRegister([...Object.keys(n).map(D=>n[D].default),xV]),y.value.setDefaultEdgeType("app-edge"),y.value.render(N||{}),y.value.graphModel.eventCenter.on("delete_edge",D=>{D.forEach(k=>{y.value.deleteEdge(k)})}),setTimeout(()=>{var D;(D=y.value)==null||D.fitView()},500))};return t({onmousedown:N=>{N.type&&y.value.dnd.startDrag({type:N.type,properties:{...N.properties}}),N.callback&&N.callback(y.value)},validate:()=>Promise.all(y.value.graphModel.nodes.map(N=>{var M;return(M=N==null?void 0:N.validate)==null?void 0:M.call(N)})),getGraphData:()=>y.value.getGraphData(),addNode:N=>{y.value.clearSelectElements();const{virtualRectCenterPositionX:M,virtualRectCenterPositionY:D}=y.value.graphModel.getVirtualRectSize(),k=y.value.graphModel.addNode({type:N.type,properties:N.properties,x:M,y:D-y.value.graphModel.height/2});k.isSelected=!0,k.isHovered=!0,y.value.toFront(k.id)},clearGraphData:()=>y.value.clearData(),renderGraphData:g,render:h}),(N,M)=>(_t(),er(Fi,null,[M[0]||(M[0]=we("div",{className:"workflow-app",id:"container"},null,-1)),y.value?(_t(),an(SV,{key:0,class:"workflow-control",lf:y.value},null,8,["lf"])):Ar("",!0),$(Yr(a),{"flow-id":r.value},null,8,["flow-id"])],64))}});const nJ={class:"workflow-publish-history border-l"},rJ={class:"border-b p-16-24"},oJ={class:"list-height pt-0"},iJ={class:"p-8 pt-0"},aJ={class:"flex-between"},uJ={style:{"max-width":"80%"}},sJ={class:"text-center"},lJ=Vr({__name:"PublishHistory",emits:["click","refreshVersion"],setup(e,{emit:t}){const n=eT(),{params:{id:a}}=n,r=t,l=Bt(!1),c=Bt([]),y=Bt("");function h(N){y.value=N.id}function g(N){r("click",N)}function b(N){r("refreshVersion",N)}function E(N){N.writeStatus=!0}function x(N){N.writeStatus=!1}function T(N,M){if(N){const D={name:N};Sa.putWorkFlowVersion(a,M.id,D,l).then(()=>{Ih(it("common.modifySuccess")),M.writeStatus=!1,j()})}else za(it("views.applicationWorkflow.tip.nameMessage"))}function j(){Sa.getWorkFlowVersion(a,l).then(N=>{c.value=N.data})}return ni(()=>{j()}),(N,M)=>{const D=pe("ReadWrite"),k=pe("el-tag"),F=pe("UserFilled"),te=pe("el-icon"),V=pe("AppAvatar"),z=pe("el-text"),J=pe("MoreFilled"),K=pe("el-button"),B=pe("EditPen"),H=pe("el-dropdown-item"),ne=pe("RefreshLeft"),X=pe("el-dropdown-menu"),ge=pe("el-dropdown"),Fe=pe("common-list"),Me=pe("el-scrollbar"),Xe=Fv("loading");return _t(),er("div",nJ,[we("h4",rJ,qe(N.$t("views.applicationWorkflow.setting.releaseHistory")),1),we("div",oJ,[$(Me,null,{default:G(()=>[we("div",iJ,[Uu((_t(),an(Fe,{data:c.value,class:"mt-8",onClick:g,onMouseenter:h,onMouseleave:M[1]||(M[1]=De=>y.value="")},{default:G(({row:De,index:Re})=>[we("div",aJ,[we("div",uJ,[we("h5",{class:rd([Re===0?"primary":"","flex"])},[$(D,{onChange:ce=>T(ce,De),data:De.name||Yr(N0)(De.update_time),trigger:"manual",write:De.writeStatus,onClose:ce=>x(De)},null,8,["onChange","data","write","onClose"]),Re===0?(_t(),an(k,{key:0,class:"default-tag ml-4"},{default:G(()=>[jt(qe(N.$t("views.applicationWorkflow.setting.latestRelease")),1)]),_:1})):Ar("",!0)],2),$(z,{type:"info",class:"color-secondary flex mt-8"},{default:G(()=>[$(V,{size:20,class:"avatar-grey mr-4"},{default:G(()=>[$(te,null,{default:G(()=>[$(F)]),_:1})]),_:1}),jt(" "+qe(De.publish_user_name),1)]),_:2},1024)]),Uu(we("div",{onClick:M[0]||(M[0]=Mn(()=>{},["stop"]))},[$(ge,{trigger:"click",teleported:!1},{dropdown:G(()=>[$(X,null,{default:G(()=>[$(H,{onClick:Mn(ce=>E(De),["stop"])},{default:G(()=>[$(te,null,{default:G(()=>[$(B)]),_:1}),jt(" "+qe(N.$t("common.edit")),1)]),_:2},1032,["onClick"]),$(H,{onClick:ce=>b(De)},{default:G(()=>[$(te,null,{default:G(()=>[$(ne)]),_:1}),jt(" "+qe(N.$t("views.applicationWorkflow.setting.restoreCurrentVersion")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:G(()=>[$(K,{text:""},{default:G(()=>[$(te,null,{default:G(()=>[$(J)]),_:1})]),_:1})]),_:2},1024)],512),[[Ch,y.value===De.id]])])]),empty:G(()=>[we("div",sJ,[$(z,{type:"info"},{default:G(()=>[jt(qe(N.$t("chat.noHistory")),1)]),_:1})])]),_:1},8,["data"])),[[Xe,l.value]])])]),_:1})])])}}});const cJ=ey(lJ,[["__scopeId","data-v-ff153f59"]]),TA=[Wn.AiChat,Wn.Reply,Wn.FunctionLib,Wn.FunctionLibCustom,Wn.ImageUnderstandNode,Wn.Application,Wn.SpeechToTextNode,Wn.TextToSpeechNode,Wn.ImageGenerateNode];class MA{constructor(t){xa(this,"nodes");xa(this,"edges");xa(this,"workFlowNodes");this.nodes=t.nodes,this.edges=t.edges,this.workFlowNodes=[]}is_valid_start_node(){const t=this.nodes.filter(n=>n.id===Wn.Start);if(t.length==0)throw it("views.applicationWorkflow.validate.startNodeRequired");if(t.length>1)throw it("views.applicationWorkflow.validate.startNodeOnly")}is_valid_base_node(){const t=this.nodes.filter(n=>n.id===Wn.Base);if(t.length==0)throw it("views.applicationWorkflow.validate.baseNodeRequired");if(t.length>1)throw it("views.applicationWorkflow.validate.baseNodeOnly")}is_valid(){this.is_valid_start_node(),this.is_valid_base_node(),this.is_valid_work_flow(),this.is_valid_nodes()}get_start_node(){return this.nodes.filter(n=>n.id===Wn.Start)[0]}get_base_node(){return this.nodes.filter(n=>n.id===Wn.Base)[0]}_is_valid_work_flow(t){t||(t=this.get_start_node()),this.workFlowNodes.push(t),this.is_valid_node(t);const n=this.get_next_nodes(t);for(const a of n)this._is_valid_work_flow(a)}is_valid_work_flow(){this.workFlowNodes=[],this._is_valid_work_flow();const t=this.nodes.filter(n=>n.id!==Wn.Start&&n.id!==Wn.Base).filter(n=>!this.workFlowNodes.includes(n));if(t.length>0)throw`${it("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.map(n=>n.properties.stepName).join("，")}`;this.workFlowNodes=[]}get_next_nodes(t){const a=this.edges.filter(r=>r.sourceNodeId==t.id).map(r=>this.nodes.filter(l=>l.id==r.targetNodeId)).reduce((r,l)=>[...r,...l],[]);if(a.length==0&&!TA.includes(t.type))throw it("views.applicationWorkflow.validate.noNextNode");return a}is_valid_nodes(){for(const t of this.nodes)if(t.type!==Wn.Base&&t.type!==Wn.Start&&!this.edges.some(n=>n.targetNodeId===t.id))throw`${it("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.properties.stepName}`}is_valid_node(t){if(t.properties.status&&t.properties.status===500)throw`${t.properties.stepName} ${it("views.applicationWorkflow.validate.nodeUnavailable")}`;if(t.type===Wn.Condition){const n=t.properties.node_data.branch;for(const a of n){const r=`${t.id}_${a.id}_right`;if(this.edges.filter(c=>c.sourceAnchorId==r).length==0)throw`${t.properties.stepName} ${it("views.applicationWorkflow.validate.needConnect1")}${a.type}${it("views.applicationWorkflow.validate.needConnect2")}`}}else if(this.edges.filter(a=>a.sourceNodeId==t.id).length==0&&!TA.includes(t.type))throw`${t.properties.stepName} ${it("views.applicationWorkflow.validate.cannotEndNode")}`;if(t.properties.status&&t.properties.status!==200)throw`${t.properties.stepName} ${it("views.applicationWorkflow.validate.nodeUnavailable")}`}}const fJ={class:"application-workflow"},dJ={class:"header border-b flex-between p-12-24"},pJ={class:"flex align-center"},hJ={key:0},vJ={key:0},yJ={key:1},mJ={class:"ml-4"},gJ={class:"flex-between"},_J={class:"flex align-center"},bJ={class:"mr-12 ml-24 flex"},wJ=["src"],EJ={class:"mr-16"},OJ={class:"scrollbar-height"},DJ=Vr({__name:"index",setup(e){const{user:t,application:n}=tf(),a=iD(),r=eT(),l=Co(()=>t.isDefaultTheme()),{params:{id:c}}=r;let y;const h=Bt(),g=Bt(),b=Bt(!1),E=Bt(null),x=Bt(!1),T=Bt(!1),j=Bt(!1),N=Bt(""),M=Bt(!1),D=Bt(!1),k=Bt(!1),F=Bt({});function te(){k.value||(D.value=!1,k.value=!1)}function V(Ae){Ae&&J(Ae),i0(`APPLICATION:MANAGE:${c}`,"AND")&&M.value&&he(),D.value=!1,k.value=!1}function z(Ae){k.value=!0,F.value=Ae,J(Ae),Oe()}function J(Ae){var Ve;Ae.work_flow.nodes.map(dt=>{dt.properties.noRender=!0}),E.value.work_flow=Ae.work_flow,N.value=Ae==null?void 0:Ae.update_time,(Ve=h.value)==null||Ve.clearGraphData(),M0(()=>{var dt;(dt=h.value)==null||dt.render(Ae.work_flow)})}function K(){Re(),i0(`APPLICATION:MANAGE:${c}`,"AND")&&M.value&&he(),D.value=!1,k.value=!1}function B(){D.value=!0}function H(Ae){Ae?he():Oe(),localStorage.setItem("workflowAutoSave",Ae.toString())}function ne(Ae){x.value=!1}function X(Ae){x.value=!1}function ge(){x.value=!1}async function Fe(){var Ae;(Ae=h.value)==null||Ae.validate().then(async()=>{const Ve={work_flow:De()};await n.asyncPutApplication(c,Ve);const dt=new MA(Ve.work_flow);try{dt.is_valid()}catch(mt){za(mt.toString());return}Sa.putPublishApplication(c,Ve,b).then(()=>{Ih(it("views.applicationWorkflow.tip.publicSuccess"))})}).catch(Ve=>{var pt,Jt,Ce,ye;const dt=Ve.node,mt=Ve.errMessage;if(typeof mt=="string")za(((pt=Ve.node.properties)==null?void 0:pt.stepName)+` ${it("views.applicationWorkflow.node").toLowerCase()} `+mt.toLowerCase());else{const Pe=Object.keys(mt);za(((Jt=dt.properties)==null?void 0:Jt.stepName)+` ${it("views.applicationWorkflow.node").toLowerCase()} `+((ye=(Ce=mt[Pe[0]])==null?void 0:Ce[0])==null?void 0:ye.message.toLowerCase()))}})}const Me=()=>{var Ae;(Ae=h.value)==null||Ae.validate().then(()=>{var mt;const Ve=De(),dt=new MA(Ve);try{dt.is_valid(),E.value={...E.value,type:"WORK_FLOW",...(mt=dt.get_base_node())==null?void 0:mt.properties.node_data,work_flow:De()},T.value=!0}catch(pt){za(pt.toString())}}).catch(Ve=>{var pt,Jt,Ce,ye;const dt=Ve.node,mt=Ve.errMessage;if(typeof mt=="string")za(((pt=Ve.node.properties)==null?void 0:pt.stepName)+` ${it("views.applicationWorkflow.node")}，`+mt);else{const Pe=Object.keys(mt);za(((Jt=dt.properties)==null?void 0:Jt.stepName)+` ${it("views.applicationWorkflow.node")}，`+((ye=(Ce=mt[Pe[0]])==null?void 0:Ce[0])==null?void 0:ye.message))}})};function Xe(Ae){g.value&&Ae&&Ae.target&&g.value.contains(Ae==null?void 0:Ae.target)&&(T.value=!1)}function De(){var Ae;return(Ae=h.value)==null?void 0:Ae.getGraphData()}function Re(){n.asyncGetApplicationDetail(c).then(Ae=>{var Ve,dt,mt;(Ve=Ae.data)==null||Ve.work_flow.nodes.map(pt=>{pt.properties.noRender=!0}),E.value=Ae.data,E.value.stt_model_id=Ae.data.stt_model,E.value.tts_model_id=Ae.data.tts_model,E.value.tts_type=Ae.data.tts_type,N.value=(dt=Ae.data)==null?void 0:dt.update_time,(mt=h.value)==null||mt.clearGraphData(),M0(()=>{var pt;(pt=h.value)==null||pt.render(E.value.work_flow)})})}function ce(Ae){const Ve={work_flow:De()};n.asyncPutApplication(c,Ve).then(dt=>{N.value=new Date,Ae&&Ih(it("common.saveSuccess"))})}const he=()=>{y=setInterval(()=>{ce()},6e4)},Oe=()=>{y&&clearInterval(y)};return ni(()=>{Re();const Ae=localStorage.getItem("workflowAutoSave");M.value=Ae==="true",i0(`APPLICATION:MANAGE:${c}`,"AND")&&M.value&&he()}),aD(()=>{var Ae;Oe(),(Ae=h.value)==null||Ae.clearGraphData()}),(Ae,Ve)=>{var vn,Yn;const dt=pe("back-button"),mt=pe("el-text"),pt=pe("el-button"),Jt=pe("el-divider"),Ce=pe("Close"),ye=pe("el-icon"),Pe=pe("AppIcon"),bt=pe("MoreFilled"),Vt=pe("el-dropdown-item"),xt=pe("el-switch"),nn=pe("el-dropdown-menu"),yn=pe("el-dropdown"),xn=pe("el-collapse-transition"),pn=pe("AppAvatar"),lt=pe("AiChat"),gn=Fv("click-outside"),$e=Fv("loading");return Uu((_t(),er("div",fJ,[we("div",dJ,[we("div",pJ,[$(dt,{onClick:Ve[0]||(Ve[0]=Q=>Yr(a).push({path:`/application/${Yr(c)}/WORK_FLOW/overview`}))}),we("h4",null,qe((vn=E.value)==null?void 0:vn.name),1),D.value&&k.value?(_t(),er("div",hJ,[$(mt,{type:"info",class:"ml-16 color-secondary"},{default:G(()=>[jt(qe(Ae.$t("views.applicationWorkflow.info.previewVersion"))+" "+qe(F.value.name||Yr(N0)(F.value.update_time)),1)]),_:1})])):N.value?(_t(),an(mt,{key:1,type:"info",class:"ml-16 color-secondary"},{default:G(()=>[jt(qe(Ae.$t("views.applicationWorkflow.info.saveTime"))+qe(Yr(N0)(N.value)),1)]),_:1})):Ar("",!0)]),D.value&&k.value?(_t(),er("div",vJ,[$(pt,{type:"primary",class:"mr-8",onClick:Ve[1]||(Ve[1]=Q=>V())},{default:G(()=>[jt(qe(Ae.$t("views.applicationWorkflow.setting.restoreVersion")),1)]),_:1}),$(Jt,{direction:"vertical"}),$(pt,{text:"",onClick:K},{default:G(()=>[$(ye,null,{default:G(()=>[$(Ce)]),_:1})]),_:1})])):(_t(),er("div",yJ,[$(pt,{icon:"Plus",onClick:Ve[2]||(Ve[2]=Q=>x.value=!x.value)},{default:G(()=>[jt(qe(Ae.$t("views.applicationWorkflow.setting.addComponent")),1)]),_:1}),$(pt,{onClick:Me,disabled:T.value},{default:G(()=>[$(Pe,{iconName:"app-play-outlined",class:"mr-4"}),jt(" "+qe(Ae.$t("common.debug")),1)]),_:1},8,["disabled"]),$(pt,{onClick:Ve[3]||(Ve[3]=Q=>ce(!0))},{default:G(()=>[$(Pe,{iconName:"app-save-outlined",class:"mr-4"}),jt(" "+qe(Ae.$t("common.save")),1)]),_:1}),$(pt,{type:"primary",onClick:Fe},{default:G(()=>[jt(qe(Ae.$t("views.applicationWorkflow.setting.public")),1)]),_:1}),$(yn,{trigger:"click"},{dropdown:G(()=>[$(nn,null,{default:G(()=>[$(Vt,{onClick:B},{default:G(()=>[$(Pe,{iconName:"app-history-outlined"}),jt(" "+qe(Ae.$t("views.applicationWorkflow.setting.releaseHistory")),1)]),_:1}),$(Vt,null,{default:G(()=>[$(Pe,{iconName:"app-save-outlined"}),jt(" "+qe(Ae.$t("views.applicationWorkflow.setting.autoSave"))+" ",1),we("div",mJ,[$(xt,{size:"small",modelValue:M.value,"onUpdate:modelValue":Ve[5]||(Ve[5]=Q=>M.value=Q),onChange:H},null,8,["modelValue"])])]),_:1})]),_:1})]),default:G(()=>[$(pt,{text:"",onClick:Ve[4]||(Ve[4]=Mn(()=>{},["stop"])),class:"ml-8 mt-4"},{default:G(()=>[$(ye,{class:"rotate-90"},{default:G(()=>[$(bt)]),_:1})]),_:1})]),_:1})]))]),$(xn,null,{default:G(()=>[Uu($(zM,{show:x.value,id:Yr(c),onClickNodes:ne,onOnmousedown:X,workflowRef:h.value},null,8,["show","id","workflowRef"]),[[gn,ge]])]),_:1}),we("div",{class:"workflow-main",ref_key:"workflowMainRef",ref:g},[E.value?(_t(),an(tJ,{key:0,ref_key:"workflowRef",ref:h,data:(Yn=E.value)==null?void 0:Yn.work_flow},null,8,["data"])):Ar("",!0)],512),$(xn,null,{default:G(()=>{var Q,qn,wr,Lr;return[T.value?Uu((_t(),er("div",{key:0,class:rd(["workflow-debug-container",j.value?"enlarge":""])},[we("div",{class:rd(["workflow-debug-header",l.value?"":"custom-header"])},[we("div",gJ,[we("div",_J,[we("div",bJ,[Yr(uD)((Q=E.value)==null?void 0:Q.icon)?(_t(),an(pn,{key:0,shape:"square",size:32,style:{background:"none"}},{default:G(()=>{var Hr;return[we("img",{src:(Hr=E.value)==null?void 0:Hr.icon,alt:""},null,8,wJ)]}),_:1})):(qn=E.value)!=null&&qn.name?(_t(),an(pn,{key:1,name:(wr=E.value)==null?void 0:wr.name,pinyinColor:"",shape:"square",size:32},null,8,["name"])):Ar("",!0)]),we("h4",null,qe(((Lr=E.value)==null?void 0:Lr.name)||Ae.$t("views.application.applicationForm.form.appName.label")),1)]),we("div",EJ,[$(pt,{link:"",onClick:Ve[6]||(Ve[6]=Hr=>j.value=!j.value)},{default:G(()=>[$(Pe,{iconName:j.value?"app-minify":"app-magnify",class:"color-secondary",style:{"font-size":"20px"}},null,8,["iconName"])]),_:1}),$(pt,{link:"",onClick:Ve[7]||(Ve[7]=Hr=>T.value=!1)},{default:G(()=>[$(ye,{size:20,class:"color-secondary"},{default:G(()=>[$(Ce)]),_:1})]),_:1})])])],2),we("div",OJ,[$(lt,{"application-details":E.value,type:"debug-ai-chat"},null,8,["application-details"])])],2)),[[gn,Xe]]):Ar("",!0)]}),_:1}),D.value?Uu((_t(),an(cJ,{key:0,onClick:z,onRefreshVersion:V},null,512)),[[gn,te]]):Ar("",!0)])),[[$e,b.value]])}}});export{DJ as default};
