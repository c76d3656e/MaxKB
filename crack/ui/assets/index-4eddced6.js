import{cr as G,cZ as Re,cs as h,ct as _e,da as ke,cv as l,cy as f,cG as k,cB as t,cA as e,cC as a,cK as p,cI as U,cW as fe,dk as Ie,cL as C,cF as ne,dl as ot,dN as nt,cY as je,cq as w,dO as be,de as ge,cS as Ne,cw as Oe,dP as Ke,cM as Z,cO as Ee,cz as N,cD as ve,cE as De,dQ as Xe,cN as Je,cU as it,cT as me,dq as He,dR as st,cR as Ye,cX as ct,dS as pt,dd as Me,cu as Ge,dp as rt,dT as xe,dU as ut,dV as Ve,cH as dt,dW as de,dX as T,dY as vt,dZ as mt,cP as _t}from"./index-a6cfd98b.js";import{_ as ft}from"./EditAvatarDialog.vue_vue_type_script_setup_true_lang-7b42e64b.js";const gt="/ui/assets/window1-b13220c7.png",At="/ui/assets/window2-6d9fe74f.png",ht={class:"border"},wt={class:"title p-16 bold"},yt={class:"code layout-bg border-t p-8"},bt={class:"flex-between p-8"},Dt={class:"bold"},kt={class:"pre-wrap p-8 pt-0"},It={class:"border"},$t={class:"title p-16 bold"},Ct={class:"code layout-bg border-t p-8"},Ot={class:"flex-between p-8"},Vt={class:"bold"},St={class:"pre-wrap p-8 pt-0"},xt=G({__name:"EmbedDialog",props:{data:Object,apiInputParams:String},emits:["addData"],setup(F,{expose:A,emit:z}){const{application:K}=Re(),V=F,E=h(!1),y=h(""),n=h(""),c=_e(()=>V.apiInputParams?"?"+V.apiInputParams:""),r=_e(()=>V.apiInputParams?"&"+V.apiInputParams:"");return ke(E,g=>{g||(y.value="",n.value="")}),A({open:g=>{y.value=`<iframe
src="${K.location+g+c.value}"
style="width: 100%; height: 100%;"
frameborder="0"
allow="microphone">
</iframe>
`,n.value=`<script
async
defer
src="${window.location.origin}/api/application/embed?protocol=${window.location.protocol.replace(":","")}&host=${window.location.host}&token=${g}${r.value}">
<\/script>
`,E.value=!0}}),(g,D)=>{const u=l("AppIcon"),m=l("el-button"),_=l("el-scrollbar"),i=l("el-col"),O=l("el-row"),R=l("el-dialog");return f(),k(R,{title:g.$t("views.applicationOverview.appInfo.embedInWebsite"),modelValue:E.value,"onUpdate:modelValue":D[2]||(D[2]=B=>E.value=B),width:"900",class:"embed-dialog","close-on-click-modal":!1,"close-on-press-escape":!1},{default:t(()=>[e(O,{gutter:12},{default:t(()=>[e(i,{span:12},{default:t(()=>[a("div",ht,[a("p",wt,p(g.$t("views.applicationOverview.appInfo.EmbedDialog.fullscreenModeTitle")),1),D[3]||(D[3]=a("img",{src:gt,alt:"",class:"ml-8",height:"150"},null,-1)),a("div",yt,[a("div",bt,[a("span",Dt,p(g.$t("views.applicationOverview.appInfo.EmbedDialog.copyInstructions")),1),e(m,{text:"",onClick:D[0]||(D[0]=B=>U(fe)(y.value))},{default:t(()=>[e(u,{iconName:"app-copy"})]),_:1})]),e(_,{height:"150",always:""},{default:t(()=>[a("div",kt,p(y.value),1)]),_:1})])])]),_:1}),e(i,{span:12},{default:t(()=>[a("div",It,[a("p",$t,p(g.$t("views.applicationOverview.appInfo.EmbedDialog.floatingModeTitle")),1),D[4]||(D[4]=a("img",{src:At,alt:"",class:"ml-8",height:"150"},null,-1)),a("div",Ct,[a("div",Ot,[a("span",Vt,p(g.$t("views.applicationOverview.appInfo.EmbedDialog.copyInstructions")),1),e(m,{text:"",onClick:D[1]||(D[1]=B=>U(fe)(n.value))},{default:t(()=>[e(u,{iconName:"app-copy"})]),_:1})]),e(_,{height:"150",always:""},{default:t(()=>[a("div",St,p(n.value),1)]),_:1})])])]),_:1})]),_:1})]),_:1},8,["title","modelValue"])}}});const Rt={class:"vertical-middle lighter break-all"},Et={class:"mr-4"},Bt=G({__name:"APIKeyDialog",emits:["addData"],setup(F,{expose:A,emit:z}){const K=Ie(),{params:{id:V}}=K,E=h(),y=h(!1),n=h(!1),c=h(null);ke(y,i=>{i||(c.value=null)});function r(i){E.value.open(i,"APPLICATION")}function $(i){je(`${w("views.applicationOverview.appInfo.APIKeyDialog.msgConfirm1")}: ${i.secret_key}?`,w("views.applicationOverview.appInfo.APIKeyDialog.msgConfirm2"),{confirmButtonText:w("common.delete"),cancelButtonText:w("common.cancel"),confirmButtonClass:"danger"}).then(()=>{be.delAPIKey(V,i.id,n).then(()=>{ge(w("common.deleteSuccess")),m()})}).catch(()=>{})}function g(i,O){const R={is_active:i},B=i?w("views.applicationOverview.appInfo.APIKeyDialog.enabledSuccess"):w("views.applicationOverview.appInfo.APIKeyDialog.disabledSuccess");be.putAPIKey(V,O.id,R,n).then(Y=>{ge(B),m()})}function D(){be.postAPIKey(V,n).then(i=>{m()})}const u=()=>{m(),y.value=!0};function m(){be.getAPIKey(V,n).then(i=>{c.value=i.data})}function _(){m()}return A({open:u}),(i,O)=>{const R=l("el-button"),B=l("AppIcon"),Y=l("el-table-column"),o=l("el-switch"),s=l("Setting"),I=l("el-icon"),L=l("el-tooltip"),x=l("Delete"),ee=l("el-table"),q=l("el-dialog");return f(),k(q,{title:"API Key",modelValue:y.value,"onUpdate:modelValue":O[1]||(O[1]=P=>y.value=P),width:"800","close-on-click-modal":!1,"close-on-press-escape":!1,"align-center":""},{default:t(()=>[e(R,{type:"primary",class:"mb-16",onClick:D},{default:t(()=>[C(p(i.$t("common.create")),1)]),_:1}),e(ee,{data:c.value,class:"mb-16",loading:n.value,height:"420"},{default:t(()=>[e(Y,{prop:"secret_key",label:"API Key"},{default:t(({row:P})=>[a("span",Rt,p(P.secret_key),1),e(R,{type:"primary",text:"",onClick:S=>U(fe)(P.secret_key)},{default:t(()=>[e(B,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:1}),e(Y,{label:i.$t("common.status.label"),width:"70"},{default:t(({row:P})=>[a("div",{onClick:O[0]||(O[0]=ne(()=>{},["stop"]))},[e(o,{size:"small",modelValue:P.is_active,"onUpdate:modelValue":S=>P.is_active=S,onChange:S=>g(S,P)},null,8,["modelValue","onUpdate:modelValue","onChange"])])]),_:1},8,["label"]),e(Y,{prop:"name",label:i.$t("common.createDate"),width:"170"},{default:t(({row:P})=>[C(p(U(ot)(P.create_time)),1)]),_:1},8,["label"]),e(Y,{label:i.$t("common.operation"),align:"left",width:"90"},{default:t(({row:P})=>[a("span",Et,[e(L,{effect:"dark",content:i.$t("common.setting"),placement:"top"},{default:t(()=>[e(R,{type:"primary",text:"",onClick:ne(S=>r(P),["stop"])},{default:t(()=>[e(I,null,{default:t(()=>[e(s)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),e(L,{effect:"dark",content:i.$t("common.delete"),placement:"top"},{default:t(()=>[e(R,{type:"primary",text:"",onClick:S=>$(P)},{default:t(()=>[e(I,null,{default:t(()=>[e(x)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data","loading"]),e(nt,{ref_key:"SettingAPIKeyDialogRef",ref:E,onRefresh:_},null,512)]),_:1},8,["modelValue"])}}}),Pt={class:"ml-4"},Ut={class:"dialog-footer"},Lt=G({__name:"LimitDialog",emits:["refresh"],setup(F,{expose:A,emit:z}){const K=Ie(),{params:{id:V}}=K,E=z,y=h(),n=h({access_num:0,white_active:!0,white_list:"",authentication_value:"",authentication:!1}),c=h(!1),r=h(!1);ke(c,_=>{_||(n.value={access_num:0,white_active:!0,white_list:""})});const $=_=>{var i,O;n.value.access_num=_.access_num,n.value.white_active=_.white_active,n.value.white_list=(i=_.white_list)!=null&&i.length?(O=_.white_list)==null?void 0:O.join(`
`):"",n.value.authentication_value=_.authentication_value,n.value.authentication=_.authentication,c.value=!0},g=async _=>{_&&await _.validate((i,O)=>{if(i){const R={white_list:n.value.white_list?n.value.white_list.split(`
`):[],white_active:n.value.white_active,access_num:n.value.access_num,authentication:n.value.authentication,authentication_value:n.value.authentication_value};Ee.putAccessToken(V,R,r).then(B=>{E("refresh"),ge(w("common.settingSuccess")),c.value=!1})}})};function D(_=10){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",O=new Uint8Array(_);return window.crypto.getRandomValues(O),Array.from(O).map(R=>i[R%i.length]).join("")}function u(){n.value.authentication_value=D()}function m(){n.value.authentication&&!n.value.authentication_value&&(n.value.authentication_value=D())}return A({open:$}),(_,i)=>{const O=l("el-input-number"),R=l("el-form-item"),B=l("el-switch"),Y=l("AppIcon"),o=l("el-button"),s=l("el-tooltip"),I=l("RefreshRight"),L=l("el-icon"),x=l("el-input"),ee=l("el-form"),q=l("el-dialog"),P=Ne("hasPermission");return f(),k(q,{title:_.$t("views.applicationOverview.appInfo.accessControl"),modelValue:c.value,"onUpdate:modelValue":i[9]||(i[9]=S=>c.value=S),"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:t(()=>[a("span",Ut,[e(o,{onClick:i[7]||(i[7]=ne(S=>c.value=!1,["prevent"]))},{default:t(()=>[C(p(_.$t("common.cancel")),1)]),_:1}),e(o,{type:"primary",onClick:i[8]||(i[8]=S=>g(y.value)),loading:r.value},{default:t(()=>[C(p(_.$t("common.save")),1)]),_:1},8,["loading"])])]),default:t(()=>[e(ee,{"label-position":"top",ref_key:"limitFormRef",ref:y,model:n.value},{default:t(()=>[e(R,{label:_.$t("views.applicationOverview.appInfo.LimitDialog.clientQueryLimitLabel")},{default:t(()=>[e(O,{modelValue:n.value.access_num,"onUpdate:modelValue":i[0]||(i[0]=S=>n.value.access_num=S),min:0,step:1,max:1e4,"value-on-clear":0,"controls-position":"right",style:{width:"268px"},"step-strictly":""},null,8,["modelValue"]),a("span",Pt,p(_.$t("views.applicationOverview.appInfo.LimitDialog.timesDays")),1)]),_:1},8,["label"]),Oe((f(),k(R,{label:_.$t("views.applicationOverview.appInfo.LimitDialog.authentication")},{default:t(()=>[e(B,{size:"small",modelValue:n.value.authentication,"onUpdate:modelValue":i[1]||(i[1]=S=>n.value.authentication=S),onChange:m},null,8,["modelValue"])]),_:1},8,["label"])),[[P,new(U(Ke))([],["x-pack"],"OR")]]),n.value.authentication?Oe((f(),k(R,{key:0,prop:"authentication_value",label:_.$t("views.applicationOverview.appInfo.LimitDialog.authenticationValue")},{default:t(()=>[e(x,{class:"authentication-append-input",modelValue:n.value.authentication_value,"onUpdate:modelValue":i[3]||(i[3]=S=>n.value.authentication_value=S),readonly:"",style:{width:"268px"},disabled:""},{append:t(()=>[e(s,{content:_.$t("common.copy"),placement:"top"},{default:t(()=>[e(o,{type:"primary",text:"",onClick:i[2]||(i[2]=S=>U(fe)(n.value.authentication_value)),style:{margin:"0 4px !important"}},{default:t(()=>[e(Y,{iconName:"app-copy"})]),_:1})]),_:1},8,["content"]),e(s,{content:_.$t("common.refresh"),placement:"top"},{default:t(()=>[e(o,{onClick:u,type:"primary",text:"",style:{margin:"0 4px 0 0 !important"}},{default:t(()=>[e(L,null,{default:t(()=>[e(I)]),_:1})]),_:1})]),_:1},8,["content"])]),_:1},8,["modelValue"])]),_:1},8,["label"])),[[P,new(U(Ke))([],["x-pack"],"OR")]]):Z("",!0),e(R,{label:_.$t("views.applicationOverview.appInfo.LimitDialog.whitelistLabel"),onClick:i[5]||(i[5]=ne(()=>{},["prevent"]))},{default:t(()=>[e(B,{size:"small",modelValue:n.value.white_active,"onUpdate:modelValue":i[4]||(i[4]=S=>n.value.white_active=S)},null,8,["modelValue"])]),_:1},8,["label"]),e(R,null,{default:t(()=>[e(x,{modelValue:n.value.white_list,"onUpdate:modelValue":i[6]||(i[6]=S=>n.value.white_list=S),placeholder:_.$t("views.applicationOverview.appInfo.LimitDialog.whitelistPlaceholder"),rows:10,type:"textarea"},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}});const Ft={class:"dialog-footer"},zt=G({__name:"DisplaySettingDialog",emits:["refresh"],setup(F,{expose:A,emit:z}){const K=Ie(),{params:{id:V}}=K,E=z,y=h(),n=h({show_source:!1}),c=h(null),r=h(!1),$=h(!1);ke(r,u=>{u||(n.value={show_source:!1})});const g=(u,m)=>{c.value=m,n.value.show_source=u.show_source,n.value.language=u.language,n.value.language||(n.value.language="zh-CN"),r.value=!0},D=async u=>{u&&await u.validate((m,_)=>{if(m){const i={show_source:n.value.show_source,language:n.value.language};Ee.putAccessToken(V,i,$).then(O=>{E("refresh"),ge(w("common.settingSuccess")),r.value=!1})}})};return A({open:g}),(u,m)=>{const _=l("el-option"),i=l("el-select"),O=l("el-form-item"),R=l("el-checkbox"),B=l("el-space"),Y=l("el-form"),o=l("el-button"),s=l("el-dialog");return f(),k(s,{title:u.$t("views.applicationOverview.appInfo.SettingDisplayDialog.dialogTitle"),modelValue:r.value,"onUpdate:modelValue":m[4]||(m[4]=I=>r.value=I),"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:t(()=>[a("span",Ft,[e(o,{onClick:m[2]||(m[2]=ne(I=>r.value=!1,["prevent"]))},{default:t(()=>[C(p(u.$t("common.cancel")),1)]),_:1}),e(o,{type:"primary",onClick:m[3]||(m[3]=I=>D(y.value)),loading:$.value},{default:t(()=>[C(p(u.$t("common.save")),1)]),_:1},8,["loading"])])]),default:t(()=>[e(Y,{"label-position":"top",ref_key:"displayFormRef",ref:y,model:n.value},{default:t(()=>[e(O,null,{default:t(()=>[a("span",null,p(u.$t("views.applicationOverview.appInfo.SettingDisplayDialog.languageLabel")),1),e(i,{modelValue:n.value.language,"onUpdate:modelValue":m[0]||(m[0]=I=>n.value.language=I)},{default:t(()=>[(f(!0),N(ve,null,De(U(Xe),I=>(f(),k(_,{key:I.value,label:I.label,value:I.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(O,null,{default:t(()=>[e(B,{direction:"vertical",alignment:"start"},{default:t(()=>[e(R,{modelValue:n.value.show_source,"onUpdate:modelValue":m[1]||(m[1]=I=>n.value.show_source=I),label:U(Je)(c.value.type)?u.$t("views.applicationOverview.appInfo.SettingDisplayDialog.showExecutionDetail"):u.$t("views.applicationOverview.appInfo.SettingDisplayDialog.showSourceLabel")},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),Qt="/ui/assets/display-bg2-56446976.png",Tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVwAAAAOCAYAAABjJ6RkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACFSURBVHgB7dyxDcJAEETRvcWkRIhWqIrKESEBsn3G7sG30XtFfE007fnabvMUj6lFBgDny5jbLz65XuIutgAD9bjmPmwzM6YAYKh1H7aWLUARwQUoIrgARQQXoIjgAhQRXIAiggtQRHABigguQJFctugBwFgZc7ZvvHuPJQAY4hi2x3nNH+AmFr6g66dUAAAAAElFTkSuQmCC",Kt="data:image/png;base64,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",Yt="/ui/MaxKB.gif",Mt={class:"flex-between mb-8"},jt=["id"],Nt={class:"flex align-center"},Xt={class:"flex"},Jt={class:"setting-preview border border-r-4 mr-16",style:{"min-width":"400px"}},Ht={class:"setting-preview-container"},Gt={class:"flex-between"},qt={class:"flex align-center"},Wt={class:"mr-12 ml-24 flex"},Zt=["src"],ea={class:"mr-16"},ta={class:"p-16",style:{position:"relative"}},aa={class:"flex"},la={class:"avatar"},oa={class:"flex-between"},na={class:"avatar"},ia={style:{position:"absolute",bottom:"0","padding-bottom":"8px","box-sizing":"border-box"},class:"p-16 text-center w-full"},sa={class:"float_icon"},ca={key:1,src:Yt,height:"50px",style:{width:"40px",height:"40px",display:"block"}},pa={class:"mb-8"},ra={class:"mb-8"},ua={class:"mb-8"},da={class:"flex-between mb-8"},va={class:"lighter"},ma={class:"flex-between mb-8"},_a={class:"lighter"},fa={class:"flex-between mb-8"},ga={class:"lighter"},Aa={class:"border-t mt-8"},ha={class:"flex-between mb-8"},wa={class:"lighter"},ya={class:"flex align-center"},ba={class:"flex align-center"},Da={key:0},ka={class:"dialog-footer"},Ia=G({__name:"XPackDisplaySettingDialog",emits:["refresh"],setup(F,{expose:A,emit:z}){Re();const K=Ie(),{params:{id:V}}=K,E=z,y={show_source:!1,language:"zh-CN",show_history:!0,draggable:!0,show_guide:!0,avatar:"",avatar_url:"",float_icon:"",float_icon_url:"",user_avatar:"",user_avatar_url:"",disclaimer:!1,disclaimer_value:w("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimerValue"),custom_theme:{theme_color:"",header_font_color:"#1f2329"},float_location:{y:{type:"bottom",value:30},x:{type:"right",value:0}}},n=h(),c=h({show_source:!1}),r=h({show_source:!1,language:"zh-CN",show_history:!1,draggable:!1,show_guide:!1,avatar:"",avatar_url:"",float_icon:"",float_icon_url:"",user_avatar:"",user_avatar_url:"",disclaimer:!1,disclaimer_value:w("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimerValue"),custom_theme:{theme_color:"",header_font_color:"#1f2329"},float_location:{y:{type:"bottom",value:30},x:{type:"right",value:0}}}),$=h({avatar:"",float_icon:"",user_avatar:""}),g=h(!1),D=h(!1),u=h(null),m=_e(()=>{var o,s;return{background:(o=r.value.custom_theme)==null?void 0:o.theme_color,color:(s=r.value.custom_theme)==null?void 0:s.header_font_color}});function _(){c.value=Ye.cloneDeep(y),r.value=Ye.cloneDeep(y),$.value={avatar:"",float_icon:"",user_avatar:""}}const i=(o,s,I)=>{if((o==null?void 0:o.size)/1024/1024<10)r.value[I]=o.raw,$.value[I]=URL.createObjectURL(o.raw),r.value[`${I}_url`]="";else return ct(w("views.applicationOverview.appInfo.EditAvatarDialog.fileSizeExceeded")),!1},O=(o,s)=>{var I,L;u.value=s,r.value.show_source=o.show_source,r.value.show_history=o.show_history,r.value.language=o.language,r.value.draggable=o.draggable,r.value.show_guide=o.show_guide,$.value.avatar=o.avatar,$.value.float_icon=o.float_icon,$.value.user_avatar=o.user_avatar,r.value.disclaimer=o.disclaimer,r.value.disclaimer_value=o.disclaimer_value,console.log(r.value.disclaimer_value),r.value.disclaimer_value===w("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimerValue")&&(r.value.disclaimer_value=w("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimerValue")),r.value.avatar_url=o.avatar,r.value.user_avatar_url=o.user_avatar,r.value.float_icon_url=o.float_icon,r.value.custom_theme={theme_color:((I=o.custom_theme)==null?void 0:I.theme_color)||"",header_font_color:((L=o.custom_theme)==null?void 0:L.header_font_color)||"#1f2329"},r.value.float_location=o.float_location,c.value=r.value,g.value=!0},R=o=>{r.value.disclaimer_value=o},B=o=>{r.value.disclaimer=o},Y=async o=>{o&&await o.validate((s,I)=>{if(s){let L=new FormData;Object.keys(r.value).map(x=>{["custom_theme","float_location"].includes(x)?L.append(x,JSON.stringify(r.value[x])):L.append(x,r.value[x])}),pt.putAccessToken(V,L,D).then(x=>{E("refresh"),ge(w("common.settingSuccess")),g.value=!1})}})};return A({open:O}),(o,s)=>{const I=l("Refresh"),L=l("el-icon"),x=l("el-button"),ee=l("el-divider"),q=l("AppAvatar"),P=l("AppIcon"),S=l("Close"),Ae=l("el-image"),$e=l("LogoIcon"),Se=l("auto-tooltip"),ie=l("el-text"),he=l("el-color-picker"),se=l("el-col"),we=l("el-row"),te=l("el-option"),ce=l("el-select"),pe=l("el-upload"),ae=l("el-card"),le=l("el-checkbox"),re=l("el-input-number"),d=l("el-input"),b=l("el-tooltip"),Q=l("el-space"),J=l("el-form"),X=l("el-dialog");return f(),k(X,{title:o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.dialogTitle"),width:"900",modelValue:g.value,"onUpdate:modelValue":s[15]||(s[15]=M=>g.value=M),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"align-center":"",class:"display-setting-dialog"},{header:t(({titleId:M,titleClass:ue})=>[a("div",Mt,[a("h4",{id:M,class:it(ue)},p(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.dialogTitle")),11,jt),a("div",Nt,[e(x,{type:"primary",onClick:ne(_,["prevent"]),link:""},{default:t(()=>[e(L,{class:"mr-4"},{default:t(()=>[e(I)]),_:1}),C(" "+p(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.restoreDefault")),1)]),_:1}),e(ee,{direction:"vertical"})])])]),footer:t(()=>[a("span",ka,[e(x,{onClick:s[13]||(s[13]=ne(M=>g.value=!1,["prevent"]))},{default:t(()=>[C(p(o.$t("common.cancel")),1)]),_:1}),e(x,{type:"primary",onClick:s[14]||(s[14]=M=>Y(n.value)),loading:D.value},{default:t(()=>[C(p(o.$t("common.save")),1)]),_:1},8,["loading"])])]),default:t(()=>{var M,ue,ye,j;return[a("div",Xt,[a("div",Jt,[a("div",Ht,[a("div",{class:"setting-preview-header",style:me(m.value)},[a("div",Gt,[a("div",qt,[a("div",Wt,[U(He)((M=u.value)==null?void 0:M.icon)?(f(),k(q,{key:0,shape:"square",size:32,style:{background:"none"}},{default:t(()=>{var v;return[a("img",{src:(v=u.value)==null?void 0:v.icon,alt:""},null,8,Zt)]}),_:1})):(ue=u.value)!=null&&ue.name?(f(),k(q,{key:1,name:(ye=u.value)==null?void 0:ye.name,pinyinColor:"",shape:"square",size:32},null,8,["name"])):Z("",!0)]),a("h4",null,p(((j=u.value)==null?void 0:j.name)||o.$t("views.application.applicationForm.form.appName.label")),1)]),a("div",ea,[e(x,{link:""},{default:t(()=>{var v;return[e(P,{iconName:"app-magnify",style:me([{color:(v=r.value.custom_theme)==null?void 0:v.header_font_color},{"font-size":"20px"}])},null,8,["style"])]}),_:1}),e(x,{link:""},{default:t(()=>{var v;return[e(L,{size:20,class:"color-secondary",style:me({color:(v=r.value.custom_theme)==null?void 0:v.header_font_color})},{default:t(()=>[e(S)]),_:1},8,["style"])]}),_:1})])])],4),a("div",null,[a("div",ta,[a("div",aa,[a("div",la,[$.value.avatar?(f(),k(Ae,{key:0,src:$.value.avatar,alt:"",fit:"cover",style:{width:"35px",height:"35px",display:"block"}},null,8,["src"])):(f(),k($e,{key:1,height:"35px",style:{width:"35px",height:"35px",display:"block"}}))]),s[16]||(s[16]=a("img",{src:Qt,alt:"",width:"270"},null,-1))]),a("div",oa,[a("div",na,[$.value.user_avatar?(f(),k(Ae,{key:0,src:$.value.user_avatar,alt:"",fit:"cover",style:{width:"35px",height:"35px",display:"block"}},null,8,["src"])):(f(),k(q,{key:1},{default:t(()=>s[17]||(s[17]=[a("img",{src:st,style:{width:"54%"},alt:""},null,-1)])),_:1}))]),s[18]||(s[18]=a("img",{src:Tt,alt:"",width:"270",class:"ml-8"},null,-1))])]),a("div",ia,[s[19]||(s[19]=a("img",{src:Kt,alt:"",class:"w-full"},null,-1)),r.value.disclaimer?(f(),k(ie,{key:0,type:"info",class:"mt-8",style:{"font-size":"12px"}},{default:t(()=>[e(Se,{content:r.value.disclaimer_value},{default:t(()=>[C(p(r.value.disclaimer_value),1)]),_:1},8,["content"])]),_:1})):Z("",!0)])])]),a("div",sa,[$.value.float_icon?(f(),k(Ae,{key:0,src:$.value.float_icon,alt:"",fit:"cover",style:{width:"40px",height:"40px",display:"block"}},null,8,["src"])):(f(),N("img",ca))])]),e(J,{ref_key:"displayFormRef",ref:n,model:c.value},{default:t(()=>[e(we,{class:"w-full mb-8"},{default:t(()=>[e(se,{span:12},{default:t(()=>[a("h5",pa,p(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.customThemeColor")),1),a("div",null,[e(he,{modelValue:c.value.custom_theme.theme_color,"onUpdate:modelValue":s[0]||(s[0]=v=>c.value.custom_theme.theme_color=v)},null,8,["modelValue"]),C(" "+p(c.value.custom_theme.theme_color?"":o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.default")),1)])]),_:1}),e(se,{span:12},{default:t(()=>[a("h5",ra,p(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.headerTitleFontColor")),1),e(he,{modelValue:c.value.custom_theme.header_font_color,"onUpdate:modelValue":s[1]||(s[1]=v=>c.value.custom_theme.header_font_color=v)},null,8,["modelValue"])]),_:1})]),_:1}),e(we,{class:"w-full mb-8"},{default:t(()=>[a("h5",ua,p(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.languageLabel")),1),e(ce,{modelValue:c.value.language,"onUpdate:modelValue":s[2]||(s[2]=v=>c.value.language=v)},{default:t(()=>[(f(!0),N(ve,null,De(U(Xe),v=>(f(),k(te,{key:v.value,label:v.label,value:v.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(ae,{shadow:"never",class:"mb-8"},{default:t(()=>[a("div",da,[a("span",va,p(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.askUserAvatar")),1),e(pe,{ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(v,oe)=>i(v,oe,"user_avatar")},{default:t(()=>[e(x,{size:"small"},{default:t(()=>[C(p(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.replace")),1)]),_:1})]),_:1},8,["on-change"])]),e(ie,{type:"info",size:"small"},{default:t(()=>[C(p(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.imageMessage")),1)]),_:1})]),_:1}),e(ae,{shadow:"never",class:"mb-8"},{default:t(()=>[a("div",ma,[a("span",_a,p(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.AIAvatar")),1),e(pe,{ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(v,oe)=>i(v,oe,"avatar")},{default:t(()=>[e(x,{size:"small"},{default:t(()=>[C(p(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.replace")),1)]),_:1})]),_:1},8,["on-change"])]),e(ie,{type:"info",size:"small"},{default:t(()=>[C(p(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.imageMessage")),1)]),_:1})]),_:1}),e(ae,{shadow:"never",class:"mb-8"},{default:t(()=>[a("div",fa,[a("span",ga,p(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.floatIcon")),1),e(pe,{ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(v,oe)=>i(v,oe,"float_icon")},{default:t(()=>[e(x,{size:"small"},{default:t(()=>[C(p(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.replace")),1)]),_:1})]),_:1},8,["on-change"])]),e(ie,{type:"info",size:"small"},{default:t(()=>[C(p(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.imageMessage")),1)]),_:1}),a("div",Aa,[a("div",ha,[a("span",wa,p(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconDefaultPosition")),1),e(le,{modelValue:c.value.draggable,"onUpdate:modelValue":s[3]||(s[3]=v=>c.value.draggable=v),label:o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.draggablePosition")},null,8,["modelValue","label"])]),e(we,{gutter:8,class:"w-full mb-8"},{default:t(()=>[e(se,{span:12},{default:t(()=>[a("div",ya,[e(ce,{modelValue:c.value.float_location.x.type,"onUpdate:modelValue":s[4]||(s[4]=v=>c.value.float_location.x.type=v),style:{width:"80px"}},{default:t(()=>[e(te,{label:o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconPosition.left"),value:"left"},null,8,["label"]),e(te,{label:o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconPosition.right"),value:"right"},null,8,["label"])]),_:1},8,["modelValue"]),e(re,{modelValue:c.value.float_location.x.value,"onUpdate:modelValue":s[5]||(s[5]=v=>c.value.float_location.x.value=v),min:0,step:1,precision:0,"value-on-clear":0,"step-strictly":"","controls-position":"right"},null,8,["modelValue"]),s[20]||(s[20]=a("span",{class:"ml-4"},"px",-1))])]),_:1}),e(se,{span:12},{default:t(()=>[a("div",ba,[e(ce,{modelValue:c.value.float_location.y.type,"onUpdate:modelValue":s[6]||(s[6]=v=>c.value.float_location.y.type=v),style:{width:"80px"}},{default:t(()=>[e(te,{label:o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconPosition.top"),value:"top"},null,8,["label"]),e(te,{label:o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconPosition.bottom"),value:"bottom"},null,8,["label"])]),_:1},8,["modelValue"]),e(re,{modelValue:c.value.float_location.y.value,"onUpdate:modelValue":s[7]||(s[7]=v=>c.value.float_location.y.value=v),min:0,step:1,precision:0,"value-on-clear":0,"step-strictly":"","controls-position":"right"},null,8,["modelValue"]),s[21]||(s[21]=a("span",{class:"ml-4"},"px",-1))])]),_:1})]),_:1})])]),_:1}),e(Q,{direction:"vertical",alignment:"start",size:2},{default:t(()=>[e(le,{modelValue:c.value.show_source,"onUpdate:modelValue":s[8]||(s[8]=v=>c.value.show_source=v),label:U(Je)(u.value.type)?o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.showExecutionDetail"):o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.showSourceLabel")},null,8,["modelValue","label"]),e(le,{modelValue:c.value.show_history,"onUpdate:modelValue":s[9]||(s[9]=v=>c.value.show_history=v),label:o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.showHistory")},null,8,["modelValue","label"]),e(le,{modelValue:c.value.show_guide,"onUpdate:modelValue":s[10]||(s[10]=v=>c.value.show_guide=v),label:o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.displayGuide")},null,8,["modelValue","label"]),e(le,{modelValue:c.value.disclaimer,"onUpdate:modelValue":s[11]||(s[11]=v=>c.value.disclaimer=v),label:o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimer"),onChange:B},null,8,["modelValue","label"]),c.value.disclaimer?(f(),N("span",Da,[e(b,{content:c.value.disclaimer_value,placement:"top"},{default:t(()=>[e(d,{modelValue:c.value.disclaimer_value,"onUpdate:modelValue":s[12]||(s[12]=v=>c.value.disclaimer_value=v),style:{width:"422px","margin-bottom":"10px"},onChange:R,maxlength:128},null,8,["modelValue"])]),_:1},8,["content"])])):Z("",!0)]),_:1})]),_:1},8,["model"])])]}),_:1},8,["title","modelValue"])}}});const $a=["id"],Ca=G({__name:"LineCharts",props:{id:{type:String,default:"lineChartId"},width:{type:String,default:"100%"},height:{type:String,default:"200px"},option:{type:Object,required:!0}},setup(F){const A=F,z=["rgba(82, 133, 255, 1)","rgba(255, 207, 47, 1)"],K=["rgba(82, 133, 255, 0.2)","rgba(255, 207, 47, 0.2)"];function V(){var r,$,g,D;let y=xe(document.getElementById(A.id));y==null&&(y=ut(document.getElementById(A.id)));const n=[];($=(r=A.option)==null?void 0:r.yData)!=null&&$.length&&((g=A.option)==null||g.yData.forEach((u,m)=>{n.push({itemStyle:{color:z[m]},areaStyle:u.area?{color:K[m]}:null,...u})}));const c={title:{text:(D=A.option)==null?void 0:D.title,textStyle:{fontSize:"16px"}},tooltip:{trigger:"axis",valueFormatter:u=>Ve(u)},legend:{right:0,itemWidth:8,textStyle:{color:"#646A73"},icon:"circle"},grid:{left:"1%",right:"1%",bottom:"0",top:"18%",containLabel:!0},xAxis:{type:"category",data:A.option.xData},yAxis:{type:"value",splitLine:{lineStyle:{color:"#EFF0F1"}},axisLabel:{formatter:u=>Ve(u)}},series:n};y.setOption(c,!0)}function E(){var y;(y=xe(document.getElementById(A.id)))==null||y.resize()}return ke(()=>A.option,y=>{y&&Me(()=>{V()})}),Ge(()=>{Me(()=>{V(),window.addEventListener("resize",E)})}),rt(()=>{var y;(y=xe(document.getElementById(A.id)))==null||y.dispose(),window.removeEventListener("resize",E)}),(y,n)=>(f(),N("div",{id:F.id,ref:"PieChartRef",style:me({height:F.height,width:F.width})},null,12,$a))}}),Oa=G({name:"AppCharts"}),Va=G({...Oa,props:{type:{type:String,default:"line"},height:{type:String,default:"200px"},dataZoom:Boolean,option:{type:Object,required:!0}},setup(F){const A={line:Ca};return(z,K)=>(f(),k(dt(A[F.type]),{height:F.height,option:F.option,dataZoom:F.dataZoom,class:"v-charts"},null,8,["height","option","dataZoom"]))}}),Sa={class:"flex align-center ml-8 mr-8"},xa={class:"ml-12"},Ra={class:"color-secondary lighter mb-4"},Ea={key:0,class:"flex align-baseline"},Ba={key:0,class:"ml-12",style:{color:"#f54a45"}},Pa={key:1,class:"flex align-center mr-8"},Ua={class:"ml-4"},La={class:"ml-4"},Fa={class:"p-8"},za=G({__name:"StatisticsCharts",props:{data:{type:Array,default:()=>[]}},setup(F){const A=F,z=_e(()=>[{id:"customerCharts",name:w("views.applicationOverview.monitor.charts.customerTotal"),icon:"app-user",background:"#EBF1FF",color:"#3370FF",sum:[de(T(A.data,"customer_num")||0),de(T(A.data,"customer_added_count")||0)],option:{title:w("views.applicationOverview.monitor.charts.customerTotal"),xData:T(A.data,"day"),yData:[{name:w("views.applicationOverview.monitor.charts.customerTotal"),type:"line",area:!0,data:T(A.data,"customer_num")},{name:w("views.applicationOverview.monitor.charts.customerNew"),type:"line",area:!0,data:T(A.data,"customer_added_count")}]}},{id:"chatRecordCharts",name:w("views.applicationOverview.monitor.charts.queryCount"),icon:"app-question",background:"#FFF3E5",color:"#FF8800",sum:[de(T(A.data,"chat_record_count")||0)],option:{title:w("views.applicationOverview.monitor.charts.queryCount"),xData:T(A.data,"day"),yData:[{type:"line",data:T(A.data,"chat_record_count")}]}},{id:"tokensCharts",name:w("views.applicationOverview.monitor.charts.tokensTotal"),icon:"app-tokens",background:"#E5FBF8",color:"#00D6B9",sum:[de(T(A.data,"tokens_num")||0)],option:{title:w("views.applicationOverview.monitor.charts.tokensTotal"),xData:T(A.data,"day"),yData:[{type:"line",data:T(A.data,"tokens_num")}]}},{id:"starCharts",name:w("views.applicationOverview.monitor.charts.userSatisfaction"),icon:"app-user-stars",background:"#FEEDEC",color:"#F54A45",sum:[de(T(A.data,"star_num")||0),de(T(A.data,"trample_num")||0)],option:{title:w("views.applicationOverview.monitor.charts.userSatisfaction"),xData:T(A.data,"day"),yData:[{name:w("views.applicationOverview.monitor.charts.approval"),type:"line",data:T(A.data,"star_num")},{name:w("views.applicationOverview.monitor.charts.disapproval"),type:"line",data:T(A.data,"trample_num")}]}}]);return(K,V)=>{const E=l("appIcon"),y=l("el-avatar"),n=l("AppIcon"),c=l("el-card"),r=l("el-col"),$=l("el-row");return f(),N(ve,null,[e($,{gutter:16},{default:t(()=>[(f(!0),N(ve,null,De(z.value,(g,D)=>(f(),k(r,{xs:12,sm:12,md:12,lg:6,xl:6,key:D,class:"mb-16"},{default:t(()=>[e(c,{shadow:"never"},{default:t(()=>{var u,m,_,i;return[a("div",Sa,[e(y,{size:40,shape:"square",style:me({background:g.background})},{default:t(()=>[e(E,{iconName:g.icon,style:me({fontSize:"24px",color:g.color})},null,8,["iconName","style"])]),_:2},1032,["style"]),a("div",xa,[a("p",Ra,p(g.name),1),g.id!=="starCharts"?(f(),N("div",Ea,[a("h2",null,p(U(Ve)((u=g.sum)==null?void 0:u[0])),1),g.sum.length>1?(f(),N("span",Ba,"+"+p(U(Ve)((m=g.sum)==null?void 0:m[1])),1)):Z("",!0)])):(f(),N("div",Pa,[e(n,{iconName:"app-like-color"}),a("h2",Ua,p((_=g.sum)==null?void 0:_[0]),1),e(n,{class:"ml-12",iconName:"app-oppose-color"}),a("h2",La,p((i=g.sum)==null?void 0:i[1]),1)]))])])]}),_:2},1024)]),_:2},1024))),128))]),_:1}),e($,{gutter:16},{default:t(()=>[(f(!0),N(ve,null,De(z.value,(g,D)=>(f(),k(r,{xs:24,sm:24,md:24,lg:12,xl:12,key:D,class:"mb-16"},{default:t(()=>[e(c,{shadow:"never"},{default:t(()=>[a("div",Fa,[e(Va,{height:"316px",id:g.id,type:"line",option:g.option},null,8,["id","option"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})],64)}}}),Qa={class:"main-calc-height p-24"},Ta={class:"title-decoration-1 mb-16"},Ka={class:"title flex align-center"},Ya=["src"],Ma={class:"flex"},ja={class:"mt-4 mb-16 url-height flex align-center",style:{"margin-bottom":"37px"}},Na={class:"vertical-middle lighter break-all ellipsis-1"},Xa={class:"flex"},Ja={class:"mt-4 mb-16 url-height"},Ha={class:"flex align-center"},Ga={class:"flex"},qa={class:"vertical-middle lighter break-all ellipsis-1"},Wa={class:"title-decoration-1 mt-16 mb-16"},Za={class:"mb-16"},el=G({__name:"index",setup(F){const{user:A,application:z}=Re(),K=Ie(),{params:{id:V}}=K,E=window.location.origin+"/doc/chat/",y=window.location.origin+"/api/application/",n=h(),c=h(),r=h(),$=h(),g=h(),D=h(),u=h({}),m=h(null),_=h(!1),i=_e(()=>re(x.value)?"?"+re(x.value):""),O=_e(()=>z.location+u.value.access_token+i.value),R=[{value:7,label:w("views.applicationOverview.monitor.pastDayOptions.past7Days")},{value:30,label:w("views.applicationOverview.monitor.pastDayOptions.past30Days")},{value:90,label:w("views.applicationOverview.monitor.pastDayOptions.past90Days")},{value:183,label:w("views.applicationOverview.monitor.pastDayOptions.past183Days")},{value:"other",label:w("views.applicationOverview.monitor.pastDayOptions.other")}],B=h(7),Y=h(""),o=h({start_time:"",end_time:""}),s=h(!1),I=h([]),L=h(!1),x=h([]);function ee(d){window.open(d,"_blank")}function q(){var d,b;A.isEnterprise()?(d=c.value)==null||d.open(u.value,m.value):(b=n.value)==null||b.open(u.value,m.value)}function P(){r.value.open(m.value)}function S(d){d!=="other"&&(o.value.start_time=vt(d),o.value.end_time=mt,$e())}function Ae(d){o.value.start_time=d[0],o.value.end_time=d[1],$e()}function $e(){be.getStatistics(V,o.value,s).then(d=>{I.value=d.data})}function Se(){je(w("views.applicationOverview.appInfo.refreshToken.msgConfirm1"),w("views.applicationOverview.appInfo.refreshToken.msgConfirm2"),{confirmButtonText:w("common.confirm"),cancelButtonText:w("common.cancel")}).then(()=>{const d={access_token_reset:!0},b=w("views.applicationOverview.appInfo.refreshToken.refreshSuccess");he(d,b)}).catch(()=>{})}function ie(d){const b={is_active:d},Q=d?w("common.status.enableSuccess"):w("common.status.disableSuccess");he(b,Q)}function he(d,b){Ee.putAccessToken(V,d,_).then(Q=>{u.value=Q==null?void 0:Q.data,ge(b)})}function se(){$.value.open(u.value)}function we(){g.value.open()}function te(){var d;D.value.open((d=u.value)==null?void 0:d.access_token)}function ce(){z.asyncGetAccessToken(V,_).then(d=>{u.value=d==null?void 0:d.data})}function pe(){z.asyncGetApplicationDetail(V,_).then(d=>{var b,Q;m.value=d.data,(Q=(b=m.value.work_flow)==null?void 0:b.nodes)==null||Q.filter(J=>J.id==="base-node").map(J=>{x.value=J.properties.api_input_field_list?J.properties.api_input_field_list.map(X=>({name:X.variable,value:X.default_value})):J.properties.input_field_list?J.properties.input_field_list.filter(X=>X.assignment_method==="api_input").map(X=>({name:X.variable,value:X.default_value})):[]})})}function ae(){ce()}function le(){pe()}function re(d){const b=new URLSearchParams;return d.forEach(Q=>{b.append(encodeURIComponent(Q.name),encodeURIComponent(Q.value))}),b.toString()}return Ge(()=>{pe(),ce(),S(B.value)}),(d,b)=>{const Q=l("AppAvatar"),J=l("EditPen"),X=l("el-icon"),M=l("el-text"),ue=l("el-switch"),ye=l("AppIcon"),j=l("el-button"),v=l("el-tooltip"),oe=l("RefreshRight"),Be=l("el-col"),qe=l("el-row"),We=l("el-card"),Ze=l("el-option"),et=l("el-select"),tt=l("el-date-picker"),at=l("el-scrollbar"),lt=l("LayoutContainer"),Pe=Ne("loading");return f(),k(lt,{header:d.$t("views.applicationOverview.title")},{default:t(()=>[e(at,null,{default:t(()=>[a("div",Qa,[a("h4",Ta,p(d.$t("views.applicationOverview.appInfo.header")),1),Oe((f(),k(We,{shadow:"never",class:"overview-card"},{default:t(()=>{var H,Ue,Le,Fe;return[a("div",Ka,[a("div",{class:"edit-avatar mr-12",onMouseenter:b[0]||(b[0]=W=>L.value=!0),onMouseleave:b[1]||(b[1]=W=>L.value=!1)},[U(He)((H=m.value)==null?void 0:H.icon)?(f(),k(Q,{key:0,shape:"square",size:32,style:{background:"none"}},{default:t(()=>{var W;return[a("img",{src:(W=m.value)==null?void 0:W.icon,alt:""},null,8,Ya)]}),_:1})):(Ue=m.value)!=null&&Ue.name?(f(),k(Q,{key:1,name:(Le=m.value)==null?void 0:Le.name,pinyinColor:"",shape:"square",size:32},null,8,["name"])):Z("",!0),L.value?(f(),k(Q,{key:2,shape:"square",class:"edit-mask",size:32,onClick:P},{default:t(()=>[e(X,null,{default:t(()=>[e(J)]),_:1})]),_:1})):Z("",!0)],32),a("h4",null,p((Fe=m.value)==null?void 0:Fe.name),1)]),e(qe,{gutter:12},{default:t(()=>[e(Be,{span:12,class:"mt-16"},{default:t(()=>{var W,ze,Qe,Te;return[a("div",Ma,[e(M,{type:"info"},{default:t(()=>[C(p(d.$t("views.applicationOverview.appInfo.publicAccessLink")),1)]),_:1}),e(ue,{modelValue:u.value.is_active,"onUpdate:modelValue":b[2]||(b[2]=Ce=>u.value.is_active=Ce),class:"ml-8",size:"small","inline-prompt":"","active-text":d.$t("views.applicationOverview.appInfo.openText"),"inactive-text":d.$t("views.applicationOverview.appInfo.closeText"),onChange:b[3]||(b[3]=Ce=>ie(Ce))},null,8,["modelValue","active-text","inactive-text"])]),a("div",ja,[a("span",Na,p(O.value),1),e(v,{effect:"dark",content:d.$t("common.copy"),placement:"top"},{default:t(()=>[e(j,{type:"primary",text:"",onClick:b[4]||(b[4]=Ce=>U(fe)(O.value))},{default:t(()=>[e(ye,{iconName:"app-copy"})]),_:1})]),_:1},8,["content"]),e(v,{effect:"dark",content:d.$t("common.refresh"),placement:"top"},{default:t(()=>[e(j,{onClick:Se,type:"primary",text:"",style:{"margin-left":"1px"}},{default:t(()=>[e(X,null,{default:t(()=>[e(oe)]),_:1})]),_:1})]),_:1},8,["content"])]),a("div",null,[(W=u.value)!=null&&W.is_active?(f(),k(j,{key:0,disabled:!((ze=u.value)!=null&&ze.is_active),type:"primary",tag:"a",href:O.value,target:"_blank"},{default:t(()=>[C(p(d.$t("views.applicationOverview.appInfo.demo")),1)]),_:1},8,["disabled","href"])):(f(),k(j,{key:1,disabled:!((Qe=u.value)!=null&&Qe.is_active),type:"primary"},{default:t(()=>[C(p(d.$t("views.applicationOverview.appInfo.demo")),1)]),_:1},8,["disabled"])),e(j,{disabled:!((Te=u.value)!=null&&Te.is_active),onClick:te},{default:t(()=>[C(p(d.$t("views.applicationOverview.appInfo.embedInWebsite")),1)]),_:1},8,["disabled"]),e(j,{onClick:se},{default:t(()=>[C(p(d.$t("views.applicationOverview.appInfo.accessControl")),1)]),_:1}),e(j,{onClick:q},{default:t(()=>[C(p(d.$t("views.applicationOverview.appInfo.displaySetting")),1)]),_:1})])]}),_:1}),e(Be,{span:12,class:"mt-16"},{default:t(()=>[a("div",Xa,[e(M,{type:"info"},{default:t(()=>[C(p(d.$t("views.applicationOverview.appInfo.apiAccessCredentials")),1)]),_:1})]),a("div",Ja,[a("div",null,[e(M,null,{default:t(()=>[C("API "+p(d.$t("common.fileUpload.document"))+"：",1)]),_:1}),e(j,{type:"primary",link:"",onClick:b[5]||(b[5]=W=>ee(E)),class:"vertical-middle lighter break-all"},{default:t(()=>[C(p(E))]),_:1})]),a("div",Ha,[a("span",Ga,[e(M,{style:{width:"80px"}},{default:t(()=>b[9]||(b[9]=[C("Base URL：")])),_:1})]),a("span",qa,p(y+U(V)),1),e(v,{effect:"dark",content:d.$t("common.copy"),placement:"top"},{default:t(()=>[e(j,{type:"primary",text:"",onClick:b[6]||(b[6]=W=>U(fe)(y+U(V)))},{default:t(()=>[e(ye,{iconName:"app-copy"})]),_:1})]),_:1},8,["content"])])]),a("div",null,[e(j,{onClick:we},{default:t(()=>[C(p(d.$t("views.applicationOverview.appInfo.apiKey")),1)]),_:1})])]),_:1})]),_:1})]}),_:1})),[[Pe,_.value]]),a("h4",Wa,p(d.$t("views.applicationOverview.monitor.monitoringStatistics")),1),a("div",Za,[e(et,{modelValue:B.value,"onUpdate:modelValue":b[7]||(b[7]=H=>B.value=H),class:"mr-12",onChange:S,style:{width:"180px"}},{default:t(()=>[(f(),N(ve,null,De(R,H=>e(Ze,{key:H.value,label:H.label,value:H.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),B.value==="other"?(f(),k(tt,{key:0,modelValue:Y.value,"onUpdate:modelValue":b[8]||(b[8]=H=>Y.value=H),type:"daterange","start-placeholder":d.$t("views.applicationOverview.monitor.startDatePlaceholder"),"end-placeholder":d.$t("views.applicationOverview.monitor.endDatePlaceholder"),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:Ae},null,8,["modelValue","start-placeholder","end-placeholder"])):Z("",!0)]),Oe((f(),N("div",null,[e(za,{data:I.value},null,8,["data"])])),[[Pe,s.value]])])]),_:1}),e(xt,{ref_key:"EmbedDialogRef",ref:D,data:m.value,"api-input-params":re(x.value)},null,8,["data","api-input-params"]),e(Bt,{ref_key:"APIKeyDialogRef",ref:g},null,512),e(Lt,{ref_key:"LimitDialogRef",ref:$,onRefresh:ae},null,512),e(ft,{ref_key:"EditAvatarDialogRef",ref:r,onRefresh:le},null,512),U(A).isEnterprise()?(f(),k(Ia,{key:0,ref_key:"XPackDisplaySettingDialogRef",ref:c,onRefresh:ae},null,512)):(f(),k(zt,{key:1,ref_key:"DisplaySettingDialogRef",ref:n,onRefresh:ae},null,512))]),_:1},8,["header"])}}});const ll=_t(el,[["__scopeId","data-v-0672cb0d"]]);export{ll as default};
